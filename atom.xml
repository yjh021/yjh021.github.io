<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Blue Eagle&#39;s Blog</title>
  
  <subtitle>yjh021</subtitle>
  <link href="https://yjh021.github.io/atom.xml" rel="self"/>
  
  <link href="https://yjh021.github.io/"/>
  <updated>2026-01-31T07:48:56.699Z</updated>
  <id>https://yjh021.github.io/</id>
  
  <author>
    <name>Blue Eagle</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>华为认证基础</title>
    <link href="https://yjh021.github.io/2026/01/24/%E5%8D%8E%E4%B8%BA%E8%AE%A4%E8%AF%81%E5%9F%BA%E7%A1%80/"/>
    <id>https://yjh021.github.io/2026/01/24/%E5%8D%8E%E4%B8%BA%E8%AE%A4%E8%AF%81%E5%9F%BA%E7%A1%80/</id>
    <published>2026-01-24T03:20:28.000Z</published>
    <updated>2026-01-31T07:48:56.699Z</updated>
    
    <content type="html"><![CDATA[<h1>华为认证基础</h1><h2 id="华为vrp系统基础"><a href="#华为vrp系统基础" class="headerlink" title="华为vrp系统基础"></a>华为vrp系统基础</h2><h2 id="HDLC接口地址借用配置"><a href="#HDLC接口地址借用配置" class="headerlink" title="HDLC接口地址借用配置"></a>HDLC接口地址借用配置</h2><p class='item-img' data-src='/2026/01/24/%E5%8D%8E%E4%B8%BA%E8%AE%A4%E8%AF%81%E5%9F%BA%E7%A1%80/image-20260124150324038.png'><img src="/2026/01/24/%E5%8D%8E%E4%B8%BA%E8%AE%A4%E8%AF%81%E5%9F%BA%E7%A1%80/image-20260124150324038.png" alt="HDLC接口地址借用配置"></p><h3 id="R1-配置（带注释）"><a href="#R1-配置（带注释）" class="headerlink" title="R1-配置（带注释）"></a>R1 配置（带注释）</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">R1 配置（带注释）</span><br><span class="line"> </span><br><span class="line">  </span><br><span class="line">system-view               // 进入系统视图</span><br><span class="line">sysname R1                // 配置设备名称为R1</span><br><span class="line"></span><br><span class="line">interface LoopBack0       // 进入LoopBack0接口视图</span><br><span class="line">ip address 10.1.1.1 255.255.255.255  // 配置LoopBack接口IP地址</span><br><span class="line">quit                      // 退出当前接口视图</span><br><span class="line"></span><br><span class="line">interface Serial0/0/0     // 进入Serial0/0/0接口视图</span><br><span class="line">link-protocol hdlc        // 配置链路协议为HDLC</span><br><span class="line">ip address unnumbered interface LoopBack0  // 配置地址借用，通常借用Loopback地址</span><br><span class="line">quit                      // 退出当前接口视图</span><br><span class="line"></span><br><span class="line">ip route-static 10.1.1.0 255.255.255.0 Serial0/0/0  // 配置一条指向10.1.1.0网络的静态路由，下一跳为出接口</span><br><span class="line"></span><br><span class="line">quit                      // 退出系统视图</span><br><span class="line">save                      // 用户视图下保存配置</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="R2-配置（带注释）"><a href="#R2-配置（带注释）" class="headerlink" title="R2-配置（带注释）"></a>R2 配置（带注释）</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">R2 配置（带注释）</span><br><span class="line"> </span><br><span class="line">  </span><br><span class="line">system-view               // 进入系统视图</span><br><span class="line">sysname R2                // 配置设备名称为R2</span><br><span class="line"></span><br><span class="line">interface Serial0/0/0     // 进入Serial0/0/0接口视图</span><br><span class="line">link-protocol hdlc        // 配置链路协议为HDLC</span><br><span class="line">ip address 10.1.1.2 255.255.255.0  // 配置接口IP地址</span><br><span class="line">quit                      // 退出当前接口视图</span><br><span class="line"></span><br><span class="line">quit                      // 退出系统视图</span><br><span class="line">save                      // 用户视图下保存配置</span><br><span class="line"> </span><br></pre></td></tr></table></figure><h3 id="查看命令（带注释）"><a href="#查看命令（带注释）" class="headerlink" title="查看命令（带注释）"></a>查看命令（带注释）</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">查看命令（带注释）</span><br><span class="line"> </span><br><span class="line">  </span><br><span class="line">[R1]disp ip interface brief  // 显示设备接口IP简要信息</span><br><span class="line">// 输出示例：</span><br><span class="line">LoopBack0        10.1.1.1/32       up       up</span><br><span class="line">Serial0/0/0      10.1.1.1/32       up       up</span><br><span class="line"> </span><br></pre></td></tr></table></figure><h2 id="链路聚合"><a href="#链路聚合" class="headerlink" title="链路聚合"></a>链路聚合</h2><h3 id="链路聚合简介"><a href="#链路聚合简介" class="headerlink" title="链路聚合简介"></a><strong>链路聚合简介</strong></h3><p>以太网链路聚合Eth-Trunk简称链路聚合，它通过将多条以太网物理链路捆绑在一起成为一条逻辑链路，从而实现增加链路带宽的目的。</p><p>同时，这些捆绑在一起的链路通过相互间的动态备份，可以有效地提高链路的可靠性。</p><h3 id="链路聚合目的"><a href="#链路聚合目的" class="headerlink" title="链路聚合目的"></a>链路聚合目的</h3><p>随着网络规模不断扩大，用户对骨干链路的带宽和可靠性提出越来越高的要求。</p><p>在传统技术中，常用更换高速率的接口板或更换支持高速率接口板的设备的方式来增加带宽，但这种方案需要付出高额的费用，而且不够灵活。</p><p>采用链路聚合技术可以在不进行硬件升级的条件下，通过将多个物理接口捆绑为一个逻辑接口，达到增加链路带宽的目的。</p><p>在实现增大带宽目的的同时，链路聚合采用备份链路的机制，可以有效的提高设备之间链路的可靠性。</p><h3 id="链路聚合主要有以下三个优势"><a href="#链路聚合主要有以下三个优势" class="headerlink" title="链路聚合主要有以下三个优势"></a><strong>链路聚合主要有以下三个优势</strong></h3><ul><li><strong>增加带宽</strong></li></ul><p>链路聚合接口的最大带宽可以达到各成员接口带宽之和。</p><ul><li><strong>提高可靠性</strong></li></ul><p>当某条活动链路出现故障时，流量可以切换到其他可用的成员链路上，从而提高链路聚合接口的可靠性。</p><ul><li><strong>负载分担</strong></li></ul><p>在一个链路聚合组内，可以实现在各成员活动链路上的负载分担。</p><h3 id="以太网链路聚合（手工模式）"><a href="#以太网链路聚合（手工模式）" class="headerlink" title="以太网链路聚合（手工模式）"></a>以太网链路聚合（手工模式）</h3><p class='item-img' data-src='/2026/01/24/%E5%8D%8E%E4%B8%BA%E8%AE%A4%E8%AF%81%E5%9F%BA%E7%A1%80/image-20260124150324039.png'><img src="/2026/01/24/%E5%8D%8E%E4%B8%BA%E8%AE%A4%E8%AF%81%E5%9F%BA%E7%A1%80/image-20260124150324039.png" alt="以太网链路聚合（手工模式）"></p><h3 id="三层链路聚合配置"><a href="#三层链路聚合配置" class="headerlink" title="三层链路聚合配置"></a>三层链路聚合配置</h3><p class='item-img' data-src='/2026/01/24/%E5%8D%8E%E4%B8%BA%E8%AE%A4%E8%AF%81%E5%9F%BA%E7%A1%80/image-20260128162017342.png'><img src="/2026/01/24/%E5%8D%8E%E4%B8%BA%E8%AE%A4%E8%AF%81%E5%9F%BA%E7%A1%80/image-20260128162017342.png" alt="三层链路聚合配置"></p><h3 id="以太网链路聚合（静态LACP模式）"><a href="#以太网链路聚合（静态LACP模式）" class="headerlink" title="以太网链路聚合（静态LACP模式）"></a>以太网链路聚合（静态LACP模式）</h3><p class='item-img' data-src='/2026/01/24/%E5%8D%8E%E4%B8%BA%E8%AE%A4%E8%AF%81%E5%9F%BA%E7%A1%80/image-20260128163831355.png'><img src="/2026/01/24/%E5%8D%8E%E4%B8%BA%E8%AE%A4%E8%AF%81%E5%9F%BA%E7%A1%80/image-20260128163831355.png" alt="以太网链路聚合（静态LACP模式）"></p><h2 id="vlan配置"><a href="#vlan配置" class="headerlink" title="vlan配置"></a>vlan配置</h2><h3 id="Mac表老化时间"><a href="#Mac表老化时间" class="headerlink" title="Mac表老化时间"></a>Mac表老化时间</h3><p><strong>MAC地址表项的老化时间</strong>默认是<strong>5分钟</strong>（300秒），可以通过命令<code>mac-address aging-time</code>进行修改。老化时间的取值范围是0到1000000秒，其中0表示动态MAC地址表项不老化。如果在设定的老化时间内没有更新，MAC地址表项将被删除。</p><h3 id="vlan配置命令"><a href="#vlan配置命令" class="headerlink" title="vlan配置命令"></a>vlan配置命令</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">// 创建vlan</span><br><span class="line">[Huawei]vlan &lt;vlan-id&gt;</span><br><span class="line"></span><br><span class="line">// 批量创建vlan</span><br><span class="line">[Huawei]vlan batch &lt;vlan-id1 [to vlan-id2]&gt;</span><br><span class="line">// 或</span><br><span class="line">[Huawei]vlan batch &lt;vlan-id1 [vlan-id2 to vlan-id3]&gt;</span><br><span class="line"></span><br><span class="line">// Access 接入端口</span><br><span class="line">[Huawei-GigabitEthernet0/0/1]port link-type access</span><br><span class="line">// 指定端口vlan-id</span><br><span class="line">[Huawei-GigabitEthernet0/0/1]port default vlan 10</span><br><span class="line"></span><br><span class="line">// trunk 端口配置</span><br><span class="line">[Huawei-GigabitEthernet0/0/2]port link-type trunk</span><br><span class="line">// 指定端口vlan-id</span><br><span class="line">[Huawei-GigabitEthernet0/0/2]port trunk allow-pass vlan &#123;&#123;vlan-id1 [to vlan-id2]&#125; | all &#125;</span><br><span class="line"></span><br><span class="line">// 配置trunk接口缺省vlan（可选）</span><br><span class="line">[Huawei-GigabitEthernet0/0/2]port trunk pvid vlan &lt;vlan-id&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="vlan端口类型"><a href="#vlan端口类型" class="headerlink" title="vlan端口类型"></a>vlan端口类型</h3><blockquote><ul><li>access ：接入端口</li><li>dot1q-tunnel ：隧道端口</li><li>hybrid ：混合端口</li><li>trunk ：干道端口</li></ul></blockquote><h3 id="二层交换机划分vlan练习-access"><a href="#二层交换机划分vlan练习-access" class="headerlink" title="二层交换机划分vlan练习-access"></a>二层交换机划分vlan练习-access</h3><p class='item-img' data-src='/2026/01/24/%E5%8D%8E%E4%B8%BA%E8%AE%A4%E8%AF%81%E5%9F%BA%E7%A1%80/image-20260126113332031.png'><img src="/2026/01/24/%E5%8D%8E%E4%B8%BA%E8%AE%A4%E8%AF%81%E5%9F%BA%E7%A1%80/image-20260126113332031.png" alt="vlan基础配置-access"></p><h3 id="vlan基础配置二层交换机-trunk"><a href="#vlan基础配置二层交换机-trunk" class="headerlink" title="vlan基础配置二层交换机-trunk"></a>vlan基础配置二层交换机-trunk</h3><p class='item-img' data-src='/2026/01/24/%E5%8D%8E%E4%B8%BA%E8%AE%A4%E8%AF%81%E5%9F%BA%E7%A1%80/image-20260126143451447.png'><img src="/2026/01/24/%E5%8D%8E%E4%B8%BA%E8%AE%A4%E8%AF%81%E5%9F%BA%E7%A1%80/image-20260126143451447.png" alt="vlan基础配置二层交换机-trunk"></p><h3 id="vlan的混合端口配置"><a href="#vlan的混合端口配置" class="headerlink" title="vlan的混合端口配置"></a>vlan的混合端口配置</h3><p class='item-img' data-src='/2026/01/24/%E5%8D%8E%E4%B8%BA%E8%AE%A4%E8%AF%81%E5%9F%BA%E7%A1%80/image-20260126155950195.png'><img src="/2026/01/24/%E5%8D%8E%E4%B8%BA%E8%AE%A4%E8%AF%81%E5%9F%BA%E7%A1%80/image-20260126155950195.png" alt="vlan的混合端口配置"></p><h3 id="配置基于MAC地址划分VLAN"><a href="#配置基于MAC地址划分VLAN" class="headerlink" title="配置基于MAC地址划分VLAN"></a>配置基于MAC地址划分VLAN</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">// 配置SW1</span><br><span class="line">// 创建VLAN</span><br><span class="line"></span><br><span class="line">&lt;HUAWEI&gt; system-view</span><br><span class="line">[HUAWEI] sysname SW1</span><br><span class="line">[SW1] vlan batch 10</span><br><span class="line"></span><br><span class="line">// 配置接口加入VLAN。GE0/0/3、GE0/0/4的配置与GE0/0/2类似，不再赘述。</span><br><span class="line">[SW1] interface gigabitethernet 0/0/1</span><br><span class="line">[SW1-GigabitEthernet0/0/1] port link-type hybrid</span><br><span class="line">[SW1-GigabitEthernet0/0/1] port hybrid pvid vlan 10</span><br><span class="line">[SW1-GigabitEthernet0/0/1] port hybrid untagged vlan 10</span><br><span class="line">[SW1-GigabitEthernet0/0/1] quit</span><br><span class="line">[SW1] interface gigabitethernet 0/0/2</span><br><span class="line">[SW1-GigabitEthernet0/0/2] port link-type hybrid</span><br><span class="line">[SW1-GigabitEthernet0/0/2] port hybrid pvid vlan 10</span><br><span class="line">[SW1-GigabitEthernet0/0/2] port hybrid untagged vlan 10</span><br><span class="line">[SW1-GigabitEthernet0/0/2] quit</span><br><span class="line"></span><br><span class="line">// PC的MAC地址与VLAN10关联</span><br><span class="line">[SW1] vlan 10</span><br><span class="line">[SW1-vlan10] mac-vlan mac-address 2222-2222-2222</span><br><span class="line">[SW1-vlan10] mac-vlan mac-address 3333-3333-3333</span><br><span class="line">[SW1-vlan10] mac-vlan mac-address 4444-4444-4444</span><br><span class="line">[SW1-vlan10] quit</span><br><span class="line"></span><br><span class="line">// 使能接口的基于MAC地址划分VLAN功能，GE0/0/2、GE0/0/3的配置与GE0/0/1类似，不再赘述。</span><br><span class="line">[SW1] interface gigabitethernet 0/0/1</span><br><span class="line">[SW1-GigabitEthernet0/0/1] mac-vlan enable</span><br><span class="line">[SW1-GigabitEthernet0/0/1] quit</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="hybrid接口的基础配置"><a href="#hybrid接口的基础配置" class="headerlink" title="hybrid接口的基础配置"></a>hybrid接口的基础配置</h3><p class='item-img' data-src='/2026/01/24/%E5%8D%8E%E4%B8%BA%E8%AE%A4%E8%AF%81%E5%9F%BA%E7%A1%80/image-20260127111249666.png'><img src="/2026/01/24/%E5%8D%8E%E4%B8%BA%E8%AE%A4%E8%AF%81%E5%9F%BA%E7%A1%80/image-20260127111249666.png" alt="hybrid接口的基础配置"></p><h3 id="VLAN基本特性实验"><a href="#VLAN基本特性实验" class="headerlink" title="VLAN基本特性实验"></a>VLAN基本特性实验</h3><p class='item-img' data-src='/2026/01/24/%E5%8D%8E%E4%B8%BA%E8%AE%A4%E8%AF%81%E5%9F%BA%E7%A1%80/image-20260127144422193.png'><img src="/2026/01/24/%E5%8D%8E%E4%B8%BA%E8%AE%A4%E8%AF%81%E5%9F%BA%E7%A1%80/image-20260127144422193.png" alt="VLAN基本特性实验1"></p><p class='item-img' data-src='/2026/01/24/%E5%8D%8E%E4%B8%BA%E8%AE%A4%E8%AF%81%E5%9F%BA%E7%A1%80/image-20260127144500533.png'><img src="/2026/01/24/%E5%8D%8E%E4%B8%BA%E8%AE%A4%E8%AF%81%E5%9F%BA%E7%A1%80/image-20260127144500533.png" alt="VLAN基本特性实验2"></p><h3 id="VLAN间通信–路由器上每个vlan一个物理连接-不常用"><a href="#VLAN间通信–路由器上每个vlan一个物理连接-不常用" class="headerlink" title="VLAN间通信–路由器上每个vlan一个物理连接-不常用"></a>VLAN间通信–路由器上每个vlan一个物理连接(不常用)</h3><p class='item-img' data-src='/2026/01/24/%E5%8D%8E%E4%B8%BA%E8%AE%A4%E8%AF%81%E5%9F%BA%E7%A1%80/image-20260127155252070.png'><img src="/2026/01/24/%E5%8D%8E%E4%B8%BA%E8%AE%A4%E8%AF%81%E5%9F%BA%E7%A1%80/image-20260127155252070.png" alt="VLAN间通信--路由器上每个vlan一个物理连接"></p><h3 id="VLAN间通信–单臂路由"><a href="#VLAN间通信–单臂路由" class="headerlink" title="VLAN间通信–单臂路由"></a>VLAN间通信–单臂路由</h3><p class='item-img' data-src='/2026/01/24/%E5%8D%8E%E4%B8%BA%E8%AE%A4%E8%AF%81%E5%9F%BA%E7%A1%80/image-20260128104912464.png'><img src="/2026/01/24/%E5%8D%8E%E4%B8%BA%E8%AE%A4%E8%AF%81%E5%9F%BA%E7%A1%80/image-20260128104912464.png" alt="VLAN间通信--单臂路由"></p><h3 id="三层交换机–VLANif配置案例"><a href="#三层交换机–VLANif配置案例" class="headerlink" title="三层交换机–VLANif配置案例"></a>三层交换机–VLANif配置案例</h3><p class='item-img' data-src='/2026/01/24/%E5%8D%8E%E4%B8%BA%E8%AE%A4%E8%AF%81%E5%9F%BA%E7%A1%80/image-20260128114841388.png'><img src="/2026/01/24/%E5%8D%8E%E4%B8%BA%E8%AE%A4%E8%AF%81%E5%9F%BA%E7%A1%80/image-20260128114841388.png" alt="三层交换机--VLANif配置案例"></p><h3 id="VLAN间路由综合实验"><a href="#VLAN间路由综合实验" class="headerlink" title="VLAN间路由综合实验"></a>VLAN间路由综合实验</h3><p class='item-img' data-src='/2026/01/24/%E5%8D%8E%E4%B8%BA%E8%AE%A4%E8%AF%81%E5%9F%BA%E7%A1%80/image-20260128145147526.png'><img src="/2026/01/24/%E5%8D%8E%E4%B8%BA%E8%AE%A4%E8%AF%81%E5%9F%BA%E7%A1%80/image-20260128145147526.png" alt="VLAN间路由综合实验1"></p><p class='item-img' data-src='/2026/01/24/%E5%8D%8E%E4%B8%BA%E8%AE%A4%E8%AF%81%E5%9F%BA%E7%A1%80/image-20260128145229625.png'><img src="/2026/01/24/%E5%8D%8E%E4%B8%BA%E8%AE%A4%E8%AF%81%E5%9F%BA%E7%A1%80/image-20260128145229625.png" alt="VLAN间路由综合实验2"></p><h3 id="VLAN聚合配置案例"><a href="#VLAN聚合配置案例" class="headerlink" title="VLAN聚合配置案例"></a>VLAN聚合配置案例</h3><p class='item-img' data-src='/2026/01/24/%E5%8D%8E%E4%B8%BA%E8%AE%A4%E8%AF%81%E5%9F%BA%E7%A1%80/image-20260128160757986.png'><img src="/2026/01/24/%E5%8D%8E%E4%B8%BA%E8%AE%A4%E8%AF%81%E5%9F%BA%E7%A1%80/image-20260128160757986.png" alt="VLAN聚合配置案例1"></p><p class='item-img' data-src='/2026/01/24/%E5%8D%8E%E4%B8%BA%E8%AE%A4%E8%AF%81%E5%9F%BA%E7%A1%80/image-20260128160946086.png'><img src="/2026/01/24/%E5%8D%8E%E4%B8%BA%E8%AE%A4%E8%AF%81%E5%9F%BA%E7%A1%80/image-20260128160946086.png" alt="VLAN聚合配置案例2"></p><h3 id="VLAN高级技术-VLAN聚合综合配置"><a href="#VLAN高级技术-VLAN聚合综合配置" class="headerlink" title="VLAN高级技术-VLAN聚合综合配置"></a>VLAN高级技术-VLAN聚合综合配置</h3><p class='item-img' data-src='/2026/01/24/%E5%8D%8E%E4%B8%BA%E8%AE%A4%E8%AF%81%E5%9F%BA%E7%A1%80/image-20260129111738863.png'><img src="/2026/01/24/%E5%8D%8E%E4%B8%BA%E8%AE%A4%E8%AF%81%E5%9F%BA%E7%A1%80/image-20260129111738863.png" alt="VLAN高级技术-VLAN聚合综合配置1"></p><p class='item-img' data-src='/2026/01/24/%E5%8D%8E%E4%B8%BA%E8%AE%A4%E8%AF%81%E5%9F%BA%E7%A1%80/image-20260129111824659.png'><img src="/2026/01/24/%E5%8D%8E%E4%B8%BA%E8%AE%A4%E8%AF%81%E5%9F%BA%E7%A1%80/image-20260129111824659.png" alt="VLAN高级技术-VLAN聚合综合配置2"></p><h3 id="VLAN高级技术-MUX-VLAN配置案例"><a href="#VLAN高级技术-MUX-VLAN配置案例" class="headerlink" title="VLAN高级技术-MUX-VLAN配置案例"></a>VLAN高级技术-MUX-VLAN配置案例</h3><p class='item-img' data-src='/2026/01/24/%E5%8D%8E%E4%B8%BA%E8%AE%A4%E8%AF%81%E5%9F%BA%E7%A1%80/image-20260129120339260.png'><img src="/2026/01/24/%E5%8D%8E%E4%B8%BA%E8%AE%A4%E8%AF%81%E5%9F%BA%E7%A1%80/image-20260129120339260.png" alt="VLAN高级技术-MUX-VLAN配置案例"></p><h3 id="VLAN高级技术-基本QinQ"><a href="#VLAN高级技术-基本QinQ" class="headerlink" title="VLAN高级技术-基本QinQ"></a>VLAN高级技术-基本QinQ</h3><p class='item-img' data-src='/2026/01/24/%E5%8D%8E%E4%B8%BA%E8%AE%A4%E8%AF%81%E5%9F%BA%E7%A1%80/image-20260129160152061.png'><img src="/2026/01/24/%E5%8D%8E%E4%B8%BA%E8%AE%A4%E8%AF%81%E5%9F%BA%E7%A1%80/image-20260129160152061.png" alt="VLAN高级技术-基本QinQ1"></p><p class='item-img' data-src='/2026/01/24/%E5%8D%8E%E4%B8%BA%E8%AE%A4%E8%AF%81%E5%9F%BA%E7%A1%80/image-20260129160513477.png'><img src="/2026/01/24/%E5%8D%8E%E4%B8%BA%E8%AE%A4%E8%AF%81%E5%9F%BA%E7%A1%80/image-20260129160513477.png" alt="VLAN高级技术-基本QinQ2"></p><h3 id="VLAN高级技术-灵活QinQ"><a href="#VLAN高级技术-灵活QinQ" class="headerlink" title="VLAN高级技术-灵活QinQ"></a>VLAN高级技术-灵活QinQ</h3><p class='item-img' data-src='/2026/01/24/%E5%8D%8E%E4%B8%BA%E8%AE%A4%E8%AF%81%E5%9F%BA%E7%A1%80/image-20260129164939324.png'><img src="/2026/01/24/%E5%8D%8E%E4%B8%BA%E8%AE%A4%E8%AF%81%E5%9F%BA%E7%A1%80/image-20260129164939324.png" alt="VLAN高级技术-灵活QinQ1"></p><p class='item-img' data-src='/2026/01/24/%E5%8D%8E%E4%B8%BA%E8%AE%A4%E8%AF%81%E5%9F%BA%E7%A1%80/image-20260129165032882.png'><img src="/2026/01/24/%E5%8D%8E%E4%B8%BA%E8%AE%A4%E8%AF%81%E5%9F%BA%E7%A1%80/image-20260129165032882.png" alt="VLAN高级技术-灵活QinQ2"></p><h2 id="以太网交换安全"><a href="#以太网交换安全" class="headerlink" title="以太网交换安全"></a>以太网交换安全</h2><h3 id="以太网交换安全-端口隔离"><a href="#以太网交换安全-端口隔离" class="headerlink" title="以太网交换安全-端口隔离"></a>以太网交换安全-端口隔离</h3><p class='item-img' data-src='/2026/01/24/%E5%8D%8E%E4%B8%BA%E8%AE%A4%E8%AF%81%E5%9F%BA%E7%A1%80/image-20260130111118091.png'><img src="/2026/01/24/%E5%8D%8E%E4%B8%BA%E8%AE%A4%E8%AF%81%E5%9F%BA%E7%A1%80/image-20260130111118091.png" alt="以太网交换安全-端口隔离"></p><h3 id="以太网交换安全-MAC地址表安全-静态和黑洞MAC"><a href="#以太网交换安全-MAC地址表安全-静态和黑洞MAC" class="headerlink" title="以太网交换安全-MAC地址表安全-静态和黑洞MAC"></a>以太网交换安全-MAC地址表安全-静态和黑洞MAC</h3><p class='item-img' data-src='/2026/01/24/%E5%8D%8E%E4%B8%BA%E8%AE%A4%E8%AF%81%E5%9F%BA%E7%A1%80/image-20260130142842240.png'><img src="/2026/01/24/%E5%8D%8E%E4%B8%BA%E8%AE%A4%E8%AF%81%E5%9F%BA%E7%A1%80/image-20260130142842240.png" alt="以太网交换安全-MAC地址表安全-静态和黑洞MAC"></p><h3 id="以太网交换机安全-MAC地址表安全配置"><a href="#以太网交换机安全-MAC地址表安全配置" class="headerlink" title="以太网交换机安全-MAC地址表安全配置"></a>以太网交换机安全-MAC地址表安全配置</h3><p class='item-img' data-src='/2026/01/24/%E5%8D%8E%E4%B8%BA%E8%AE%A4%E8%AF%81%E5%9F%BA%E7%A1%80/image-20260130165857482.png'><img src="/2026/01/24/%E5%8D%8E%E4%B8%BA%E8%AE%A4%E8%AF%81%E5%9F%BA%E7%A1%80/image-20260130165857482.png" alt="以太网交换机安全-MAC地址表安全配置1"></p><p class='item-img' data-src='/2026/01/24/%E5%8D%8E%E4%B8%BA%E8%AE%A4%E8%AF%81%E5%9F%BA%E7%A1%80/image-20260130165912361.png'><img src="/2026/01/24/%E5%8D%8E%E4%B8%BA%E8%AE%A4%E8%AF%81%E5%9F%BA%E7%A1%80/image-20260130165912361.png" alt="以太网交换机安全-MAC地址表安全配置2"></p><h3 id="以太网交换安全-端口安全-安全动态MAC"><a href="#以太网交换安全-端口安全-安全动态MAC" class="headerlink" title="以太网交换安全-端口安全-安全动态MAC"></a>以太网交换安全-端口安全-安全动态MAC</h3><p class='item-img' data-src='/2026/01/24/%E5%8D%8E%E4%B8%BA%E8%AE%A4%E8%AF%81%E5%9F%BA%E7%A1%80/image-20260131111559661.png'><img src="/2026/01/24/%E5%8D%8E%E4%B8%BA%E8%AE%A4%E8%AF%81%E5%9F%BA%E7%A1%80/image-20260131111559661.png" alt="以太网交换安全-端口安全-安全动态MAC"></p><h3 id="以太网交换安全-MAC地址漂移配置"><a href="#以太网交换安全-MAC地址漂移配置" class="headerlink" title="以太网交换安全-MAC地址漂移配置"></a>以太网交换安全-MAC地址漂移配置</h3><p class='item-img' data-src='/2026/01/24/%E5%8D%8E%E4%B8%BA%E8%AE%A4%E8%AF%81%E5%9F%BA%E7%A1%80/image-20260131154656461.png'><img src="/2026/01/24/%E5%8D%8E%E4%B8%BA%E8%AE%A4%E8%AF%81%E5%9F%BA%E7%A1%80/image-20260131154656461.png" alt="以太网交换安全-MAC地址漂移配置1"></p><p class='item-img' data-src='/2026/01/24/%E5%8D%8E%E4%B8%BA%E8%AE%A4%E8%AF%81%E5%9F%BA%E7%A1%80/image-20260131154758199.png'><img src="/2026/01/24/%E5%8D%8E%E4%B8%BA%E8%AE%A4%E8%AF%81%E5%9F%BA%E7%A1%80/image-20260131154758199.png" alt="以太网交换安全-MAC地址漂移配置2"></p><hr><p><strong>文章作者:</strong> [<a href="https://yjh021.github.io/">Blue Eagle</a>]</p><p><strong>文章链接:</strong> [<a href="https://yjh021.github.io/2026/01/24/%E5%8D%8E%E4%B8%BA%E8%AE%A4%E8%AF%81%E5%9F%BA%E7%A1%80/">https://yjh021.github.io/2026/01/24/华为认证基础/</a>]</p><p><strong>版权声明:</strong> 本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 [<a href="https://yjh021.github.io/">Blue Eagle</a>]</p><hr>]]></content>
    
    
    <summary type="html">本文记录了华为认证学习过程中的笔记，包括网络基础、数通技术、路由协议、交换技术等内容。</summary>
    
    
    
    <category term="华为认证" scheme="https://yjh021.github.io/categories/%E5%8D%8E%E4%B8%BA%E8%AE%A4%E8%AF%81/"/>
    
    <category term="实验" scheme="https://yjh021.github.io/categories/%E5%8D%8E%E4%B8%BA%E8%AE%A4%E8%AF%81/%E5%AE%9E%E9%AA%8C/"/>
    
    
    <category term="学习笔记" scheme="https://yjh021.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    <category term="网络" scheme="https://yjh021.github.io/tags/%E7%BD%91%E7%BB%9C/"/>
    
    <category term="数通" scheme="https://yjh021.github.io/tags/%E6%95%B0%E9%80%9A/"/>
    
  </entry>
  
  <entry>
    <title>GitHub使用教程</title>
    <link href="https://yjh021.github.io/2025/12/16/GitHub%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/"/>
    <id>https://yjh021.github.io/2025/12/16/GitHub%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/</id>
    <published>2025-12-16T14:35:12.000Z</published>
    <updated>2026-01-24T06:34:07.073Z</updated>
    
    <content type="html"><![CDATA[<h1>GitHub 简介与完整使用指南</h1><h2 id="什么是-GitHub？"><a href="#什么是-GitHub？" class="headerlink" title="什么是-GitHub？"></a>什么是 GitHub？</h2><p>GitHub 是一个基于云的软件源代码托管服务平台，主要用于版本控制和协作开发。它允许开发者在任何地方协同工作，构建比单独工作更强大的软件。</p><p><strong>核心特性</strong>：</p><ul><li><strong>版本控制</strong>：使用 Git 系统跟踪代码更改历史</li><li><strong>协作功能</strong>：支持多人协同开发，包括分支、合并请求等功能</li><li><strong>代码托管</strong>：提供安全的云端代码存储服务</li><li><strong>项目管理</strong>：提供问题跟踪、Wiki 文档和项目管理工具</li></ul><p>GitHub 目前汇集了超过 <strong>5 千万开发者</strong>，是全球最大的开源社区和代码托管平台。</p><h2 id="GitHub-核心功能详解"><a href="#GitHub-核心功能详解" class="headerlink" title="GitHub-核心功能详解"></a>GitHub 核心功能详解</h2><h3 id="仓库（Repository）"><a href="#仓库（Repository）" class="headerlink" title="仓库（Repository）"></a>仓库（Repository）</h3><p>仓库是 GitHub 的核心概念，用于存储项目的所有文件、文档和修订历史。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 创建新仓库的典型结构</span><br><span class="line">项目名称/</span><br><span class="line">├── README.md          # 项目说明文档</span><br><span class="line">├── .gitignore         # 指定Git忽略的文件</span><br><span class="line">├── src/               # 源代码目录</span><br><span class="line">├── docs/              # 项目文档</span><br><span class="line">└── LICENSE            # 开源许可证</span><br></pre></td></tr></table></figure><h3 id="分支（Branching）与合并（Merging）"><a href="#分支（Branching）与合并（Merging）" class="headerlink" title="分支（Branching）与合并（Merging）"></a>分支（Branching）与合并（Merging）</h3><p>GitHub 使用分支系统让开发者在不影响主代码的情况下进行修改。</p><p><strong>工作流程</strong>：</p><ol><li>从主分支（main/master）创建新分支</li><li>在新分支上进行功能开发或错误修复</li><li>提交更改并推送到远程仓库</li><li>创建拉取请求（Pull Request）申请合并到主分支</li></ol><h3 id="协作功能"><a href="#协作功能" class="headerlink" title="协作功能"></a>协作功能</h3><ul><li><strong>拉取请求</strong>：代码审查和讨论的机制</li><li><strong>问题跟踪</strong>：Bug报告和功能请求管理系统</li><li><strong>代码审查</strong>：团队成员对代码更改进行评论和建议</li></ul><h2 id="Markdown-在-GitHub-中的应用"><a href="#Markdown-在-GitHub-中的应用" class="headerlink" title="Markdown-在-GitHub-中的应用"></a>Markdown 在 GitHub 中的应用</h2><p>Markdown 是一种轻量级标记语言，在 GitHub 中广泛用于文档编写。</p><h3 id="基础格式化语法"><a href="#基础格式化语法" class="headerlink" title="基础格式化语法"></a>基础格式化语法</h3><h4 id="文本样式"><a href="#文本样式" class="headerlink" title="文本样式"></a>文本样式</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">**粗体文本** 或 __粗体文本__</span><br><span class="line">*斜体文本* 或 _斜体文本_</span><br><span class="line">~~删除线文本~~</span><br><span class="line">`内联代码`</span><br></pre></td></tr></table></figure><h4 id="标题层级"><a href="#标题层级" class="headerlink" title="标题层级"></a>标题层级</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 一级标题</span><br><span class="line">## 二级标题</span><br><span class="line">### 三级标题</span><br><span class="line">#### 四级标题</span><br><span class="line">##### 五级标题</span><br><span class="line">###### 六级标题</span><br></pre></td></tr></table></figure><h4 id="列表格式"><a href="#列表格式" class="headerlink" title="列表格式"></a>列表格式</h4><ul><li><strong>无序列表</strong>：使用 <code>-</code>、<code>*</code>或 <code>+</code></li><li><strong>有序列表</strong>：使用数字加句点</li><li><strong>任务列表</strong>：使用 <code>- [ ]</code>和 <code>- [x]</code></li></ul><blockquote><p>[!NOTE]</p><p>在 GitHub 上写作时，你可以使用 Markdown 语法和 HTML 元素来扩展 Markdown 的功能。</p></blockquote><h3 id="高级功能示例"><a href="#高级功能示例" class="headerlink" title="高级功能示例"></a>高级功能示例</h3><h4 id="表格创建"><a href="#表格创建" class="headerlink" title="表格创建"></a>表格创建</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">| 命令 | 描述 |</span><br><span class="line">|------|------|</span><br><span class="line">| `git status` | 列出所有*新文件或已修改*文件 |</span><br><span class="line">| `git diff` | 显示尚未暂存的文件差异 |</span><br></pre></td></tr></table></figure><h4 id="代码高亮"><a href="#代码高亮" class="headerlink" title="代码高亮"></a>代码高亮</h4><details><summary>点击查看代码高亮示例</summary><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 带有语法高亮的JavaScript代码</span><br><span class="line">function greet() &#123;</span><br><span class="line">  console.log(&quot;Hello, World!&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><h4 id="图表和图形"><a href="#图表和图形" class="headerlink" title="图表和图形"></a>图表和图形</h4><p>GitHub 支持 Mermaid 语法创建流程图、序列图等。</p><h2 id="中国大陆地区-GitHub-访问解决方案"><a href="#中国大陆地区-GitHub-访问解决方案" class="headerlink" title="中国大陆地区-GitHub-访问解决方案"></a>中国大陆地区 GitHub 访问解决方案</h2><p>由于网络限制，国内用户访问 GitHub 可能遇到困难。以下是几种有效的解决方案。</p><h3 id="修改-Hosts-文件（直接有效）"><a href="#修改-Hosts-文件（直接有效）" class="headerlink" title="修改-Hosts-文件（直接有效）"></a>修改 Hosts 文件（直接有效）</h3><p><strong>操作步骤</strong>：</p><ol><li>获取最新的 GitHub 相关域名对应的 IP 地址</li><li>以管理员权限编辑系统 hosts 文件 Windows 路径：<code>C:\Windows\System32\drivers\etc\hosts</code> Mac/Linux 路径：<code>/etc/hosts</code></li><li>添加 IP 与域名的映射关系</li><li>刷新 DNS 缓存使修改生效</li></ol><p><strong>示例 hosts 内容</strong>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># GitHub 域名映射</span><br><span class="line">140.82.113.4 github.com</span><br><span class="line">185.199.108.153 assets-cdn.github.com</span><br><span class="line">199.232.96.133 raw.githubusercontent.com</span><br></pre></td></tr></table></figure><blockquote><p>[!CAUTION]</p><p>GitHub 的 IP 地址可能随时变化，需要定期更新 hosts 文件。</p></blockquote><h3 id="使用镜像站点访问"><a href="#使用镜像站点访问" class="headerlink" title="使用镜像站点访问"></a>使用镜像站点访问</h3><p>以下是一些稳定的 GitHub 镜像站点：</p><ul><li><a href="https://hub.fastgit.org/">https://hub.fastgit.org/</a></li><li><a href="https://gitclone.com/">https://gitclone.com/</a></li><li><a href="https://github.wuyanzheshui.workers.dev/">https://github.wuyanzheshui.workers.dev/</a></li></ul><p><strong>镜像站使用示例</strong>：</p><p>将原始 GitHub URL：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/username/repository</span><br></pre></td></tr></table></figure><p>替换为：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://hub.fastgit.org/username/repository</span><br></pre></td></tr></table></figure><h3 id="使用开发者工具和代理"><a href="#使用开发者工具和代理" class="headerlink" title="使用开发者工具和代理"></a>使用开发者工具和代理</h3><ul><li><p><strong>GitHub 加速器</strong>：专门的加速工具</p></li><li><p><strong>gh-proxy 中转服务</strong>：通过代理访问</p></li><li><p><strong>云开发环境</strong>：直接使用在线的开发环境</p><h4 id="steamcommunity-302"><a href="#steamcommunity-302" class="headerlink" title="steamcommunity-302"></a>steamcommunity 302</h4><p>如果使用GitHub加速器可以选择steamcommunity 302，链接地址：<a href="https://www.dogfight360.com/blog/18682/">Steamcommunity 302 Ver.13.0.07_fix – Dogfight360</a> ，下载后打开点击设置，设置代理功能，保存后启动服务。</p><p class='item-img' data-src='/2025/12/16/GitHub%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/image-20251216232717185.png'><img src="/2025/12/16/GitHub%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/image-20251216232717185.png" alt="steamcommunity 302"></p></li></ul><h2 id="实用教程：创建你的第一个-GitHub-项目"><a href="#实用教程：创建你的第一个-GitHub-项目" class="headerlink" title="实用教程：创建你的第一个-GitHub-项目"></a>实用教程：创建你的第一个 GitHub 项目</h2><h3 id="注册-GitHub-账户"><a href="#注册-GitHub-账户" class="headerlink" title="注册-GitHub-账户"></a>注册 GitHub 账户</h3><ol><li><p>访问 <a href="https://github.com/">GitHub 官网</a></p></li><li><p>点击 “Sign up” 按钮</p><p class='item-img' data-src='/2025/12/16/GitHub%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/image-20251216225627877.png'><img src="/2025/12/16/GitHub%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/image-20251216225627877.png" alt="首页"></p></li><li><p>填写用户名、邮箱和密码</p><p class='item-img' data-src='/2025/12/16/GitHub%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/image-20251216225026819.png'><img src="/2025/12/16/GitHub%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/image-20251216225026819.png" alt="注册页面"></p></li><li><p>完成邮箱验证</p></li></ol><h3 id="创建并配置第一个仓库"><a href="#创建并配置第一个仓库" class="headerlink" title="创建并配置第一个仓库"></a>创建并配置第一个仓库</h3><p><strong>步骤详解</strong>：</p><ol><li>点击右上角 “+” 图标，选择 “New repository”</li><li>输入仓库名称和描述</li><li>选择公开（Public）或私有（Private）</li><li>勾选 “Add a README file” 初始化文件</li><li>点击 “Create repository” 完成创建</li></ol><h3 id="使用-Git-命令行基础操作"><a href="#使用-Git-命令行基础操作" class="headerlink" title="使用-Git-命令行基础操作"></a>使用 Git 命令行基础操作</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># 克隆仓库到本地</span><br><span class="line">git clone https://github.com/username/repository.git</span><br><span class="line"></span><br><span class="line"># 添加修改文件</span><br><span class="line">git add .</span><br><span class="line"></span><br><span class="line"># 提交更改</span><br><span class="line">git commit -m &quot;描述本次更改的内容&quot;</span><br><span class="line"></span><br><span class="line"># 推送到远程仓库</span><br><span class="line">git push origin main</span><br></pre></td></tr></table></figure><h2 id="图片预留位置与说明"><a href="#图片预留位置与说明" class="headerlink" title="图片预留位置与说明"></a>图片预留位置与说明</h2><h3 id="GitHub-界面示意图"><a href="#GitHub-界面示意图" class="headerlink" title="GitHub-界面示意图"></a>GitHub 界面示意图</h3><p class='item-img' data-src='/2025/12/16/GitHub%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/image-20251216225627877.png'><img src="/2025/12/16/GitHub%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/image-20251216225627877.png" alt="首页说明"></p><p><em>图 1：GitHub 主界面和各功能区说明</em></p><h3 id="仓库创建流程图示"><a href="#仓库创建流程图示" class="headerlink" title="仓库创建流程图示"></a>仓库创建流程图示</h3><p class='item-img' data-src='/2025/12/16/GitHub%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/image-20251216230112356.png'><img src="/2025/12/16/GitHub%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/image-20251216230112356.png" alt="仓库创建流程1"></p><p class='item-img' data-src='/2025/12/16/GitHub%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/image-20251216230609415.png'><img src="/2025/12/16/GitHub%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/image-20251216230609415.png" alt="仓库创建流程2"></p><p><em>图 2：从零开始创建新仓库的完整流程</em></p><h3 id="Markdown-渲染效果对比"><a href="#Markdown-渲染效果对比" class="headerlink" title="Markdown-渲染效果对比"></a>Markdown 渲染效果对比</h3><p class='item-img' data-src='/2025/12/16/GitHub%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/image-20251216230959387.png'><img src="/2025/12/16/GitHub%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/image-20251216230959387.png" alt="对比"></p><p><em>图 3：左侧为 Markdown 源代码，右侧为 GitHub 渲染效果</em></p><h3 id="中国大陆访问解决方案示意图"><a href="#中国大陆访问解决方案示意图" class="headerlink" title="中国大陆访问解决方案示意图"></a>中国大陆访问解决方案示意图</h3><p class='item-img' data-src='/2025/12/16/GitHub%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/image-20251216231545259.png'><img src="/2025/12/16/GitHub%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/image-20251216231545259.png" alt="编辑hosts"></p><p class='item-img' data-src='/2025/12/16/GitHub%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/image-20251216231808700.png'><img src="/2025/12/16/GitHub%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/image-20251216231808700.png" alt="编辑hosts文件"></p><p><em>图 4：编辑 hosts 文件的详细步骤演示</em></p><h2 id="GitHub-高级功能与最佳实践"><a href="#GitHub-高级功能与最佳实践" class="headerlink" title="GitHub-高级功能与最佳实践"></a>GitHub 高级功能与最佳实践</h2><h3 id="团队协作工作流"><a href="#团队协作工作流" class="headerlink" title="团队协作工作流"></a>团队协作工作流</h3><p><strong>常用协作模式</strong>：</p><ol><li><strong>Fork &amp; Pull 流程</strong>：适合开源项目，外部贡献者使用</li><li><strong>特性分支工作流</strong>：团队内部协作的标准模式</li><li><strong>Gitflow 工作流</strong>：复杂项目的成熟协作方案</li></ol><h3 id="持续集成与部署"><a href="#持续集成与部署" class="headerlink" title="持续集成与部署"></a>持续集成与部署</h3><p>GitHub 集成了丰富的 CI/CD 工具：</p><ul><li><strong>GitHub Actions</strong>：原生自动化平台</li><li><strong>Travis CI</strong>：流行的持续集成服务</li><li><strong>Jenkins</strong>：自建自动化服务器</li></ul><h3 id="安全最佳实践"><a href="#安全最佳实践" class="headerlink" title="安全最佳实践"></a>安全最佳实践</h3><ol><li><strong>使用 SSH 密钥认证</strong> 替代密码登录</li><li><strong>定期审查第三方依赖</strong> 的安全性</li><li><strong>配置分支保护规则</strong> 防止直接推送到主分支</li><li><strong>启用双因素认证</strong> 增强账户安全</li></ol><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>GitHub 不仅是代码托管平台，更是全球开发者协作的核心社区。通过本教程，您应该已经掌握了：</p><ul><li>✅ GitHub 的基本概念和核心功能</li><li>✅ Markdown 语法的全面应用</li><li>✅ 解决中国大陆访问问题的多种方案</li><li>✅ 项目创建和协作的基本流程</li></ul><blockquote><p>[!TIP]</p><p>精通 GitHub 需要实践和经验积累，建议从个人小项目开始，逐步探索更高级的功能。</p></blockquote><h2 id="附录：实用资源链接"><a href="#附录：实用资源链接" class="headerlink" title="附录：实用资源链接"></a>附录：实用资源链接</h2><h3 id="官方文档"><a href="#官方文档" class="headerlink" title="官方文档"></a>官方文档</h3><ul><li><a href="https://docs.github.com/">GitHub 官方文档</a></li><li><a href="https://git-scm.com/doc">Git 官方手册</a></li></ul><h3 id="学习资源"><a href="#学习资源" class="headerlink" title="学习资源"></a>学习资源</h3><ul><li><a href="https://skills.github.com/">GitHub Skills</a>- 交互式学习平台</li><li><a href="http://git-school.github.io/visualizing-git/">Visualizing Git</a>- 图形化理解 Git 概念</li></ul><h3 id="中文社区支持"><a href="#中文社区支持" class="headerlink" title="中文社区支持"></a>中文社区支持</h3><ul><li><a href="https://github.com/explore">GitHub 中文社区</a>- 探索中文项目</li><li>[国内技术论坛] - 解决特定使用问题</li></ul><hr><p><em>本文档最后更新日期：2025年12月16日</em></p><p><em>欢迎通过提交 Issue 或 Pull Request 来帮助改进本文档</em></p><hr><p><strong>文章作者:</strong> [<a href="https://yjh021.github.io/">Blue Eagle</a>]</p><p><strong>文章链接:</strong> [<a href="https://yjh021.github.io/2025/12/16/GitHub%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/">https://yjh021.github.io/2025/12/16/GitHub使用教程/</a>]</p><p><strong>版权声明:</strong> 本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 [<a href="https://yjh021.github.io/">Blue Eagle</a>]</p><hr>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;GitHub 简介与完整使用指南&lt;/h1&gt;
&lt;h2 id=&quot;什么是-GitHub？&quot;&gt;&lt;a href=&quot;#什么是-GitHub？&quot; class=&quot;headerlink&quot; title=&quot;什么是-GitHub？&quot;&gt;&lt;/a&gt;什么是 GitHub？&lt;/h2&gt;
&lt;p&gt;GitHub </summary>
      
    
    
    
    <category term="GitHub" scheme="https://yjh021.github.io/categories/GitHub/"/>
    
    <category term="博客" scheme="https://yjh021.github.io/categories/GitHub/%E5%8D%9A%E5%AE%A2/"/>
    
    <category term="教程" scheme="https://yjh021.github.io/categories/GitHub/%E5%8D%9A%E5%AE%A2/%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="博客" scheme="https://yjh021.github.io/tags/%E5%8D%9A%E5%AE%A2/"/>
    
    <category term="教程" scheme="https://yjh021.github.io/tags/%E6%95%99%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>MySQL课程笔记</title>
    <link href="https://yjh021.github.io/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/"/>
    <id>https://yjh021.github.io/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/</id>
    <published>2024-12-08T08:32:00.000Z</published>
    <updated>2026-01-31T04:06:35.920Z</updated>
    
    <content type="html"><![CDATA[<h1>MySQL课程笔记</h1><h2 id="数据库基础知识"><a href="#数据库基础知识" class="headerlink" title="数据库基础知识"></a>数据库基础知识</h2><h3 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h3><blockquote><ul><li>数据管理技术的发展阶段：人工管理阶段-〉文件系统阶段 -〉 数据库管理阶段</li><li>所谓数据库(DataBase, DB)，是将数据按一定的数据模型组织、描述和存储，具有较小的冗余度，较高的数据独立性和易扩展性，并可为各种用户共享的数据集合。</li><li>数据库系统(DataBase System, DBS)一般由数据库、数据库管理系统(及其开发工具)、应用系统、数据库管理员和用户结构组成</li><li>数据库管理系统（DataBase Management System, DBMS）对收集到的大量数据进行整理、加工、归并、分类、计算、存储等处理，产生新的数据，以便反映事物或现象的本质和特征及其内在联系。</li><li>数据库应用系统(DataBase Application System, DBAS) 数据库应用系统是由<a href="https://baike.baidu.com/item/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F/0?fromModule=lemma_inlink">数据库系统</a>、<a href="https://baike.baidu.com/item/%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F/0?fromModule=lemma_inlink">应用程序</a>系统、用户组成的，具体包括：数据库、<a href="https://baike.baidu.com/item/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/0?fromModule=lemma_inlink">数据库管理系统</a>、<a href="https://baike.baidu.com/item/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AE%A1%E7%90%86%E5%91%98/0?fromModule=lemma_inlink">数据库管理员</a>、硬件平台、软件平台、<a href="https://baike.baidu.com/item/%E5%BA%94%E7%94%A8%E8%BD%AF%E4%BB%B6/0?fromModule=lemma_inlink">应用软件</a>、应用界面。</li></ul></blockquote><h3 id="结构化查询语言SQL"><a href="#结构化查询语言SQL" class="headerlink" title="结构化查询语言SQL"></a>结构化查询语言SQL</h3><h4 id="SQL概念"><a href="#SQL概念" class="headerlink" title="SQL概念"></a>SQL概念</h4><blockquote><ol><li><strong>结构化查询语言SQL</strong>（Structured Query Language）,SQL语言是用于关系数据库查询的结构化语言，最早由Boyce和Chambedin在1974年提出，称为SEQUEL语言。1976年，IBM公司的San Jose研究所在研制关系数据库管理系统System R时修改为SEQUEL2，即目前的SQL语言。</li><li><strong>SQL-关系型数据库管理系统（RDBMS）</strong>：<ul><li>不同的角色（开发者，用户，数据库管理员）使用相同的语言。</li><li>不同的RDBMS使用统一标准的语言。</li><li>SQL使用一种高级的非结构化查询语言。</li><li>坚持 ACID 准则 (原子性，一致性，隔离性，持久性)</li></ul></li><li><strong>NoSQL</strong>- <strong>非关系性数据库</strong><ul><li>采用Key-value方式存储数据。采取最终一致性原则，更加适合互联网数据，但这也可能导致数据丢失。</li></ul></li><li><strong>NewSQL-结合SQL和NoSQL</strong><ul><li>将SQL的ACID保证与NoSQL的可扩展性和高性能相结合，目前大多数NewSQL数据库都是专有软件或仅适用于特定场景，这显然限制了新技术的普及和应用。</li></ul></li></ol><p>主要特点包括：</p><p>（1）综合统一</p><p>（2）高度非过程化</p><p>（3）面向集合的操作方式</p><p>（4）以同一种语法结构提供两种使用方式</p><p>（5）语言简洁，易学易用</p></blockquote><p class='item-img' data-src='/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207112432050.png'><img src="/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207112432050.png" alt="数据库关系图"></p><h4 id="SQL分类"><a href="#SQL分类" class="headerlink" title="SQL分类"></a>SQL分类</h4><p>SQL 语句，根据其功能，主要分为四类:DDL、DML、DQL、DCL 。</p><table><thead><tr><th style="text-align:center">分类</th><th style="text-align:center">全称</th><th style="text-align:center">说明</th></tr></thead><tbody><tr><td style="text-align:center">DDL</td><td style="text-align:center">Data Definition Language</td><td style="text-align:center">数据定义语言，用来定义数据库对象（数据库，表，字段)</td></tr><tr><td style="text-align:center">DML</td><td style="text-align:center">Data Manipulation Language</td><td style="text-align:center">数据操作语言，用来对数据库表中的数据进行增删改</td></tr><tr><td style="text-align:center">DQL</td><td style="text-align:center">Data Query Language</td><td style="text-align:center">数据查询语言，用来查询数据库中表的记录</td></tr><tr><td style="text-align:center">DCL</td><td style="text-align:center">Data Control Language</td><td style="text-align:center">数据控制语言，用来创建数据库用户、控制数据库的访问权限</td></tr></tbody></table><h4 id="SQL通用语法"><a href="#SQL通用语法" class="headerlink" title="SQL通用语法"></a>SQL通用语法</h4><blockquote><p>在学习具体的SQL语句之前，先来了解一下SQL语言的通用语法。</p><ol><li>SQL语句可以单行或多行书写,以分号结尾。</li><li>SQL语句可以使用空格/缩进来增强语句的可读性。</li><li>MySQL数据库的SQL语句不区分大小写，关键字建议使用大写。</li><li>注释:<br>单行注释:-- 注释内容 或 # 注释内容<br>多行注释:/** 注释内容*  */</li></ol></blockquote><p>注：MySQL下载安装教程详见<a href="https://yjh021.github.io/2024/10/22/MySQL%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/">MySQL的安装和使用</a>。</p><h3 id="图形化软件"><a href="#图形化软件" class="headerlink" title="图形化软件"></a>图形化软件</h3><blockquote><p>本笔记所采用的图形化软件为 Navicat 。</p></blockquote><blockquote><p>“Navicat”是一套可创建多个连接的数据库管理工具，用以方便管理 <a href="https://baike.baidu.com/item/MySQL/471251?fromModule=lemma_inlink">MySQL</a>、<a href="https://baike.baidu.com/item/Redis/6549233?fromModule=lemma_inlink">Redis</a>、<a href="https://baike.baidu.com/item/Oracle/301207?fromModule=lemma_inlink">Oracle</a>、<a href="https://baike.baidu.com/item/PostgreSQL/530240?fromModule=lemma_inlink">PostgreSQL</a>、<a href="https://baike.baidu.com/item/SQLite/375020?fromModule=lemma_inlink">SQLite</a>、[SQLServer](<a href="https://baike.baidu.com/item/SQL">https://baike.baidu.com/item/SQL</a> Server/245994?fromModule=lemma_inlink)、<a href="https://baike.baidu.com/item/MariaDB/6466119?fromModule=lemma_inlink">MariaDB</a> 和 <a href="https://baike.baidu.com/item/MongoDB/60411?fromModule=lemma_inlink">MongoDB</a> 等不同类型的数据库，它与 <a href="https://baike.baidu.com/item/GaussDB/63064379?fromModule=lemma_inlink">GaussDB</a>、<a href="https://baike.baidu.com/item/OceanBase/3041032?fromModule=lemma_inlink">OceanBase</a>、<a href="https://baike.baidu.com/item/PolarDB/23677557?fromModule=lemma_inlink">PolarDB</a> 以及 <a href="https://baike.baidu.com/item/%E9%98%BF%E9%87%8C%E4%BA%91/297128?fromModule=lemma_inlink">阿里云</a>、<a href="https://baike.baidu.com/item/%E8%85%BE%E8%AE%AF%E4%BA%91/9905046?fromModule=lemma_inlink">腾讯云</a>、<a href="https://baike.baidu.com/item/%E5%8D%8E%E4%B8%BA%E4%BA%91/4572949?fromModule=lemma_inlink">华为云</a>、<a href="https://baike.baidu.com/item/Amazon/9842534?fromModule=lemma_inlink">Amazon</a> RDS、Amazon Aurora、Amazon Redshift、Microsoft Azure、Oracle Cloud 和 MongoDB Atlas等<a href="https://baike.baidu.com/item/%E4%BA%91%E6%95%B0%E6%8D%AE%E5%BA%93/4626630?fromModule=lemma_inlink">云数据库</a>兼容。它用于创建、管理和维护数据库。Navicat 的功能足以满足专业开发人员的所有需求，但是对<a href="https://baike.baidu.com/item/%E6%95%B0%E6%8D%AE%E5%BA%93%E6%9C%8D%E5%8A%A1%E5%99%A8/613818?fromModule=lemma_inlink">数据库服务器</a>初学者来说又简单易操作。Navicat 的<a href="https://baike.baidu.com/item/%E7%94%A8%E6%88%B7%E7%95%8C%E9%9D%A2/6582461?fromModule=lemma_inlink">用户界面</a> (<a href="https://baike.baidu.com/item/GUI/479966?fromModule=lemma_inlink">GUI</a>) 设计良好，以安全且简单的方法创建、组织、访问和共享信息。</p></blockquote><h4 id="Navicat-下载"><a href="#Navicat-下载" class="headerlink" title="Navicat-下载"></a>Navicat 下载</h4><blockquote><ul><li><p>Navicat 下载地址：<a href="https://www.navicat.com/en/download/navicat-premium">https://www.navicat.com/en/download/navicat-premium</a></p></li><li><p>Navicat 下载完成后，打开安装包，选择接受条款，一直点下一步即可。</p></li><li><p>打开Navicat，连接到MySQL。</p></li></ul></blockquote><h2 id="数据库设计"><a href="#数据库设计" class="headerlink" title="数据库设计"></a>数据库设计</h2><blockquote><p>数据库设计就是将数据库中的数据对象以及这些数据对象之间关系进行规划和结构化的过程，当数据库比较复杂时我们需要设计数据库</p></blockquote><h3 id="关系数据库设计"><a href="#关系数据库设计" class="headerlink" title="关系数据库设计"></a>关系数据库设计</h3><h4 id="数据的加工"><a href="#数据的加工" class="headerlink" title="数据的加工"></a>数据的加工</h4><blockquote><ul><li>数据是描述事物的符号记录，模型是现实世界的抽象。</li><li>数据模型是数据特征的抽象，包括数据的结构部分，操作部分和约束条件。</li><li>每个事物的无穷特征如何数据化？事物之间错综复杂的关系如何数据化？现实世界直接数据化是不可行的，数据加工是一个逐步转换的过程，会经历<em><strong>现实世界</strong></em>、<em><strong>信息世界</strong></em>和<em><strong>数据世界</strong></em>三个不同层面。</li></ul></blockquote><p><strong>1.现实世界</strong></p><blockquote><p>现实世界是存在于人们头脑之外的客观世界。现实世界存在各种事物，事物与事物之间存在联系，这种联系是由事物本身的性质决定的。</p><p>例如，学校中有教师、学生、课程，教师为学生授课，学生选修课程并取得成绩；图书馆中有图书、管理员和读者，读者借阅图书，管理员对图书和读者进行管理等。</p></blockquote><p><strong>2.信息世界</strong></p><blockquote><ul><li>信息世界是现实世界在人们头脑中的反映，人们把它用文字或符号记载下来，然后用规范化的数据库定义语言来定义描述而构成的一个抽象世界。信息世界实际上是对现实世界的一种抽象化描述。</li><li>信息世界不是简单的对现实世界进行符号化，而是要通过筛选、归纳、总结、命名等抽象化过程形成概念模型，用以表示对现实世界的抽象和描述。</li></ul></blockquote><p><strong>3.数据世界</strong></p><blockquote><p>数据世界又称机器世界，它是将信息世界的内容数据化后的产物，即将信息世界中的概念模型，进一步转换成数据模型所形成的便于计算机处理的数据表现形式。</p></blockquote><h4 id="模型"><a href="#模型" class="headerlink" title="模型"></a>模型</h4><blockquote><ol><li>概念模型:把现实世界转换为信息世界的模型,E-R模型。</li><li>数据模型:把信息世界转化为数据世界使用的模型,关系模型。</li></ol></blockquote><p class='item-img' data-src='/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207113206885.png'><img src="/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207113206885.png" alt="设计数据库关系模型"></p><h4 id="规范化设计"><a href="#规范化设计" class="headerlink" title="规范化设计"></a>规范化设计</h4><blockquote><p>按照规范化设计的方法，考虑数据库及其应用系统开发的全过程，将数据库的设计分为以下6个设计阶段：</p><blockquote><ol><li><p>需求分析、</p></li><li><p>概念设计、</p></li><li><p>逻辑设计、</p></li><li><p>物理设计、</p></li><li><p>数据库实施、</p></li><li><p>数据库运行和维护。</p></li></ol></blockquote></blockquote><h3 id="数据库设计步骤"><a href="#数据库设计步骤" class="headerlink" title="数据库设计步骤"></a>数据库设计步骤</h3><p class='item-img' data-src='/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207114552607.png'><img src="/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207114552607.png" alt="数据库设计步骤"></p><h4 id="需求分析阶段"><a href="#需求分析阶段" class="headerlink" title="需求分析阶段"></a>需求分析阶段</h4><blockquote><p>需求分析就是根据用户的需求收集数据，是设计数据库的起点。需求分析的结果是否准确反映用户的实际需求，将直接影响到后面各个阶段的设计，并影响到设计结果是否合理和实用。</p><p>需求分析的任务就是收集数据，要尽可能多地收集关于数据库要存储的数据以及将来如何使用这些数据的信息，确保收集到数据库需要存储的全部信息。</p></blockquote><blockquote><p><strong>需求分析的目标</strong>可以参考以下问题：</p><p>（1）有多少数据，数据的来源在哪里，是否有已存在的数据资源？</p><p>（2）必须保存哪些数据，数据是字符、数字或日期型？</p><p>（3）谁使用数据，如何使用？</p><p>（4）数据是否经常修改，如何修改和什么时候修改？</p><p>（5）某个数据是否依赖于另一个数据或被其他数据引用？</p><p>（6）某个信息是否要唯一？</p><p>（7）哪些数据是组织内部的和哪些是外部数据？</p><p>（8）哪些业务活动与数据有关，数据如何支持业务活动？</p><p>（9）数据访问的频度和增长的幅度如何？</p><p>（10）谁可以访问数据，如何保护数据。</p></blockquote><blockquote><p><strong>需求分析的方法</strong>，常用的调查方法：</p><p>（1）跟班作业。通过亲身参加业务工作来了解业务活动的情况。通过这种方法可以比较准确地了解用户的需求，但比较耗费时间。</p><p>（2）开调查会。通过与用户座谈来了解业务活动情况及用户需求。座谈时，参加者和用户之间可以相互启发。</p><p>（3）请专人介绍。</p><p>（4）询问。对某些调查中的问题，可以找专人询问。</p><p>（5）问卷调查。设计调查表请用户填写。如果调查表设计得合理，这种方法是很有效的，也易于为用户所接受。</p><p>（6）查阅记录。查阅与原系统有关的数据记录。</p></blockquote><h4 id="概念设计阶段"><a href="#概念设计阶段" class="headerlink" title="概念设计阶段"></a>概念设计阶段</h4><blockquote><p>概念设计是整个数据库设计的关键，它通过对用户的需求进行综合、归纳与抽象，形成一个独立于具体DBMS的概念模型。</p><p>设计人员完成了数据库设计的第一步，收集到了现实世界中的数据，下一步的工作是将收集到的数据进行分析，找出它们之间的联系，并用E-R图来表示。</p></blockquote><blockquote><p><strong>概念模型的相关概念</strong>：</p><ol><li><p><strong>实体（Entity）</strong>：客观存在并且可以相互区别的事物称为实体。实体可以是具体的事物，也可以是抽象的事件。</p></li><li><p><strong>属性（Attribute）</strong>：描述实体的特性。一个实体可以用若干个属性来描述。</p></li><li><p><strong>主码（Key）</strong>：唯一标识实体的属性或属性的组合。</p></li><li><p><strong>域（Domain）</strong>：属性的取值范围称为该属性的域。</p></li><li><p><strong>实体集（Entity Set）</strong>：具有相同特征和性质的同一类实体的集合称为实体集。例如全体学生、一批图书等。</p></li><li><p><strong>联系（Relationship）</strong>：</p><p>在现实世界中，事物内部以及事物之间是有联系的，这些联系在信息世界中反映为实体（型）内部的联系和实体（型）之间的联系。</p><p>实体内部的联系通常是指组成实体的各属性之间的联系；</p><p>实体之间的联系通常是指不同实体集之间的联系。</p></li></ol></blockquote><blockquote><p><em>两个实体之间的联系可以分为</em> <strong>3类</strong>。</p><p>（1）一对一(1:1)联系（One-to-One Relationship）。</p><p>例如，如果一个人只能有一个身份证，一个身份证只能对应一个人，则人和身份证之间具有一对一的联系。</p><p>（2）一对多(1:n)联系（One-to-Many Relationship）。</p><p>例如，一个人可以有多个移动电话号码，但一个电话号码只能卖给一个人。人与移动电话号码之间的联系就是一对多的联系。</p><p>（3）多对多(m:n)联系（Many-to-Many Relationship）。</p><p>例如，一门课程同时可以由若干学生选修，而一个学生同时也可以选修若干门课程，课程与学生之间的联系是多对多的联系。</p></blockquote><blockquote><p><strong>概念模型</strong>是对信息世界的建模，它应当能够全面、准确地描述信息世界，是信息世界的基本概念。</p><p><strong>概念模型</strong>用于建立信息世界的模型，它是独立于计算机系统的模型，强调其语义表达功能，要求概念简单、清晰，易于用户理解，它是现实世界的第1层抽象，是用户和数据库设计人员之间进行交流的工具。</p><p>概念模型的表示方法很多，其中最为著名和使用最为广泛的是P.P.Chen于1976年提出的E-R（Entity-Relationship）模型。</p></blockquote><p class='item-img' data-src='/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207115838565.png'><img src="/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207115838565.png" alt="建模"></p><p><strong>E-R图的组成要素及其画法</strong></p><p class='item-img' data-src='/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207115919329.png'><img src="/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207115919329.png" alt="E-R图的组成要素及其画法"></p><blockquote><p><strong>概念结构设计的方法</strong>：</p><p>（1）自顶向下。首先定义全局概念结构的框架，然后逐步细化。</p><p>（2）自底向上。首先定义各局部应用的概念结构，然后将它们集成起来，得到全局概念结构。</p><p>（3）逐步扩张。首先定义最重要的核心概念结构，然后向外扩充，以滚雪球的方式逐步生成其他概念结构，直至总体概念结构。</p><p>（4）混合策略。将自顶向下和自底向上的方法相结合，用自顶向下策略设计一个全局概念结构的框架，以它为框架自底向上设计各局部概念结构。</p><p>最常采用的是混合策略，即自顶向下进行需求分析，然后自底向上设计概念结构。</p></blockquote><p class='item-img' data-src='/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207122230533.png'><img src="/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207122230533.png" alt="混合策略"></p><blockquote><p><strong>概念结构设计的步骤</strong></p><p>（1）进行数据抽象，设计局部E-R模型。<br>（2）集成各局部E-R模型，形成全局E-R模型。</p></blockquote><p class='item-img' data-src='/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207122412013.png'><img src="/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207122412013.png" alt="概念结构设计的步骤"></p><blockquote><p><strong>E-R图设计步骤</strong> ：</p><p>对于复杂的系统，E-R图设计通常都应经过以下两个阶段：</p><p>（1）针对每一用户画出该用户信息的局部E—R图，确定该用户视图的实体、属性和联系。需注意的是：能作为属性的就不要作为实体，这有利于E—R图的简化。</p><p>（2）综合局部E—R图，生成总体E—R图。在综合过程中，同名实体只能出现一次，还要去掉不必要的联系，以便消除冗余。一般来说，从总体E—R图必须能导出原来的所有局部视图，包括实体、属性和联系。</p></blockquote><h4 id="逻辑设计阶段"><a href="#逻辑设计阶段" class="headerlink" title="逻辑设计阶段"></a>逻辑设计阶段</h4><blockquote><p>概念设计阶段完成后，下一步进入逻辑设计阶段，即将概念模型转换成某个DBMS所支持的数据模型，并对其进行优化。</p></blockquote><h5 id="数据模型"><a href="#数据模型" class="headerlink" title="数据模型"></a>数据模型</h5><blockquote><p>数据模型：它是直接面向数据库的逻辑结构，是现实世界的<strong>第2层抽象</strong>。<br>数据模型涉及计算机系统和数据库管理系统。数据模型有严格的形式化定义，以便于在计算机系统中实现。</p></blockquote><p><strong>常见数据模型：</strong></p><p><strong>1.层次模型</strong>：用“树”结构来表示数据之间的关系</p><blockquote><p>优点：<br>简单，只需很少几条命令就能操纵数据库。<br>性能优于关系模型和网状模型。<br>提供良好的完整性支持。<br>缺点：<br>不支持多对多联系，只能通过冗余数据（易产生数据不一致性）或引入虚拟结点来解决。</p></blockquote><p class='item-img' data-src='/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207123322428.png'><img src="/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207123322428.png" alt="层次模型"></p><p><strong>2.网状模型</strong>：用“图”结构来表示数据之间的关系</p><blockquote><p>优点：</p><p>​能更直接地反映现实世界，效率高。</p><p>缺点：</p><p>​结构比较复杂，DDL和DML语言复杂。</p></blockquote><p class='item-img' data-src='/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207141022973.png'><img src="/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207141022973.png" alt="网状模型"></p><p><strong>3.关系模型</strong>：用“表”结构（或称关系）来表示数据之间的关系。</p><blockquote><p>优点：</p><p>​建立在严格的数学概念的基础上，概念单一，数据结构简单、清晰，用户易懂易用。</p><p>​实体和各类联系都用关系来表示，对数据的检索结果也是关系。</p><p>​关系模型的存取路径对用户透明，具有更高的数据独立性，更好的安全保密性。</p><p>​简化了程序员的工作和数据库开发建立的工作，关系模型中的数据联系是靠数据冗余实现的。</p><p>缺点：</p><p>​存取路径对用户透明导致查询效率往往不如非关系数据模型。</p><p>​为提高性能，必须对用户的查询请求进行优化从而增加了开发数据库管理系统的难度。</p></blockquote><p class='item-img' data-src='/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207141127089.png'><img src="/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207141127089.png" alt="关系模型"></p><p><strong>E—R</strong>模型到关系模型的转换</p><blockquote><p><strong>把E-R图转换为关系模型可遵循如下原则</strong> ：</p><p>1.对于E—R图中每个<strong>实体集</strong>，都应转换为一个关系，该关系应包括对应实体的全部属性，并应根据关系所表达的语义确定哪个属性或哪几个属性组作为“主关键字”，主关键字用来标识实体。</p><p>2.对于E—R图中的<strong>联系</strong>，情况比较复杂，要根据实体联系方式的不同，采取不同的手段加以实现。</p></blockquote><blockquote><p><strong>转换规则：（必须牢记！！）</strong></p><p>规则1.1 实体类型的转换：将每个实体类型转换成一个关系模式，实体的属性即为关系的属性，实体的标识符即为关系模式的码。</p><p>规则1.2 联系类型的转换：根据不同的联系类型做不同的处理。</p></blockquote><blockquote><p>规则1.2.1 若实体间联系是1∶1，可以在两个实体类型转换成的两个关系模式中任意一个关系模式中加入另一个关系模式的码和联系类型的属性。</p></blockquote><p>【例】将下图所示的含有1∶1联系的E-R图根据上述规则转换为关系模式。</p><blockquote><p>方案1：“负责”与“职工”两关系模式合并。</p><p>职工（<u>职工号</u>，姓名，年龄，产品号）</p><p>产品（<u>产品号</u>，产品名，价格）</p><p>​或者：</p><p>方案2：“负责”与“产品”两关系模式合并。</p><p>职工（<u>职工号</u>，姓名，年龄）</p><p>产品（<u>产品号</u>，产品名，价格，职工号）</p></blockquote><p class='item-img' data-src='/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207145928866.png'><img src="/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207145928866.png" alt="1:1"></p><blockquote><p>规则1.2.2 若实体间的联系是1∶<em>n</em>，则在<em>n</em>端实体类型转换成的关系模式中加入1端实体类型的码和联系类型的属性。</p></blockquote><p>【例】将下图所示的含有1∶n联系的E-R图根据上述规则转换为关系模式。</p><blockquote><p>仓库（<u>仓库号</u>，地点，面积）</p><p>产品（<u>产品号</u>，产品名，价格，<u>仓库号</u>，数量）</p></blockquote><p class='item-img' data-src='/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207150136781.png'><img src="/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207150136781.png" alt="1:n"></p><blockquote><p>规则1.2.3 若实体间联系是<em>m</em>∶<em>n</em>，则将联系类型也转换成关系模式，其属性为两端实体类型的码加上联系类型的属性，而码为两端实体码的组合。</p></blockquote><p>【例】将下图所示的含有m∶n联系的E-R图根据上述规则转换为关系模式。</p><blockquote><p>商店（<u>店号</u>，店名，店址，店经理）</p><p>商品（<u>商品号</u>，商品名，单价，产地）</p><p>经营（<u>店号</u>，<u>商品号</u>，月销售量）</p></blockquote><p class='item-img' data-src='/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207150354615.png'><img src="/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207150354615.png" alt="m:n"></p><blockquote><p>规则1.2.4  3个或3个以上的实体间的一个多元联系，不管联系类型是何种方法，总是将多元联系类型转换成一个关系模式，其属性为与该联系相连的各实体的码及联系本身的属性，其码为各实体码的组合。</p></blockquote><p>【例】将下图所示的多实体集间含有m∶n联系的E-R图根据上述规则转换为关系模式。</p><blockquote><p>供应商（<u>供应商号</u>，供应商名，地址）</p><p>零件（<u>零件号</u>，零件名，单价）</p><p>产品（<u>产品号</u>，产品名，型号）</p><p>供应（<u>供应商号</u>，<u>零件号</u>，<u>产品号</u>，数量）</p></blockquote><p class='item-img' data-src='/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207151251648.png'><img src="/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207151251648.png" alt="3个及以上"></p><h4 id="数据库设计规范化"><a href="#数据库设计规范化" class="headerlink" title="数据库设计规范化"></a>数据库设计规范化</h4><blockquote><p>仅有好的RDBMS并不足以避免数据冗余，必须在数据库的设计中创建好的表结构</p><p>关系数据库范式理论是在数据库设计过程中将要依据的准则，数据库结构必须要满足这些准则，才能确保数据的准确性和可靠性。这些准则则被称为规范化形式，即范式。</p><p>Dr E.F.codd 最初定义了规范化的三个级别，范式是具有最小冗余的表结构。这些范式是：</p><blockquote><p>第一范式(1st NF －First Normal Fromate)</p><p>第二范式(2nd NF－Second Normal Fromate)</p><p>第三范式(3rd NF－ Third Normal Fromate)</p></blockquote></blockquote><h5 id="函数依赖"><a href="#函数依赖" class="headerlink" title="函数依赖"></a>函数依赖</h5><blockquote><p>实体之间，实体内部的各个特征之间的相互依赖和制约关系——自然反映到关系数据库中的各关系和关系内部的各属性之间。</p><p>关系是由属性构成，函数依赖就是讲<strong>属性之间的依赖</strong>。</p></blockquote><p><strong>定义1函数依赖：</strong></p><blockquote><p>设有关系模式<em>R</em>(<em>U</em> )，<em>X</em>和<em>Y</em>均为<em>U</em>={<em>A</em>1，<em>A</em>2，…，<em>An</em>}的子集，若对于元素中X上的每个值都有Y上的一个惟一值与之相对应，则称<em>X</em>函数决定<em>Y</em>，或称<em>Y</em>函数依赖于<em>X</em>，记作<em>X</em>→<em>Y</em>，其中<em>X</em>叫做决定因素（Determinant），<em>Y</em>叫做依赖因素（Dependent）。</p></blockquote><blockquote><p>练习：指出学生关系S中存在的函数依赖关系</p><p>S（学号，姓名，班号，班级，课程号，教师，成绩）</p><p><strong>学号</strong> →<strong>姓名</strong>（每个学号只能有一个学生姓名）</p><p><strong>学号</strong> →<strong>班级</strong>（每个学号只能有一个班级）</p><p>（<strong>学号</strong>，<strong>课程号</strong>）→<strong>成绩</strong>（每个学生每门课只有一个成绩）</p></blockquote><p><strong>定义2：部分函数依赖 、完全函数依赖</strong></p><blockquote><p>在关系模式<em>R</em>(<em>U</em> )中，X和Y为属性集U上的子集，若<em>X</em>→<em>Y</em>，并且对于<em>X</em>的任何一个真子集<em>X</em>¢，都有<em>X</em>¢ → <em>Y</em>，则称X部分函数决定Y或<em>Y</em>部分函数依赖<em>X</em>，记作<em>X</em>   <em>Y</em>。</p><p>否则，若不存<em>X</em>的任何一个真子集<em>X</em>¢，使得<em>X</em>¢→<em>Y</em>，则称X完全函数决定Y或 <em>Y</em>完全函数依赖于X， 记作<em>X</em>   <em>Y</em>。</p></blockquote><blockquote><p>练习：指出学生关系S中存在的函数依赖关系是部分依赖还是完全依赖</p><p>S（学号，姓名，班号，班级，课程号，教师，成绩）</p><p>学号 →姓名（完全函数依赖）</p><p>学号 →班级（完全函数依赖）</p><p>（学号，课程号）→成绩（完全函数依赖）</p><p>（<strong>学号</strong>，课程号）→<strong>姓名</strong>（部分函数依赖）</p></blockquote><p><strong>定义3：传递函数依赖</strong></p><blockquote><p>在关系模式<em>R</em>(<em>U</em> )中，<em>X</em>、<em>Y</em>、<em>Z</em>是属性集U上的子集，如果<em>X</em>→<em>Y</em> <em>，**Y</em>→<em>Z</em>，但Y不包含于X，Y不能函数决定X,则存在<em>X</em> → <em>Z</em>。</p></blockquote><blockquote><p>练习：指出学生关系S中存在的函数依赖关系是否存在传递函数依赖</p><p>S（学号，姓名，班号，班级，课程号，教师，成绩）</p><p>学号 →班号   班号 →班级 （班号不属于学号，班号不决定学号）</p><p>学号→班级</p><p>所以班级传递依赖于学号</p></blockquote><blockquote><p><strong>属性间联系决定函数依赖</strong></p><p>① 1∶1联系：如果两属性集<em>X</em>、<em>Y</em>之间是1∶1联系，则存在函数依赖<em>X</em>  <em>Y</em>。</p><p>② 1∶n联系：如果两属性集<em>X</em>、<em>Y</em>之间是<em>n</em>∶1联系，则存在函数依赖<em>X</em>→<em>Y</em>，即多方决定一方。</p><p>③ m∶n联系：如果两属性集<em>X</em>、<em>Y</em>之间是<em>m</em>∶<em>n</em>联系，则不存在函数依赖。</p></blockquote><p><strong>定义4：候选码</strong></p><blockquote><p>在关系模式<em>R</em>(<em>U</em> )中，<em>X</em>是属性集U上的子集，如果<em>X</em>能够函数决定U中的每个属性*，*并且X的任何真子集都不能函数决定U中的每个属性，则称X为关系R上的一个候选码。</p><p>在一个关系中可以有多个候选码，可能是某几个属性，也可能是某几个属性的组合。</p></blockquote><blockquote><p>练习：指出学生关系S的候选码</p><p>S（学号，姓名，班号，班级，课程号，教师，成绩）</p><p>学号 →姓名，学号 →班号，班号→班级</p><p>（学号，课程号）→成绩</p><p>所以学生关系S的候选码是（学号，课程号）</p></blockquote><p><strong>定义5：主码/主键 主属性</strong></p><blockquote><p>一个关系包含多个候选码，可选取一个作为主码/主键。</p></blockquote><p><strong>定义6：主属性</strong></p><blockquote><p>主属性：包含在任一候选码中的属性称为主属性，其他为非主属性。</p></blockquote><h5 id="关系数据库范式理论"><a href="#关系数据库范式理论" class="headerlink" title="关系数据库范式理论"></a>关系数据库范式理论</h5><blockquote><p>（1）第一范式：若关系模式R(U)的 每个分量都是不可分割的数据项，则R(U)∈1NF</p></blockquote><p class='item-img' data-src='/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207205230772.png'><img src="/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207205230772.png" alt="第一范式"></p><blockquote><p>（2）第二范式：若R(U)∈1NF，且R(U)中的每一个非主属性都完全函数依赖于R(U)的任一候选码，则R(U)∈2NF</p></blockquote><table><thead><tr><th><strong>学号</strong></th><th><strong>姓名</strong></th><th><strong>班号</strong></th><th><strong>地址</strong></th><th><strong>课程号</strong></th><th><strong>课程名</strong></th><th><strong>教师</strong></th><th><strong>成绩</strong></th></tr></thead><tbody><tr><td>01001</td><td>王丽</td><td>01</td><td>河北省石家庄市裕华路</td><td>C001</td><td>C语言</td><td>刘峰</td><td>80</td></tr><tr><td>01002</td><td>张勇</td><td>01</td><td>河北省保定市裕华路</td><td>C001</td><td>C语言</td><td>刘峰</td><td>75</td></tr><tr><td>01003</td><td>李江</td><td>01</td><td>河北省邢台市新华路</td><td>C001</td><td>C语言</td><td>刘峰</td><td>86</td></tr></tbody></table><blockquote><p>候选码：学号，课程号</p><p>非主属性：姓名，班号，地址，课程名，教师，成绩</p><p>函数依赖（学号，课程号）→姓名 是部分函数依赖</p></blockquote><table><thead><tr><th><strong>学号</strong></th><th><strong>姓名</strong></th><th><strong>班号</strong></th><th><strong>地址</strong></th><th><strong>教师</strong></th></tr></thead><tbody><tr><td>01001</td><td>王丽</td><td>01</td><td>河北省石家庄市裕华路</td><td>刘峰</td></tr><tr><td>01002</td><td>张勇</td><td>01</td><td>河北省保定市裕华路</td><td>刘峰</td></tr><tr><td>01003</td><td>李江</td><td>01</td><td>河北省邢台市新华路</td><td>刘峰</td></tr></tbody></table><blockquote><p>第二范式还是存在数据冗余，操作异常情况</p></blockquote><blockquote><p>（3）第三范式：如果关系R(U)中的每一个非主属性都不传递函数依赖于R(U)的任一候选码，则R(U)∈3NF</p></blockquote><table><thead><tr><th><strong>学号</strong></th><th><strong>姓名</strong></th><th><strong>班号</strong></th><th><strong>班级</strong></th><th><strong>教师</strong></th><th><strong>成绩</strong></th></tr></thead><tbody><tr><td>01001</td><td>王丽</td><td>01</td><td>21级计算机网络技术</td><td>刘峰</td><td>80</td></tr><tr><td>01002</td><td>张勇</td><td>01</td><td>21级计算机网络技术</td><td>刘峰</td><td>75</td></tr><tr><td>01003</td><td>李江</td><td>01</td><td>21级计算机网络技术</td><td>刘峰</td><td>86</td></tr></tbody></table><blockquote><p>候选码：学号</p><p>非主属性：姓名，班号，班号，教师，成绩</p><p>学号→班号，班号→班级 所以 学号→班级 是传递函数依赖</p></blockquote><h5 id="数据库规范化实例"><a href="#数据库规范化实例" class="headerlink" title="数据库规范化实例"></a>数据库规范化实例</h5><blockquote><p><strong>规范化理论</strong></p><p>​利用规范化力量来改造关系模式，通过<strong>分解关系模式</strong>来消除其中不合适的数据依赖，以解决插入异常、删除异常、更新异常和数据冗余问题。</p></blockquote><blockquote><p><strong>解决之道：分解、分解、再分解！</strong></p><p>让一个关系模式尽量只描述一个概念、一个实体或一种实体之间的联系，<strong>概念单一</strong>！</p></blockquote><p>例如：</p><table><thead><tr><th><strong>学号</strong></th><th><strong>姓名</strong></th><th><strong>性别</strong></th><th><strong>年龄</strong></th><th><strong>班级编号</strong></th><th><strong>班级名称</strong></th><th><strong>课程编号</strong></th><th><strong>课程名</strong></th><th><strong>成绩</strong></th></tr></thead><tbody><tr><td>00101</td><td>王丽</td><td>女</td><td>20</td><td>001</td><td>22级计算机班</td><td>C001</td><td>C语言</td><td>80</td></tr><tr><td>00201</td><td>张勇</td><td>男</td><td>18</td><td>002</td><td>22级会计班</td><td>C010</td><td>经济法</td><td>75</td></tr><tr><td>00102</td><td>李江</td><td>男</td><td>19</td><td>001</td><td>22级计算机班</td><td>C002</td><td>数据结构</td><td>86</td></tr></tbody></table><blockquote><p>候选码：（学号，课程编号）</p><p>（学号，课程号）→姓名 是部分函数依赖</p><p>学号→班级编号 班级编号→班级名称是传递函数依赖</p></blockquote><h5 id="数据库规范化实例——关系分解"><a href="#数据库规范化实例——关系分解" class="headerlink" title="数据库规范化实例——关系分解"></a>数据库规范化实例——关系分解</h5><p><strong>1NF→2NF：去掉部分依赖分解过程</strong></p><table><thead><tr><th><strong>学号</strong></th><th><strong>姓名</strong></th><th><strong>性别</strong></th><th><strong>年龄</strong></th><th><strong>班级编号</strong></th><th><strong>班级名称</strong></th><th><strong>课程编号</strong></th><th><strong>课程名</strong></th><th><strong>成绩</strong></th></tr></thead><tbody><tr><td>00101</td><td>王丽</td><td>女</td><td>20</td><td>001</td><td>22级计算机班</td><td>C001</td><td>C语言</td><td>80</td></tr><tr><td>00201</td><td>张勇</td><td>男</td><td>18</td><td>002</td><td>22级会计班</td><td>C010</td><td>经济法</td><td>75</td></tr><tr><td>00102</td><td>李江</td><td>男</td><td>19</td><td>001</td><td>22级计算机班</td><td>C002</td><td>数据结构</td><td>86</td></tr></tbody></table><blockquote><p>分解方法：候选码属性集合的每个子集，用它作为主键，将依赖于此主键的属性放置到此关系模式中，构成一个新关系模式</p></blockquote><blockquote><p><strong>候选码</strong>：（<strong>学号，课程编号</strong>）</p><p><strong>子集：学号，课程编号，（学号，课程编号）</strong></p><p><strong>学生</strong>（<strong>学号</strong>，姓名，性别，年龄，班级编号，班级名称）</p><p><strong>课程</strong>（<strong>课程编号</strong>，课程名称）</p><p><strong>选课</strong>（<strong>学号，课程编号</strong>，成绩）</p></blockquote><p class='item-img' data-src='/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207210227046.png'><img src="/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207210227046.png" alt="1NF➡️2NF"></p><blockquote><p>学生（学号，姓名，性别，年龄，班级编号，班级名称）</p><p>候选码：学号</p><p>学号→班级编号 班级编号→班级名称是传递函数依赖</p></blockquote><blockquote><p>分解方法：对于不是候选码的每个决定因子（班级编号），新建一个关系模式，将决定因子作为新关系模式的主键，在新关系模式中包含在原关系模式中所有依赖于该决定因子的属性（班级名称），从原关系模式中删去依赖于它的所有属性（班级名称）。</p></blockquote><blockquote><p><strong>学号→班级编号 班级编号→班级名称</strong>是<strong>传递函数依赖</strong></p></blockquote><blockquote><p>学生（<strong>学号</strong>，姓名，性别，年龄，班级编号，班级名称）</p><p>学生（<strong>学号</strong>，姓名，性别，年龄）</p><p>班级（<strong>班级编号</strong>，班级名称）</p></blockquote><p><strong>2NF→3NF：去掉传递依赖分解过程</strong></p><p class='item-img' data-src='/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207210523416.png'><img src="/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207210523416.png" alt="2NF→3NF"></p><blockquote><p>学生（<strong>学号</strong>，姓名，性别，年龄）</p><p>班级（<strong>班级编号</strong>，班级名称）</p><p>课程（<strong>课程编号</strong>，课程名称）</p><p>选课（<strong>学号，课程编号</strong>，成绩）</p></blockquote><h5 id="规范化和性能的关系"><a href="#规范化和性能的关系" class="headerlink" title="规范化和性能的关系"></a>规范化和性能的关系</h5><blockquote><p>为满足某种商业目标，数据库性能比规范化数据库更重要</p></blockquote><blockquote><ul><li>通过在给定的表中添加额外的字段，以大量减少需要从中搜索信息所需的时间</li><li>通过在给定的表中插入计算列（如成绩总分），以方便查询</li></ul></blockquote><blockquote><p>进行规范化的同时，还需要综合考虑数据库的性能。</p></blockquote><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><blockquote><p>在需求分析阶段，设计数据库的一般步骤为：</p><p>​收集信息</p><p>​标识对象</p><p>​标识每个对象的属性</p><p>​标识对象之间的关系</p><p>在概要设计阶段和详细设计阶段，设计数据库的步骤为：</p><p>​绘制E-R图</p><p>​将E-R图转换为表格</p><p>​应用三大范式规范化表格</p><p>为了设计结构良好的数据库，需要遵守一些专门的规则，称为数据库的设计范式。</p><p>​第一范式（1NF）的目标：确保每列的原子性。</p><p>​第二范式（2NF）的目标：确保表中的每列，都和主键相关 。</p><p>​第三范式（3NF）的目标：确保每列都和主键列直接相关，而不是间接相关 。</p></blockquote><h2 id="数据定义语言—DDL"><a href="#数据定义语言—DDL" class="headerlink" title="数据定义语言—DDL"></a>数据定义语言—DDL</h2><h3 id="MySQL数据库文件介绍"><a href="#MySQL数据库文件介绍" class="headerlink" title="MySQL数据库文件介绍"></a>MySQL数据库文件介绍</h3><blockquote><p>数据库管理的核心任务包括创建、操作和支持数据库。在MySQL中，每个数据库都对应存放在一个与数据库同名的文件夹中。</p><p>MySQL数据库文件有“.frm”、“.MYD”和“.MYI”3种文件，其中“.frm”是描述表结构的文件，“.MYD”是表的数据文件，“.MYI”是表数据文件中的索引文件。它们都存放在与数据库同名的文件夹中。</p></blockquote><h3 id="MySQL数据库模型"><a href="#MySQL数据库模型" class="headerlink" title="MySQL数据库模型"></a>MySQL数据库模型</h3><blockquote><ul><li>在数据库服务器中可以存储多个数据库文件，所以建立数据库时要设定数据库的文件名，每个数据库有惟一的数据库文件名作为与其它数据库区别的标识。</li><li>数据库文件： 数据库是由相关数据表组成，一个数据库包括多个数据表。数据库文件用于记录数据库中数据表构成的信息。</li><li>数据库只能由得到授权的用户访问，这样保证了数据库的安全。</li></ul></blockquote class='item-img' data-src='/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207211337754.png'><img src="/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207211337754.png" alt="MySQL数据库模型" style="zoom: 50%;"><h3 id="数据库和表"><a href="#数据库和表" class="headerlink" title="数据库和表"></a>数据库和表</h3><blockquote><p>数据库可以看成是一个存储数据对象的容器，这些数据对象包括表、视图、触发器、存储过程等，其中，表是最基本的数据对象，用以存放数据库的数据。</p></blockquote><blockquote><p>必须首先创建数据库，然后才能创建数据库的数据对象。</p><p>MySQL可以采用两种方式：</p><p>创建、操作数据库和数据对象</p><p>（1）命令行方式</p><p>（2）图形界面工具方式</p></blockquote class='item-img' data-src='/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207211551496.png'><img src="/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207211551496.png" alt="数据库" style="zoom:50%;"><blockquote><p><strong>MySQL自动建立的数据库介绍</strong></p><p>​     MySQL安装完成之后，将会在其data目录下自动创建information_schema、mysql、performance_schema、sys四个系统数据库。</p><p>​     可以使用<code>SHOW DATABASES</code>命令来查看当前所有存在的数据库。</p></blockquote><h3 id="创建数据库"><a href="#创建数据库" class="headerlink" title="创建数据库"></a>创建数据库</h3><blockquote><p>MySQL安装后，系统自动地创建information_scema和MySQL数据库，MySQL把有关数据库的信息存储在这两个数据库中。如果删除了这些数据库，MySQL就不能正常工作。</p><p>对于用户的数据，需要创建新的数据库来存放。</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法格式：</span></span><br><span class="line"><span class="keyword">CREATE</span> &#123;DATABASE <span class="operator">|</span> SCHEMA&#125; [IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span>] 数据库名</span><br><span class="line">        [ [<span class="keyword">DEFAULT</span>] <span class="type">CHARACTER</span> <span class="keyword">SET</span> 字符集名 <span class="operator">|</span> [<span class="keyword">DEFAULT</span>] <span class="keyword">COLLATE</span> 校对规则名]</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 说明：语句中“[ ]”内为可选项。</span></span><br><span class="line"><span class="comment">-- &#123;  |  &#125;表示二选一。</span></span><br><span class="line"><span class="comment">-- 例如：</span></span><br><span class="line"><span class="keyword">Create</span> database bookstore;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>在SQL语言创建数据库命令<code>create database</code>中，如果省略语句中“[ ]”中的所有可选项，其结构形式如下：</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> DATABASE 数据库名;</span><br></pre></td></tr></table></figure><blockquote><p><strong>MySQL数据库命名规则：</strong></p><ul><li>不能与其他数据库重名</li><li>名称可以由任意阿拉伯数字、字母、下划线和“$”组成，可以使用以上任意字符头，但不能使用单独的数字，否则会与其他数字混淆</li><li>名称最长64个字符</li><li>不能使用MySQL关键字</li><li>默认情况下，Windows对数据库大小写不敏感，而在Linux下对大小写是敏感的，为了数据库在不同平台下移植，建议使用小写数据库名。</li></ul></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例3.1】 创建一个名为Bookstore的数据库。</span></span><br><span class="line"><span class="keyword">CREATE</span> DATABASE Bookstore; </span><br></pre></td></tr></table></figure><h3 id="显示数据库命令"><a href="#显示数据库命令" class="headerlink" title="显示数据库命令"></a>显示数据库命令</h3><blockquote><p>显示服务器中已建立的数据库，使用<code>SHOW DATABASES;</code>命令。</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法格式：</span></span><br><span class="line"><span class="keyword">SHOW</span> DATABASES;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>此命令没有用户变量，执行“<code>SHOW DATABASES;</code>” 。</p><p><strong>注意：在MySQL中，每一条SQL语句都以“;”作为结束标志。</strong></p></blockquote><h3 id="打开数据库"><a href="#打开数据库" class="headerlink" title="打开数据库"></a>打开数据库</h3><blockquote><p>因为MySQL服务器中有多个数据库，可以使用USE命令可指定当前数据库。</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法格式：</span></span><br><span class="line">USE 数据库名;</span><br></pre></td></tr></table></figure><blockquote><p>说明：这个语句也可以用来从一个数据库“跳转”到另一个数据库，在用<code>CREATE DATABASE</code>语句创建了数据库之后，该数据库不会自动成为当前数据库，需要用这条USE语句来指定。</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】将数据库test1设置为当前数据库。</span></span><br><span class="line">Use test1;</span><br></pre></td></tr></table></figure><h3 id="修改数据库"><a href="#修改数据库" class="headerlink" title="修改数据库"></a>修改数据库</h3><blockquote><p>数据库创建后，如果需要修改数据库的参数，可以使用<code>ALTER DATABASE;</code>命令。</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法格式：</span></span><br><span class="line"><span class="keyword">ALTER</span> &#123;DATABASE <span class="operator">|</span> SCHEMA&#125; [数据库名]</span><br><span class="line">               [[<span class="keyword">DEFAULT</span>] <span class="type">CHARACTER</span> <span class="keyword">SET</span> 字符集名 <span class="operator">|</span> [<span class="keyword">DEFAULT</span>] <span class="keyword">COLLATE</span> 校对规则名]</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 【例3.3】 修改数据库Pet的默认字符集为latin1，校对规则为latin1_swedish_ci。</span></span><br><span class="line"><span class="keyword">ALTER</span> DATABASE Pet</span><br><span class="line"><span class="keyword">DEFAULT</span> <span class="type">CHARACTER</span> <span class="keyword">SET</span> latin1</span><br><span class="line"><span class="keyword">DEFAULT</span> <span class="keyword">COLLATE</span>  latin1_swedish_ci; </span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="删除数据库"><a href="#删除数据库" class="headerlink" title="删除数据库"></a>删除数据库</h3><blockquote><p>已经创建的数据库需要删除，使用<code>DROP DATABASE</code>命令。</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法格式：</span></span><br><span class="line"><span class="keyword">DROP</span> DATABASE  [IF <span class="keyword">EXISTS</span>] 数据库名;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 例如，数据库test2命令如下：</span></span><br><span class="line"><span class="keyword">DROP</span> DATABASE  test2;</span><br></pre></td></tr></table></figure><h3 id="MySQL数据类型"><a href="#MySQL数据类型" class="headerlink" title="MySQL数据类型"></a>MySQL数据类型</h3><blockquote><ul><li>确定表中每列的数据类型是设计表的重要步骤。</li><li>列的数据类型就是定义该列所能存放的数据的值的类型。</li></ul></blockquote><table><thead><tr><th><strong>字符串类型</strong></th><th><strong>数值类型</strong></th><th><strong>时间类型</strong></th><th><strong>大数据类型</strong></th></tr></thead><tbody><tr><td>Char(n)</td><td>int</td><td>date</td><td>blob</td></tr><tr><td>Varchar(n)</td><td>Float(M,D)</td><td>time</td><td>text</td></tr><tr><td></td><td></td><td>datetime</td><td></td></tr></tbody></table><blockquote><p><strong>MySQL常用数据类型：</strong></p><ul><li>整数类型</li><li>浮点数类型和定点数类型</li><li>字符串类型</li><li>日期时间类型</li><li>复合类型</li></ul></blockquote><h4 id="整数类型"><a href="#整数类型" class="headerlink" title="整数类型"></a>整数类型</h4><blockquote><p>在int类型里，MySQL支持tinyint、smallint、mediumint、int、bigint 5种类型，这些类型都是用来存放整形数据的，只不过存储的值的大小范围不一样。</p></blockquote><p class='item-img' data-src='/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241208114347133.png'><img src="/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241208114347133.png" alt="整数类型"></p><h4 id="浮点数类型和定点数类型"><a href="#浮点数类型和定点数类型" class="headerlink" title="浮点数类型和定点数类型"></a>浮点数类型和定点数类型</h4><blockquote><p>MySQL支持float、double、decimal 3种类型，float是单精度浮点数值、double是双精度浮点数值、decimal是定点数值，如果确定数值总长度以及小数点位数，就可以用decimal定点数值来表示。</p></blockquote><p class='item-img' data-src='/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241208114456261.png'><img src="/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241208114456261.png" alt="浮点数类型和定点数类型"></p><blockquote><p>**提示：**存储数值范围越小，精度越高；存储数值范围越大，精度就越不准确。对于既要求精度又固定小数点位数的数值存储，采用decimal（numeric），其优点在于可以自定义小数点位数，精度高。某些特殊情况，如数值范围巨大则只能用float（real）类型了，此类型一般不提倡使用。</p></blockquote><h4 id="字符串类型"><a href="#字符串类型" class="headerlink" title="字符串类型"></a>字符串类型</h4><blockquote><p>MySQL数据库提供了几种基本字符串类型，它们用来存放一个字符、一个字符串、巨大的文本或者二进制字符串数据。</p></blockquote><p class='item-img' data-src='/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241208114702446.png'><img src="/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241208114702446.png" alt="字符串类型"></p><h4 id="日期时间类型"><a href="#日期时间类型" class="headerlink" title="日期时间类型"></a>日期时间类型</h4><blockquote><p>MySQL数据库提供了5种不同的日期时间类型，用来存储和日期时间相关的数据，每个时间类型有一个有效值范围和一个“零”值，当指定不合法的MySQL不能表示的值时使用“零”值。</p></blockquote><p class='item-img' data-src='/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241208114804811.png'><img src="/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241208114804811.png" alt="日期时间类型"></p><blockquote><p>**提示：**MySQL数据库用date日期类型和datetime日期时间类型来存储日期值，使用time时间类型来存储时间值，使用year来存放年份值，date 类型的值应该用连字号“-”分隔开，而 time 类型的值应该用冒号“:”分隔开。</p></blockquote><h4 id="如何选取数据类型"><a href="#如何选取数据类型" class="headerlink" title="如何选取数据类型"></a>如何选取数据类型</h4><blockquote><p>数据类型的选择会影响存储空间的开销和数据查询性能，所以在设计数据库的时候，应该为存储的数据选择正确的存储数据类型。</p></blockquote><blockquote><p><strong>可以遵循以下原则来选取数据类型：</strong></p><p>（1）大小合适就是最好的，如存放姓名的字段类型，设置合适长度的字符串就可以，而不应该设置得非常大（65 535），因为这样可以用更少的磁盘容量、CPU缓存，大大减少了I/O开销。</p><p>（2）简单存放就好，如存放一个简单而又短小的字符串，可以选取varchar类型，而不应该选取text或者blob类型，简单的数据类型操作通常需要更少的CPU周期。</p><p>（3）尽量避免使用NULL，NULL是列默认的属性，通常我们要指定为NOT NULL。有NULL的列值会使得索引、索引统计和值比较更加复杂。</p><p>（4）数据类型的选择还应该考虑数据操作和应用处理的要求，如某些类型更适合于加快数据操作而不是其他方面。</p><p>（5）如果想用不同的标准对一列中所有的值进行排序，那么我们需要选择一种能够有效执行这些功能并且带有最大限度灵活性的类型。对相应字段添加索引，能够加快检索速度。需要保证使用的数据类型支持比较运算，并且相互兼容。</p></blockquote><h5 id="char和varchar"><a href="#char和varchar" class="headerlink" title="char和varchar"></a>char和varchar</h5><blockquote><p>​char是固定长度的，查询速度比varchar快得多。char的缺点是浪费存储空间。检索char列时，返回的结果会删除尾部空格，所以程序需要对空格进行处理。</p><p>​如果列中要存储的数据的长度差不多是一致的，则应该考虑使用char，否则应该考虑使用varchar；如果列中最大数据的长度小于50Byte，则一般也考虑使用char(当然，如果这个列很少用，则基于节省空间和减少I/O的考虑，还是可以使用varchar)；一般不宜定义大于50Byte的char类型列。</p></blockquote><h5 id="text和blob"><a href="#text和blob" class="headerlink" title="text和blob"></a>text和blob</h5><blockquote><p>​在保存大文本时，通常选择text或者blob。二者的差别是blob可以保存二进制数据，如照片。text和blob又包括text、mediumtext、longtext和blob、mediumblob、longblob，它们之间的区别是存储文本长度不同和存储字节不同。在不必要的时候避免检索大型的blob或text值。把blob或text列分离到单独的表中。</p></blockquote><h5 id="浮点数和定点数"><a href="#浮点数和定点数" class="headerlink" title="浮点数和定点数"></a>浮点数和定点数</h5><blockquote><p>​浮点数存在误差问题，因此对于货币等对精度敏感的数据，应该用定点数表示或存储。在编程中，如果用到浮点数，要特别注意误差问题，并尽量避免做浮点数比较；要注意一些特殊值的处理。</p><p>​decimal用于存储精确数据，而float只能用于存储非精确的数据，故精确数据最好使用decimal类型；由于float的存储空间的开销一般比decimal小（精确到7位小数只需要4个字节，而精确到15位小数只需要8个字节），故非精确数据类型建议使用float。</p></blockquote><h5 id="日期类型的选择"><a href="#日期类型的选择" class="headerlink" title="日期类型的选择"></a>日期类型的选择</h5><blockquote><p>​根据实际需要选择能够满足应用的最小存储日期类型。如果记录年、月、日、时、分、秒，并且记录年份比较久远，则最好使用datetime，不要使用timestamp；如果记录的日期需要让不同时区的用户使用，则最好使用timestamp，因为日期类型中只有它能够和实际时区相对应。</p></blockquote><h3 id="创建数据表"><a href="#创建数据表" class="headerlink" title="创建数据表"></a>创建数据表</h3><blockquote><p>为数据库<strong>创建数据表</strong>，可以使用SQL命令<code>CREATE TABLE</code>来完成</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法格式：</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> [IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span>] tbl_name</span><br><span class="line">      （列名<span class="number">1</span>  数据类型<span class="number">1</span>  [<span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="operator">|</span> <span class="keyword">NULL</span>] [<span class="keyword">DEFAULT</span> 列默认值]…，</span><br><span class="line">         列名<span class="number">2</span>  数据类型 <span class="number">2</span> [<span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="operator">|</span> <span class="keyword">NULL</span>] [<span class="keyword">DEFAULT</span> 列默认值]…</span><br><span class="line">       ）</span><br><span class="line">       ENGINE <span class="operator">=</span> 存储引擎；</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】命令行SQL语句方式创建数据库表book</span></span><br></pre></td></tr></table></figure><table><thead><tr><th><strong>字段名</strong></th><th><strong>字段类型</strong></th><th><strong>宽度</strong></th><th><strong>是否为空</strong></th><th><strong>默认值</strong></th><th><strong>说明</strong></th></tr></thead><tbody><tr><td><strong>图书编号</strong></td><td><strong>char</strong></td><td><strong>10</strong></td><td>x</td><td></td><td><strong>主键，采用10位字符编号</strong></td></tr><tr><td><strong>类别</strong></td><td><strong>char</strong></td><td><strong>8</strong></td><td>x</td><td><strong>计算机</strong></td><td><strong>2-4个汉字</strong></td></tr><tr><td><strong>书名</strong></td><td><strong>varchar</strong></td><td><strong>40</strong></td><td>x</td><td></td><td><strong>不超过40个字符</strong></td></tr><tr><td><strong>出版时间</strong></td><td><strong>date</strong></td><td></td><td>x</td><td></td><td></td></tr><tr><td><strong>单价</strong></td><td><strong>Float</strong></td><td><strong>5,2</strong></td><td><strong>√</strong></td><td></td><td><strong>元为单位，精确到分</strong></td></tr><tr><td><strong>数量</strong></td><td><strong>int</strong></td><td></td><td><strong>√</strong></td><td></td><td></td></tr></tbody></table><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 命令如下：</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span>  book</span><br><span class="line"> (</span><br><span class="line">       图书编号  <span class="type">char</span>(<span class="number">10</span>)   <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">       类别  <span class="type">varchar</span>(<span class="number">8</span>)  <span class="keyword">NOT</span> <span class="keyword">NULL</span>  <span class="keyword">DEFAULT</span>  <span class="string">&#x27;计算机&#x27;</span>,</span><br><span class="line">       书名       <span class="type">varchar</span>(<span class="number">40</span>)  <span class="keyword">NOT</span>  <span class="keyword">NULL</span> ,</span><br><span class="line">       出版时间   <span class="type">date</span>        <span class="keyword">NOT</span>  <span class="keyword">NULL</span> ,</span><br><span class="line">       单价      <span class="type">float</span>(<span class="number">5</span>,<span class="number">2</span>)    <span class="keyword">NULL</span> ,</span><br><span class="line">       数量      <span class="type">int</span>   </span><br><span class="line">); </span><br></pre></td></tr></table></figure><h3 id="显示数据表文件名"><a href="#显示数据表文件名" class="headerlink" title="显示数据表文件名"></a>显示数据表文件名</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法格式： </span></span><br><span class="line"><span class="keyword">SHOW</span> TABLES;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 【例】显示Bookstore 数据库建立的数据表文件:</span></span><br><span class="line">USE Bookstore;  </span><br><span class="line"><span class="keyword">SHOW</span> TABLES;</span><br></pre></td></tr></table></figure><h3 id="显示数据表结构"><a href="#显示数据表结构" class="headerlink" title="显示数据表结构"></a>显示数据表结构</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法格式(DESC是DESCRIBE的简写，二者用法相同。)：</span></span><br><span class="line">&#123;<span class="keyword">DESCRIBE</span> <span class="operator">|</span> <span class="keyword">DESC</span>&#125; 表名 [列名 <span class="operator">|</span> 通配符 ]</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 【例】 用DESCRIBE语句查看 Book 表的列的信息。</span></span><br><span class="line">USE Bookstore;</span><br><span class="line"><span class="keyword">DESCRIBE</span> Book;</span><br><span class="line"><span class="comment">-- 【例】 查看 Book 表图书编号列的信息。</span></span><br><span class="line">USE Bookstore;</span><br><span class="line"><span class="keyword">DESC</span> Book 图书编号;</span><br></pre></td></tr></table></figure><h3 id="修改表"><a href="#修改表" class="headerlink" title="修改表"></a>修改表</h3><blockquote><p>**<code>ALTER TABLE</code>**用于更改原有表的结构。例如，可以增加或删减列，创建或取消索引，更改原有列的类型，重新命名列或表，还可以更改表的评注和表的类型。</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法格式：</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名</span><br><span class="line">  <span class="keyword">ADD</span> [<span class="keyword">COLUMN</span>] 列定义  [<span class="keyword">FIRST</span> <span class="operator">|</span> AFTER列名]                 <span class="comment">/*添加列*/</span></span><br><span class="line">  <span class="operator">|</span> <span class="keyword">ALTER</span> [<span class="keyword">COLUMN</span>] 列名 &#123;<span class="keyword">SET</span> <span class="keyword">DEFAULT</span> 默认值<span class="operator">|</span> <span class="keyword">DROP</span> <span class="keyword">DEFAULT</span>&#125;  <span class="comment">/*修改默认值*/</span></span><br><span class="line">  <span class="operator">|</span> CHANGE [<span class="keyword">COLUMN</span>] 旧列名 列定义    [<span class="keyword">FIRST</span><span class="operator">|</span>AFTER列名]  <span class="comment">/*对列重命名*/</span>             </span><br><span class="line">  <span class="operator">|</span> MODIFY [<span class="keyword">COLUMN</span>] 列定义 [<span class="keyword">FIRST</span> <span class="operator">|</span> AFTER 列名]     <span class="comment">/*修改列类型*/</span></span><br><span class="line">  <span class="operator">|</span> <span class="keyword">DROP</span> [<span class="keyword">COLUMN</span>] 列名<span class="comment">/*删除列*/</span></span><br><span class="line">  <span class="operator">|</span> RENAME [<span class="keyword">TO</span>] 新表名         <span class="comment">/*重命名该表*/</span> </span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="增加列"><a href="#增加列" class="headerlink" title="增加列"></a>增加列</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法格式</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span>  表名   <span class="keyword">ADD</span>  列定义  [<span class="keyword">FIRST</span> <span class="operator">|</span> AFTER  列名];</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 【例】在表book中增加一列“浏览次数”。</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> book  <span class="keyword">ADD</span> 浏览次数 <span class="type">int</span> <span class="keyword">NULL</span>;</span><br><span class="line"><span class="comment">-- 【扩展】在表book中增加一列“浏览次数”，位置在单价列的后面。</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> book  <span class="keyword">ADD</span> 浏览次数 <span class="type">int</span> <span class="keyword">NULL</span> after 单价;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="删除列"><a href="#删除列" class="headerlink" title="删除列"></a>删除列</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法格式</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span>  表名  <span class="keyword">DROP</span> 列名</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 【例】删除book表中“浏览次数”列。</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> book <span class="keyword">DROP</span> 浏览次数;</span><br><span class="line"><span class="comment">-- 【扩展】在表book中增加“浏览次数”列，删除“封面图片”列。</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> book  <span class="keyword">ADD</span> 浏览次数 <span class="type">int</span> <span class="keyword">NULL</span>, <span class="keyword">DROP</span> 封面图片;</span><br></pre></td></tr></table></figure><h4 id="更改列名"><a href="#更改列名" class="headerlink" title="更改列名"></a>更改列名</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法格式</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span>  表名  CHANGE  旧列名  列定义 </span><br><span class="line"></span><br><span class="line"><span class="comment">-- 【例】将book表中“出版时间”列改为“出版日期”列。</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> book  CHANGE 出版时间 出版日期 <span class="type">date</span> <span class="keyword">not</span> <span class="keyword">null</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="更改列类型"><a href="#更改列类型" class="headerlink" title="更改列类型"></a>更改列类型</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法格式</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span>  表名  MODIFY 列定义</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 【例】将book表中“出版日期”列类型改为日期时间类型。</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> book MODIFY 出版日期 datetime <span class="keyword">not</span> <span class="keyword">null</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="总结-2"><a href="#总结-2" class="headerlink" title="总结-2"></a>总结</h4><blockquote><p><code>ALTER TABLE</code>用于更改原有表的结构。可以增加或删减列，创建或取消索引，更改原有列的类型，重新命名列或表，还可以更改表完整性约束和表的类型等。</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">增加列：<span class="keyword">ALTER</span> <span class="keyword">TABLE</span>  表名  <span class="keyword">ADD</span>  列定义</span><br><span class="line">删除列：<span class="keyword">ALTER</span> <span class="keyword">TABLE</span>  表名  <span class="keyword">DROP</span> 列名</span><br><span class="line">更改列名：<span class="keyword">ALTER</span> <span class="keyword">TABLE</span>  表名  CHANGE  旧列名  列定义 </span><br><span class="line">更改列类型：<span class="keyword">ALTER</span> <span class="keyword">TABLE</span>  表名  MODIFY 列定义</span><br></pre></td></tr></table></figure><h3 id="复制表"><a href="#复制表" class="headerlink" title="复制表"></a>复制表</h3><blockquote><ul><li>使用LIKE关键字创建一个与参照表相同结构的新表，但内容不会复制，因此创建的新表是一个空表。</li><li>使用AS关键字可以复制表的内容，但索引和完整性约束是不会复制的。</li></ul></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法格式如下：</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> [IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span>] 新表名</span><br><span class="line">     [ <span class="keyword">LIKE</span> 参照表名 ] <span class="operator">|</span> [<span class="keyword">AS</span> (<span class="keyword">select</span>语句)]</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 【例】 假设数据库BookStore中有一个表Book，创建Book表的一个名为book_copy1的拷贝。</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> book_copy1 <span class="keyword">LIKE</span> Book; </span><br></pre></td></tr></table></figure><h3 id="删除表"><a href="#删除表" class="headerlink" title="删除表"></a>删除表</h3><blockquote><p>这个命令将表的描述、表的完整性约束、索引及和表相关的权限等都全部删除。</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法格式如下：</span></span><br><span class="line"><span class="keyword">DROP</span>  <span class="keyword">TABLE</span> [IF <span class="keyword">EXISTS</span>] 表名<span class="number">1</span> [,表名<span class="number">2</span> ] ...</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 【例】 删除表test。</span></span><br><span class="line">USE XSCJ  <span class="keyword">DROP</span>  <span class="keyword">TABLE</span>  IF  <span class="keyword">EXISTS</span>  test ;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="数据完整性"><a href="#数据完整性" class="headerlink" title="数据完整性"></a>数据完整性</h3><blockquote><p><strong>数据完整性有以下几个方面：</strong></p><ul><li>实体完整性</li><li>域完整性</li><li>参照完整性</li><li>用户定义的完整性</li></ul></blockquote><table><thead><tr><th><strong>完整性类型</strong></th><th><strong>约束类型</strong></th><th><strong>描 述</strong></th><th><strong>约束对象</strong></th></tr></thead><tbody><tr><td><strong>列完整性</strong></td><td><strong>Default</strong></td><td><strong>当使用INSERT语句插入数据时，若已定义默认值的列没有提供指定值，则将该默认值插入记录中</strong></td><td><strong>列</strong></td></tr><tr><td><strong>列完整性</strong></td><td><strong>Check</strong></td><td><strong>指定某一列可接受的值</strong></td><td><strong>列</strong></td></tr><tr><td><strong>实体完整性</strong></td><td><strong>Primary Key</strong></td><td><strong>每行记录的惟一标识符，确保用户不能输入重复值，并自动创建索引，提高性能，该列不允许使用空值</strong></td><td><strong>行</strong></td></tr><tr><td><strong>实体完整性</strong></td><td><strong>Unique</strong></td><td><strong>在列集内强制执行值的惟一性，防止出现重复值，表中不允许有两行的同一列包含相同的非空值</strong></td><td><strong>行</strong></td></tr><tr><td><strong>参考完整性</strong></td><td><strong>Foreign Key</strong></td><td><strong>定义一列或几列，其值于本表或其他表的主键或UNIQUE列相匹配</strong></td><td><strong>表与表之间</strong></td></tr></tbody></table><blockquote><p><strong>提示：</strong></p><p>使用SQL语句给数据表添加约束有两种方式：</p><ul><li>一是在创建数据表时，将约束语句添加在相应字段或数据表中。</li><li>二是在已有的数据表中，使用ADD 语句将约束添加在相应的字段或数据表中。</li></ul></blockquote><h3 id="主键约束——primary-key"><a href="#主键约束——primary-key" class="headerlink" title="主键约束——primary-key"></a>主键约束——primary key</h3><blockquote><ul><li><strong>主键</strong>就是表中的<strong>一列或多个列的一组</strong>，其值能<strong>唯一</strong>地标志表中的每一行。</li><li>通过定义PRIMARY KEY约束来创建主键，而且PRIMARY KEY约束中的<strong>列不能取空值</strong>。</li><li>如果 PRIMARY KEY 约束是由多列组合定义的，则某一列的值可以重复，但 PRIMARY KEY 约束定义中所有列的<strong>组合值必须唯一</strong>。</li><li>可以用<strong>两种方式定义主键</strong>：作为<strong>列或表的完整性约束</strong>。作为<strong>列</strong>的完整性约束时，只需在列定义的时候加上关键字PRIMARY KEY。作为<strong>表</strong>的完整性约束时，需要在语句最后加上一条PRIMARY KEY（col_name，…）语句。</li></ul></blockquote><h4 id="语法格式"><a href="#语法格式" class="headerlink" title="语法格式"></a>语法格式</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1、创建数据表添加主键约束的语法格式为：</span></span><br><span class="line"><span class="keyword">CREATE</span>  <span class="keyword">TABLE</span>  tb_name    (</span><br><span class="line"> 列名  数据类型  <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">PRIMARY</span> KEY<span class="comment">/*列级*/</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">PRIMARY</span> KEY(列名<span class="number">1</span>[,列名<span class="number">2</span>]); <span class="comment">/*表级*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2、在已有数据表添加主键约束的语法格式为：</span></span><br><span class="line"><span class="keyword">ALTER</span>  <span class="keyword">TABLE</span>  tb_name <span class="keyword">ADD</span> <span class="keyword">PRIMARY</span> KEY(列名<span class="number">1</span>[,列名<span class="number">2</span>]);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3、删除主键约束的语法格式为：</span></span><br><span class="line"><span class="keyword">ALTER</span>  <span class="keyword">TABLE</span>  tb_name <span class="keyword">DROP</span> <span class="keyword">PRIMARY</span> KEY;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- （1）列的完整性约束：</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 【例】 创建表book2，将编号定义为主键。</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> book2</span><br><span class="line">    (  编号 <span class="type">char</span>(<span class="number">6</span>)  <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">       书名 <span class="type">char</span>(<span class="number">10</span>)  <span class="keyword">NOT</span>  <span class="keyword">NULL</span>,</span><br><span class="line">       数量 <span class="type">int</span> );</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- （2）表的完整性约束：</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 【例】在已有的cj表，将学号和课程号定义为复合主键。ALTER   TABLE cj</span></span><br><span class="line"><span class="keyword">ADD</span> <span class="keyword">PRIMARY</span>  KEY (学号, 课程号);</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>原则上，任何列或者列的组合都可以充当一个主键。但是主键列必须遵守一些规则。</p><p>（1）<strong>每个表只能定义一个主键。</strong></p><p>（2）关系模型理论要求必须为每个表定义一个主键。</p><p>（3）<strong>唯一性原则</strong>：表中的两个不同的行在主键上不能具有相同的值。</p><p>（4）<strong>最小化规则</strong>：如果从一个复合主键中删除一列后，剩下的列构成主键仍然满足唯一性原则，那么，这个复合                   主键是不正确的，这条规则称为最小化规则。</p><p>MySQL自动地为主键创建一个索引。通常，这个索引名为PRIMARY。然而，可以重新给这个索引起名。</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】 删除Book表上的主键约束。</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> Book;</span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">PRIMARY</span> KEY;</span><br></pre></td></tr></table></figure><h3 id="唯一约束（替代键约束）——unique"><a href="#唯一约束（替代键约束）——unique" class="headerlink" title="唯一约束（替代键约束）——unique"></a>唯一约束（替代键约束）——unique</h3><h4 id="语法格式-2"><a href="#语法格式-2" class="headerlink" title="语法格式-2"></a>语法格式</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1、创建数据表添加唯一约束的语法格式为：</span></span><br><span class="line"><span class="keyword">CREATE</span>  <span class="keyword">TABLE</span>  tb_name (列名  数据类型  [<span class="keyword">NULL</span><span class="operator">|</span><span class="keyword">NOT</span> <span class="keyword">NULL</span> ] <span class="keyword">UNIQUE</span>,……);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2、在已有数据表添加唯一约束的语法格式为：</span></span><br><span class="line"><span class="keyword">ALTER</span>  <span class="keyword">TABLE</span>  tb_name <span class="keyword">ADD</span> <span class="keyword">UNIQUE</span>(列名);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3、删除唯一约束的语法格式为：</span></span><br><span class="line"><span class="keyword">ALTER</span>  <span class="keyword">TABLE</span>  tb_name <span class="keyword">DROP</span> INDEX 约束名;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>在关系模型中，唯一约束像主键一样，是表的一列或一组列，它们的值在任何时候都是唯一的。替代键是没有被选做主键的候选键。定义替代键的关键字是<strong>UNIQUE</strong>。</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】 创建表book_copy1中将图书编号作为主键，书名列定义为唯一约束。</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> book_copy1</span><br><span class="line">   (  图书编号 <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">primary</span> key,</span><br><span class="line">    书名     <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">UNIQUE</span>,</span><br><span class="line">    出版日期 <span class="type">date</span> <span class="keyword">NULL</span>  );</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 【例】假设已有Book表中主键未设定，给图书编号添加主键约束,给书名添加唯一性约束。</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> Book</span><br><span class="line"><span class="keyword">ADD</span> <span class="keyword">PRIMARY</span> KEY(图书编号), </span><br><span class="line"><span class="keyword">ADD</span> <span class="keyword">UNIQUE</span> u_idx (书名) ;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><ul><li>这个例外键中，既包括主键约束, 也包括唯一性约束，说明MySQL可以<strong>同时创建多个约束</strong>。记住，使用PRIMARY KEY的列，必须是一个具有NOT NULL属性的列。</li><li>如果想要查看表中创建的约束的情况，可以使用语句，</li><li>例如：<code>SHOW INDEX FROM book;</code></li></ul></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】 删除Book表上的唯一约束。</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> Book <span class="keyword">DROP</span> index u_idx ;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>在MySQL中替代键和主键的区别主要有以下几点。</p><ol><li>一个数据表只能创建一个主键。但一个表可以有若干个UNIQUE键，并且它们甚至可以重合，例如，在C1和C2列上定义了一个替代键，并且在C2和C3上定义了另一个替代键，这两个替代键在C2列上重合了，而MySQL允许这样。</li><li>主键字段的值不允许为NULL，而UNIQUE字段的值可取NULL，但是必须使用NULL或NOT NULL声明。</li><li>一般创建PRIMARY KEY约束时，系统会自动产生PRIMARY KEY索引。创建UNIQUE约束时，系统自动产生UNIQUE索引。</li></ol></blockquote><h3 id="外键约束——foreign-key"><a href="#外键约束——foreign-key" class="headerlink" title="外键约束——foreign-key"></a>外键约束——foreign key</h3><h4 id="语法格式-3"><a href="#语法格式-3" class="headerlink" title="语法格式-3"></a>语法格式</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1、创建表的同时创建外键</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> 表名( 列名, ... </span><br><span class="line">       <span class="keyword">FOREIGN</span> KEY (列名)  <span class="keyword">REFERENCES</span> 表名 [(列名 [(长度)] [<span class="keyword">ASC</span> <span class="operator">|</span> <span class="keyword">DESC</span>],...)]</span><br><span class="line">       [<span class="keyword">ON</span> <span class="keyword">DELETE</span>  &#123;RESTRICT <span class="operator">|</span> CASCADE <span class="operator">|</span> <span class="keyword">SET</span> <span class="keyword">NULL</span> <span class="operator">|</span> <span class="keyword">NO</span> ACTION&#125;]</span><br><span class="line">       [<span class="keyword">ON</span> <span class="keyword">UPDATE</span>  &#123;RESTRICT <span class="operator">|</span> CASCADE <span class="operator">|</span> <span class="keyword">SET</span> <span class="keyword">NULL</span> <span class="operator">|</span> <span class="keyword">NO</span> ACTION&#125;] ）;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2、对已有表创建外键                </span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名  </span><br><span class="line"><span class="keyword">ADD</span> <span class="keyword">FOREIGN</span> KEY (列名)  <span class="keyword">REFERENCES</span> 表名 [(列名 [(长度)] [<span class="keyword">ASC</span> <span class="operator">|</span> <span class="keyword">DESC</span>],...)]</span><br><span class="line">       [<span class="keyword">ON</span> <span class="keyword">DELETE</span>  &#123;RESTRICT <span class="operator">|</span> CASCADE <span class="operator">|</span> <span class="keyword">SET</span> <span class="keyword">NULL</span> <span class="operator">|</span> <span class="keyword">NO</span> ACTION&#125;]</span><br><span class="line">       [<span class="keyword">ON</span> <span class="keyword">UPDATE</span>  &#123;RESTRICT <span class="operator">|</span> CASCADE <span class="operator">|</span> <span class="keyword">SET</span> <span class="keyword">NULL</span> <span class="operator">|</span> <span class="keyword">NO</span> ACTION&#125;]</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3、删除外键约束                </span></span><br><span class="line"><span class="keyword">ALTER</span>  <span class="keyword">TABLE</span>  tb_name <span class="keyword">DROP</span> <span class="keyword">FOREIGN</span> KEY 约束名; </span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p><strong>参数解释：</strong></p><ul><li><strong>RESTRICT</strong>：当要删除或更新主键中被参照列上在外键中出现的值时， <strong>拒绝</strong>对主键的删除或更新操作。如：要当要删除xs表中081102记录时，因为cj中还有081102记录，拒绝对xs表的删除操作。</li><li><strong>CASCADE</strong>：从主键删除或更新行时自动删除或更新外键表中匹配的行。如：从xs表更新081102学号为801102时自动更新cj表中学号为081102行为801102 。</li><li><strong>SET NULL</strong>：当从主键表删除或更新行时，设置外键表中与之对应的外键列为NULL。如：当从xs表删除081103行时，设置cj表中081103项为NULL。</li><li><strong>NO ACTION</strong>：NO ACTION意味着不采取动作，就是如果有一个相关的外键值在被参考的表里，删除或更新主键表中主要键值的企图不被允许，和RESTRICT一样。</li><li><strong>SET DEFAULT</strong>：作用和SET NULL一样，只不过SET DEFAULT是指定外键表中的外键列为默认值。</li><li>如果没有指定动作，两个参照动作就会<strong>默认地使用RESTRICT。</strong></li></ul></blockquote><h4 id="案例-2"><a href="#案例-2" class="headerlink" title="案例-2"></a>案例</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】 创建带有参照动作CASCADE的book_ref1表。</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> book_ref1   (  </span><br><span class="line">     图书编号 　 <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">NULL</span>,</span><br><span class="line">     书名　　  　<span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">     出版日期 　 <span class="type">date</span> <span class="keyword">NULL</span>,</span><br><span class="line">     <span class="keyword">PRIMARY</span> KEY (书名),</span><br><span class="line">     <span class="keyword">FOREIGN</span> KEY (图书编号)</span><br><span class="line">     <span class="keyword">REFERENCES</span> Book (图书编号)</span><br><span class="line">     <span class="keyword">ON</span>  <span class="keyword">UPDATE</span>  CASCADE</span><br><span class="line">    )ENGINE<span class="operator">=</span>INNODB;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 这个参照动作的作用是在主表更新时，外键表产生连锁更新动作，有些人称它为“级联”操作。举例说，如果book表中有一个图书编号为“TP.2525”的值修改为“TP.2525-1”，则book_ref1表中的“图书编号”列中的值“TP.2525”相应地改为“TP.2525-1”。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 通过修改添加</span></span><br><span class="line"><span class="comment">-- 【例】  在网络图书销售系统中，只有会员才能下订单。因此Sell表中的所有用户号也必须出现在Members表的用户号列中。定义参照完整性约束来实现这种约束。</span></span><br><span class="line"> <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> sell </span><br><span class="line"> <span class="keyword">ADD</span> <span class="keyword">FOREIGN</span> KEY (用户号) </span><br><span class="line"> <span class="keyword">REFERENCES</span> members (用户号) </span><br><span class="line"> <span class="keyword">ON</span> <span class="keyword">DELETE</span> CASCADE </span><br><span class="line"> <span class="keyword">ON</span> <span class="keyword">UPDATE</span> CASCADE;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="检查约束——check"><a href="#检查约束——check" class="headerlink" title="检查约束——check"></a>检查约束——check</h3><blockquote><p>主键、替代键、外键都是常见的完整性约束的实例。但是，每个数据库都还有一些专用的完整性约束。</p><p>例如，KC表中星期数要在1～7之间，XS表中出生日期必须大于1986年1月1日。这样的规则可以使用CHECK完整性约束来指定。</p></blockquote><blockquote><p>CHECK完整性约束在创建表的时候定义。可以定义为列完整性约束，也可以定义为表完整性约束。</p></blockquote><h4 id="语法格式-4"><a href="#语法格式-4" class="headerlink" title="语法格式-4"></a>语法格式</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1、创建数据表添加检查约束的语法格式为：</span></span><br><span class="line"><span class="keyword">CREATE</span>  <span class="keyword">TABLE</span>  tb_name    (</span><br><span class="line"> 列名  数据类型  [<span class="keyword">NULL</span> <span class="operator">|</span><span class="keyword">NOT</span> <span class="keyword">NULL</span>]…… <span class="keyword">CHECK</span>(expr),列级<span class="operator">|</span> <span class="keyword">CHECK</span>(expr) );表级</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2、在已有数据表添加检查约束的语法格式为：</span></span><br><span class="line"><span class="keyword">ALTER</span>  <span class="keyword">TABLE</span>  tb_name <span class="keyword">ADD</span> <span class="keyword">CHECK</span>(expr);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3、删除检查约束的语法格式为：</span></span><br><span class="line"><span class="keyword">ALTER</span>  <span class="keyword">TABLE</span>  tb_name <span class="keyword">DROP</span> <span class="keyword">CHECK</span> 约束名;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>说明：expr是一个表达式，指定需要检查的条件，在更新表数据的时候，MySQL会检查更新后的数据行是否满足CHECK的条件。</p></blockquote><h4 id="案例-3"><a href="#案例-3" class="headerlink" title="案例-3"></a>案例</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】 创建表student，只考虑学号和性别两列，性别只能包含男或女。</span></span><br><span class="line"><span class="keyword">CREATE</span>  <span class="keyword">TABLE</span>  student    (</span><br><span class="line">    学号 <span class="type">char</span>(<span class="number">6</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    性别 <span class="type">char</span>(<span class="number">2</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">CHECK</span>(性别 <span class="keyword">IN</span> (<span class="string">&#x27;男&#x27;</span>, <span class="string">&#x27;女&#x27;</span>))</span><br><span class="line">     );</span><br><span class="line"><span class="comment">-- 这里CHECK完整性约束指定了性别允许哪个值，由于CHECK包含在列自身的定义中，所以CHECK完整性约束被定义为列完整性约束。</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 【例】创建student3表，有学号，最好成绩，平均成绩3列，要求最好成绩必须大于平均成绩。</span></span><br><span class="line"> <span class="keyword">CREATE</span>  <span class="keyword">TABLE</span>  student3    (</span><br><span class="line">    学号 <span class="type">char</span>(<span class="number">6</span>)    <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    最好成绩 <span class="type">int</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    平均成绩 <span class="type">int</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    <span class="keyword">check</span>(最好成绩<span class="operator">&gt;</span>平均成绩); </span><br><span class="line"><span class="comment">-- 如果指定的完整性约束中要相互比较一个表或者两个或者多个列，那么该列的完整性约束必须定义为表完整性约束。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- CHECK约束可以同时定义多个，中间用逗号隔开。</span></span><br><span class="line"><span class="comment">-- 【例】 修改book表，单价必须大于等于0，折扣在0.1-1之间。</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> book</span><br><span class="line"><span class="keyword">add</span> <span class="keyword">check</span>(单价<span class="operator">&gt;</span><span class="number">0</span>),</span><br><span class="line"><span class="keyword">add</span> <span class="keyword">check</span>(折扣<span class="operator">&gt;=</span><span class="number">0.1</span> <span class="keyword">and</span> 折扣<span class="operator">&lt;=</span><span class="number">1</span>);     </span><br><span class="line">     </span><br></pre></td></tr></table></figure><h3 id="默认约束——default"><a href="#默认约束——default" class="headerlink" title="默认约束——default"></a>默认约束——default</h3><blockquote><p>默认约束的作用是给列设置一个默认值，在缺省录入的情况下，会自动填充默认值。</p></blockquote><h4 id="语法格式-5"><a href="#语法格式-5" class="headerlink" title="语法格式-5"></a>语法格式</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1、创建数据表添加默认约束的语法格式为：</span></span><br><span class="line"><span class="keyword">CREATE</span>  <span class="keyword">TABLE</span>  tb_name    (</span><br><span class="line"> 列名  数据类型  [<span class="keyword">NULL</span> <span class="operator">|</span><span class="keyword">NOT</span> <span class="keyword">NULL</span>]  <span class="keyword">default</span>  ‘列默认值’,……);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2、在已有数据表添加和修改默认约束的语法格式为：</span></span><br><span class="line">（<span class="number">1</span>）添加默认约束</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 modify 列名 数据类型 <span class="keyword">default</span> ‘默认值’;</span><br><span class="line">（<span class="number">2</span>）修改默认值</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">alter</span> <span class="keyword">column</span> 列名 <span class="keyword">set</span> <span class="keyword">default</span> ‘默认值’;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3、删除默认约束的语法格式为：</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">alter</span> <span class="keyword">column</span> 列名 <span class="keyword">drop</span> <span class="keyword">default</span>；</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="案例-4"><a href="#案例-4" class="headerlink" title="案例-4"></a>案例</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】book表中将折扣设置默认值为0.8折</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> book</span><br><span class="line">modify 折扣 <span class="type">decimal</span>(<span class="number">2</span>,<span class="number">1</span>) <span class="keyword">default</span> <span class="number">0.8</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 【例】book表中将折扣默认值修改为0.7折</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> book</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">column</span> 折扣 <span class="keyword">set</span>  <span class="keyword">default</span> <span class="number">0.7</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 【例】删除book表折扣列的默认约束</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> book</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">column</span> 折扣 <span class="keyword">drop</span> <span class="keyword">default</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="查看表相关信息"><a href="#查看表相关信息" class="headerlink" title="查看表相关信息"></a>查看表相关信息</h3><h4 id="格式"><a href="#格式" class="headerlink" title="格式"></a>格式</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">create</span> <span class="keyword">table</span> 表名;</span><br></pre></td></tr></table></figure><blockquote><p>这个命令可以查看表的所有信息，包括一些字段类型，字段的约束，外键，主键，索引，字符编码等等</p></blockquote><h3 id="删除完整性约束"><a href="#删除完整性约束" class="headerlink" title="删除完整性约束"></a>删除完整性约束</h3><blockquote><p>如果使用一条<strong>DROP TABLE</strong>语句删除一个表，所有的完整性约束都自动被删除了,被参照表的所有外键也都被删除了。</p><p>使用<strong>ALTER TABLE</strong>语句，完整性可以独立地被删除，而不用去删除表本身。</p></blockquote><h4 id="案例-5"><a href="#案例-5" class="headerlink" title="案例-5"></a>案例</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】 删除表book的主键，删除sell表的外键，删除book表的单价check约束。</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> book <span class="keyword">DROP</span> <span class="keyword">PRIMARY</span> KEY;</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> sell <span class="keyword">DROP</span> <span class="keyword">FOREIGN</span> KEY sell_ibfk_1;</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> book <span class="keyword">DROP</span> <span class="keyword">check</span> book_chk_1;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="归纳总结"><a href="#归纳总结" class="headerlink" title="归纳总结"></a>归纳总结</h3><blockquote><p>归纳总结：使用ALTER TABLE管理约束</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1、显示表中的约束</span></span><br><span class="line"><span class="keyword">show</span> keys <span class="keyword">from</span> 表名;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2、主键约束</span></span><br><span class="line">（<span class="number">1</span>）添加主键约束</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名<span class="keyword">add</span> <span class="keyword">primary</span> key (列名)；</span><br><span class="line">（<span class="number">2</span>）删除主键约束</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span>  表名 <span class="keyword">drop</span> <span class="keyword">primary</span> key</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3、唯一约束</span></span><br><span class="line">（<span class="number">1</span>）添加唯一约束</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span>  表名 <span class="keyword">add</span> <span class="keyword">unique</span> (列名)；</span><br><span class="line">（<span class="number">2</span>）删除唯一约束</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span>  表名 <span class="keyword">drop</span> index 约束名；</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 4、外键约束</span></span><br><span class="line">（<span class="number">1</span>）添加外键约束</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 外键表 <span class="keyword">add</span> <span class="keyword">foreign</span> key (外键) </span><br><span class="line"><span class="keyword">references</span> 主键表(主键);</span><br><span class="line">（<span class="number">2</span>）删除外键约束</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 外键表  <span class="keyword">drop</span> <span class="keyword">foreign</span> key  约束名; </span><br><span class="line">          </span><br><span class="line"><span class="comment">-- 5、默认约束</span></span><br><span class="line">（<span class="number">1</span>）添加默认约束</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 modify 列名 数据类型 <span class="keyword">default</span> ‘默认值’;</span><br><span class="line">（<span class="number">2</span>）修改默认值</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">alter</span> <span class="keyword">column</span> 列名 <span class="keyword">set</span> <span class="keyword">default</span> ‘默认值’;</span><br><span class="line">（<span class="number">3</span>）删除默认约束</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">alter</span> <span class="keyword">column</span> 列名 <span class="keyword">drop</span> <span class="keyword">default</span>；</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 6、检查约束</span></span><br><span class="line">（<span class="number">1</span>）添加检查约束</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">add</span> <span class="keyword">check</span>(约束表达式);</span><br><span class="line">（<span class="number">2</span>）删除检查 约束</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">drop</span> <span class="keyword">check</span> 约束名</span><br></pre></td></tr></table></figure><h3 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 实训3-3 SQL语句修改数据表实训</span></span><br><span class="line"><span class="comment">-- 使用SQL语句实现下列操作(P84)</span></span><br><span class="line"><span class="comment">-- 1、创建schooldb数据库</span></span><br><span class="line"><span class="keyword">create</span> database schooldb;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2、创建schooldb各表</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> class  (</span><br><span class="line">  班级编号 <span class="type">char</span>(<span class="number">6</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">  班级名称 <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  院系 <span class="type">varchar</span>(<span class="number">30</span>)  <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  年级 <span class="type">int</span> <span class="keyword">NULL</span> ,</span><br><span class="line">  人数 <span class="type">int</span> <span class="keyword">NULL</span></span><br><span class="line">) ;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> course  (</span><br><span class="line">  课程号 <span class="type">char</span>(<span class="number">6</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">  课程名 <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  学分 <span class="type">int</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  学时 <span class="type">int</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  学期 <span class="type">char</span>(<span class="number">2</span>)  <span class="keyword">NULL</span> ,</span><br><span class="line">  前置课 <span class="type">char</span>(<span class="number">6</span>) <span class="keyword">NULL</span> </span><br><span class="line"> );</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> score  (</span><br><span class="line">  学号 <span class="type">char</span>(<span class="number">10</span>)  <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  课程号 <span class="type">char</span>(<span class="number">6</span>)  <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  成绩 <span class="type">float</span>(<span class="number">5</span>,<span class="number">2</span>) <span class="keyword">NULL</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (学号, 课程号) </span><br><span class="line">);</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> student  (</span><br><span class="line">  学号 <span class="type">char</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">PRIMARY</span> KEY ,</span><br><span class="line">  姓名 <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  性别 <span class="type">char</span>(<span class="number">2</span>)  <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  出生日期 <span class="type">date</span> <span class="keyword">NULL</span>,</span><br><span class="line">  地区 <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">NULL</span> ,</span><br><span class="line">  民族 <span class="type">varchar</span>(<span class="number">10</span>)  <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;汉&#x27;</span>,</span><br><span class="line">  班级编号 <span class="type">char</span>(<span class="number">6</span>)  <span class="keyword">NULL</span> </span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3、查看schooldb中的表文件</span></span><br><span class="line"><span class="keyword">show</span> tables;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 4、查看course表结构</span></span><br><span class="line"><span class="keyword">desc</span> course;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 5、在score表中增加一列备注 char（50）</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> score <span class="keyword">add</span> 备注 <span class="type">char</span>(<span class="number">50</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 6、将score表中的备注修改为varchar（50）</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> score modify 备注 <span class="type">varchar</span>(<span class="number">50</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 7、将备注名称修改为BZ </span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> score change 备注 BZ <span class="type">varchar</span>(<span class="number">50</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 8、删除在score表BZ列</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> score <span class="keyword">drop</span> BZ;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 9、复制class表命名为classcopy，只复制表结构</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> classcopy <span class="keyword">like</span> class;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 10、将classcopy表重命名为classcopy1</span></span><br><span class="line">rename <span class="keyword">table</span> classcopy <span class="keyword">to</span> classcopy1;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 11、删除classcopy1表</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> classcopy1;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 实训3-4 数据完整性实训</span></span><br><span class="line"><span class="comment">-- /**/在各表中添加相应约束</span></span><br><span class="line"><span class="comment">-- （1）class表班级编号设置为主键。</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> class <span class="keyword">add</span> <span class="keyword">primary</span> key(班级编号);</span><br><span class="line"></span><br><span class="line"><span class="comment">/** （2）student表学号设置为主键；</span></span><br><span class="line"><span class="comment">       姓名设置唯一约束</span></span><br><span class="line"><span class="comment">       班级编号设置为外键；</span></span><br><span class="line"><span class="comment">       民族设置默认约束，默认为‘汉’；</span></span><br><span class="line"><span class="comment">       性别设置默认约束，默认为‘男’，设置检查约束只能输入‘男’或‘女’。**/</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student <span class="keyword">add</span> <span class="keyword">primary</span> key(学号);</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student <span class="keyword">add</span> <span class="keyword">foreign</span> key(班级编号) <span class="keyword">references</span> class(班级编号);</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student modify 民族 <span class="type">char</span>(<span class="number">10</span>) <span class="keyword">default</span> <span class="string">&#x27;汉&#x27;</span>;</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student modify 性别 <span class="type">char</span>(<span class="number">2</span>) <span class="keyword">default</span> <span class="string">&#x27;男&#x27;</span>,<span class="keyword">add</span> <span class="keyword">check</span>(性别 <span class="keyword">in</span>(<span class="string">&#x27;男&#x27;</span>,<span class="string">&#x27;女&#x27;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">-- （3）course表课程号设置为主键；</span></span><br><span class="line"><span class="comment">--          前置课设置为外键。</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> course <span class="keyword">add</span> <span class="keyword">primary</span> key(课程号), <span class="keyword">ADD</span> <span class="keyword">FOREIGN</span> KEY (前置课) <span class="keyword">REFERENCES</span> course (课程号);</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> course <span class="keyword">ADD</span> <span class="keyword">FOREIGN</span> KEY (前置课) <span class="keyword">REFERENCES</span> course (课程号);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- （4）score表（学号，课程号）设置为主键；</span></span><br><span class="line"><span class="comment">--          学号，课程号分别设置为外键；</span></span><br><span class="line"><span class="comment">--         成绩设置检查约束有效成绩在0--100分。</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> score <span class="keyword">add</span> <span class="keyword">primary</span> key(学号,课程号);</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> score <span class="keyword">add</span> <span class="keyword">foreign</span> key(学号) <span class="keyword">references</span> student(学号),<span class="keyword">add</span> <span class="keyword">foreign</span> key(课程号) <span class="keyword">references</span> course(课程号);</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> score <span class="keyword">add</span> <span class="keyword">check</span>(成绩 <span class="keyword">between</span> <span class="number">0</span> <span class="keyword">and</span> <span class="number">100</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="数据操作语言—DML"><a href="#数据操作语言—DML" class="headerlink" title="数据操作语言—DML"></a>数据操作语言—DML</h2><blockquote><p>DML是指数据操作语言，英文全称是Data Manipulation Language，用来对数据库中表的数据记录进行更新（增删改）。</p><p><strong>关键字：</strong></p><blockquote><ul><li>插入insert</li><li>删除delete</li><li>更新update</li></ul></blockquote></blockquote><h3 id="数据插入"><a href="#数据插入" class="headerlink" title="数据插入"></a>数据插入</h3><blockquote><p>一旦创建了数据库和表，下一步就是向表里插入数据。通过INSERT或REPLACE语句可以向表中插入一行或多行数据。</p></blockquote><h4 id="语法格式-6"><a href="#语法格式-6" class="headerlink" title="语法格式-6"></a>语法格式</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> [IGNORE] [<span class="keyword">INTO</span>] 表名[(列名,...)]</span><br><span class="line">             <span class="keyword">VALUES</span> (&#123;表达式<span class="operator">|</span> <span class="keyword">DEFAULT</span>&#125;,..),(...),...</span><br><span class="line">            <span class="operator">|</span> <span class="keyword">SET</span>列名<span class="operator">=</span>&#123;表达式<span class="operator">|</span> <span class="keyword">DEFAULT</span>&#125;, ...</span><br></pre></td></tr></table></figure><blockquote><p>如果要给全部列插入数据，列名可以省略。如果只给表的部分列插入数据，需要指定这些列。对于没有指出的列，它们的值根据列默认值或有关属性来确定，MySQL处理的原则是：</p><p>（1）具有IDENTITY属性的列，系统生成序号值来唯一标志列。</p><p>（2）具有默认值的列，其值为默认值。</p><p>（3）没有默认值的列，若允许为空值，则其值为空值；若不允许为空值，则出错。</p><p>（4）类型为timestamp的列，系统自动赋值。</p></blockquote><blockquote><p>VALUES子句：包含各列需要插入的数据清单，数据的顺序要与列的顺序相对应。若tb1_name后不给出列名，则在VALUES子句中要给出每一列（除IDENTITY和timestamp类型的列）的值，如果列值为空，则值必须置为NULL，否则会出错。VALUES子句中的值：</p><p>（1）表达式：可以是一个常量、变量或一个表达式，也可以是空值NULL，其值的数据类型要与列的数据类型一致。例如，列的数据类型为int，插入的数据是‘aaa’就会出错。当数据为字符型时要用单引号括起。</p><p>（2）DEFAULT：指定为该列的默认值。前提是该列原先已经指定了默认值。</p></blockquote><blockquote><p>如果列清单和VALUES清单都为空，则INSERT会创建一行，每个列都设置成默认值。</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 插入语句最常用格式：</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span>  表名(列名,...) <span class="keyword">VALUES</span> (表达式, ...)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="案例-6"><a href="#案例-6" class="headerlink" title="案例-6"></a>案例</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】 向Bookstore数据库中的表Book中插入如下的一行数据：</span></span><br><span class="line">USE Bookstore;</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> book <span class="keyword">VALUES</span> (<span class="string">&#x27;TP.9501&#x27;</span>, <span class="string">&#x27;计算机&#x27;</span>, <span class="string">&#x27;Dreamwearer&#x27;</span>, <span class="string">&#x27;鲍里嘉&#x27;</span>,<span class="string">&#x27;高等教育出版社&#x27;</span>,<span class="string">&#x27;2020-08-16&#x27;</span>, <span class="number">33.25</span>,<span class="number">50</span>,<span class="number">0.8</span>, <span class="keyword">NULL</span> );</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 【例】 若表Book中图书类别的默认值为“计算机”，数量默认值为NULL，插入上例那行数据。</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> book (图书编号,书名,作者,出版社,出版时间,单价,数量,折扣 )</span><br><span class="line">       <span class="keyword">VALUES</span> ( <span class="string">&#x27;TP.9501&#x27;</span>,  <span class="string">&#x27;Dreamwearer&#x27;</span>,  <span class="string">&#x27;鲍里嘉&#x27;</span>, <span class="string">&#x27;高等教育出版社&#x27;</span>, <span class="string">&#x27;2020-08-16&#x27;</span>, <span class="number">33.25</span>, <span class="number">50</span>, <span class="number">0.8</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 与上列命令效果相同：</span></span><br><span class="line"> <span class="keyword">INSERT</span> <span class="keyword">INTO</span> book </span><br><span class="line">           <span class="keyword">SET</span> 图书编号<span class="operator">=</span><span class="string">&#x27;TP.9501&#x27;</span>, 书名<span class="operator">=</span><span class="string">&#x27;Dreamwearer&#x27;</span>, </span><br><span class="line">           图书类别<span class="operator">=</span><span class="keyword">DEFAULT</span>, 作者<span class="operator">=</span> <span class="string">&#x27;鲍里嘉&#x27;</span>, </span><br><span class="line">           出版社<span class="operator">=</span><span class="string">&#x27;高等教育出版社&#x27;</span>, </span><br><span class="line">           出版时间<span class="operator">=</span> <span class="string">&#x27;2020-08-16&#x27;</span>, 单价<span class="operator">=</span><span class="number">33.25</span>, </span><br><span class="line">           数量<span class="operator">=</span><span class="number">50</span>, 折扣<span class="operator">=</span><span class="number">0.8</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>如果例4.1正确执行，记录已经插入了，再执行例4.1的SQL代码，系统提示1062错误，这是因为两条记录的图书编号相同，而图书编号是Book表的主键，要求唯一。当插入第二条相同编号的记录时，系统提示错误，意为表中已有图书编号为6625的记录，第二条记录不能插入。</p><p>可以使用<code>REPLACE</code>语句，用第二条记录替换第一条记录：</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">REPLACE <span class="keyword">INTO</span> book </span><br><span class="line">    <span class="keyword">VALUES</span> ( <span class="string">&#x27;TP.9501&#x27;</span>, <span class="string">&#x27;计算机&#x27;</span>, <span class="string">&#x27;PHP网站制作’, </span></span><br><span class="line"><span class="string">          &#x27;</span>林小红<span class="string">&#x27;, &#x27;</span>高等教育出版社<span class="string">&#x27;, &#x27;</span><span class="number">2020</span><span class="number">-10</span><span class="number">-16</span>’, </span><br><span class="line">          <span class="number">23.5</span>, <span class="number">30</span>, <span class="number">0.8</span>, <span class="keyword">NULL</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>在一个单独的INSERT语句中使用多个VALUES（）子句一次插入多条记录。</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> members  <span class="keyword">VALUES</span> </span><br><span class="line">   (<span class="string">&#x27;D0138&#x27;</span>, <span class="string">&#x27;李小华&#x27;</span>,<span class="string">&#x27;女&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>,<span class="string">&#x27;13822551234&#x27;</span> ,<span class="string">&#x27;2020-8-23&#x27;</span>),</span><br><span class="line">   (<span class="string">&#x27;D0139&#x27;</span>, <span class="string">&#x27;张明&#x27;</span>,<span class="string">&#x27;男&#x27;</span>, <span class="string">&#x27;123456&#x27;</span>,<span class="string">&#x27;13822555432&#x27;</span> ,<span class="string">&#x27;2020-9-23&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>从上面的SQL代码可以看出，当一次插入多条记录时，每条记录的数据要用（）括起来，记录与记录之间用逗号分开。</p></blockquote><h3 id="数据修改-更新"><a href="#数据修改-更新" class="headerlink" title="数据修改-更新"></a>数据修改(更新)</h3><blockquote><p>要修改表中的一行数据，可以使用UPDATE语句，UPDATE可以用来修改一个表，也可以修改多个表。</p></blockquote><h4 id="格式-2"><a href="#格式-2" class="headerlink" title="格式-2"></a>格式</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 修改单个表，语法格式：</span></span><br><span class="line"><span class="keyword">UPDATE</span> [IGNORE]  表名  <span class="keyword">SET</span> 列名<span class="number">1</span><span class="operator">=</span>表达式<span class="number">1</span> [,列名<span class="number">2</span><span class="operator">=</span>表达式<span class="number">2</span> ...][<span class="keyword">WHERE</span> 条件];</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 修改多个表，语法格式：</span></span><br><span class="line"> <span class="keyword">UPDATE</span> [IGNORE] 表名列表</span><br><span class="line">             <span class="keyword">SET</span> 列名<span class="number">1</span><span class="operator">=</span>表达式<span class="number">1</span> [,列名<span class="number">2</span><span class="operator">=</span>表达式<span class="number">2</span> ...]</span><br><span class="line">             [<span class="keyword">WHERE</span> 条件];</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>SET子句：根据WHERE子句中指定的条件对符合条件的数据行进行修改。若语句中不设定WHERE子句，则更新所有行。</p><p>可以同时修改所在数据行的多个列值，中间用逗号隔开。</p></blockquote><h4 id="单表案例"><a href="#单表案例" class="headerlink" title="单表案例"></a>单表案例</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】 将Bookstore数据库中Book表的所有书籍数量都增加10。将Members表中姓名为“张三”的员工的联系电话改为“13802551234”，密码改为“111111”。</span></span><br><span class="line"><span class="keyword">UPDATE</span> Book</span><br><span class="line">    <span class="keyword">SET</span> 数量 <span class="operator">=</span> 数量<span class="operator">+</span><span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">UPDATE</span> Members</span><br><span class="line">    <span class="keyword">SET</span>联系电话 <span class="operator">=</span><span class="string">&#x27;13802551234&#x27;</span> , 密码 <span class="operator">=</span><span class="string">&#x27;111111&#x27;</span> </span><br><span class="line"> <span class="keyword">WHERE</span> 姓名 <span class="operator">=</span> <span class="string">&#x27;张三&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="多表案例"><a href="#多表案例" class="headerlink" title="多表案例"></a>多表案例</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】订单号为6的客户因某种原因退回2本图书，请在sell表中修改订购册数，同时书退回后，book表中该图书的数量增加4。</span></span><br><span class="line"><span class="keyword">UPDATE</span>  sell ,book</span><br><span class="line">                <span class="keyword">SET</span>  sell.订购册数<span class="operator">=</span>订购册数<span class="number">-2</span> , book.数量<span class="operator">=</span>数量<span class="operator">+</span><span class="number">2</span></span><br><span class="line">                <span class="keyword">WHERE</span> sell.图书编号<span class="operator">=</span>book.图书编号 <span class="keyword">and</span> sell.订单号<span class="operator">=</span><span class="string">&#x27;6&#x27;</span>;</span><br><span class="line">                </span><br></pre></td></tr></table></figure><h3 id="数据删除"><a href="#数据删除" class="headerlink" title="数据删除"></a>数据删除</h3><h4 id="使用DELETE语句删除数据"><a href="#使用DELETE语句删除数据" class="headerlink" title="使用DELETE语句删除数据"></a>使用DELETE语句删除数据</h4><h5 id="格式-3"><a href="#格式-3" class="headerlink" title="格式-3"></a>格式</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 从单个表中删除，语法格式：</span></span><br><span class="line"> <span class="keyword">DELETE</span> [IGNORE] <span class="keyword">FROM</span> 表名 [<span class="keyword">WHERE</span>条件];</span><br></pre></td></tr></table></figure><blockquote><p>如果省略WHERE子句则删除该表的所有行。</p></blockquote><h5 id="案例-7"><a href="#案例-7" class="headerlink" title="案例-7"></a>案例</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】 将Bookstore数据库的Members表中姓名为“张三”的员工的记录删除。</span></span><br><span class="line">USE Bookstore;</span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> Members  <span class="keyword">WHERE</span> 姓名<span class="operator">=</span><span class="string">&#x27;张三&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 【例】 将Book表中数量小于5的所有行删除。</span></span><br><span class="line">USE Bookstore;</span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> Book  <span class="keyword">WHERE</span> 数量<span class="operator">&lt;</span><span class="number">5</span>; </span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="使用TRUNCATE-TABLE语句删除表数据"><a href="#使用TRUNCATE-TABLE语句删除表数据" class="headerlink" title="使用TRUNCATE-TABLE语句删除表数据"></a>使用TRUNCATE TABLE语句删除表数据</h4><blockquote><p>使用TRUNCATE TABLE语句将删除指定表中的所有数据，因此也称其为清除表数据语句。</p></blockquote><h5 id="格式-4"><a href="#格式-4" class="headerlink" title="格式-4"></a>格式</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法格式：</span></span><br><span class="line"><span class="keyword">TRUNCATE</span> <span class="keyword">TABLE</span> 表名;</span><br></pre></td></tr></table></figure><blockquote><p>说明：由于<code>TRUNCATE TABLE</code>语句将删除表中的所有数据，且无法恢复，因此使用时必须十分小心。</p></blockquote><blockquote><p><code>TRUNCATE TABLE</code> 在功能上与不带 <code>WHERE</code>子句的<code>DELETE</code>语句（如<code>DELETE FROM XS</code>）相同，二者均删除表中的全部行。但 <code>TRUNCATE TABLE</code>比<code>DELETE</code>速度快，且使用的系统和事务日志资源少。<code>DELETE</code> 语句每次删除一行，并在事务日志中为所删除的每行记录一项。而<code>TRUNCATE TABLE</code> 通过释放存储表数据所用的数据页来删除数据，并且只在事务日志中记录页的释放。使用 <code>TRUNCATE TABLE</code>，<code>AUTO_INCREMENT</code>计数器被重新设置为该列的初始值。</p></blockquote><h3 id="练习-2"><a href="#练习-2" class="headerlink" title="练习-2"></a>练习</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/** 数据操作实训：</span></span><br><span class="line"><span class="comment">知识点提示：关系型数据库插入数据时以行为单位提交自动保存，有一个单元格不符合要求则整行记录都不能提交。</span></span><br><span class="line"><span class="comment">插入记录要符合数据类型、长度、约束的要求，尤其是添加约束的表格要考虑数据的插入顺序，删除时也要考虑相应问题。**/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 1.在schooldb各表中插入记录 </span></span><br><span class="line"><span class="comment">-- （使用SQL语句在各表中至少插入一行记录，其他记录插入方法不限）</span></span><br><span class="line"><span class="comment">-- Records of class</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `class` <span class="keyword">VALUES</span> (<span class="string">&#x27;AC1301&#x27;</span>, <span class="string">&#x27;会计13-1班&#x27;</span>, <span class="string">&#x27;会计学院&#x27;</span>, <span class="number">2013</span>, <span class="number">35</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `class` <span class="keyword">VALUES</span> (<span class="string">&#x27;AC1302&#x27;</span>, <span class="string">&#x27;会计13-2班&#x27;</span>, <span class="string">&#x27;会计学院&#x27;</span>, <span class="number">2013</span>, <span class="number">35</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `class` <span class="keyword">VALUES</span> (<span class="string">&#x27;CS1401&#x27;</span>, <span class="string">&#x27;计算机14-1班&#x27;</span>, <span class="string">&#x27;计算机学院&#x27;</span>, <span class="number">2014</span>, <span class="number">35</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `class` <span class="keyword">VALUES</span> (<span class="string">&#x27;IS1301&#x27;</span>, <span class="string">&#x27;信息系统13-1班&#x27;</span>, <span class="string">&#x27;信息学院&#x27;</span>, <span class="number">2013</span>, <span class="keyword">NULL</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `class` <span class="keyword">VALUES</span> (<span class="string">&#x27;IS1401&#x27;</span>, <span class="string">&#x27;信息系统14-1班&#x27;</span>, <span class="string">&#x27;信息学院&#x27;</span>, <span class="keyword">NULL</span>, <span class="number">30</span>);</span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Records of course</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `course` <span class="keyword">VALUES</span> (<span class="string">&#x27;11003&#x27;</span>, <span class="string">&#x27;管理学&#x27;</span>, <span class="number">2</span>, <span class="number">32</span>, <span class="string">&#x27;2&#x27;</span>, <span class="keyword">NULL</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `course` <span class="keyword">VALUES</span> (<span class="string">&#x27;11005&#x27;</span>, <span class="string">&#x27;会计学&#x27;</span>, <span class="number">3</span>, <span class="number">48</span>, <span class="string">&#x27;2&#x27;</span>, <span class="keyword">NULL</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `course` <span class="keyword">VALUES</span> (<span class="string">&#x27;21001&#x27;</span>, <span class="string">&#x27;计算机基础&#x27;</span>, <span class="number">3</span>, <span class="number">48</span>, <span class="string">&#x27;1&#x27;</span>, <span class="keyword">NULL</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `course` <span class="keyword">VALUES</span> (<span class="string">&#x27;21002&#x27;</span>, <span class="string">&#x27;OFFICE高级应用&#x27;</span>, <span class="number">3</span>, <span class="number">48</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;21001&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `course` <span class="keyword">VALUES</span> (<span class="string">&#x27;21004&#x27;</span>, <span class="string">&#x27;程序设计&#x27;</span>, <span class="number">4</span>, <span class="number">64</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;21001&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `course` <span class="keyword">VALUES</span> (<span class="string">&#x27;21005&#x27;</span>, <span class="string">&#x27;数据库&#x27;</span>, <span class="number">4</span>, <span class="number">64</span>, <span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;21004&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `course` <span class="keyword">VALUES</span> (<span class="string">&#x27;21006&#x27;</span>, <span class="string">&#x27;操作系统&#x27;</span>, <span class="number">4</span>, <span class="number">64</span>, <span class="string">&#x27;5&#x27;</span>, <span class="string">&#x27;21001&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `course` <span class="keyword">VALUES</span> (<span class="string">&#x27;31001&#x27;</span>, <span class="string">&#x27;管理信息系统&#x27;</span>, <span class="number">3</span>, <span class="number">48</span>, <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;21004&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `course` <span class="keyword">VALUES</span> (<span class="string">&#x27;31002&#x27;</span>, <span class="string">&#x27;信息系统_分析与设计&#x27;</span>, <span class="number">2</span>, <span class="number">32</span>, <span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;31001&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `course` <span class="keyword">VALUES</span> (<span class="string">&#x27;31005&#x27;</span>, <span class="string">&#x27;项目管理&#x27;</span>, <span class="number">3</span>, <span class="number">48</span>, <span class="string">&#x27;5&#x27;</span>, <span class="string">&#x27;31001&#x27;</span>);</span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Records of score</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `score` <span class="keyword">VALUES</span> (<span class="string">&#x27;2013110101&#x27;</span>, <span class="string">&#x27;11003&#x27;</span>, <span class="number">90.00</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `score` <span class="keyword">VALUES</span> (<span class="string">&#x27;2013110101&#x27;</span>, <span class="string">&#x27;21001&#x27;</span>, <span class="number">86.00</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `score` <span class="keyword">VALUES</span> (<span class="string">&#x27;2013110103&#x27;</span>, <span class="string">&#x27;11003&#x27;</span>, <span class="number">89.00</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `score` <span class="keyword">VALUES</span> (<span class="string">&#x27;2013110103&#x27;</span>, <span class="string">&#x27;21001&#x27;</span>, <span class="number">86.00</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `score` <span class="keyword">VALUES</span> (<span class="string">&#x27;2013110201&#x27;</span>, <span class="string">&#x27;11003&#x27;</span>, <span class="number">78.00</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `score` <span class="keyword">VALUES</span> (<span class="string">&#x27;2013110201&#x27;</span>, <span class="string">&#x27;21001&#x27;</span>, <span class="number">92.00</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `score` <span class="keyword">VALUES</span> (<span class="string">&#x27;2013110202&#x27;</span>, <span class="string">&#x27;11003&#x27;</span>, <span class="number">82.00</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `score` <span class="keyword">VALUES</span> (<span class="string">&#x27;2013110202&#x27;</span>, <span class="string">&#x27;21001&#x27;</span>, <span class="number">85.00</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `score` <span class="keyword">VALUES</span> (<span class="string">&#x27;2013310101&#x27;</span>, <span class="string">&#x27;21004&#x27;</span>, <span class="number">83.00</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `score` <span class="keyword">VALUES</span> (<span class="string">&#x27;2013310101&#x27;</span>, <span class="string">&#x27;31002&#x27;</span>, <span class="number">68.00</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `score` <span class="keyword">VALUES</span> (<span class="string">&#x27;2013310103&#x27;</span>, <span class="string">&#x27;21004&#x27;</span>, <span class="number">80.00</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `score` <span class="keyword">VALUES</span> (<span class="string">&#x27;2013310103&#x27;</span>, <span class="string">&#x27;31002&#x27;</span>, <span class="number">76.00</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `score` <span class="keyword">VALUES</span> (<span class="string">&#x27;2014210101&#x27;</span>, <span class="string">&#x27;21002&#x27;</span>, <span class="number">93.00</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `score` <span class="keyword">VALUES</span> (<span class="string">&#x27;2014210101&#x27;</span>, <span class="string">&#x27;21004&#x27;</span>, <span class="number">89.00</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `score` <span class="keyword">VALUES</span> (<span class="string">&#x27;2014210102&#x27;</span>, <span class="string">&#x27;21002&#x27;</span>, <span class="number">95.00</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `score` <span class="keyword">VALUES</span> (<span class="string">&#x27;2014210102&#x27;</span>, <span class="string">&#x27;21004&#x27;</span>, <span class="number">88.00</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `score` <span class="keyword">VALUES</span> (<span class="string">&#x27;2014310101&#x27;</span>, <span class="string">&#x27;21001&#x27;</span>, <span class="number">79.00</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `score` <span class="keyword">VALUES</span> (<span class="string">&#x27;2014310101&#x27;</span>, <span class="string">&#x27;21004&#x27;</span>, <span class="number">80.00</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `score` <span class="keyword">VALUES</span> (<span class="string">&#x27;2014310102&#x27;</span>, <span class="string">&#x27;21001&#x27;</span>, <span class="number">91.00</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `score` <span class="keyword">VALUES</span> (<span class="string">&#x27;2014310102&#x27;</span>, <span class="string">&#x27;21004&#x27;</span>, <span class="number">87.00</span>);</span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Records of student</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `student` <span class="keyword">VALUES</span> (<span class="string">&#x27;2013110101&#x27;</span>, <span class="string">&#x27;张晓勇&#x27;</span>, <span class="string">&#x27;男&#x27;</span>, <span class="string">&#x27;1997-12-11&#x27;</span>, <span class="string">&#x27;山西&#x27;</span>, <span class="string">&#x27;汉&#x27;</span>, <span class="string">&#x27;AC1301&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `student` <span class="keyword">VALUES</span> (<span class="string">&#x27;2013110103&#x27;</span>, <span class="string">&#x27;王一敏&#x27;</span>, <span class="string">&#x27;女&#x27;</span>, <span class="string">&#x27;0000-00-00&#x27;</span>, <span class="string">&#x27;河北&#x27;</span>, <span class="string">&#x27;汉&#x27;</span>, <span class="string">&#x27;AC1301&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `student` <span class="keyword">VALUES</span> (<span class="string">&#x27;2013110201&#x27;</span>, <span class="string">&#x27;江山&#x27;</span>, <span class="string">&#x27;女&#x27;</span>, <span class="string">&#x27;1996-09-17&#x27;</span>, <span class="string">&#x27;内蒙古&#x27;</span>, <span class="string">&#x27;锡伯&#x27;</span>, <span class="string">&#x27;AC1302&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `student` <span class="keyword">VALUES</span> (<span class="string">&#x27;2013110202&#x27;</span>, <span class="string">&#x27;李明&#x27;</span>, <span class="string">&#x27;男&#x27;</span>, <span class="string">&#x27;1996-01-14&#x27;</span>, <span class="string">&#x27;广西&#x27;</span>, <span class="string">&#x27;壮&#x27;</span>, <span class="string">&#x27;AC1302&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `student` <span class="keyword">VALUES</span> (<span class="string">&#x27;2013310101&#x27;</span>, <span class="string">&#x27;黄菊&#x27;</span>, <span class="string">&#x27;女&#x27;</span>, <span class="string">&#x27;1995-09-30&#x27;</span>, <span class="string">&#x27;北京&#x27;</span>, <span class="string">&#x27;汉&#x27;</span>, <span class="string">&#x27;IS1301&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `student` <span class="keyword">VALUES</span> (<span class="string">&#x27;2013310103&#x27;</span>, <span class="string">&#x27;吴昊&#x27;</span>, <span class="string">&#x27;男&#x27;</span>, <span class="string">&#x27;1995-11-18&#x27;</span>, <span class="string">&#x27;河北&#x27;</span>, <span class="string">&#x27;汉&#x27;</span>, <span class="string">&#x27;IS1301&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `student` <span class="keyword">VALUES</span> (<span class="string">&#x27;2014210101&#x27;</span>, <span class="string">&#x27;刘涛&#x27;</span>, <span class="string">&#x27;男&#x27;</span>, <span class="string">&#x27;1997-04-03&#x27;</span>, <span class="string">&#x27;湖南&#x27;</span>, <span class="string">&#x27;侗&#x27;</span>, <span class="string">&#x27;CS1401&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `student` <span class="keyword">VALUES</span> (<span class="string">&#x27;2014210102&#x27;</span>, <span class="string">&#x27;郭志坚&#x27;</span>, <span class="string">&#x27;男&#x27;</span>, <span class="string">&#x27;1997-02-21&#x27;</span>, <span class="string">&#x27;上海&#x27;</span>, <span class="string">&#x27;汉&#x27;</span>, <span class="string">&#x27;CS1401&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `student` <span class="keyword">VALUES</span> (<span class="string">&#x27;2014310101&#x27;</span>, <span class="string">&#x27;王林&#x27;</span>, <span class="string">&#x27;男&#x27;</span>, <span class="string">&#x27;1996-10-09&#x27;</span>, <span class="string">&#x27;河南&#x27;</span>, <span class="string">&#x27;汉&#x27;</span>, <span class="string">&#x27;IS1401&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `student` <span class="keyword">VALUES</span> (<span class="string">&#x27;2014310102&#x27;</span>, <span class="string">&#x27;李怡然&#x27;</span>, <span class="string">&#x27;女&#x27;</span>, <span class="string">&#x27;1996-12-31&#x27;</span>, <span class="string">&#x27;辽宁&#x27;</span>, <span class="string">&#x27;汉&#x27;</span>, <span class="string">&#x27;IS1401&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*2.*/写出完成以下操作的SQL语句</span></span><br><span class="line"><span class="comment">-- /*(1).*/向student表中添加数据“502001, 王晓林, 男, 2000-02-10, 广东, 汉,IS2020”</span></span><br><span class="line"> <span class="keyword">insert</span> <span class="keyword">into</span> student <span class="keyword">values</span>(<span class="string">&#x27;502001&#x27;</span>, <span class="string">&#x27;王晓林&#x27;</span>, <span class="string">&#x27;男&#x27;</span>, <span class="string">&#x27;2000-02-10&#x27;</span>, <span class="string">&#x27;广东&#x27;</span> , <span class="string">&#x27;汉&#x27;</span>,<span class="string">&#x27;IS2020&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*(2).*/向student表插入一行数据“500102，林丽，女”</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student(学号,姓名,性别) <span class="keyword">values</span>(<span class="string">&#x27;500102&#x27;</span>,<span class="string">&#x27;林丽&#x27;</span>,<span class="string">&#x27;女&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*(3)*/将student表中所有学生的地区字段内容在原来的数据后加上“省或市”3个字</span></span><br><span class="line"><span class="keyword">update</span> student <span class="keyword">set</span> 地区<span class="operator">=</span>CONCAT(地区,<span class="string">&#x27;（省或市）&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*(4）*/将“王一敏”同学的出生日期改为“1998-02-10”，班级编号改为“AC1302”</span></span><br><span class="line"><span class="keyword">update</span> student <span class="keyword">set</span> 出生日期<span class="operator">=</span><span class="string">&#x27;1998-02-10&#x27;</span>,班级编号<span class="operator">=</span><span class="string">&#x27;AC1302&#x27;</span> <span class="keyword">where</span> 姓名<span class="operator">=</span><span class="string">&#x27;王一敏&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*(5) */将student表中1997年以前出生的学生记录删除</span></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> student <span class="keyword">where</span> <span class="keyword">year</span>(出生日期)<span class="operator">&lt;</span><span class="number">1997</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="数据查询语言—DQL"><a href="#数据查询语言—DQL" class="headerlink" title="数据查询语言—DQL"></a>数据查询语言—DQL</h2><h3 id="单表查询"><a href="#单表查询" class="headerlink" title="单表查询"></a>单表查询</h3><blockquote><p>使用数据库和表的主要目的是存储数据以便在需要时进行检索、统计或组织输出，通过SQL语句的查询可以从表或视图中迅速方便地检索数据。</p></blockquote><h4 id="SELECT语句格式"><a href="#SELECT语句格式" class="headerlink" title="SELECT语句格式"></a>SELECT语句格式</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> [<span class="keyword">ALL</span> <span class="operator">|</span> <span class="keyword">DISTINCT</span>]   输出列表达式, ...</span><br><span class="line">      [<span class="keyword">FROM</span>  表名<span class="number">1</span> [ , 表名<span class="number">2</span>] …]            <span class="comment">/*FROM子句*/</span></span><br><span class="line">      [<span class="keyword">WHERE</span> 条件]                                    <span class="comment">/*WHERE子句*/</span></span><br><span class="line">      [<span class="keyword">GROUP</span> <span class="keyword">BY</span> &#123;列名 <span class="operator">|</span> 表达式 <span class="operator">|</span> 列编号&#125;</span><br><span class="line">                 [<span class="keyword">ASC</span> <span class="operator">|</span> <span class="keyword">DESC</span>], ...           <span class="comment">/* GROUP BY  子句*/</span></span><br><span class="line">      [<span class="keyword">HAVING</span> 条件]                   <span class="comment">/* HAVING 子句*/</span></span><br><span class="line">      [<span class="keyword">ORDER</span> <span class="keyword">BY</span> &#123;列名 <span class="operator">|</span> 表达式 <span class="operator">|</span> 列编号&#125;</span><br><span class="line">                 [<span class="keyword">ASC</span> <span class="operator">|</span> <span class="keyword">DESC</span>] , ...]                   <span class="comment">/*ORDER BY子句*/</span></span><br><span class="line">       [LIMIT &#123;[偏移量,] 行数<span class="operator">|</span>行数<span class="keyword">OFFSET</span>偏移量&#125;]   <span class="comment">/*LIMIT子句*/</span></span><br></pre></td></tr></table></figure><blockquote><p>顺序严格地排序。例如，一个HAVING子句必须位于GROUP BY子句之后，并位于ORDER BY子句之前。</p></blockquote><h4 id="选择指定的列"><a href="#选择指定的列" class="headerlink" title="选择指定的列"></a>选择指定的列</h4><h5 id="格式-5"><a href="#格式-5" class="headerlink" title="格式-5"></a>格式</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 使用SELECT语句选择一个表中的某些列的语法格式如下：</span></span><br><span class="line"><span class="keyword">SELECT</span> 字段列表 <span class="keyword">FROM</span> 表名;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>各列名之间要以逗号分隔。</p></blockquote><h5 id="案例-8"><a href="#案例-8" class="headerlink" title="案例-8"></a>案例</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】 查询Members表中各用户的姓名、联系电话和注册时间。</span></span><br><span class="line">USE Bookstore;</span><br><span class="line"><span class="keyword">SELECT</span> 姓名,联系电话,注册时间 </span><br><span class="line"><span class="keyword">FROM</span> Members;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>说明：当在SELECT语句指定列的位置上使用*号时，表示选择表的所有列，如要显示Members表中所有列，不必将所有字段名一一列出，使用 <code>SELECT * FROM Members;</code></p></blockquote><h4 id="定义列别名"><a href="#定义列别名" class="headerlink" title="定义列别名"></a>定义列别名</h4><blockquote><p>当希望查询结果中的某些列或所有列显示时且使用自己选择的列标题时，可以在列名之后使用AS子句来更改查询结果的列别名。</p></blockquote><h5 id="格式-6"><a href="#格式-6" class="headerlink" title="格式-6"></a>格式</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">语法格式为： </span><br><span class="line"><span class="keyword">SELECT</span> 字段列表 [<span class="keyword">AS</span>] 别名;</span><br></pre></td></tr></table></figure><h5 id="案例-9"><a href="#案例-9" class="headerlink" title="案例-9"></a>案例</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】 查询Book表中图书类别为计算机的图书书名、作者和出版社，结果中各列的标题分别指定为name、auther和publisher。</span></span><br><span class="line"><span class="keyword">SELECT</span> 书名 <span class="keyword">AS</span> name, 作者 <span class="keyword">AS</span> auther, 出版社 <span class="keyword">AS</span> publisher <span class="keyword">FROM</span> Book <span class="keyword">WHERE</span> 图书类别<span class="operator">=</span> <span class="string">&#x27;计算机&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 注意：当自定义的列标题中含有空格时，必须使用引号将标题括起来。</span></span><br><span class="line"><span class="keyword">SELECT</span> 书名 <span class="keyword">AS</span> <span class="string">&#x27; Name of  Book&#x27;</span>, </span><br><span class="line">作者 <span class="keyword">AS</span> <span class="string">&#x27;Name  of  Auther&#x27;</span>, 出版社 <span class="keyword">AS</span> Publisher</span><br><span class="line"><span class="keyword">FROM</span> book   <span class="keyword">WHERE</span> 图书类别<span class="operator">=</span> <span class="string">&#x27;计算机&#x27;</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="替换查询结果中的数据"><a href="#替换查询结果中的数据" class="headerlink" title="替换查询结果中的数据"></a>替换查询结果中的数据</h4><blockquote><p>在对表进行查询时，有时对所查询的某些列希望得到的是一种概念而不是具体的数据。例如查询XS表的总学分，所希望知道的是学习的总体情况，这时，就可以用等级来替换总学分的具体数字。</p><p>要替换查询结果中的数据，则要使用查询中的CASE表达式。</p></blockquote><h5 id="格式-7"><a href="#格式-7" class="headerlink" title="格式-7"></a>格式</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法格式</span></span><br><span class="line"><span class="keyword">CASE</span></span><br><span class="line">     <span class="keyword">WHEN</span> 条件<span class="number">1</span> <span class="keyword">THEN</span> 表达式<span class="number">1</span></span><br><span class="line">     <span class="keyword">WHEN</span> 条件<span class="number">2</span> <span class="keyword">THEN</span> 表达式<span class="number">2</span></span><br><span class="line">     ……</span><br><span class="line">     <span class="keyword">ELSE</span> 表达式</span><br><span class="line"><span class="keyword">END</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="案例-10"><a href="#案例-10" class="headerlink" title="案例-10"></a>案例</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】 查询Book表中图书编号、书名和数量，对其库存数量按以下规则进行替换：若数量为空值，替换为“尚未进货”；若数量小于5，替换为“需进货”；若数量在5-50之间，替换为“库存正常”；若总学分大于50，替换为“库存积压”。列标题更改为“库存”。</span></span><br><span class="line"><span class="keyword">SELECT</span> 图书编号, 书名,</span><br><span class="line">        <span class="keyword">CASE</span> </span><br><span class="line"><span class="keyword">WHEN</span> 数量 <span class="keyword">IS</span> <span class="keyword">NULL</span> <span class="keyword">THEN</span>  <span class="string">&#x27;尚未进货&#x27;</span></span><br><span class="line">        <span class="keyword">WHEN</span> 数量 <span class="operator">&lt;</span> <span class="number">5</span> <span class="keyword">THEN</span>  <span class="string">&#x27;需进货&#x27;</span></span><br><span class="line">        <span class="keyword">WHEN</span> 数量 <span class="operator">&gt;=</span><span class="number">5</span> <span class="keyword">and</span> 数量<span class="operator">&lt;=</span><span class="number">50</span> <span class="keyword">THEN</span>  <span class="string">&#x27;库存正常&#x27;</span></span><br><span class="line">       <span class="keyword">ELSE</span>  <span class="string">&#x27;库存积压&#x27;</span></span><br><span class="line">         <span class="keyword">END</span>  <span class="keyword">AS</span>  库存</span><br><span class="line"><span class="keyword">FROM</span> Book; </span><br></pre></td></tr></table></figure><h4 id="计算列值"><a href="#计算列值" class="headerlink" title="计算列值"></a>计算列值</h4><blockquote><p>使用SELECT对列进行查询时，在结果中可以输出对列值计算后的值，即SELECT子句可使用表达式作为结果。</p></blockquote><h5 id="格式-8"><a href="#格式-8" class="headerlink" title="格式-8"></a>格式</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法格式</span></span><br><span class="line"><span class="keyword">SELECT</span> 表达式<span class="number">1</span>[ , 表达式<span class="number">2</span>… ];</span><br></pre></td></tr></table></figure><h5 id="案例-11"><a href="#案例-11" class="headerlink" title="案例-11"></a>案例</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】 对Sell表已发货的记录计算订购金额（订购金额=订购册数*订购单价），并显示图书编号和订购金额。</span></span><br><span class="line"><span class="keyword">SELECT</span>  图书编号, 订购册数<span class="operator">*</span>订购单价  <span class="keyword">AS</span> 订购金额</span><br><span class="line"> <span class="keyword">FROM</span>   Sell   </span><br><span class="line"> <span class="keyword">WHERE</span> 是否发货<span class="operator">=</span> <span class="string">&#x27;已发货&#x27;</span>; </span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="消除结果集中的重复行"><a href="#消除结果集中的重复行" class="headerlink" title="消除结果集中的重复行"></a>消除结果集中的重复行</h4><blockquote><p>对表只选择其某些列时，可能会出现重复行。例如，若对XSCJ数据库的XS表只选择专业名和总学分，则出现多行重复的情况。可以使用DISTINCT或DISTINCTROW关键字消除结果集中的重复行。</p></blockquote><h5 id="格式-9"><a href="#格式-9" class="headerlink" title="格式-9"></a>格式</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> 字段列表;</span><br></pre></td></tr></table></figure><blockquote><p>其含义是对结果集中的重复行只选择一个，保证行的唯一性。</p></blockquote><h5 id="案例-12"><a href="#案例-12" class="headerlink" title="案例-12"></a>案例</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】 对Book表只选择图书类别和出版社，消除结果集中的重复行。</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> 图书类别, 出版社  <span class="keyword">FROM</span> Book; </span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h4><h5 id="操-作-符"><a href="#操-作-符" class="headerlink" title="操-作-符"></a>操 作 符</h5><table><thead><tr><th>操 作 符</th><th>描  述</th></tr></thead><tbody><tr><td>=</td><td>等于</td></tr><tr><td>&lt;&gt;</td><td>不等于</td></tr><tr><td>&gt;</td><td>大于</td></tr><tr><td>&lt;</td><td>小于</td></tr><tr><td>&gt;=</td><td>大于等于</td></tr><tr><td>&lt;=</td><td>小于等于</td></tr><tr><td>BETWEEN</td><td>在某个范围内</td></tr><tr><td>LIKE</td><td>搜索某种模式</td></tr></tbody></table><h4 id="WHERE子句"><a href="#WHERE子句" class="headerlink" title="WHERE子句"></a>WHERE子句</h4><blockquote><p>WHERE子句必须紧跟FROM子句之后，在WHERE子句中，使用一个条件从FROM子句的中间结果中选取行。</p></blockquote><h5 id="格式-10"><a href="#格式-10" class="headerlink" title="格式-10"></a>格式</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">WHERE</span> 列名 运算符 值;</span><br></pre></td></tr></table></figure><blockquote><ul><li>WHERE子句会根据条件对FROM子句的中间结果中的行一行一行地进行判断，当条件为TRUE的时候，一行就被包含到WHERE子句的中间结果中。</li><li>在SQL中，返回逻辑值（TRUE或FALSE）的运算符或关键字都可称为谓词。</li><li>判定运算包括比较运算、模式匹配、范围比较、空值比较。</li></ul></blockquote><h4 id="比较运算"><a href="#比较运算" class="headerlink" title="比较运算"></a>比较运算</h4><blockquote><p>比较运算符用于比较（除<code>TEXT</code>和<code>BLOB</code>类型外) 两个表达式值，MySQL支持的比较运算符有：=（等于）、&lt;（小于）、&lt;=（小于等于）、&gt;（大于）、&gt;=（大于等于）、&lt;=&gt;（相等或都等于空）、&lt;&gt;（不等于）、!=（不等于）。</p><p>当两个表达式值均不为空值（NULL）时，除了“&lt;=&gt;”运算符，其他比较运算返回逻辑值TRUE（真）或FALSE（假）；而当两个表达式值中有一个为空值或都为空值时，将返回UNKNOWN。</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】 查询Bookstore数据库Book表中书名为“网页程序设计”的记录。</span></span><br><span class="line"><span class="keyword">SELECT</span>  书名,单价   <span class="keyword">FROM</span>  Book <span class="keyword">WHERE</span> 书名<span class="operator">=</span><span class="string">&#x27;网页程序设计&#x27;</span>; </span><br><span class="line"></span><br><span class="line"><span class="comment">-- 【例】 查询Book表中单价大于30的图书情况。</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span>   <span class="keyword">FROM</span>  Book <span class="keyword">WHERE</span> 单价<span class="operator">&gt;</span><span class="number">30</span>; </span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="逻辑运算"><a href="#逻辑运算" class="headerlink" title="逻辑运算"></a>逻辑运算</h4><blockquote><p>通过逻辑运算符（<code>AND</code>、<code>OR</code>、<code>XOR</code>和<code>NOT</code>）组成更为复杂的查询条件。逻辑运算操作的结果是“1”或“0”，分别表示“<strong>true</strong>”或“<strong>false</strong>”。</p></blockquote><h5 id="类型"><a href="#类型" class="headerlink" title="类型"></a>类型</h5><table><thead><tr><th><strong>符号1</strong></th><th><strong>符号2</strong></th><th><strong>说明</strong></th><th><strong>示例</strong></th><th><strong>说明</strong></th></tr></thead><tbody><tr><td><strong>not</strong></td><td><strong>!</strong></td><td><strong>非运算</strong></td><td><strong>!x</strong></td><td>如果x是&quot;true&quot;，那么示例的结果是&quot;false&quot;；  如果x是&quot;false&quot;，那么示例的结果是&quot;true&quot;。</td></tr><tr><td><strong>or</strong></td><td><strong>||</strong></td><td><strong>或运算</strong></td><td><strong>x  || y</strong></td><td>如果x或y任一是&quot;true&quot;，那么示例的结果是&quot;true&quot;，否则示例的结果是&quot;false&quot;。</td></tr><tr><td><strong>and</strong></td><td><strong>&amp;&amp;</strong></td><td><strong>与运算</strong></td><td><strong>x  &amp;&amp; y</strong></td><td>如果x和y都是&quot;True&quot;，那么示例结果是&quot;true&quot;，否则示例的结果是&quot;false&quot;。</td></tr><tr><td><strong>xor</strong></td><td><strong>^</strong></td><td><strong>异或运算</strong></td><td><strong>x  ^y</strong></td><td>如果x和y不相同，那么示例结果是&quot;true&quot;，否则示例的结果是&quot;false&quot;。</td></tr></tbody></table><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">非： <span class="keyword">select</span> <span class="keyword">not</span> <span class="number">0</span>, <span class="keyword">not</span> <span class="number">1</span>, <span class="keyword">not</span> <span class="keyword">null</span>;</span><br><span class="line">或： <span class="keyword">select</span> (<span class="number">1</span> <span class="keyword">or</span> <span class="number">0</span>), (<span class="number">0</span> <span class="keyword">or</span> <span class="number">0</span>), (<span class="number">1</span> <span class="keyword">or</span> <span class="keyword">null</span>), (<span class="number">1</span> <span class="keyword">or</span> <span class="number">1</span>), (<span class="keyword">null</span> <span class="keyword">or</span> <span class="keyword">null</span>);</span><br><span class="line">与： <span class="keyword">select</span> (<span class="number">1</span> <span class="keyword">and</span> <span class="number">1</span>), (<span class="number">0</span> <span class="keyword">and</span> <span class="number">1</span>), (<span class="number">3</span> <span class="keyword">and</span> <span class="number">1</span>), (<span class="number">1</span> <span class="keyword">and</span> <span class="keyword">null</span>);</span><br><span class="line">异或： <span class="keyword">select</span> (<span class="number">1</span> xor <span class="number">1</span>), (<span class="number">0</span> xor <span class="number">0</span>), (<span class="number">1</span> xor <span class="number">0</span>), (<span class="number">0</span> xor <span class="number">1</span>), (<span class="keyword">null</span> xor <span class="number">1</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="案例-13"><a href="#案例-13" class="headerlink" title="案例-13"></a>案例</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】 查询Sell表中已收货且已结清的订单情况。</span></span><br><span class="line"><span class="keyword">SELECT</span> 订单号,是否收货,是否结清 </span><br><span class="line"><span class="keyword">FROM</span> Sell</span><br><span class="line"><span class="keyword">WHERE</span>  是否收货<span class="operator">=</span><span class="string">&#x27;已收货&#x27;</span>  <span class="keyword">AND</span> 是否结清<span class="operator">=</span><span class="string">&#x27;已结清&#x27;</span>; </span><br><span class="line"></span><br><span class="line"><span class="comment">-- 【例】查询Book表中清华大学出版社和北京大学出版社出版的价格大于25元的图书。</span></span><br><span class="line"><span class="keyword">SELECT</span> 书名,出版社,单价 <span class="keyword">FROM</span>  Book</span><br><span class="line"><span class="keyword">WHERE</span>  (出版社<span class="operator">=</span><span class="string">&#x27;清华大学出版社&#x27;</span> <span class="keyword">OR</span> 出版社<span class="operator">=</span><span class="string">&#x27;北京大学出版社&#x27;</span> )</span><br><span class="line">      <span class="keyword">AND</span> 单价<span class="operator">&gt;=</span><span class="number">25</span>;</span><br><span class="line">或： </span><br><span class="line"><span class="keyword">SELECT</span>书名,出版社,单价   <span class="keyword">FROM</span>  Book</span><br><span class="line"><span class="keyword">WHERE</span>  (出版社<span class="operator">=</span><span class="string">&#x27;清华大学出版社&#x27;</span>  <span class="keyword">AND</span> 单价<span class="operator">&gt;=</span><span class="number">25</span>) </span><br><span class="line">      <span class="keyword">OR</span>  (出版社<span class="operator">=</span><span class="string">&#x27;北京大学出版社&#x27;</span>  <span class="keyword">AND</span> 单价<span class="operator">&gt;=</span><span class="number">25</span>); </span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="模式匹配（LIKE运算符）"><a href="#模式匹配（LIKE运算符）" class="headerlink" title="模式匹配（LIKE运算符）"></a>模式匹配（LIKE运算符）</h4><blockquote><p>LIKE运算符用于指出一个字符串是否与指定的字符串相匹配，其运算对象可以是char、varchar、text、datetime等类型的数据，返回逻辑值TRUE或FALSE。</p><p>使用LIKE进行模式匹配时，常使用特殊符号_和%，可进行模糊查询。“%”代表0个或多个字符，“_”代表单个字符。由于MySQL默认不区分大小写，要区分大小写时需要更换字符集的校对规则。</p></blockquote><h5 id="案例-14"><a href="#案例-14" class="headerlink" title="案例-14"></a>案例</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】 查询Members表中姓“张”的会员的身份证号、姓名及注册时间。</span></span><br><span class="line"><span class="keyword">SELECT</span> 用户号,会员姓名, 注册时间    <span class="keyword">FROM</span> Members </span><br><span class="line"> <span class="keyword">WHERE</span>  会员姓名  <span class="keyword">LIKE</span>  <span class="string">&#x27;张%&#x27;</span>; </span><br><span class="line"></span><br><span class="line"><span class="comment">-- 【例】查询book表中图书编号倒数第二位为6的图书的图书编号和书名。</span></span><br><span class="line"><span class="keyword">SELECT</span> 图书编号, 书名   <span class="keyword">FROM</span>  book </span><br><span class="line"> <span class="keyword">WHERE</span> 图书编号 <span class="keyword">LIKE</span>  <span class="string">&#x27;%6_&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 【例】查询Book表中书名中包含下画线的图书。</span></span><br><span class="line"><span class="keyword">SELECT</span> 图书编号,书名   <span class="keyword">FROM</span>   Book</span><br><span class="line"> <span class="keyword">WHERE</span> 书名 <span class="keyword">LIKE</span> <span class="string">&#x27;%#_%&#x27;</span>  <span class="keyword">ESCAPE</span>  <span class="string">&#x27;#&#x27;</span>; </span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="范围比较"><a href="#范围比较" class="headerlink" title="范围比较"></a>范围比较</h4><blockquote><p>用于范围比较的关键字有两个：BETWEEN和IN。</p><p>当要查询的条件是某个值的范围时，可以使用BETWEEN关键字。BETWEEN关键字指出查询范围。</p></blockquote><h5 id="格式-11"><a href="#格式-11" class="headerlink" title="格式-11"></a>格式</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">表达式 [ <span class="keyword">NOT</span> ] <span class="keyword">BETWEEN</span>  表达式<span class="number">1</span>   <span class="keyword">AND</span>  表达式<span class="number">2</span>;</span><br></pre></td></tr></table></figure><blockquote><ul><li>当不使用NOT时，若表达式的值在表达式表达式1与表达式2之间（包括这两个值），则返回TRUE，否则返回FALSE；使用NOT时，返回值刚好相反。</li><li>注意：表达式1的值不能大于表达式2的值。</li></ul></blockquote><h5 id="案例-15"><a href="#案例-15" class="headerlink" title="案例-15"></a>案例</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】 查询Book表中2020年出版的图书的情况。</span></span><br><span class="line"><span class="keyword">SELECT</span>  <span class="operator">*</span>    <span class="keyword">FROM</span> Book   </span><br><span class="line"> <span class="keyword">WHERE</span> 出版时间  <span class="keyword">BETWEEN</span> <span class="string">&#x27;2020-1-1&#x27;</span>  <span class="keyword">AND</span> <span class="string">&#x27;2020-12-31&#x27;</span>; </span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>使用IN关键字可以指定一个值表，值表中列出所有可能的值，当与值表中的任一个匹配时，即返回TRUE，否则返回FALSE。</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 使用IN关键字指定值表的格式为：</span></span><br><span class="line">表达式 <span class="keyword">IN</span> (表达式<span class="number">1</span> [,…n])</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】查询Book表中“高等教育出版社”、“北京大学出版社”和“人民邮电出版社”出版的图书的情况。</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span>  <span class="keyword">FROM</span> Book  </span><br><span class="line"> <span class="keyword">WHERE</span>  出版社  <span class="keyword">IN</span> ( <span class="string">&#x27;高等教育出版社&#x27;</span>, <span class="string">&#x27;北京大学出版社&#x27;</span>, <span class="string">&#x27;人民邮电出版社&#x27;</span>); </span><br></pre></td></tr></table></figure><h4 id="空值比较"><a href="#空值比较" class="headerlink" title="空值比较"></a>空值比较</h4><blockquote><p>当需要判定一个表达式的值是否为空值时，使用 <code>IS NULL</code>关键字。格式为：</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">表达式 <span class="keyword">IS</span> [ <span class="keyword">NOT</span> ] <span class="keyword">NULL</span>;</span><br></pre></td></tr></table></figure><blockquote><p>当不使用NOT时，若表达式expression的值为空值，返回TRUE，否则返回FALSE；当使用NOT时，结果刚好相反。</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】 查询Sell表中尚未发货的订单记录。</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span>   <span class="keyword">FROM</span>   Sell   <span class="keyword">WHERE</span> 是否发货 <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br><span class="line"><span class="comment">-- MySQL有一个特殊的等于运算符“&lt;=&gt;”，当两个表达式彼此相等或都等于空值时，它的值为TRUE，其中有一个空值或都是非空值但不相等，这个条件就是FALSE。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 上面的语句也可以换成：</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span>  Sell   <span class="keyword">WHERE</span> 是否收货<span class="operator">&lt;=&gt;</span><span class="keyword">NULL</span>; </span><br></pre></td></tr></table></figure><h3 id="分类汇总与排序—聚合函数"><a href="#分类汇总与排序—聚合函数" class="headerlink" title="分类汇总与排序—聚合函数"></a>分类汇总与排序—聚合函数</h3><blockquote><p>SELECT子句的表达式中还可以包含所谓的聚合函数。聚合函数常常用于对一组值进行计算，然后返回单个值。</p></blockquote><table><thead><tr><th><strong>函 数 名</strong></th><th><strong>说  明</strong></th></tr></thead><tbody><tr><td>COUNT</td><td>求组中项数，返回int类型整数</td></tr><tr><td>MAX</td><td>求最大值</td></tr><tr><td>MIN</td><td>求最小值</td></tr><tr><td>SUM</td><td>返回表达式中所有值的和</td></tr><tr><td>AVG</td><td>求组中值的平均值</td></tr></tbody></table><h4 id="COUNT函数"><a href="#COUNT函数" class="headerlink" title="COUNT函数"></a>COUNT函数</h4><blockquote><p>聚合函数中最经常使用的是COUNT()函数，用于统计组中满足条件的行数或总行数，返回SELECT语句检索到的行中非NULL值的数目，若找不到匹配的行，则返回0。</p></blockquote><h5 id="格式-12"><a href="#格式-12" class="headerlink" title="格式-12"></a>格式</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法格式为</span></span><br><span class="line"><span class="built_in">COUNT</span> ( &#123; [ <span class="keyword">ALL</span> <span class="operator">|</span> <span class="keyword">DISTINCT</span> ]表达式 &#125; <span class="operator">|</span> <span class="operator">*</span> )</span><br></pre></td></tr></table></figure><blockquote><p>其中，表达式的数据类型是除BLOB或TEXT之外的任何类型。ALL表示对所有值进行运算，DISTINCT表示去除重复值，默认为ALL。使用COUNT(*)时将返回检索行的总数目，不论其是否包含 NULL值。</p></blockquote><h5 id="案例-16"><a href="#案例-16" class="headerlink" title="案例-16"></a>案例</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】求会员总人数。</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">AS</span>  <span class="string">&#x27;会员数&#x27;</span>  <span class="keyword">FROM</span> Members; </span><br><span class="line"></span><br><span class="line"><span class="comment">-- 【例】 统计已结清的订单数。</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(是否结清)  <span class="keyword">AS</span>  <span class="string">&#x27;已结清的订单数&#x27;</span>  <span class="keyword">FROM</span> Sell;</span><br><span class="line"><span class="comment">-- 注意：这里COUNT(是否结清)只统计是否结清列中不为NULL的行。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 【例】 统计订购册数在5以上的订单数。</span></span><br><span class="line"> <span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(订购册数)  <span class="keyword">AS</span>  <span class="string">&#x27;订购册数在5以上的订单数&#x27;</span></span><br><span class="line"> <span class="keyword">FROM</span> Sell</span><br><span class="line"> <span class="keyword">WHERE</span> 订购册数<span class="operator">&gt;</span><span class="number">5</span>; </span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="MAX和MIN"><a href="#MAX和MIN" class="headerlink" title="MAX和MIN"></a>MAX和MIN</h4><blockquote><p>MAX和MIN分别用于求表达式中所有值项的最大值与最小值。</p></blockquote><h5 id="格式-13"><a href="#格式-13" class="headerlink" title="格式-13"></a>格式</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法格式为：</span></span><br><span class="line">MAX <span class="operator">/</span> <span class="built_in">MIN</span> ( [ <span class="keyword">ALL</span> <span class="operator">|</span> <span class="keyword">DISTINCT</span> ]表达式 )</span><br></pre></td></tr></table></figure><blockquote><p>其中，表达式是常量、列、函数或表达式，其数据类型可以是数字、字符和时间日期 类型。</p></blockquote><h5 id="案例-17"><a href="#案例-17" class="headerlink" title="案例-17"></a>案例</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】 求订购了图书编号为TP.3035的订单的最高订购册数和最低订购册数。</span></span><br><span class="line"><span class="keyword">SELECT</span>  <span class="built_in">MAX</span>(订购册数), <span class="built_in">MIN</span>(订购册数)</span><br><span class="line">             <span class="keyword">FROM</span> Sell</span><br><span class="line">             <span class="keyword">WHERE</span>  图书编号 <span class="operator">=</span> <span class="string">&#x27; TP.3035 &#x27;</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>注意：当给定列上只有空值或检索出的中间结果为空时，MAX和MIN函数的值也为空。</p></blockquote><h4 id="SUM函数和AVG函数"><a href="#SUM函数和AVG函数" class="headerlink" title="SUM函数和AVG函数"></a>SUM函数和AVG函数</h4><blockquote><p>SUM和AVG分别用于求表达式中所有值项的总和与平均值。</p></blockquote><h5 id="格式-14"><a href="#格式-14" class="headerlink" title="格式-14"></a>格式</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法格式为：</span></span><br><span class="line">SUM <span class="operator">/</span> <span class="built_in">AVG</span> ( [ <span class="keyword">ALL</span> <span class="operator">|</span> <span class="keyword">DISTINCT</span> ]表达式 )</span><br></pre></td></tr></table></figure><blockquote><p>其中，表达式是常量、列、函数或表达式，其数据类型只能是数值型。</p></blockquote><h5 id="案例-18"><a href="#案例-18" class="headerlink" title="案例-18"></a>案例</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】 求订购了图书编号为Ts.3035图书的订购总册数。</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">SUM</span>(订购册数)  <span class="keyword">AS</span>  <span class="string">&#x27;订购总册数&#x27;</span>  <span class="keyword">FROM</span> Sell  <span class="keyword">WHERE</span>  图书编号 <span class="operator">=</span> <span class="string">&#x27;Ts.3035 &#x27;</span>; </span><br><span class="line"></span><br><span class="line"><span class="comment">-- 【例】 求订购图书编号为Ts.3035图书的订单平均册数。</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">AVG</span>(订购册数)  <span class="keyword">AS</span>  <span class="string">&#x27;每笔订单平均册数&#x27;</span>  <span class="keyword">FROM</span> Sell  <span class="keyword">WHERE</span>  图书编号 <span class="operator">=</span> <span class="string">&#x27;Ts.3035 &#x27;</span>; </span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="分类汇总与排序—GROUP-BY子句"><a href="#分类汇总与排序—GROUP-BY子句" class="headerlink" title="分类汇总与排序—GROUP-BY子句"></a>分类汇总与排序—GROUP BY子句</h3><blockquote><p>GROUP BY子句主要用于根据字段对行分组。例如，根据学生所学的专业对XS表中的所有行分组，结果是每个专业的学生成为一组。</p></blockquote><h4 id="格式-15"><a href="#格式-15" class="headerlink" title="格式-15"></a>格式</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> &#123;列名 <span class="operator">|</span>表达式&#125; [<span class="keyword">ASC</span> <span class="operator">|</span> <span class="keyword">DESC</span>], ...  </span><br><span class="line">              [<span class="keyword">WITH</span> <span class="keyword">ROLLUP</span>]</span><br></pre></td></tr></table></figure><blockquote><p>GROUP BY子句后通常包含列名或表达式。MySQL对GROUP BY子句进行了扩展，可以在列的后面指定ASC（升序）或DESC（降序）。GROUP BY可以根据一个或多个列进行分组，也可以根据表达式进行分组，经常和聚合函数一起使用。</p></blockquote><h4 id="案例-19"><a href="#案例-19" class="headerlink" title="案例-19"></a>案例</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】 输出Book表中图书类别名。</span></span><br><span class="line"><span class="keyword">SELECT</span> 图书类别   <span class="keyword">FROM</span> Book  <span class="keyword">GROUP</span> <span class="keyword">BY</span> 图书类别; </span><br><span class="line"></span><br><span class="line"><span class="comment">-- 【例】 按图书类别统计Book表中各类图书的库存数。</span></span><br><span class="line"><span class="keyword">SELECT</span> 图书类别,<span class="built_in">COUNT</span>(<span class="operator">*</span>)  <span class="keyword">AS</span>  <span class="string">&#x27;库存数&#x27;</span></span><br><span class="line">            <span class="keyword">FROM</span> Book</span><br><span class="line">            <span class="keyword">GROUP</span> <span class="keyword">BY</span> 图书类别; </span><br><span class="line"></span><br><span class="line"><span class="comment">-- 【例】 按图书编号分类统计其订单数和订单的平均订购册数。</span></span><br><span class="line"><span class="keyword">SELECT</span> 图书编号, <span class="built_in">AVG</span>(订购册数) <span class="keyword">AS</span> <span class="string">&#x27;订购册数&#x27;</span> ,</span><br><span class="line">             <span class="built_in">COUNT</span>(订单号) <span class="keyword">AS</span> <span class="string">&#x27;订单数&#x27;</span></span><br><span class="line">             <span class="keyword">FROM</span> Sell </span><br><span class="line">             <span class="keyword">GROUP</span> <span class="keyword">BY</span> 图书编号; </span><br><span class="line">             </span><br></pre></td></tr></table></figure><h4 id="带ROLLUP的GROUP-BY子句"><a href="#带ROLLUP的GROUP-BY子句" class="headerlink" title="带ROLLUP的GROUP-BY子句"></a>带ROLLUP的GROUP BY子句</h4><blockquote><p>使用带ROLLUP操作符的GROUP BY子句，可指定在结果集内不仅包含由 GROUP BY 提供的正常行，还包含汇总行。</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】按图书类别、出版社分类统计Book表中各类图书的库存数。</span></span><br><span class="line"><span class="keyword">SELECT</span> 图书类别, 出版社, <span class="built_in">Sum</span>(数量) <span class="keyword">AS</span> <span class="string">&#x27;库存数&#x27;</span></span><br><span class="line">            <span class="keyword">FROM</span> Book</span><br><span class="line">            <span class="keyword">GROUP</span> <span class="keyword">BY</span> 图书类别, 出版社   </span><br><span class="line">            <span class="keyword">WITH</span>  <span class="keyword">ROLLUP</span>;</span><br><span class="line">            </span><br></pre></td></tr></table></figure><h4 id="HAVING子句"><a href="#HAVING子句" class="headerlink" title="HAVING子句"></a>HAVING子句</h4><blockquote><p>使用HAVING子句的目的与WHERE子句类似，不同的是WHERE子句是用来在FROM子句之后选择行，而HAVING子句用来在GROUP BY子句后选择行。</p></blockquote><h5 id="格式-16"><a href="#格式-16" class="headerlink" title="格式-16"></a>格式</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> &#123;列名 <span class="operator">|</span>表达式&#125;  <span class="keyword">HAVING</span> 条件</span><br></pre></td></tr></table></figure><blockquote><ul><li>其中，条件的定义和WHERE子句中的条件类似，不过HAVING子句中的条件可以包含聚合函数，而WHERE子句中则不可以。</li><li>SQL标准要求HAVING必须引用GROUP BY子句中的列或用于聚合函数中的列。不过，MySQL支持对此工作性质的扩展，并允许HAVING引用SELECT清单中的列和外部子查询中的列。</li></ul></blockquote><h5 id="案例-20"><a href="#案例-20" class="headerlink" title="案例-20"></a>案例</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】 查找Sell表中每个会员平均订购册数在10本以上的会员的用户号和平均订购册数。</span></span><br><span class="line"><span class="keyword">SELECT</span> 用户号, <span class="built_in">AVG</span>(订购册数) <span class="keyword">AS</span> <span class="string">&#x27;平均订购册数&#x27;</span></span><br><span class="line">            <span class="keyword">FROM</span> Sell</span><br><span class="line">            <span class="keyword">GROUP</span> <span class="keyword">BY</span> 用户号</span><br><span class="line">            <span class="keyword">HAVING</span> <span class="built_in">AVG</span>(订购册数) <span class="operator">&gt;</span><span class="number">10</span>; </span><br><span class="line">            </span><br><span class="line"><span class="comment">-- 【例】 查找Sell表中会员订单数在2笔以上且每笔订购册数都在5本以上的会员。</span></span><br><span class="line"><span class="keyword">SELECT</span> 用户号, <span class="built_in">AVG</span>(订购册数) </span><br><span class="line">            <span class="keyword">FROM</span> Sell</span><br><span class="line">            <span class="keyword">WHERE</span> 订购册数 <span class="operator">&gt;</span><span class="number">5</span></span><br><span class="line">            <span class="keyword">GROUP</span> <span class="keyword">BY</span> 用户号</span><br><span class="line">            <span class="keyword">HAVING</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="operator">&gt;</span> <span class="number">2</span>;</span><br><span class="line">            </span><br></pre></td></tr></table></figure><h3 id="分类汇总与排序—ORDER-BY子句"><a href="#分类汇总与排序—ORDER-BY子句" class="headerlink" title="分类汇总与排序—ORDER-BY子句"></a>分类汇总与排序—ORDER BY子句</h3><blockquote><p>在一条SELECT语句中，如果不使用ORDER BY子句，结果中行的顺序是不可预料的。使用ORDER BY子句后可以保证结果中的行按一定顺序排列。</p></blockquote><h4 id="格式-17"><a href="#格式-17" class="headerlink" title="格式-17"></a>格式</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> &#123;列名 <span class="operator">|</span> 表达式 <span class="operator">|</span> 列编号&#125; [<span class="keyword">ASC</span> <span class="operator">|</span> <span class="keyword">DESC</span>] , ...</span><br></pre></td></tr></table></figure><blockquote><ul><li>说明：ORDER BY子句后可以是一个列、一个表达式或一个正整数。正整数表示按结果表中该位置上的列排序。例如，使用ORDER BY 3表示对SELECT的列清单上的第3列进行排序。</li><li>关键字ASC表示升序排列，DESC表示降序排列，系统默认值为ASC。</li></ul></blockquote><h4 id="案例-21"><a href="#案例-21" class="headerlink" title="案例-21"></a>案例</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】 将Book表中记录按出版时间先后排序。</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Book <span class="keyword">ORDER</span> <span class="keyword">BY</span> 出版时间; </span><br><span class="line"></span><br><span class="line"><span class="comment">-- 【例】 将Sell表中记录按订购册数从高到低排列。</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Sell <span class="keyword">ORDER</span> <span class="keyword">BY</span> 订购册数 <span class="keyword">DESC</span>; </span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="分类汇总与排序—LIMIT子句"><a href="#分类汇总与排序—LIMIT子句" class="headerlink" title="分类汇总与排序—LIMIT子句"></a>分类汇总与排序—LIMIT子句</h3><blockquote><p>LIMIT子句是SELECT语句的最后一个子句，主要用于限制被SELECT语句返回的行数。</p></blockquote><h4 id="格式-18"><a href="#格式-18" class="headerlink" title="格式-18"></a>格式</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LIMIT &#123;[偏移量,] 行数 <span class="operator">|</span>行数  <span class="keyword">OFFSET</span> 偏移量&#125;</span><br></pre></td></tr></table></figure><blockquote><p>语法格式中的偏移量和行数都必须是非负的整数常数，偏移量指定返回的第一行的偏移量，行数是返回的行数。例如，“LIMIT 5”表示返回SELECT语句的结果集中最前面5行，而“LIMIT 3，5”则表示从第4行开始返回5行。值得注意的是初始行的偏移量为0而不是1。</p></blockquote><h4 id="案例-22"><a href="#案例-22" class="headerlink" title="案例-22"></a>案例</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】 查找Members表中注册时间最靠前的5位会员的信息。</span></span><br><span class="line"><span class="keyword">SELECT</span>  <span class="operator">*</span>  <span class="keyword">FROM</span> Members <span class="keyword">ORDER</span> <span class="keyword">BY</span> 注册时间 LIMIT <span class="number">5</span>; </span><br><span class="line"></span><br><span class="line"><span class="comment">-- 【例】 查找Book表中从第4条记录开始的5条记录。</span></span><br><span class="line"><span class="keyword">SELECT</span>  <span class="operator">*</span>  <span class="keyword">FROM</span> Book <span class="keyword">ORDER</span> <span class="keyword">BY</span> 学号 LIMIT <span class="number">3</span>, <span class="number">5</span>; </span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>为了与PostgreSQL兼容，MySQL也支持<code>LIMIT row_count OFFSET offset</code>语法。所以将上面例子中的LIMIT子句换成“<code>LIMIT 5 OFFSET 3</code>”，结果一样。</p></blockquote><h3 id="练习-3"><a href="#练习-3" class="headerlink" title="练习-3"></a>练习</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- DQL——数据查询操作——单表查询</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*（1）*/查询全体学生的姓名和年龄，要求分别用name和age表示列名。</span></span><br><span class="line"><span class="keyword">select</span>  姓名 name,<span class="keyword">year</span>(now())<span class="operator">-</span><span class="keyword">year</span>(出生日期) age <span class="keyword">from</span> student;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*（2）*/查询成绩表，成绩列用优（&gt;=90）、良（75~90）、及格（60~75)、不及格（&lt;60)表示</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span>,</span><br><span class="line"><span class="keyword">case</span> </span><br><span class="line"><span class="keyword">when</span> 成绩<span class="operator">&gt;=</span><span class="number">90</span> <span class="keyword">then</span> <span class="string">&#x27;优&#x27;</span></span><br><span class="line"><span class="keyword">when</span> 成绩<span class="operator">&gt;=</span><span class="number">75</span> <span class="keyword">and</span> 成绩<span class="operator">&lt;</span><span class="number">90</span> <span class="keyword">then</span> <span class="string">&#x27;良&#x27;</span></span><br><span class="line"><span class="keyword">when</span> 成绩<span class="operator">&gt;=</span><span class="number">60</span> <span class="keyword">and</span> 成绩<span class="operator">&lt;</span><span class="number">75</span> <span class="keyword">then</span> <span class="string">&#x27;及格&#x27;</span></span><br><span class="line"><span class="keyword">else</span> <span class="string">&#x27;不及格&#x27;</span></span><br><span class="line"><span class="keyword">end</span> <span class="keyword">as</span> 成绩档 <span class="keyword">from</span> score;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*（3）*/查询学时大于等于48学时的课程名和学分</span></span><br><span class="line"><span class="keyword">select</span> 课程名,学分,学时 <span class="keyword">from</span> course <span class="keyword">where</span> 学时<span class="operator">&gt;=</span><span class="number">48</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*（4）*/查询前置课为空的课程名和学期</span></span><br><span class="line"><span class="keyword">select</span> 课程名,学期 <span class="keyword">from</span> course <span class="keyword">where</span> 前置课 <span class="keyword">is</span> <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*（5）*/查询姓王的且名字为3个字的学生记录</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student <span class="keyword">where</span> 姓名 <span class="keyword">like</span> <span class="string">&#x27;王__&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*（6）*/ 查询生源地不是山西省的学生信息。</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student <span class="keyword">where</span> 地区 <span class="operator">!=</span> <span class="string">&#x27;山西（省或市）&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*（7）*/查询‘数据库’的课程号和前置课</span></span><br><span class="line"><span class="keyword">select</span> 课程号,前置课 <span class="keyword">from</span> course;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*（8）*/查询成绩为79分、89分或99分的记录。</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> score <span class="keyword">where</span> 成绩 <span class="keyword">in</span> (<span class="number">79</span>,<span class="number">89</span>,<span class="number">99</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*（9）*/查询每个班级人数增加80后的班级名称和新人数。</span></span><br><span class="line"><span class="keyword">select</span> 班级名称,人数<span class="operator">+</span><span class="number">80</span> 新人数 <span class="keyword">from</span> class;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*（10）*/查询不是1995年出生的所有女生信息。</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student <span class="keyword">where</span> <span class="keyword">year</span>(出生日期) <span class="operator">!=</span> <span class="number">1995</span> <span class="keyword">and</span> 性别<span class="operator">=</span><span class="string">&#x27;女&#x27;</span>;</span><br><span class="line"><span class="comment">-- </span></span><br><span class="line"><span class="comment">-- ---------------分隔线----------------</span></span><br><span class="line"><span class="comment">-- </span></span><br><span class="line"><span class="comment">-- 数据查询实训二：分组与排序</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*（1）*/按性别统计学生人数</span></span><br><span class="line"><span class="keyword">select</span> 性别,<span class="built_in">count</span>(<span class="operator">*</span>) 人数 <span class="keyword">from</span> student <span class="keyword">group</span> <span class="keyword">by</span> 性别;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*（2）*/统计每个学生的选课门数，平均分和最高分</span></span><br><span class="line"><span class="keyword">select</span> 学号,<span class="built_in">count</span>(课程号),<span class="built_in">avg</span>(成绩),<span class="built_in">max</span>(成绩) <span class="keyword">from</span> score <span class="keyword">group</span> <span class="keyword">by</span> 学号;</span><br><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">    学号,</span><br><span class="line">    <span class="built_in">COUNT</span>(课程号) <span class="keyword">AS</span> 选课门数,</span><br><span class="line">    <span class="built_in">AVG</span>(成绩) <span class="keyword">AS</span> 平均分,</span><br><span class="line">    <span class="built_in">MAX</span>(成绩) <span class="keyword">AS</span> 最高分</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">    score</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">    学号;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*（3）*/查询平均分在80分以上的每个学生的选课门数，总分和最低分</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">avg</span>(成绩) 平均分,<span class="built_in">count</span>(课程号) 选课门数,<span class="built_in">sum</span>(成绩) 总分,<span class="built_in">min</span>(成绩) 最低分 <span class="keyword">from</span> score <span class="keyword">group</span> <span class="keyword">by</span> 学号 <span class="keyword">having</span> 平均分<span class="operator">&gt;</span><span class="number">80</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*（4）*/先按性别再按民族统计学生人数，并按人数从多到少排列</span></span><br><span class="line"><span class="keyword">select</span> 性别,民族,<span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">as</span> 人数 <span class="keyword">from</span> student <span class="keyword">group</span> <span class="keyword">by</span> 性别,民族 <span class="keyword">order</span> <span class="keyword">by</span> 人数 <span class="keyword">desc</span>;</span><br><span class="line"><span class="keyword">SELECT</span> 性别,民族,<span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">AS</span> 人数 <span class="keyword">FROM</span> student <span class="keyword">GROUP</span> <span class="keyword">BY</span> 性别,民族 <span class="keyword">ORDER</span> <span class="keyword">BY</span> 人数 <span class="keyword">DESC</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*（5）*/查询选修两门课程的学生学号。</span></span><br><span class="line"><span class="keyword">select</span> 学号,<span class="built_in">count</span>(<span class="operator">*</span>) 选课数 <span class="keyword">from</span> score <span class="keyword">group</span> <span class="keyword">by</span> 学号 <span class="keyword">having</span> 选课数<span class="operator">=</span><span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*（6）*/ 统计每个学期的学分总数</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span>,<span class="built_in">sum</span>(学分) 总学分 <span class="keyword">from</span> course <span class="keyword">group</span> <span class="keyword">by</span> 学期;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*（7）*/统计至少有2个男生的班级编号</span></span><br><span class="line"><span class="keyword">select</span> 班级编号 <span class="keyword">from</span> student <span class="keyword">where</span> 性别<span class="operator">=</span><span class="string">&#x27;男&#x27;</span> <span class="keyword">group</span> <span class="keyword">by</span> 班级编号 <span class="keyword">having</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="operator">&gt;=</span> <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*（8）*/返回学生表的从第3行开始的4行记录。</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student limit <span class="number">2</span>,<span class="number">4</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*（9）*/统计2014级各系学生人数。</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">left</span>(班级编号,<span class="number">2</span>) 系别,<span class="built_in">count</span>(<span class="operator">*</span>) 人数 <span class="keyword">from</span> student <span class="keyword">where</span> <span class="keyword">left</span>(学号,<span class="number">4</span>) <span class="operator">=</span> <span class="number">2014</span> <span class="keyword">group</span> <span class="keyword">by</span> <span class="keyword">left</span>(班级编号,<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*（10）*/按照性别、民族统计人数，并显示分类小计。</span></span><br><span class="line"><span class="keyword">select</span> 性别,民族,<span class="built_in">count</span>(<span class="operator">*</span>) 人数 <span class="keyword">from</span> student <span class="keyword">group</span> <span class="keyword">by</span> 性别,民族 <span class="keyword">WITH</span> <span class="keyword">ROLLUP</span>;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="多表查询"><a href="#多表查询" class="headerlink" title="多表查询"></a>多表查询</h2><blockquote><p>前面介绍了使用SELECT子句选择列，本小节讨论SELECT查询的对象（即数据源）的构成形式。SELECT的查询对象由FROM子句指定。</p></blockquote><h3 id="语法格式-7"><a href="#语法格式-7" class="headerlink" title="语法格式-7"></a>语法格式</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span>  表名<span class="number">1</span> [ [<span class="keyword">AS</span>] 别名<span class="number">1</span> ] [ , 表名<span class="number">2</span>[ [<span class="keyword">AS</span>] 别名<span class="number">2</span>]] …      <span class="comment">/*查询表*/</span></span><br><span class="line">            <span class="operator">|</span> <span class="keyword">JOIN</span>子句                      <span class="comment">/*连接表*/</span></span><br></pre></td></tr></table></figure><h4 id="引用一个表"><a href="#引用一个表" class="headerlink" title="引用一个表"></a>引用一个表</h4><blockquote><p>可以用两种方式引用一个表，第一种方式是使用USE语句让一个数据库成为当前数据库，在这种情况下，如果在FROM子句中指定表名，则该表应该属于当前数据库。第二种方式是指定的时候在表名前带上表所属数据库的名字。例如，假设当前数据库是db1，现在要显示数据库db2里的表tb的内容，使用如下语句：</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span>  <span class="operator">*</span>  <span class="keyword">FROM</span>  db2.tb;</span><br></pre></td></tr></table></figure><blockquote><p>当然，在SELECT关键字后指定列名的时候也可以在列名前带上所属数据库和表的名字，但是一般来说，如果选择的字段在各表中是唯一的，就没有必要去特别指定。</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】 从Members表中检索出所有客户的信息，并使用表别名Users。</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span>  Members <span class="keyword">AS</span> Users; </span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="引用多个表"><a href="#引用多个表" class="headerlink" title="引用多个表"></a>引用多个表</h4><blockquote><p>如果要在不同表中查询数据，则必须在FROM子句中指定多个表。指定多个表时就要使用到连接。当不同列的数据组合到一个表中叫做表的连接。</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】 查找Bookstore数据库中客户订购的图书书名，订购册数和订购时间。</span></span><br><span class="line"> <span class="keyword">SELECT</span>  Book.书名, Sell.订购册数, Sell.订购时间</span><br><span class="line">        <span class="keyword">FROM</span>  Book, Sell </span><br><span class="line">            <span class="keyword">WHERE</span> Book.图书编号<span class="operator">=</span>Sell.图书编号; </span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="多表连接—全连接（交叉连接）"><a href="#多表连接—全连接（交叉连接）" class="headerlink" title="多表连接—全连接（交叉连接）"></a>多表连接—全连接（交叉连接）</h3><h4 id="概念-2"><a href="#概念-2" class="headerlink" title="概念-2"></a>概念</h4><blockquote><p>当数据查询涉及到多张表格时，要将多张表格的数据连接起来组成一张表格，连接的方式有多种。</p></blockquote><blockquote><p>交叉连接产生的新表是每个表的每行都与其他表中的每行交叉以产生所有可能的组合，列包含了所有表中出现的列，也就是笛卡儿积。全连接可能得到的行数为每个表中行数之积。</p><p>如表A有3行，表B有2行，表A和B全连接后得到6行（3x2=6)的表。</p></blockquote><blockquote><p><strong>交叉连接的连接过程：</strong></p><p>例如，有一个学生1表和一个单科成绩表，结果集是两个表记录的交叉乘积，列是两个表列的集合。</p></blockquote><p class='item-img' data-src='/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241215172941395.png'><img src="/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241215172941395.png" alt="交叉连接的连接过程"></p><p class='item-img' data-src='/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241215173009189.png'><img src="/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241215173009189.png" alt="交叉连接结果"></p><h4 id="案例-23"><a href="#案例-23" class="headerlink" title="案例-23"></a>案例</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】 交叉连接book表和sell表。</span></span><br><span class="line">   (<span class="number">1</span>)<span class="keyword">SELECT</span>     <span class="operator">*</span>     <span class="keyword">FROM</span>  Book, Sell</span><br><span class="line">或</span><br><span class="line">   (<span class="number">2</span>)<span class="keyword">SELECT</span>     <span class="operator">*</span>     <span class="keyword">FROM</span>  Book  <span class="keyword">join</span>   Sell</span><br></pre></td></tr></table></figure><h3 id="内连接（等值连接、自然连接）"><a href="#内连接（等值连接、自然连接）" class="headerlink" title="内连接（等值连接、自然连接）"></a>内连接（等值连接、自然连接）</h3><h4 id="概念-3"><a href="#概念-3" class="headerlink" title="概念-3"></a>概念</h4><blockquote><p>FROM子句各个表用逗号分隔，这样就指定了全连接。全连接潜在地产生数量非常大的行，因为可能得到的行数为每个表中行数之积。在这样的情形下，通常要使用WHERE子句设定条件来将结果集减少为易于管理的大小，这样的连接即为等值连接。</p><p>若表A和B进行等值连接（T1=T3 ），则如下表所示，只有两行。</p></blockquote><table><thead><tr><th>T1</th><th>T2</th><th>T3</th><th>T4</th><th>T5</th></tr></thead><tbody><tr><td>1</td><td>A</td><td>1</td><td>3</td><td>M</td></tr><tr><td>2</td><td>B</td><td>2</td><td>0</td><td>N</td></tr></tbody></table><blockquote><p>使用JOIN关键字的连接，语法格式如下：</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">表名<span class="number">1</span> <span class="keyword">INNER</span> <span class="keyword">JOIN</span> 表名<span class="number">2</span> <span class="keyword">ON</span> 条件 <span class="operator">|</span> <span class="keyword">USING</span> (列名)</span><br></pre></td></tr></table></figure><h4 id="案例-24"><a href="#案例-24" class="headerlink" title="案例-24"></a>案例</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】 查找Bookstore数据库中客户订购的图书书名，订购册数和订购时间。</span></span><br><span class="line">（<span class="number">1</span>）<span class="keyword">SELECT</span>  Book.书名, Sell.订购册数, Sell.订购时间</span><br><span class="line">         <span class="keyword">FROM</span>  Book, Sell </span><br><span class="line">         <span class="keyword">WHERE</span> Book.图书编号<span class="operator">=</span>Sell.图书编号; </span><br><span class="line">（<span class="number">2</span>）<span class="keyword">SELECT</span>  Book.书名, Sell.订购册数, Sell.订购时间</span><br><span class="line">        <span class="keyword">FROM</span>  Book [<span class="keyword">inner</span>] <span class="keyword">join</span> Sell </span><br><span class="line">        <span class="keyword">ON</span> Book.图书编号<span class="operator">=</span>Sell.图书编号; </span><br></pre></td></tr></table></figure><p>ㅤㅤㅤㅤ</p><blockquote><ul><li>内连接是系统默认的，可以省略INNER关键字。</li><li>使用内连接后，FROM子句中ON条件主要用来连接表，其他并不属于连接表的条件可以使用WHERE子句来指定。</li></ul></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例 】 用JOIN关键字表达下列查询：查找购买了“网页程序设计” 图书信息。</span></span><br><span class="line"><span class="keyword">SELECT</span> 书名,订购册数</span><br><span class="line">        <span class="keyword">FROM</span> Book <span class="keyword">JOIN</span> Sell</span><br><span class="line">           <span class="keyword">ON</span> Book.图书编号 <span class="operator">=</span> Sell. 图书编号</span><br><span class="line">             <span class="keyword">WHERE</span> 书名 <span class="operator">=</span> <span class="string">&#x27;网页程序设计&#x27;</span>; </span><br><span class="line"></span><br><span class="line"><span class="comment">-- 【例】 用JOIN关键字表达下列查询：查找订购数量大于5本图书和会员姓名和订购册数。</span></span><br><span class="line"><span class="keyword">SELECT</span> 会员姓名,订购册数</span><br><span class="line">    <span class="keyword">FROM</span>  Sell  <span class="keyword">JOIN</span>   Members   </span><br><span class="line">         <span class="keyword">ON</span>  Sell.用户号 <span class="operator">=</span> Members.用户号</span><br><span class="line">                  <span class="keyword">WHERE</span> 订购册数<span class="operator">&gt;</span><span class="number">5</span> ; </span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ㅤㅤㅤㅤ</p><blockquote><p>内连接还可以用于多个表的连接。</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】 用JOIN关键字表达下列查询：查找购买了“网页程序设计”且订购数量大于5本的图书和会员姓名和订购册数。</span></span><br><span class="line"><span class="keyword">SELECT</span> Book.图书编号, 会员姓名, 书名, 订购册数</span><br><span class="line">    <span class="keyword">FROM</span>  Sell  <span class="keyword">JOIN</span>  Book  <span class="keyword">ON</span>  Book. 图书编号<span class="operator">=</span> Sell.图书编号</span><br><span class="line">          <span class="keyword">JOIN</span>   Members   <span class="keyword">ON</span>  Sell.身份证号 <span class="operator">=</span> Members.身份证号</span><br><span class="line">                  <span class="keyword">WHERE</span> 书名 <span class="operator">=</span> <span class="string">&#x27;网页程序设计&#x27;</span>  <span class="keyword">AND</span> 订购册数<span class="operator">&gt;</span><span class="number">5</span> ; </span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ㅤㅤㅤㅤ</p><h4 id="自连接"><a href="#自连接" class="headerlink" title="自连接"></a>自连接</h4><blockquote><p>作为特例，可以将一个表与它自身进行连接，称为<strong>自连接</strong>。若要在一个表中查找具有相同列值的行，则可以使用自连接。使用自连接时需为表指定两个别名，且对所有列的引用均要用别名限定。</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】 查找BookStore数据库中订单不同、图书编号相同的图书的订单号、图书编号和订购册数。</span></span><br><span class="line"><span class="keyword">SELECT</span>  a.订单号,a.图书编号,a.订购册数</span><br><span class="line">              <span class="keyword">FROM</span>  Sell  <span class="keyword">AS</span>  a  <span class="keyword">JOIN</span>  Sell  <span class="keyword">AS</span>  b </span><br><span class="line">              <span class="keyword">ON</span>  a. 图书编号<span class="operator">=</span>b. 图书编号</span><br><span class="line">              <span class="keyword">where</span> a. 订单号<span class="operator">!=</span>b. 订单号;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="Using子句"><a href="#Using子句" class="headerlink" title="Using子句"></a>Using子句</h4><blockquote><p>如果要连接的表中有列名相同，并且连接的条件就是列名相等，那么ON条件也可以换成USING子句。USING（列名）子句用于为一系列的列进行命名。这些列必须同时在两个表中存在。其中列名为两表中相同的列名。</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】 查找Members表中所有订购过图书的用户的姓名。</span></span><br><span class="line"> <span class="keyword">SELECT</span>  <span class="keyword">Distinct</span> 姓名 <span class="keyword">FROM</span> Members  <span class="keyword">JOIN</span>  Sell <span class="keyword">USING</span> (用户号);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="外连接"><a href="#外连接" class="headerlink" title="外连接"></a>外连接</h3><blockquote><p>指定了OUTER关键字的连接为外连接。外连接包括：</p><ul><li><p><strong>左外连接（LEFT OUTER JOIN）：</strong></p><pre><code>结果表中除了匹配行外，还包括左表有的但右表中不匹配的行，对于这样的行，从右表被选择的列设置为NULL。</code></pre></li><li><p><strong>右外连接（RIGHT OUTER JOIN）：</strong></p><p>结果表中除了匹配行外，还包括右表有的但左表中不匹配的行，对于这样的行，从左表被选择的列设置为NULL。</p></li></ul></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】 查找所有图书的图书编号、数量及订购了图书的会员身份证号，若从未订购过，也要包括其情况。</span></span><br><span class="line"><span class="keyword">SELECT</span> Book.图书编号,Book.数量</span><br><span class="line"><span class="keyword">FROM</span> Book <span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> Sell</span><br><span class="line"><span class="keyword">ON</span> Book.图书编号<span class="operator">=</span> Sell.图书编号;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 【例】 查找订购了图书的会员的订单号、图书编号和订购册数以及所有会员的会员姓名。 </span></span><br><span class="line"><span class="keyword">SELECT</span> 订单号,图书编号,订购册数, Members.会员姓名</span><br><span class="line"><span class="keyword">FROM</span> Sell <span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> Members </span><br><span class="line"><span class="keyword">ON</span> Members.用户号<span class="operator">=</span> Sell.用户号; </span><br><span class="line"></span><br></pre></td></tr></table></figure><p class='item-img' data-src='/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241215211431133.png'><img src="/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241215211431133.png" alt="各个连接"></p><h3 id="练习-4"><a href="#练习-4" class="headerlink" title="练习-4"></a>练习</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 多表查询实训</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*（1）*/查询所有学生的学号、姓名、课程号和成绩</span></span><br><span class="line"><span class="keyword">select</span> a.学号,姓名,课程号,成绩 <span class="keyword">from</span> student a <span class="keyword">join</span> score b <span class="keyword">using</span>(学号);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*（2）*/查询会计学院全体同学的学号、姓名和班级名称</span></span><br><span class="line"><span class="keyword">select</span> a.学号,姓名,班级名称 <span class="keyword">from</span> student a <span class="keyword">join</span> class b <span class="keyword">using</span>(班级编号) <span class="keyword">where</span> 院系<span class="operator">=</span><span class="string">&#x27;会计学院&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*（3）*/查询成绩在90分以上的学生的学号、姓名和成绩</span></span><br><span class="line"><span class="keyword">select</span> 学号,姓名,成绩 <span class="keyword">from</span> student a <span class="keyword">join</span> score b <span class="keyword">using</span>(学号) <span class="keyword">where</span> 成绩<span class="operator">&gt;</span><span class="number">90</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*（4）*/使用左外连接查询所有课程的课程号、课程名称和选修了该课程的学生的学号、姓名和成绩，没有学生选修的课程也要包括。</span></span><br><span class="line"><span class="keyword">select</span> a.课程号,课程名,b.学号,姓名,成绩 <span class="keyword">from</span> course a <span class="keyword">left</span> <span class="keyword">join</span> score b <span class="keyword">using</span>(课程号) <span class="keyword">left</span> <span class="keyword">join</span> student c <span class="keyword">using</span>(学号);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*（5）*/查询“计算机14-1班”所有学生的学号和姓名</span></span><br><span class="line"><span class="keyword">select</span> 学号,姓名 <span class="keyword">from</span> class a <span class="keyword">join</span> student b <span class="keyword">using</span>(班级编号) <span class="keyword">where</span> 班级名称<span class="operator">=</span><span class="string">&#x27;计算机14-1班&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*（6）*/查询“张晓勇”同学所选课程的课程名称和成绩。</span></span><br><span class="line"><span class="keyword">select</span> 课程名,成绩 <span class="keyword">from</span> course a <span class="keyword">join</span> score b <span class="keyword">using</span>(课程号) <span class="keyword">join</span> student c <span class="keyword">using</span>(学号) <span class="keyword">where</span> 姓名<span class="operator">=</span><span class="string">&#x27;张晓勇&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*（7）*/查询至少选修2门课程的女学生姓名。</span></span><br><span class="line"><span class="keyword">select</span> 姓名 <span class="keyword">from</span> score a <span class="keyword">join</span> student b <span class="keyword">using</span>(学号) <span class="keyword">where</span> 性别<span class="operator">=</span><span class="string">&#x27;女&#x27;</span> <span class="keyword">group</span> <span class="keyword">by</span> 学号 <span class="keyword">having</span> <span class="built_in">count</span>(<span class="operator">*</span>)<span class="operator">&gt;=</span><span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*（8）*/查询姓“王”的学生所学的课程名称。</span></span><br><span class="line"><span class="keyword">select</span> 姓名,课程名 <span class="keyword">from</span> student a <span class="keyword">join</span> score b <span class="keyword">using</span>(学号) <span class="keyword">join</span> course c <span class="keyword">using</span>(课程号) <span class="keyword">where</span> 姓名 <span class="keyword">like</span> <span class="string">&#x27;王%&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*（9）*/查询选修“管理学”课程且成绩在80～90分之间的学生学号姓名及成绩。</span></span><br><span class="line"><span class="keyword">select</span> 学号,姓名,成绩 <span class="keyword">from</span> course a <span class="keyword">join</span> score b <span class="keyword">using</span>(课程号) <span class="keyword">join</span> student c <span class="keyword">using</span>(学号) <span class="keyword">where</span> 课程名<span class="operator">=</span><span class="string">&#x27;管理学&#x27;</span> <span class="keyword">and</span> 成绩 <span class="keyword">between</span> <span class="number">80</span> <span class="keyword">and</span> <span class="number">90</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*（10）*/查询选修“计算机基础”课程的学生的平均年龄。</span></span><br><span class="line"><span class="keyword">select</span> 课程名,<span class="built_in">avg</span>(<span class="keyword">year</span>(now())<span class="operator">-</span><span class="keyword">year</span>(出生日期)) 平均年龄 <span class="keyword">from</span> course a <span class="keyword">join</span> score b <span class="keyword">using</span>(课程号) <span class="keyword">join</span> student c <span class="keyword">using</span>(学号) <span class="keyword">where</span> 课程名<span class="operator">=</span><span class="string">&#x27;计算机基础&#x27;</span>;</span><br><span class="line"><span class="comment">-- </span></span><br><span class="line"><span class="comment">-- ---------------分隔线----------------</span></span><br><span class="line"><span class="comment">-- </span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 子查询实训</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 1、查询“计算机14-1班”所有学生的学号和姓名</span></span><br><span class="line"><span class="keyword">select</span> 学号,姓名 <span class="keyword">from</span> student <span class="keyword">where</span> 班级编号 <span class="keyword">in</span> (<span class="keyword">select</span> 班级编号 <span class="keyword">from</span> class <span class="keyword">where</span> 班级名称<span class="operator">=</span><span class="string">&#x27;计算机14-1班&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2、查询与“张晓勇”同一个系的同学姓名。</span></span><br><span class="line"><span class="keyword">select</span> 班级编号,姓名 <span class="keyword">from</span> student <span class="keyword">where</span> <span class="keyword">left</span>(班级编号,<span class="number">2</span>) <span class="keyword">in</span> (<span class="keyword">select</span> <span class="keyword">left</span>(班级编号,<span class="number">2</span>) <span class="keyword">from</span> student <span class="keyword">where</span> 姓名<span class="operator">=</span><span class="string">&#x27;张晓勇&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3、查询成绩比该课程平均成绩高的学生的学号及成绩。</span></span><br><span class="line"><span class="keyword">select</span> 学号,成绩 <span class="keyword">from</span> score <span class="keyword">where</span> 成绩 <span class="operator">&gt;</span> (<span class="keyword">select</span> <span class="built_in">avg</span>(成绩) <span class="keyword">from</span> score);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 4、查询没有选修“11003”课程的学生学号及姓名。</span></span><br><span class="line"><span class="keyword">select</span> 学号,姓名 <span class="keyword">from</span> student <span class="keyword">where</span> 学号 <span class="keyword">in</span> (<span class="keyword">select</span> 学号 <span class="keyword">from</span> score <span class="keyword">where</span> 课程号 <span class="operator">!=</span> <span class="string">&#x27;11003&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 5、查询年龄高于平均年龄的学生的学号，姓名和出生日期</span></span><br><span class="line"><span class="keyword">select</span> 学号,姓名,出生日期 <span class="keyword">from</span> student <span class="keyword">where</span> <span class="keyword">year</span>(now())<span class="operator">-</span><span class="keyword">year</span>(出生日期) <span class="operator">&gt;</span> (<span class="keyword">select</span> <span class="built_in">avg</span>(<span class="keyword">year</span>(now())<span class="operator">-</span><span class="keyword">year</span>(出生日期)) <span class="keyword">from</span> student);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 6、查询选修了“计算机基础”课程的学生学号、姓名及班级编号。</span></span><br><span class="line"><span class="keyword">select</span> 学号,姓名,班级编号 <span class="keyword">from</span> student <span class="keyword">where</span> 学号 <span class="keyword">in</span> (<span class="keyword">select</span> 学号 <span class="keyword">from</span> score <span class="keyword">where</span> 课程号 <span class="keyword">in</span> (<span class="keyword">select</span> 课程号 <span class="keyword">from</span> course <span class="keyword">where</span> 课程名<span class="operator">=</span><span class="string">&#x27;计算机基础&#x27;</span>));</span><br><span class="line"><span class="keyword">select</span> 学号,姓名,班级编号 <span class="keyword">from</span> student a <span class="keyword">join</span> score b <span class="keyword">using</span>(学号) <span class="keyword">where</span> 课程号 <span class="keyword">in</span> (<span class="keyword">select</span> 课程号 <span class="keyword">from</span> course <span class="keyword">where</span> 课程名<span class="operator">=</span><span class="string">&#x27;计算机基础&#x27;</span>);</span><br><span class="line"><span class="comment">-- 7、查询出生日期小于所有男同学出生日期的女同学的姓名及班级编号。</span></span><br><span class="line"><span class="keyword">select</span> 姓名,班级编号 <span class="keyword">from</span> student <span class="keyword">where</span> 性别<span class="operator">=</span><span class="string">&#x27;女&#x27;</span> <span class="keyword">and</span> 出生日期 <span class="operator">&gt;</span> <span class="keyword">all</span>(<span class="keyword">select</span> 出生日期 <span class="keyword">from</span> student <span class="keyword">where</span> 性别<span class="operator">=</span><span class="string">&#x27;男&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 8、 查询学号比“李明”同学大，而出生日期比他小的学生姓名。</span></span><br><span class="line"><span class="keyword">select</span> 姓名 <span class="keyword">from</span> student <span class="keyword">where</span> 学号 <span class="operator">&gt;</span> (<span class="keyword">select</span> 学号 <span class="keyword">from</span> student <span class="keyword">where</span> 姓名<span class="operator">=</span><span class="string">&#x27;李明&#x27;</span>) <span class="keyword">and</span> <span class="keyword">year</span>(出生日期) <span class="operator">&gt;</span> <span class="keyword">some</span>(<span class="keyword">select</span> <span class="keyword">year</span>(出生日期) <span class="keyword">from</span> student);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="综合小测实训"><a href="#综合小测实训" class="headerlink" title="综合小测实训"></a>综合小测实训</h2><h3 id="小测"><a href="#小测" class="headerlink" title="小测"></a>小测</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 综合小测实训</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 1、  查询雇员表中雇佣年限超过十年的员工雇员ID、姓名、雇用年限和薪水</span></span><br><span class="line"><span class="keyword">select</span> 雇员ID,姓名,<span class="keyword">year</span>(now())<span class="operator">-</span><span class="keyword">year</span>(雇佣日期) 雇用年限,薪水 <span class="keyword">from</span> 雇员表 <span class="keyword">where</span> <span class="keyword">year</span>(now())<span class="operator">-</span><span class="keyword">year</span>(雇佣日期) <span class="operator">&gt;</span> <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2、  查询雇员表中所有特长为“计算机”、“钢琴”、“书法”的雇员的姓名、特长。</span></span><br><span class="line"><span class="keyword">select</span> 姓名,特长 <span class="keyword">from</span> 雇员表 <span class="keyword">where</span> 特长 <span class="keyword">in</span>(<span class="string">&#x27;计算机&#x27;</span>,<span class="string">&#x27;钢琴&#x27;</span>,<span class="string">&#x27;书法&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3、查询雇员表中所有姓名中第二个字为“丽”字的雇员的姓名和出生日期。</span></span><br><span class="line"><span class="keyword">select</span> 姓名,出生年月 <span class="keyword">from</span> 雇员表 <span class="keyword">where</span> 姓名 <span class="keyword">like</span> <span class="string">&#x27;_丽%&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 4、在订单表p_order中，查询产品ID、数量和订货日期，并按订货数量降序给产品排序。</span></span><br><span class="line"><span class="keyword">select</span> 产品ID,数量,订货日期 <span class="keyword">from</span> 订单表 <span class="keyword">order</span> <span class="keyword">by</span> 数量 <span class="keyword">desc</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 5、在产品表中查询平均价格超过10元的产品的种类(多种方法)</span></span><br><span class="line"><span class="keyword">select</span> 类别名 <span class="keyword">from</span> 类别表 <span class="keyword">where</span> 类别ID <span class="keyword">in</span> (<span class="keyword">select</span> 类别ID  <span class="keyword">from</span> 产品表 <span class="keyword">group</span> <span class="keyword">by</span> 类别ID <span class="keyword">having</span> <span class="built_in">avg</span>(单价)<span class="operator">&gt;</span><span class="number">10</span>);</span><br><span class="line"><span class="keyword">select</span> 类别名 <span class="keyword">from</span> 类别表 a <span class="keyword">join</span> 产品表 b <span class="keyword">using</span>(类别ID) <span class="keyword">group</span> <span class="keyword">by</span> 类别ID <span class="keyword">having</span> <span class="built_in">avg</span>(单价)<span class="operator">&gt;</span><span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 6、查询所有订购了“鼠标”产品的公司的公司名称和联系方式。(多种方法)</span></span><br><span class="line"><span class="keyword">select</span> 公司名称,联系方式 <span class="keyword">from</span> 客户表 <span class="keyword">where</span> 客户ID <span class="keyword">in</span> (<span class="keyword">select</span> 客户ID <span class="keyword">from</span> 订单表 <span class="keyword">where</span> 产品ID <span class="keyword">in</span> (<span class="keyword">select</span> 产品ID <span class="keyword">from</span> 产品表 <span class="keyword">where</span> 产品名<span class="operator">=</span><span class="string">&#x27;鼠标&#x27;</span>));</span><br><span class="line"><span class="keyword">select</span> 公司名称,联系方式 <span class="keyword">from</span> 客户表 a <span class="keyword">join</span> 订单表 b <span class="keyword">using</span>(客户ID) <span class="keyword">where</span> 产品ID <span class="keyword">in</span> (<span class="keyword">select</span> 产品ID <span class="keyword">from</span> 产品表 <span class="keyword">where</span> 产品名<span class="operator">=</span><span class="string">&#x27;鼠标&#x27;</span>);</span><br><span class="line"><span class="keyword">select</span> 公司名称,联系方式 <span class="keyword">from</span> 客户表 a <span class="keyword">join</span> 订单表 b <span class="keyword">using</span>(客户ID) <span class="keyword">join</span> 产品表 c <span class="keyword">using</span>(产品ID) <span class="keyword">where</span> 产品名<span class="operator">=</span><span class="string">&#x27;鼠标&#x27;</span>;</span><br><span class="line"><span class="keyword">SELECT</span> 公司名称,联系方式 <span class="keyword">from</span> `产品表` a,`订单表` b, `客户表` c <span class="keyword">where</span> a.产品ID <span class="operator">=</span> b.产品ID <span class="keyword">and</span> b.客户ID<span class="operator">=</span>c.客户ID <span class="keyword">and</span> a.产品名 <span class="operator">=</span> <span class="string">&#x27;鼠标&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 7、查询已订购了产品的公司的公司名称、联系人姓名和所订产品的产品ID和数量(多种方法)</span></span><br><span class="line"><span class="keyword">select</span> 公司名称,联系人姓名,产品ID,数量 <span class="keyword">from</span> 客户表 a <span class="keyword">join</span> 订单表 b <span class="keyword">using</span>(客户ID);</span><br><span class="line"><span class="keyword">SELECT</span> 公司名称,联系人姓名,产品ID,数量 <span class="keyword">from</span> `客户表` a, `订单表` b <span class="keyword">where</span> a.`客户ID`<span class="operator">=</span>b.`客户ID`;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 8、使用左外连接查询产品表 表中凡是有类别信息的所有产品信息。</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">from</span> 产品表 a <span class="keyword">left</span> <span class="keyword">JOIN</span> `类别表` b <span class="keyword">on</span> a.`类别ID`<span class="operator">=</span>b.`类别ID` <span class="keyword">where</span> a.类别ID <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="数据视图"><a href="#数据视图" class="headerlink" title="数据视图"></a>数据视图</h2><h3 id="练习-5"><a href="#练习-5" class="headerlink" title="练习-5"></a>练习</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 数据视图实训</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 1、在schooldb数据库上创建视图v_score，包括所有男同学的学号,姓名，民族以及其选修的课程名和成绩</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> v_score <span class="keyword">as</span></span><br><span class="line"><span class="keyword">select</span> 学号,姓名,民族,课程名,成绩 <span class="keyword">from</span> student a <span class="keyword">join</span> score b <span class="keyword">using</span>(学号) <span class="keyword">join</span> course c <span class="keyword">using</span>(课程号) <span class="keyword">where</span> 性别<span class="operator">=</span><span class="string">&#x27;男&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2、在视图v_score中查找少数民族学生的学号，姓名以及选修的课程名和成绩</span></span><br><span class="line"><span class="keyword">select</span> 学号,姓名,课程名,成绩 <span class="keyword">from</span> v_score <span class="keyword">where</span> 民族 <span class="operator">!=</span> <span class="string">&#x27;汉&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3、创建视图v_avg，包括学号（在视图中列名为name）和平均成绩（在视图中列名为score_avg）</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> v_avg(name,score_avg) <span class="keyword">as</span></span><br><span class="line"><span class="keyword">select</span> 学号,<span class="built_in">avg</span>(成绩) <span class="keyword">from</span> score <span class="keyword">group</span> <span class="keyword">by</span> 学号;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 4、使用视图v_avg，查找平均成绩在80分以上的学生的学号和平均成绩</span></span><br><span class="line"><span class="keyword">select</span> name,score_avg <span class="keyword">from</span> v_avg <span class="keyword">where</span> score_avg <span class="operator">&gt;</span> <span class="number">80</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 5、创建视图v_student视图中包含所有汉族学生的学生信息，并向v_student视图中插入一条记录“2020410001,李牧，男，1998-10-21，广东，汉，null”</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> v_student <span class="keyword">as</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student <span class="keyword">where</span> 民族<span class="operator">=</span><span class="string">&#x27;汉&#x27;</span> <span class="keyword">with</span> <span class="keyword">check</span> option;</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> v_student <span class="keyword">values</span>(<span class="string">&#x27;2020410001&#x27;</span>,<span class="string">&#x27;李牧&#x27;</span>,<span class="string">&#x27;男&#x27;</span>,<span class="string">&#x27;1998-10-21&#x27;</span>,<span class="string">&#x27;广东&#x27;</span>,<span class="string">&#x27;汉&#x27;</span>,<span class="keyword">null</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 6、删除v_student中女同学的记录</span></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> v_student <span class="keyword">where</span> 性别<span class="operator">=</span><span class="string">&#x27;女&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 7、创建视图v_term4查询第4学期所有课程信息,并要求添加with check option 子句（注意添加该子句的作用）</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> v_term4 <span class="keyword">as</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> course <span class="keyword">where</span> 学期 <span class="operator">=</span> <span class="number">4</span> <span class="keyword">with</span> <span class="keyword">check</span> option;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 8、向v_term4视图插入一门新课，具体课程信息自定</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> v_term4 <span class="keyword">values</span>(<span class="string">&#x27;21007&#x27;</span>,<span class="string">&#x27;Linux操作系统&#x27;</span>,<span class="number">4</span>,<span class="number">64</span>,<span class="number">4</span>,<span class="string">&#x27;21001&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 9、通过视图v_term4创建v_term4new视图，查询第4学期课程数和总课时数。</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> v_term4new(课程数,总课时数) <span class="keyword">as</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(课程号),<span class="built_in">sum</span>(学时) <span class="keyword">from</span> v_term4;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 10、删除v_term4new视图</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">view</span> v_term4new;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="MySQL索引"><a href="#MySQL索引" class="headerlink" title="MySQL索引"></a>MySQL索引</h2><h3 id="练习-6"><a href="#练习-6" class="headerlink" title="练习-6"></a>练习</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- /*MySQL索引习题*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*二、*/</span></span><br><span class="line"><span class="comment">-- /*1. */对schooldb数据库course表“课程名”列上的前3个字符建立一个升序的索引“I_kc”</span></span><br><span class="line"><span class="keyword">create</span> index I_kc </span><br><span class="line">       <span class="keyword">on</span> course(课程名(<span class="number">3</span>) <span class="keyword">ASC</span>);</span><br><span class="line"> </span><br><span class="line"><span class="comment">-- /*2.*/在class表的院系列和年级列上建立一个复合索引I_CX</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> class</span><br><span class="line"><span class="keyword">add</span> index I_cx(院系,年级);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*3. */在student表的姓名列上创建一个唯一索引</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student</span><br><span class="line">     <span class="keyword">add</span> <span class="keyword">unique</span> (姓名);</span><br><span class="line"> </span><br><span class="line"><span class="comment">-- /*4.*/为course表创建主键索引（假设course表中主键未设定）</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> class</span><br><span class="line"><span class="keyword">add</span> <span class="keyword">primary</span> key (课程号);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*5.*/创建score表学号和课程号的联合主键（假设score表中主键未设定）,并在成绩列创建普通索引</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> score</span><br><span class="line">    <span class="keyword">add</span> <span class="keyword">primary</span> key(学号,课程号),</span><br><span class="line">    <span class="keyword">add</span> index (成绩);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*6.*/删除course表的主键</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> course <span class="keyword">drop</span> <span class="keyword">primary</span> key ;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="数据控制语言—DCL"><a href="#数据控制语言—DCL" class="headerlink" title="数据控制语言—DCL"></a>数据控制语言—DCL</h2><h3 id="练习-7"><a href="#练习-7" class="headerlink" title="练习-7"></a>练习</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*数据库管理习题*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*二、*/</span></span><br><span class="line"><span class="comment">-- 1.创建用户king1,king2，密码分别为ken1，ken2”</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span></span><br><span class="line">king1<span class="variable">@localhost</span> IDENTIFIED <span class="keyword">BY</span> <span class="string">&#x27;ken1&#x27;</span>, </span><br><span class="line">king2<span class="variable">@localhost</span> IDENTIFIED <span class="keyword">BY</span> <span class="string">&#x27;ken2&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2.授予用户king1在schooldb数据库student表上的select权限 </span></span><br><span class="line"> <span class="keyword">GRANT</span> <span class="keyword">SELECT</span></span><br><span class="line">    <span class="keyword">ON</span>  schooldb.student </span><br><span class="line">        <span class="keyword">TO</span> king1<span class="variable">@localhost</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3.授予用户king2在schooldb数据库class表上的select，update权限 </span></span><br><span class="line"> <span class="keyword">GRANT</span> <span class="keyword">SELECT</span>,<span class="keyword">update</span></span><br><span class="line">    <span class="keyword">ON</span>  schooldb.class </span><br><span class="line">        <span class="keyword">TO</span> king2<span class="variable">@localhost</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 4.授予用户king1在schooldb数据库所有表上的select权限 </span></span><br><span class="line"> <span class="keyword">GRANT</span> <span class="keyword">SELECT</span></span><br><span class="line">    <span class="keyword">ON</span>  schooldb.<span class="operator">*</span> </span><br><span class="line">        <span class="keyword">TO</span> king1<span class="variable">@localhost</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 5.授予用户king2在schooldb数据库所有表上的所有权限 </span></span><br><span class="line"> <span class="keyword">GRANT</span> <span class="keyword">ALL</span></span><br><span class="line">    <span class="keyword">ON</span>  schooldb.<span class="operator">*</span> </span><br><span class="line">        <span class="keyword">TO</span> king2<span class="variable">@localhost</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 6.收回king2在schooldb数据库class表上的select权限</span></span><br><span class="line"> <span class="keyword">REVOKE</span>  <span class="keyword">select</span></span><br><span class="line">    <span class="keyword">ON</span>  schooldb.class</span><br><span class="line">        <span class="keyword">FROM</span>  king2<span class="variable">@localhost</span>;</span><br><span class="line">        </span><br></pre></td></tr></table></figure><hr><p><strong>文章作者:</strong> [<a href="https://yjh021.github.io/">Blue Eagle</a>]</p><p><strong>文章链接:</strong> [<a href="https://yjh021.github.io/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/">https://yjh021.github.io/2024/12/08/MySQL课程笔记/</a>]</p><p><strong>版权声明:</strong> 本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 [<a href="https://yjh021.github.io/">Blue Eagle</a>]</p><hr>]]></content>
    
    
    <summary type="html">本文记录了MySQL学习过程中的代码示例，包括SQL基础语法、DDL、DML、DQL、DCL等内容。</summary>
    
    
    
    <category term="数据库" scheme="https://yjh021.github.io/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    <category term="MySQL" scheme="https://yjh021.github.io/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/"/>
    
    
    <category term="SQL" scheme="https://yjh021.github.io/tags/SQL/"/>
    
    <category term="数据库管理" scheme="https://yjh021.github.io/tags/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AE%A1%E7%90%86/"/>
    
    <category term="学习笔记" scheme="https://yjh021.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>MySQL的安装和使用</title>
    <link href="https://yjh021.github.io/2024/10/22/MySQL%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/"/>
    <id>https://yjh021.github.io/2024/10/22/MySQL%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/</id>
    <published>2024-10-22T10:10:00.000Z</published>
    <updated>2026-01-31T04:06:18.228Z</updated>
    
    <content type="html"><![CDATA[<h1>MySQL的安装和使用</h1><h2 id="安装方式"><a href="#安装方式" class="headerlink" title="安装方式"></a>安装方式</h2><p><strong>MySQL的安装有两种方式：</strong></p><ul><li><strong>解压配置方式</strong></li></ul><p class='item-img' data-src='/2024/10/22/MySQL%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/image-20241022132108868-1729574789233-4.png'><img src="/2024/10/22/MySQL%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/image-20241022132108868-1729574789233-4.png" alt="解压配置方式"></p><ul><li><strong>步骤安装方式</strong></li></ul><p class='item-img' data-src='/2024/10/22/MySQL%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/image-20241022132220573.png'><img src="/2024/10/22/MySQL%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/image-20241022132220573.png" alt="步骤安装方式"></p><h3 id="安装包下载-解压版"><a href="#安装包下载-解压版" class="headerlink" title="安装包下载-解压版"></a>安装包下载-解压版</h3><p>下载地址：<a href="https://downloads.mysql.com/archives/community/">https://downloads.mysql.com/archives/community/</a></p><p class='item-img' data-src='/2024/10/22/MySQL%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/image-20241022132437925-1729574796990-7.png'><img src="/2024/10/22/MySQL%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/image-20241022132437925-1729574796990-7.png" alt="安装包下载-解压版"></p><h4 id="解压软件包"><a href="#解压软件包" class="headerlink" title="解压软件包"></a>解压软件包</h4><p>将MySQL软件包解压在没有中文和空格的目录下</p><p class='item-img' data-src='/2024/10/22/MySQL%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/image-20241022164017599.png'><img src="/2024/10/22/MySQL%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/image-20241022164017599.png" alt="解压软件包"></p><h4 id="设置配置文件"><a href="#设置配置文件" class="headerlink" title="设置配置文件"></a>设置配置文件</h4><p>在解压目录创建my.ini文件并添加内容如下：</p><p class='item-img' data-src='/2024/10/22/MySQL%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/image-20241022164457895.png'><img src="/2024/10/22/MySQL%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/image-20241022164457895.png" alt="创建my.ini文件"></p><p class='item-img' data-src='/2024/10/22/MySQL%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/image-20241022164625165.png'><img src="/2024/10/22/MySQL%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/image-20241022164625165.png" alt="设置配置文件"></p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[mysqld]</span></span><br><span class="line"><span class="comment"># 设置3306端口</span></span><br><span class="line"><span class="attr">port</span>=<span class="number">3306</span></span><br><span class="line"><span class="comment"># 服务端使用的字符集默认为UTF8</span></span><br><span class="line"><span class="attr">character-set-server</span>=utf8</span><br><span class="line"><span class="comment"># 创建新表时将使用的默认存储引擎</span></span><br><span class="line"><span class="attr">default-storage-engine</span>=INNODB</span><br><span class="line"><span class="section">[mysql]</span></span><br><span class="line"><span class="comment"># 设置mysql客户端默认字符集</span></span><br><span class="line"><span class="attr">default-character-set</span>=utf8</span><br><span class="line"><span class="section">[client]</span></span><br><span class="line"><span class="comment"># 设置mysql客户端连接服务端时默认使用的端口</span></span><br><span class="line"><span class="attr">port</span>=<span class="number">3306</span></span><br><span class="line"><span class="attr">default-character-set</span>=utf8</span><br></pre></td></tr></table></figure><h4 id="配置系统环境"><a href="#配置系统环境" class="headerlink" title="配置系统环境"></a>配置系统环境</h4><p>①在【我的电脑】或【此电脑】右键，选择【属性】</p><p>②选择【高级系统设置】</p><p>③选择【高级】-》【环境变量】</p><p class='item-img' data-src='/2024/10/22/MySQL%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/image-20241022171449187.png'><img src="/2024/10/22/MySQL%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/image-20241022171449187.png" alt="配置系统环境"></p><p>④<strong>将MYSQL_HOME添加到PATH环境变量</strong></p><p class='item-img' data-src='/2024/10/22/MySQL%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/image-20241022172418123.png'><img src="/2024/10/22/MySQL%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/image-20241022172418123.png" alt="将MYSQL_HOME添加到PATH环境变量"></p><h4 id="服务操作"><a href="#服务操作" class="headerlink" title="服务操作"></a>服务操作</h4><p>使用管理员权限进入DOS，在cmd中，进入解压目录下的bin目录依次执行以下命令：</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># ①对mysql进行初始化，请注意，这里会生产一个临时密码，后边要使用这个临时密码</span><br><span class="line">  mysqld --initialize --user=mysql --console</span><br><span class="line"># ②安装mysql服务</span><br><span class="line">    mysqld --install</span><br><span class="line"># ③启动mysql服务</span><br><span class="line">   <span class="built_in">net</span> <span class="built_in">start</span> mysql</span><br><span class="line"># ④登录mysql，这里需要使用之前生成的临时密码</span><br><span class="line"> mysql -uroot -p</span><br><span class="line"># ⑤修改root用户密码</span><br><span class="line">ALTER USER &#x27;root&#x27;@&#x27;localhost&#x27; IDENTIFIED WITH mysql_native_password BY &#x27;<span class="number">123456</span>&#x27;;</span><br><span class="line"># ⑤修改root用户权限</span><br><span class="line">create user &#x27;root&#x27;@&#x27;%&#x27; IDENTIFIED WITH mysql_native_password BY &#x27;<span class="number">123456</span>&#x27;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p class='item-img' data-src='/2024/10/22/MySQL%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/image-20241022174700462.png'><img src="/2024/10/22/MySQL%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/image-20241022174700462.png" alt="修改用户名和密码"></p><h3 id="安装包下载-安装版"><a href="#安装包下载-安装版" class="headerlink" title="安装包下载-安装版"></a>安装包下载-安装版</h3><p>下载地址：<a href="https://downloads.mysql.com/archives/installer/">https://downloads.mysql.com/archives/installer/</a></p><p class='item-img' data-src='/2024/10/22/MySQL%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/image-20241022180857695.png'><img src="/2024/10/22/MySQL%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/image-20241022180857695.png" alt="安装包下载-安装版"></p><h4 id="按照步骤安装"><a href="#按照步骤安装" class="headerlink" title="按照步骤安装"></a>按照步骤安装</h4><p>第一步：</p><p class='item-img' data-src='/2024/10/22/MySQL%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/image-20241022175928758.png'><img src="/2024/10/22/MySQL%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/image-20241022175928758.png" alt="第一步"></p><p>第二步：此后按照流程安装即可，遇到<code>Next</code>（下一步）直接点击即可：</p><p class='item-img' data-src='/2024/10/22/MySQL%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/image-20241022180024758.png'><img src="/2024/10/22/MySQL%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/image-20241022180024758.png" alt="第二步"></p><p>第三步：点击<code>Execute</code>后需要等待几分钟。</p><p class='item-img' data-src='/2024/10/22/MySQL%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/image-20241022180107166.png'><img src="/2024/10/22/MySQL%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/image-20241022180107166.png" alt="第三步"></p><p>第四步：当所有的状态都变成Complete之后，点击 Next：</p><p class='item-img' data-src='/2024/10/22/MySQL%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/image-20241022180137457.png'><img src="/2024/10/22/MySQL%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/image-20241022180137457.png" alt="第四步"></p><p>第五步：</p><p class='item-img' data-src='/2024/10/22/MySQL%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/image-20241022180200990.png'><img src="/2024/10/22/MySQL%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/image-20241022180200990.png" alt="第五步"></p><p>第六步：</p><p class='item-img' data-src='/2024/10/22/MySQL%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/image-20241022180241719.png'><img src="/2024/10/22/MySQL%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/image-20241022180241719.png" alt="第六步"></p><p>第七步：</p><p class='item-img' data-src='/2024/10/22/MySQL%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/image-20241022180320443.png'><img src="/2024/10/22/MySQL%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/image-20241022180320443.png" alt="第七步"></p><p>第八步：此处输入密码务必记住，用于之后登陆数据库，建议将密码设置为：123456</p><p class='item-img' data-src='/2024/10/22/MySQL%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/image-20241022180350873.png'><img src="/2024/10/22/MySQL%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/image-20241022180350873.png" alt="第八步"></p><p>第九步：再按照  <strong>安装包下载-解压版</strong>  中的方法添加环境变量，步骤均为一样。</p><hr><p>以上两个安装方法，都可以在以管理员运行的 cmd 窗口中使用：<code>mysql -uroot -p</code>   来验证是否安装成功 。</p><p><strong>本篇文章的目的是为了方便查阅和学习。</strong></p><hr><p><strong>文章作者:</strong> [<a href="https://yjh021.github.io/">Blue Eagle</a>]</p><p><strong>文章链接:</strong> [<a href="https://yjh021.github.io/2024/10/22/MySQL%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/">https://yjh021.github.io/2024/10/22/MySQL的安装和使用/</a>]</p><p><strong>版权声明:</strong> 本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 [<a href="https://yjh021.github.io/">Blue Eagle</a>]</p><hr>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;MySQL的安装和使用&lt;/h1&gt;
&lt;h2 id=&quot;安装方式&quot;&gt;&lt;a href=&quot;#安装方式&quot; class=&quot;headerlink&quot; title=&quot;安装方式&quot;&gt;&lt;/a&gt;安装方式&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;MySQL的安装有两种方式：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;</summary>
      
    
    
    
    <category term="数据库" scheme="https://yjh021.github.io/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    <category term="MySQL" scheme="https://yjh021.github.io/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/"/>
    
    
    <category term="SQL" scheme="https://yjh021.github.io/tags/SQL/"/>
    
    <category term="数据库管理" scheme="https://yjh021.github.io/tags/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AE%A1%E7%90%86/"/>
    
    <category term="博客" scheme="https://yjh021.github.io/tags/%E5%8D%9A%E5%AE%A2/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="https://yjh021.github.io/2024/10/08/hello-world/"/>
    <id>https://yjh021.github.io/2024/10/08/hello-world/</id>
    <published>2024-10-08T12:26:17.516Z</published>
    <updated>2024-10-22T04:03:44.684Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick-Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create-a-new-post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run-server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate-static-files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy-to-remote-sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p><hr><p><strong>文章作者:</strong> [<a href="https://yjh021.github.io/">Blue Eagle</a>]</p><p><strong>文章链接:</strong> [<a href="https://yjh021.github.io/2024/10/08/hello-world/">https://yjh021.github.io/2024/10/08/hello-world/</a>]</p><p><strong>版权声明:</strong> 本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 [<a href="https://yjh021.github.io/">Blue Eagle</a>]</p><hr>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.io/docs/&quot;&gt;documentation&lt;/a&gt; for</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>MySQL学习代码</title>
    <link href="https://yjh021.github.io/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/"/>
    <id>https://yjh021.github.io/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/</id>
    <published>2024-10-04T08:32:00.000Z</published>
    <updated>2026-01-31T05:54:46.587Z</updated>
    
    <content type="html"><![CDATA[<h1>MySQL学习代码</h1><h2 id="SQL"><a href="#SQL" class="headerlink" title="SQL"></a>SQL</h2><blockquote><p>全称 Structured Query Language, 结构化查询语言。操作关系型数据库的编程语言，定义了一套操作关系型数据库统一标准。</p></blockquote><h3 id="SQL通用语法"><a href="#SQL通用语法" class="headerlink" title="SQL通用语法"></a>SQL通用语法</h3><blockquote><p>在学习具体的SQL语句之前，先来了解一下SQL语言的通用语法。</p><ol><li>SQL语句可以单行或多行书写,以分号结尾。</li><li>SQL语句可以使用空格/缩进来增强语句的可读性。</li><li>MySQL数据库的SQL语句不区分大小写，关键字建议使用大写。</li><li>注释:<br>单行注释:-- 注释内容 或 # 注释内容<br>多行注释:/** 注释内容*  */</li></ol></blockquote><h3 id="SQL分类"><a href="#SQL分类" class="headerlink" title="SQL分类"></a>SQL分类</h3><p>SQL 语句，根据其功能，主要分为四类:DDL、DML、DQL、DCL 。</p><table><thead><tr><th style="text-align:center">分类</th><th style="text-align:center">全称</th><th style="text-align:center">说明</th></tr></thead><tbody><tr><td style="text-align:center">DDL</td><td style="text-align:center">Data Definition Language</td><td style="text-align:center">数据定义语言，用来定义数据库对象（数据库，表，字段)</td></tr><tr><td style="text-align:center">DML</td><td style="text-align:center">Data Manipulation Language</td><td style="text-align:center">数据操作语言，用来对数据库表中的数据进行增删改</td></tr><tr><td style="text-align:center">DQL</td><td style="text-align:center">Data Query Language</td><td style="text-align:center">数据查询语言，用来查询数据库中表的记录</td></tr><tr><td style="text-align:center">DCL</td><td style="text-align:center">Data Control Language</td><td style="text-align:center">数据控制语言，用来创建数据库用户、控制数据库的访问权限</td></tr></tbody></table><h2 id="MySQL数据库基本操作—DDL"><a href="#MySQL数据库基本操作—DDL" class="headerlink" title="MySQL数据库基本操作—DDL"></a>MySQL数据库基本操作—DDL</h2><blockquote><p>DDL：（Data Definition Language）,数据定义语言，该语言部分包括以下内容：</p><blockquote><ol><li>对数据库的常用操作</li><li>对表结构的常用操作</li><li>修改表结构</li></ol></blockquote></blockquote><h3 id="数据库操作"><a href="#数据库操作" class="headerlink" title="数据库操作"></a>数据库操作</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查看所有的数据库（结尾一定要加英文[;]，表示语句结束）</span></span><br><span class="line"><span class="keyword">show</span> databases;</span><br><span class="line"><span class="comment">-- 创建数据库（其中 [if not exists] 为可选参数,表示如果不存在再创建，存在不会创建；[charset=utf8] 为编码方式，可选）</span></span><br><span class="line"><span class="keyword">create</span> database [if <span class="keyword">not</span> <span class="keyword">exists</span>] mydb1 [charset<span class="operator">=</span>utf8];</span><br><span class="line"><span class="comment">-- 切换（选择要操作的）数据库(mydb1为数据库名)</span></span><br><span class="line">use mydb1;</span><br><span class="line"><span class="comment">-- 删除数据库（[if exists] 表示如果有再删除，可选）</span></span><br><span class="line"><span class="keyword">drop</span> database [if <span class="keyword">exists</span>] mydb1;</span><br><span class="line"><span class="comment">-- 修改数据库编码（不常用）</span></span><br><span class="line"><span class="keyword">alter</span> database mydb1 <span class="type">character</span> <span class="keyword">set</span> utf8;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="表创建—格式"><a href="#表创建—格式" class="headerlink" title="表创建—格式"></a>表创建—格式</h3><blockquote><p>创建表是构建一张空表，指定这个表的名字，这个表有几列，每一列叫什么名字，以及每一列存储的数据类型。</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建表格式</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> [if <span class="keyword">not</span> <span class="keyword">exists</span>] 表名 (</span><br><span class="line">    字段名<span class="number">1</span> 类型[(宽度)] [约束条件] [comment <span class="string">&#x27;字段说明&#x27;</span>],</span><br><span class="line">    字段名<span class="number">2</span> 类型[(宽度)] [约束条件] [comment <span class="string">&#x27;字段说明&#x27;</span>],</span><br><span class="line">    字段名<span class="number">3</span> 类型[(宽度)] [约束条件] [comment <span class="string">&#x27;字段说明&#x27;</span>]</span><br><span class="line">)[表的一些设置];</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 列如：</span></span><br><span class="line"><span class="comment">-- 选择表（数据库）</span></span><br><span class="line">use mydb1;</span><br><span class="line"><span class="comment">-- 创建表</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> if <span class="keyword">not</span> <span class="keyword">exists</span> student (</span><br><span class="line">sid <span class="type">int</span>,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">    gender <span class="type">varchar</span>(<span class="number">10</span>),</span><br><span class="line">    age <span class="type">int</span>,</span><br><span class="line">    birth <span class="type">date</span>,</span><br><span class="line">address <span class="type">varchar</span>(<span class="number">30</span>),</span><br><span class="line">    score <span class="keyword">double</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="数据类型—数值类型-数字类型"><a href="#数据类型—数值类型-数字类型" class="headerlink" title="数据类型—数值类型-数字类型"></a>数据类型—数值类型(数字类型)</h3><blockquote><p>1、数据类型</p><blockquote><p>数据类型是指在创建表的时候为表中字段指定数据类型，只有数据符合类型要求才能存储起来，使用数据类型的原则是够用就行，尽量使用取值范围小的，而不用大的，这样可以更多的节省存储空间.</p></blockquote></blockquote><ol><li>数值类型</li></ol><p class='item-img' data-src='/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/1728294250010.png'><img src="/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/1728294250010.png" alt="数值类型"></p><ul><li></li></ul><h3 id="数据类型—字符串类型"><a href="#数据类型—字符串类型" class="headerlink" title="数据类型—字符串类型"></a>数据类型—字符串类型</h3><p class='item-img' data-src='/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/1728294250011.png'><img src="/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/1728294250011.png" alt="字符串类型"></p><h3 id="数据类型—日期和时间类型"><a href="#数据类型—日期和时间类型" class="headerlink" title="数据类型—日期和时间类型"></a>数据类型—日期和时间类型</h3><p class='item-img' data-src='/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/1728294250012.png'><img src="/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/1728294250012.png" alt="日期类型"></p><h4 id="还有-null-类型"><a href="#还有-null-类型" class="headerlink" title="还有-null-类型"></a>还有 null 类型</h4><blockquote><ul><li>没有值，未知</li><li>不要使用NULL值进行计算</li></ul></blockquote><h3 id="数据库的字段属性"><a href="#数据库的字段属性" class="headerlink" title="数据库的字段属性"></a>数据库的字段属性</h3><blockquote><p><strong>UnSigned</strong></p><blockquote><ul><li>没有值，未知</li><li>不要使用NULL值进行计算</li></ul></blockquote><p><strong>ZEROFILL</strong></p><blockquote><ul><li>0填充的</li><li>不足位数的用0来填充 , 如int(3),5则为005</li></ul></blockquote><p><strong>Auto_InCrement</strong></p><blockquote><ul><li>通常理解为自增，自动在上一条记录的基础上默认+1</li><li>通常用来设计唯一的主键，必须是整数类型</li><li>可定义起始值和步长<ul><li><ul><li>当前表设置步长(AUTO_INCREMENT=100) : 只影响当前表</li><li>SET @@auto_increment_increment=5 ; 影响所有使用自增的表(全局)</li></ul></li></ul></li></ul></blockquote><p><strong>NULL 和 NOT NULL</strong></p><blockquote><ul><li>默认为NULL , 即没有插入该列的数值</li><li>如果设置为NOT NULL , 则该列必须有值</li></ul></blockquote><p><strong>DEFAULT</strong></p><blockquote><ul><li>默认的</li><li>用于设置默认值</li><li>例如,性别字段,默认为&quot;男&quot; , 否则为 “女” ; 若无指定该列的值 , 则默认值为&quot;男&quot;的值</li></ul></blockquote></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 例子：执行 desc 表名; 后会出现以下结果</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> `student`(</span><br><span class="line">`id` <span class="type">INT</span>(<span class="number">4</span>)<span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;学号&#x27;</span>,</span><br><span class="line">`name` <span class="type">VARCHAR</span>(<span class="number">30</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;匿名&#x27;</span> COMMENT <span class="string">&#x27;姓名&#x27;</span>,</span><br><span class="line">`pwd` <span class="type">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;123456&#x27;</span> COMMENT <span class="string">&#x27;密码&#x27;</span>,</span><br><span class="line">`sex` <span class="type">VARCHAR</span>(<span class="number">2</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;女&#x27;</span> COMMENT <span class="string">&#x27;性别&#x27;</span>,</span><br><span class="line">`birthday` DATETIME <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;出生日期&#x27;</span>,</span><br><span class="line">`address` <span class="type">VARCHAR</span>(<span class="number">100</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;家庭住址&#x27;</span>,</span><br><span class="line">`email` <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;邮箱&#x27;</span>,</span><br><span class="line"><span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">)ENGINE<span class="operator">=</span>INNODB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="表的其他操作"><a href="#表的其他操作" class="headerlink" title="表的其他操作"></a>表的其他操作</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查看当前数据库的所有表名称</span></span><br><span class="line"><span class="keyword">show</span> tables;</span><br><span class="line"><span class="comment">-- 查看指定某个表的创建语句</span></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">create</span> <span class="keyword">table</span> 表名;</span><br><span class="line"><span class="comment">-- 查看表结构</span></span><br><span class="line"><span class="keyword">desc</span> 表名;</span><br><span class="line"><span class="comment">-- 删除表</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> 表名;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="修改表结构"><a href="#修改表结构" class="headerlink" title="修改表结构"></a>修改表结构</h3><h4 id="修改表添加列（字段）"><a href="#修改表添加列（字段）" class="headerlink" title="修改表添加列（字段）"></a>修改表添加列（字段）</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 为表添加新列（字段）</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">add</span> 列名 类型(长度) [约束];</span><br><span class="line"><span class="comment">-- 例子：为student表添加一个新的字段为：系别 dept 类型为 varchar(20)</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student <span class="keyword">add</span> dept <span class="type">varchar</span>(<span class="number">20</span>);</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="修改列名和类型"><a href="#修改列名和类型" class="headerlink" title="修改列名和类型"></a>修改列名和类型</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法格式</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 change 旧列名 新列名 类型(长度) [约束];</span><br><span class="line"><span class="comment">-- 例子：为student表的 dept 字段更换为 department varchar(30)</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student change dept department <span class="type">varchar</span>(<span class="number">30</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 修改列的数据类型</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 modify <span class="keyword">column</span> 列名 新的列的类型</span><br><span class="line"><span class="comment">-- 例子：为student表的department列的类型修改为char(20)</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student modify <span class="keyword">column</span> department <span class="type">char</span>(<span class="number">20</span>);</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="修改表删除列"><a href="#修改表删除列" class="headerlink" title="修改表删除列"></a>修改表删除列</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法格式</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">drop</span> 列名;</span><br><span class="line"><span class="comment">-- 例如：删除student表中department这列</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student <span class="keyword">drop</span> department;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="修改表名"><a href="#修改表名" class="headerlink" title="修改表名"></a>修改表名</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法格式</span></span><br><span class="line">rename <span class="keyword">table</span> 表名 <span class="keyword">to</span> 新表名;</span><br><span class="line"><span class="comment">-- 例子：将表student改名成stu</span></span><br><span class="line">rename <span class="keyword">table</span> student <span class="keyword">to</span> stu;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="MySQL数据库基本操作—DML"><a href="#MySQL数据库基本操作—DML" class="headerlink" title="MySQL数据库基本操作—DML"></a>MySQL数据库基本操作—DML</h2><h3 id="DML基本介绍"><a href="#DML基本介绍" class="headerlink" title="DML基本介绍"></a>DML基本介绍</h3><blockquote><p>DML是指数据操作语言，英文全称是Data Manipulation Language，用来对数据库中表的数据记录进行更新（增删改）。</p><p><strong>关键字：</strong></p><blockquote><ul><li>插入insert</li><li>删除delete</li><li>更新update</li></ul></blockquote></blockquote><h3 id="数据插入"><a href="#数据插入" class="headerlink" title="数据插入"></a>数据插入</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法格式</span></span><br><span class="line"><span class="comment">-- 向表中插入某些（列和值要相互对应）</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> 表(列名<span class="number">1</span>，列名<span class="number">2</span>，列名<span class="number">3.</span>..) <span class="keyword">values</span>(值<span class="number">1</span>，值<span class="number">2</span>，值<span class="number">3.</span>..)；</span><br><span class="line"><span class="comment">-- 向表中插入所有列</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> 表 <span class="keyword">values</span>(值<span class="number">1</span>，值<span class="number">2</span>，值<span class="number">3.</span>..);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 例子：</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student(sid,name,gender,age,birth,address,score) <span class="keyword">values</span>(<span class="number">1001</span>,<span class="string">&#x27;张三&#x27;</span>,<span class="string">&#x27;男&#x27;</span>,<span class="number">18</span>,<span class="string">&#x27;1996-12-23&#x27;</span>,<span class="string">&#x27;北京&#x27;</span>,<span class="number">83.5</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student <span class="keyword">values</span>(<span class="number">1001</span>,<span class="string">&#x27;张三&#x27;</span>,<span class="string">&#x27;男&#x27;</span>,<span class="number">18</span>,<span class="string">&#x27;1996-12-23&#x27;</span>,<span class="string">&#x27;北京&#x27;</span>,<span class="number">83.5</span>);</span><br><span class="line"><span class="comment">-- 一次添加多行数据</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student <span class="keyword">values</span>(<span class="number">1001</span>,<span class="string">&#x27;张三&#x27;</span>,<span class="string">&#x27;男&#x27;</span>,<span class="number">18</span>,<span class="string">&#x27;1996-12-23&#x27;</span>,<span class="string">&#x27;北京&#x27;</span>,<span class="number">83.5</span>),</span><br><span class="line">(<span class="number">1002</span>,<span class="string">&#x27;李四&#x27;</span>,<span class="string">&#x27;男&#x27;</span>,<span class="number">19</span>,<span class="string">&#x27;1997-12-23&#x27;</span>,<span class="string">&#x27;北京&#x27;</span>,<span class="number">85.5</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="数据修改"><a href="#数据修改" class="headerlink" title="数据修改"></a>数据修改</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法格式</span></span><br><span class="line"><span class="keyword">update</span> 表名 <span class="keyword">set</span> 字段名 <span class="operator">=</span> 值,字段名 <span class="operator">=</span> 值...;</span><br><span class="line"><span class="keyword">update</span> 表名 <span class="keyword">set</span> 字段名 <span class="operator">=</span> 值,字段名 <span class="operator">=</span> 值... <span class="keyword">where</span> 条件;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 例子：</span></span><br><span class="line"><span class="comment">-- 将所有学生的地址修改为重庆</span></span><br><span class="line"><span class="keyword">update</span> student <span class="keyword">set</span> address <span class="operator">=</span> <span class="string">&#x27;重庆&#x27;</span>;</span><br><span class="line"><span class="comment">-- 将sid为1004的学生的地址修改为北京</span></span><br><span class="line"><span class="keyword">update</span> student <span class="keyword">set</span> address <span class="operator">=</span> <span class="string">&#x27;北京&#x27;</span> <span class="keyword">where</span> sid <span class="operator">=</span> <span class="number">1004</span>;</span><br><span class="line"><span class="comment">-- 将sid大于1004的学生的地址修改为上海</span></span><br><span class="line"><span class="keyword">update</span> student <span class="keyword">set</span> address <span class="operator">=</span> <span class="string">&#x27;北京&#x27;</span> <span class="keyword">where</span> sid <span class="operator">&gt;</span> <span class="number">1004</span>;</span><br><span class="line"><span class="comment">-- 将sid为1005的学生的地址修改为北京，成绩修改为100</span></span><br><span class="line"><span class="keyword">update</span> student <span class="keyword">set</span> address <span class="operator">=</span> <span class="string">&#x27;北京&#x27;</span>,score <span class="operator">=</span> <span class="number">100</span> <span class="keyword">where</span> sid <span class="operator">=</span> <span class="number">1005</span>;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="数据删除"><a href="#数据删除" class="headerlink" title="数据删除"></a>数据删除</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法格式（delete 不加条件会清空该表所有数据）</span></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> 表名 [<span class="keyword">where</span> 条件];</span><br><span class="line"><span class="keyword">truncate</span> <span class="keyword">table</span> 表名 或者 <span class="keyword">truncate</span> 表名;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 例子</span></span><br><span class="line"><span class="comment">-- 1.删除sid为1004的学生数据</span></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> student <span class="keyword">where</span> sid <span class="operator">=</span> <span class="number">1004</span>;</span><br><span class="line"><span class="comment">-- 2.删除表所有数据</span></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> student;</span><br><span class="line"><span class="comment">-- 3.清空表数据</span></span><br><span class="line"><span class="comment">-- 方式一</span></span><br><span class="line"><span class="keyword">truncate</span> <span class="keyword">table</span> student;</span><br><span class="line"><span class="comment">-- 方式二</span></span><br><span class="line"><span class="keyword">truncate</span> student;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 注意：delete 和 truncate 原理不同，delete 只删除内容，而 truncate 类似于 drop table，可以理解为是将整个表删除，然后再创建该表；</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="MySQL约束"><a href="#MySQL约束" class="headerlink" title="MySQL约束"></a>MySQL约束</h2><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><h4 id="概念："><a href="#概念：" class="headerlink" title="概念："></a>概念：</h4><blockquote><p>约束英文：constraint</p><p>约束实际上就是表中数据的限制条件。</p></blockquote><h4 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h4><blockquote><p>表在设计的时候加入约束的目的就是为了保证表中的记录完整性和有效性，比如用户表有些列的值(手机号）不能为空，有些列的值（身份证号)不能重复。</p></blockquote><h4 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h4><blockquote><ul><li>主键约束(primary key) PK</li><li>自增长约束(auto_increment)</li><li>非空约束(not null)</li><li>唯一性约束(unique)</li><li>默认约束(default)</li><li>零填充约束(zerofill)</li><li>外键约束(foreign key) FK</li><li>检查约束(8.0.16版本之后) (check)</li></ul></blockquote><h3 id="主键约束"><a href="#主键约束" class="headerlink" title="主键约束"></a>主键约束*</h3><h4 id="概念：-2"><a href="#概念：-2" class="headerlink" title="概念：-2"></a>概念：</h4><blockquote><ul><li>MySQL主键约束是一个列或者多个列的组合，<strong>其值能唯一地标识表中的每一行,方便在RDBMS中尽快的找到某一行。</strong></li><li>主键约束相当于唯一约束+非空约束的组合，主键约束列不允许重复，也不允许出现空值。</li><li>每个表最多只允许一个主键。</li><li>主键约束的关键字是：<strong>primary key</strong></li><li>当创建主键的约束时，系统默认会在所在的列和列组合上建立对应的唯一索引。</li></ul></blockquote><h4 id="操作"><a href="#操作" class="headerlink" title="操作"></a>操作</h4><blockquote><ul><li>添加单列主键</li></ul><p>创建单列主键有两种方式，一种是在定义字段的同时指定主键，一种是定义完字段之后指定主键。</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 方式1——语法：</span></span><br><span class="line"><span class="comment">-- 在 create table 语句中，通过 primary key 关键字来指定主键。</span></span><br><span class="line"><span class="comment">-- 在定义字段的同时指定主键，语法格式如下：</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> 表名 (</span><br><span class="line">...</span><br><span class="line">    <span class="operator">&lt;</span>字段名<span class="operator">&gt;</span> <span class="operator">&lt;</span>数据类型<span class="operator">&gt;</span> <span class="keyword">primary</span> key,</span><br><span class="line">    ...</span><br><span class="line">);</span><br><span class="line"><span class="comment">-- 方式1——实现：</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> emp1 (</span><br><span class="line">eid <span class="type">int</span> primay key,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">    deptId <span class="type">int</span>,</span><br><span class="line">    salary <span class="keyword">double</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 方式2——语法：</span></span><br><span class="line"><span class="comment">-- 在定义字段的同时指定主键，语法格式如下：</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> 表名 (</span><br><span class="line">...</span><br><span class="line">    [<span class="keyword">constraint</span> <span class="operator">&lt;</span>约束名<span class="operator">&gt;</span>] <span class="keyword">primary</span> key [字段名]</span><br><span class="line">);</span><br><span class="line"><span class="comment">-- 方式2——实现：</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> emp2 (</span><br><span class="line">eid <span class="type">int</span>,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">    deptId <span class="type">int</span>,</span><br><span class="line">    salary <span class="keyword">double</span>,</span><br><span class="line">    <span class="keyword">constraint</span> pk1 <span class="keyword">primary</span> key(eid)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><ul><li>添加多列联合主键</li></ul><p>所谓的联合主键，就是这个主键是由一张表中多个字段组成的。</p><p>注意：</p><pre><code>1. 当主键是由多个字段组成时，不能直接在字段名后面声明主键约束。2. 一张表只能有一个主键，联合主键也是一个主键。3. 联合主键各列不能为空。</code></pre></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法：</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> 表名 (</span><br><span class="line">...</span><br><span class="line">    <span class="keyword">primary</span> key(字段<span class="number">1</span>，字段<span class="number">2</span>，...，字段n)</span><br><span class="line">);</span><br><span class="line"><span class="comment">-- 实现：</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> emp3 (</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">    deptId <span class="type">int</span>,</span><br><span class="line">    salary <span class="keyword">double</span>,</span><br><span class="line">    <span class="keyword">primary</span> key(name, deptId)</span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><ul><li><p>通过修改表结构添加主键</p><p>主键约束不仅可以在创建表的同时创建，也可以在修改表时添加。</p></li></ul></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法：</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> 表名 (</span><br><span class="line">...</span><br><span class="line">);</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span> <span class="keyword">add</span> <span class="keyword">primary</span> key (字段列表)；</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 实现：</span></span><br><span class="line"><span class="comment">-- 添加单列主键</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> emp4 (</span><br><span class="line">eid <span class="type">int</span>,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">    deptId <span class="type">int</span>,</span><br><span class="line">    salary <span class="keyword">double</span></span><br><span class="line">);</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> emp4 <span class="keyword">add</span> <span class="keyword">primary</span> key (eid);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 添加多列主键(联合)</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> emp5 (</span><br><span class="line">eid <span class="type">int</span>,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">    deptId <span class="type">int</span>,</span><br><span class="line">    salary <span class="keyword">double</span></span><br><span class="line">);</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> emp5 <span class="keyword">add</span> <span class="keyword">primary</span> key (eid, deptId);</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><ul><li>删除主键约束</li></ul><p>一个表中不需要主键约束时，就需要从表中将其删除。删除主键约束的方法要比创建主键约束容易的多。</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 格式</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> <span class="operator">&lt;</span>数据库名<span class="operator">&gt;</span> <span class="keyword">drop</span> <span class="keyword">primary</span> key;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 实现</span></span><br><span class="line"><span class="comment">-- 删除单列主键</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> emp1 <span class="keyword">drop</span> <span class="keyword">primary</span> key;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除联合主键</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> emp5 <span class="keyword">drop</span> <span class="keyword">primary</span> key;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="自增长约束-auto-increment"><a href="#自增长约束-auto-increment" class="headerlink" title="自增长约束-auto-increment"></a>自增长约束(auto_increment)</h3><h4 id="概念：-3"><a href="#概念：-3" class="headerlink" title="概念：-3"></a>概念：</h4><blockquote><p>在MySQL中，当主键定义为自增长后，这个主键的值就不再需要用户输入数据了，而由数据库系统根据定义自动赋值。每增加一条记录，主键会自动以相同的步长进行增长。</p><p>通过给字段添加 <strong>auto_increment</strong> 属性来实现主键自增长。</p><p>一般搭配主键使用，提高健壮性。</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法</span></span><br><span class="line">字段名 数据类型 auto_increment;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 操作</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_user1 (</span><br><span class="line">id <span class="type">int</span> <span class="keyword">primary</span> key auto_increment，</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><ul><li><p>特点：</p><ol><li><p>默认情况下，auto_increment的初始值是 1，每新增一条记录，字段值自动加 1。</p></li><li><p>一个表中只能有一个字段使用 auto_increment约束，且该字段必须有唯一索引，以避免序号重复(即为主键或主键的一部分)。</p></li><li><p>auto_increment约束的字段必须具备 NOT NULL 属性。</p></li><li><p>auto_increment约束的字段只能是整数类型(TINYINT、SMALLINT、INT、BIGINT )等。</p></li><li><p>auto_increment约束字段的最大值受该字段的数据类型约束，如果达到上限，auto_increment就会失效。</p></li></ol></li></ul></blockquote><h4 id="指定自增字段初始值"><a href="#指定自增字段初始值" class="headerlink" title="指定自增字段初始值"></a>指定自增字段初始值</h4><blockquote><ol><li>如果第一条记录设置了该字段的初始值，那么新增加的记录就从这个初始值开始自增。例如，如果表中插入的第一条记录的id值设置为5，那么再插入记录时，id值就会从5开始往上增加。</li></ol></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 方式1，创建表时指定</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_user2 (</span><br><span class="line">id <span class="type">int</span> <span class="keyword">primary</span> key auto_increment,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">20</span>)</span><br><span class="line">)auto_increment <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 方式2，创建表之后指定</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_user2 (</span><br><span class="line">id <span class="type">int</span> <span class="keyword">primary</span> key auto_increment,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> t_user2 auto_increment <span class="operator">=</span> <span class="number">200</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>注意：delete 和 truncate 在删除后自增列的变化：</p><ul><li>delete数据之后自动增长从断点开始</li><li>truncate数据之后自动增长从默认起始值开始</li></ul></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 格式</span></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span>;</span><br><span class="line"><span class="keyword">truncate</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 实现</span></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> t_user1;</span><br><span class="line"><span class="keyword">truncate</span> t_user2;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="非空约束-not-null"><a href="#非空约束-not-null" class="headerlink" title="非空约束-not-null"></a>非空约束(not null)</h3><h4 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h4><blockquote><p>MySQL非空约束（not null）指字段的值不能为空。对于使用了非空约束的字段，如果用户在添加数据时没有指定值，数据库系统就会报错。</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法：</span></span><br><span class="line"><span class="comment">-- 方式1：</span></span><br><span class="line"><span class="operator">&lt;</span>字段名<span class="operator">&gt;</span> <span class="operator">&lt;</span>数据类型<span class="operator">&gt;</span> <span class="keyword">not</span> <span class="keyword">null</span>;</span><br><span class="line"><span class="comment">-- 方式2：</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 modify 字段 类型 <span class="keyword">not</span> <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 添加非空约束——方式1</span></span><br><span class="line"><span class="comment">-- 方式1，创建表时指定</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_user6 (</span><br><span class="line">id <span class="type">int</span>,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    address <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 添加非空约束——方式2</span></span><br><span class="line"><span class="comment">-- 方式2，创建表之后指定</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_user7 (</span><br><span class="line">id <span class="type">int</span>,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">    address <span class="type">varchar</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> t_user7 modify name <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> t_user7 modify address <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="keyword">null</span>;</span><br><span class="line"><span class="comment">-- 实例（插入数据）：</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_user6(id) <span class="keyword">values</span>(<span class="number">1001</span>);  <span class="comment">-- 不可以（name，address不能为空）</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_user6(id,name,address) <span class="keyword">values</span>(<span class="number">1001</span>,<span class="keyword">NULL</span>,<span class="keyword">NULL</span>);  <span class="comment">-- 不可以（同上）</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_user6(id,name,address) <span class="keyword">values</span>(<span class="number">1001</span>,<span class="string">&#x27;NULL&#x27;</span>,<span class="string">&#x27;NULL&#x27;</span>); <span class="comment">-- 可以（字符串NULL）</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_user6(id,name,address) <span class="keyword">values</span>(<span class="number">1001</span>,<span class="string">&#x27;&#x27;</span>,<span class="string">&#x27;&#x27;</span>); <span class="comment">-- 可以（空串）</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除非空约束(可以叫修改)</span></span><br><span class="line"><span class="comment">-- alter table 表名 modify 字段 类型;</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> t_user7 modify name <span class="type">varchar</span>(<span class="number">20</span>);</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> t_user7 modify address <span class="type">varchar</span>(<span class="number">20</span>);</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="唯一约束-unique"><a href="#唯一约束-unique" class="headerlink" title="唯一约束-unique"></a>唯一约束(unique)</h3><h4 id="概念-2"><a href="#概念-2" class="headerlink" title="概念-2"></a>概念</h4><blockquote><p>唯一约束(Unique)， 是指所有记录中字段的值不能重复出现。例如，为 id 字段加上唯一性约束后，每条记录的 id 值都是唯一的，不能出现重复的情况，但可以为NULL，并且可以有多个NULL。</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法：</span></span><br><span class="line"><span class="comment">-- 方式1：</span></span><br><span class="line"><span class="operator">&lt;</span>字段名<span class="operator">&gt;</span> <span class="operator">&lt;</span>数据类型<span class="operator">&gt;</span> <span class="keyword">unique</span>;</span><br><span class="line"><span class="comment">-- 方式2：</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">add</span> <span class="keyword">constraint</span> 约束名 <span class="keyword">unique</span>(列);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 添加唯一约束——方式1：</span></span><br><span class="line"><span class="comment">-- 创建表时指定</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_user8 (</span><br><span class="line">id <span class="type">int</span>,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">    phone_number <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">unique</span>  <span class="comment">-- 指定唯一约束</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 添加唯一约束——方式2：</span></span><br><span class="line"><span class="comment">-- 方式2，创建表之后指定</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_user9 (</span><br><span class="line">id <span class="type">int</span>,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">    phone_number <span class="type">varchar</span>(<span class="number">20</span>)  <span class="comment">-- 指定唯一约束</span></span><br><span class="line">);</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> t_user9 <span class="keyword">add</span> <span class="keyword">constraint</span> unique_pn <span class="keyword">unique</span>(phone_number);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除唯一约束</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span> <span class="keyword">drop</span> index <span class="operator">&lt;</span>唯一约束名<span class="operator">&gt;</span>;</span><br><span class="line"><span class="comment">-- 实例：（如果通过方式1添加的唯一约束，则index后面加上所在列名就行）</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> t_user9 <span class="keyword">drop</span> index unique_pn;</span><br></pre></td></tr></table></figure><h3 id="默认约束-default"><a href="#默认约束-default" class="headerlink" title="默认约束-default"></a>默认约束(default)</h3><h4 id="概念-3"><a href="#概念-3" class="headerlink" title="概念-3"></a>概念</h4><blockquote><p>MySQL默认值约束用来指定某列的默认值。</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法：</span></span><br><span class="line"><span class="comment">-- 方式1：</span></span><br><span class="line"><span class="operator">&lt;</span>字段名<span class="operator">&gt;</span> <span class="operator">&lt;</span>数据类型<span class="operator">&gt;</span> <span class="keyword">default</span> <span class="operator">&lt;</span>默认值<span class="operator">&gt;</span>;</span><br><span class="line"><span class="comment">-- 方式2：</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 modify 列名 类型 <span class="keyword">default</span> 默认值;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 添加默认约束——方式1：</span></span><br><span class="line"><span class="comment">-- 创建表时指定</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_user10 (</span><br><span class="line">id <span class="type">int</span>,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">    address <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">default</span> <span class="string">&#x27;北京&#x27;</span>  <span class="comment">-- 指定默认约束</span></span><br><span class="line">);</span><br><span class="line"><span class="comment">-- 插入数据（未给定地址时，它会默认是北京）</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_user10(id,name) <span class="keyword">values</span>(<span class="number">1001</span>,<span class="string">&#x27;张三&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_user10(id,name) <span class="keyword">values</span>(<span class="number">1002</span>,<span class="string">&#x27;李四&#x27;</span>,<span class="string">&#x27;上海&#x27;</span>);  <span class="comment">-- 地址会成为上海</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_user10 <span class="keyword">values</span>(<span class="number">1003</span>,<span class="string">&#x27;王五&#x27;</span>,<span class="keyword">NULL</span>);   <span class="comment">-- 地址会为 NULL</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 添加默认约束——方式2：</span></span><br><span class="line"><span class="comment">-- 创建表之后指定</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_user11 (</span><br><span class="line">id <span class="type">int</span>,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">    address <span class="type">varchar</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br><span class="line"><span class="comment">-- 格式：alter table 表名 modify 列名 类型 default 默认值;</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> t_user11 modify address <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">default</span> <span class="string">&#x27;北京&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除默认约束(删除默认约束就是把设置的默认值设置为null)</span></span><br><span class="line"><span class="comment">-- alter table &lt;表名&gt; change column &lt;字段名&gt; &lt;类型&gt; default NULL;</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> t_user11 modify address <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">default</span> <span class="keyword">NULL</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="零填充约束-zerofill"><a href="#零填充约束-zerofill" class="headerlink" title="零填充约束-zerofill"></a>零填充约束(zerofill)</h3><h4 id="概念-4"><a href="#概念-4" class="headerlink" title="概念-4"></a>概念</h4><ol><li>插入数据时，当该字段的值的长度小于定义的长度时，会在该值的前面补上相应的0；</li><li>zerofill 默认为 int(10)；</li><li>当使用 zerofill 时，默认会自动加 unsigned（无符号）属性，使用 unsigned 属性后，数值范围时原值的2倍，例如，有符号为 -128~+127，无符号为 0~256.</li></ol><h4 id="操作-2"><a href="#操作-2" class="headerlink" title="操作-2"></a>操作</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法</span></span><br><span class="line"><span class="operator">&lt;</span>字段名<span class="operator">&gt;</span> <span class="operator">&lt;</span>数据类型<span class="operator">&gt;</span> zerofill;</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_user12 (</span><br><span class="line">id <span class="type">int</span> zerofill,  <span class="comment">-- 零填充约束</span></span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_user12 <span class="keyword">values</span>(<span class="number">123</span>,<span class="string">&#x27;张三&#x27;</span>); <span class="comment">-- 固定10位，会在前面加7个0</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_user12 <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;李四&#x27;</span>);  <span class="comment">-- 固定10位，会在前面加9个0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除</span></span><br><span class="line"><span class="comment">-- 格式：alter table &lt;表名&gt; modify &lt;字段名&gt; &lt;数据类型&gt;;</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> t_user12 modify id <span class="type">int</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="MySQL数据库基本操作—DQL"><a href="#MySQL数据库基本操作—DQL" class="headerlink" title="MySQL数据库基本操作—DQL"></a>MySQL数据库基本操作—DQL</h2><h3 id="基本介绍"><a href="#基本介绍" class="headerlink" title="基本介绍"></a>基本介绍</h3><h4 id="概念-5"><a href="#概念-5" class="headerlink" title="概念-5"></a>概念</h4><blockquote><ul><li>数据库管理系统一个重要功能就是数据查询，数据查询不应只是简单返回数据库中存储的数据，还应该根据需要对数据进行筛选以及确定数据以什么样的格式显示。</li><li>MySQL提供了功能强大、灵活的语句来实现这些操作。</li><li>MySQL数据库使用select语句来查询数据。</li></ul></blockquote><h4 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 格式</span></span><br><span class="line"><span class="keyword">select</span></span><br><span class="line">  [<span class="keyword">all</span><span class="operator">|</span><span class="keyword">distinct</span>]</span><br><span class="line">  <span class="operator">&lt;</span>目标列的表达式<span class="number">1</span><span class="operator">&gt;</span> [别名],</span><br><span class="line">  <span class="operator">&lt;</span>目标列的表达式<span class="number">2</span><span class="operator">&gt;</span> [别名]...</span><br><span class="line"><span class="keyword">from</span> <span class="operator">&lt;</span>表名或视图名<span class="operator">&gt;</span> [别名], <span class="operator">&lt;</span>表名或视图名<span class="operator">&gt;</span> [别名]...</span><br><span class="line">[<span class="keyword">where</span><span class="operator">&lt;</span>条件表达式<span class="operator">&gt;</span>]</span><br><span class="line">[<span class="keyword">group</span> <span class="keyword">by</span> <span class="operator">&lt;</span>列名<span class="operator">&gt;</span></span><br><span class="line">[<span class="keyword">having</span> <span class="operator">&lt;</span>条件表达式<span class="operator">&gt;</span>]]</span><br><span class="line">[<span class="keyword">order</span> <span class="keyword">by</span> <span class="operator">&lt;</span>列名<span class="operator">&gt;</span> [<span class="keyword">asc</span><span class="operator">|</span><span class="keyword">desc</span>]]</span><br><span class="line">[limit <span class="operator">&lt;</span>数字或者列表<span class="operator">&gt;</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 解释以上</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">字段列表</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">表名列表</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">条件列表</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">分组字段列表</span><br><span class="line"><span class="keyword">HAVING</span></span><br><span class="line">分组后条件列表</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">排序字段列表</span><br><span class="line">LIMIT</span><br><span class="line">分页参数</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 简化版语法</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span><span class="operator">|</span> 列名 <span class="keyword">from</span> 表 <span class="keyword">where</span> 条件;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>我们在讲解这部分内容的时候，会将上面的完整语法进行拆分，分为以下几个部分：</p><ul><li>基本查询（不带任何条件）</li><li>条件查询（WHERE）</li><li>聚合函数（count、max、min、avg、sum）</li><li>分组查询（group by）</li><li>排序查询（order by）</li><li>分页查询（limit）</li></ul></blockquote><h3 id="基本查询—数据准备"><a href="#基本查询—数据准备" class="headerlink" title="基本查询—数据准备"></a>基本查询—数据准备</h3><p>以下是一个基础例子：</p><ul><li><p>创建数据库和表（商品表）：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建数据库</span></span><br><span class="line"><span class="keyword">create</span> database if <span class="keyword">not</span> <span class="keyword">exists</span> mydb2;</span><br><span class="line">use mydb2;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 创建商品表：</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> product (</span><br><span class="line">pid <span class="type">int</span> <span class="keyword">primary</span> key auto_increment,  <span class="comment">-- 商品编号</span></span><br><span class="line">    pname <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="keyword">null</span>,  <span class="comment">-- 商品名称</span></span><br><span class="line">    price <span class="keyword">double</span>,  <span class="comment">-- 商品价格</span></span><br><span class="line">    category_id <span class="type">varchar</span>(<span class="number">20</span>)  <span class="comment">-- 商品所属分类</span></span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>添加数据：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 电器类（c001）：</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> product <span class="keyword">values</span>(<span class="keyword">null</span>,<span class="string">&#x27;海尔洗衣机&#x27;</span>,<span class="number">5000</span>,<span class="string">&#x27;c001&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> product <span class="keyword">values</span>(<span class="keyword">null</span>,<span class="string">&#x27;美的冰箱&#x27;</span>,<span class="number">3000</span>,<span class="string">&#x27;c001&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> product <span class="keyword">values</span>(<span class="keyword">null</span>,<span class="string">&#x27;格力空调&#x27;</span>,<span class="number">5000</span>,<span class="string">&#x27;c001&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> product <span class="keyword">values</span>(<span class="keyword">null</span>,<span class="string">&#x27;九阳电饭煲&#x27;</span>,<span class="number">5000</span>,<span class="string">&#x27;c001&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 服装类（c002）：</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> product <span class="keyword">values</span>(<span class="keyword">null</span>,<span class="string">&#x27;啄木鸟衬衣&#x27;</span>,<span class="number">300</span>,<span class="string">&#x27;c002&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> product <span class="keyword">values</span>(<span class="keyword">null</span>,<span class="string">&#x27;恒源祥西裤&#x27;</span>,<span class="number">800</span>,<span class="string">&#x27;c002&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> product <span class="keyword">values</span>(<span class="keyword">null</span>,<span class="string">&#x27;花花公子夹克&#x27;</span>,<span class="number">440</span>,<span class="string">&#x27;c002&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> product <span class="keyword">values</span>(<span class="keyword">null</span>,<span class="string">&#x27;劲霸休闲裤&#x27;</span>,<span class="number">266</span>,<span class="string">&#x27;c002&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> product <span class="keyword">values</span>(<span class="keyword">null</span>,<span class="string">&#x27;海澜之家卫衣&#x27;</span>,<span class="number">180</span>,<span class="string">&#x27;c002&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> product <span class="keyword">values</span>(<span class="keyword">null</span>,<span class="string">&#x27;杰克琼斯运动裤&#x27;</span>,<span class="number">430</span>,<span class="string">&#x27;c002&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 护肤品类（c003）：</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> product <span class="keyword">values</span>(<span class="keyword">null</span>,<span class="string">&#x27;兰蔻面霜&#x27;</span>,<span class="number">300</span>,<span class="string">&#x27;c003&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> product <span class="keyword">values</span>(<span class="keyword">null</span>,<span class="string">&#x27;雅诗兰黛精华水&#x27;</span>,<span class="number">200</span>,<span class="string">&#x27;c003&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> product <span class="keyword">values</span>(<span class="keyword">null</span>,<span class="string">&#x27;香奈儿香水&#x27;</span>,<span class="number">350</span>,<span class="string">&#x27;c003&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> product <span class="keyword">values</span>(<span class="keyword">null</span>,<span class="string">&#x27;SK-II神仙水&#x27;</span>,<span class="number">350</span>,<span class="string">&#x27;c003&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> product <span class="keyword">values</span>(<span class="keyword">null</span>,<span class="string">&#x27;资生堂粉底液&#x27;</span>,<span class="number">180</span>,<span class="string">&#x27;c003&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 食品类（c004）：</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> product <span class="keyword">values</span>(<span class="keyword">null</span>,<span class="string">&#x27;老北京方便面&#x27;</span>,<span class="number">56</span>,<span class="string">&#x27;c004&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> product <span class="keyword">values</span>(<span class="keyword">null</span>,<span class="string">&#x27;良品铺子海带丝&#x27;</span>,<span class="number">17</span>,<span class="string">&#x27;c004&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> product <span class="keyword">values</span>(<span class="keyword">null</span>,<span class="string">&#x27;三只松鼠坚果&#x27;</span>,<span class="number">88</span>,<span class="string">&#x27;c004&#x27;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul><h3 id="基本查询—简单查询"><a href="#基本查询—简单查询" class="headerlink" title="基本查询—简单查询"></a>基本查询—简单查询</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1.查询所有的商品</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> product;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2.查询商品名和商品价格</span></span><br><span class="line"><span class="keyword">select</span> pname,price <span class="keyword">from</span> product;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3.别名查询.使用的关键字是as（as可以省略的）</span></span><br><span class="line"><span class="comment">-- 3.1表别名：</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> product <span class="keyword">as</span> p;</span><br><span class="line"><span class="comment">-- 别名在多表查询时可以起到简化作用，例如：</span></span><br><span class="line"><span class="keyword">select</span> p.id,u.id <span class="keyword">from</span> product <span class="keyword">as</span> p, user1 <span class="keyword">as</span> u;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3.2列别名（商品名）：</span></span><br><span class="line"><span class="keyword">select</span> pname <span class="keyword">as</span> pn <span class="keyword">from</span> product;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 4.去掉重复值（商品价格）</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> price <span class="keyword">from</span> product;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 5.查询结果是表达式（运算查询）：将商品名和所有商品的价格+10元进行显示</span></span><br><span class="line"><span class="keyword">select</span> pname,price<span class="operator">+</span><span class="number">10</span> <span class="keyword">from</span> product;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="基本查询—运算符"><a href="#基本查询—运算符" class="headerlink" title="基本查询—运算符"></a>基本查询—运算符</h3><h4 id="简介-2"><a href="#简介-2" class="headerlink" title="简介-2"></a>简介</h4><p>数据库中的表结构确立后，表中的数据代表的意义就已经确定。通过MySQL运算符进行运算，就可以获取到表结构以外的另一种数据。</p><p>例如，学生表中存在一个birth字段，这个字段表示学生的出 年份。 运 MySQL的算术运算符用当前的年份减学生出生的年份，那么得到的就是这个学生的实际年龄数据。</p><blockquote><p>MySQL支持4种运算符</p><ul><li>算术运算符</li><li>比较运算符</li><li>逻辑运算符</li><li>位运算符</li></ul></blockquote><h4 id="算术运算符"><a href="#算术运算符" class="headerlink" title="算术运算符"></a>算术运算符</h4><table><thead><tr><th style="text-align:center">算术运算符</th><th style="text-align:center">说明</th></tr></thead><tbody><tr><td style="text-align:center">+</td><td style="text-align:center">加法运算</td></tr><tr><td style="text-align:center">-</td><td style="text-align:center">减法运算</td></tr><tr><td style="text-align:center">*</td><td style="text-align:center">乘法运算</td></tr><tr><td style="text-align:center">/ 或 DIV</td><td style="text-align:center">除法运算，返回商</td></tr><tr><td style="text-align:center">% 或 MOD</td><td style="text-align:center">求余运算，返回余数</td></tr></tbody></table><h4 id="比较运算符"><a href="#比较运算符" class="headerlink" title="比较运算符"></a>比较运算符</h4><table><thead><tr><th style="text-align:center">比较运算符</th><th style="text-align:center">说明</th></tr></thead><tbody><tr><td style="text-align:center">=</td><td style="text-align:center">等于</td></tr><tr><td style="text-align:center">&lt; 和 &lt;=</td><td style="text-align:center">小于和小于等于</td></tr><tr><td style="text-align:center">&gt; 和 &gt;=</td><td style="text-align:center">大于和大于等于</td></tr><tr><td style="text-align:center">&lt;=&gt;</td><td style="text-align:center">完全的等于，两个操作码均为NULL时，其所得值为1；而当一个操作码为NULL时，其所得值为0</td></tr><tr><td style="text-align:center">&lt;&gt; 或 !=</td><td style="text-align:center">不等于</td></tr><tr><td style="text-align:center">IS NULL 或 ISNULL</td><td style="text-align:center">判断一个值是否为NULL</td></tr><tr><td style="text-align:center">IS NOT NULL</td><td style="text-align:center">判断一个值是否不为NULL</td></tr><tr><td style="text-align:center">LEAST</td><td style="text-align:center">当有两个或多个参数时，返回最小值</td></tr><tr><td style="text-align:center">GREATEST</td><td style="text-align:center">当有两个或多个参数时，返回最大值</td></tr><tr><td style="text-align:center">BETWEEN AND</td><td style="text-align:center">判断一个值是否落在两个值之间</td></tr><tr><td style="text-align:center">IN</td><td style="text-align:center">判断一个值是IN列表中的任意一个值</td></tr><tr><td style="text-align:center">NOT IN</td><td style="text-align:center">判断一个值不是IN列表中的任意一个值</td></tr><tr><td style="text-align:center">LIKE</td><td style="text-align:center">通配符匹配(包括 % 和 _ ，%表示多个匹配，_ 表示单个匹配)</td></tr><tr><td style="text-align:center">REGEXP</td><td style="text-align:center">正则表达式匹配</td></tr></tbody></table><h4 id="逻辑运算符"><a href="#逻辑运算符" class="headerlink" title="逻辑运算符"></a>逻辑运算符</h4><table><thead><tr><th style="text-align:center">逻辑运算符</th><th style="text-align:center">说明</th></tr></thead><tbody><tr><td style="text-align:center">NOT 或者 !</td><td style="text-align:center">逻辑非</td></tr><tr><td style="text-align:center">AND 或者 &amp;&amp;</td><td style="text-align:center">逻辑与</td></tr><tr><td style="text-align:center">OR 或者 ||</td><td style="text-align:center">逻辑或</td></tr><tr><td style="text-align:center">XOR</td><td style="text-align:center">逻辑异或</td></tr></tbody></table><h4 id="位运算符"><a href="#位运算符" class="headerlink" title="位运算符"></a>位运算符</h4><table><thead><tr><th style="text-align:center">位运算符</th><th style="text-align:center">说明</th></tr></thead><tbody><tr><td style="text-align:center">!</td><td style="text-align:center">按位或</td></tr><tr><td style="text-align:center">&amp;</td><td style="text-align:center">按位与</td></tr><tr><td style="text-align:center">^</td><td style="text-align:center">按位异或</td></tr><tr><td style="text-align:center">&lt;&lt;</td><td style="text-align:center">按位左移</td></tr><tr><td style="text-align:center">&gt;&gt;</td><td style="text-align:center">按位右移</td></tr><tr><td style="text-align:center">~</td><td style="text-align:center">按位取反，反转所有比特</td></tr></tbody></table><blockquote><p>位运算符是在二进制数上进行计算的运算符。位运算会先将操作数变成二进制数，进行位运算。然后再将计算结果从二进制数变回十进制数。</p></blockquote><h4 id="运算符操作"><a href="#运算符操作" class="headerlink" title="运算符操作"></a>运算符操作</h4><h5 id="算术运算符-2"><a href="#算术运算符-2" class="headerlink" title="算术运算符-2"></a>算术运算符</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">use mydb2;</span><br><span class="line"><span class="keyword">select</span> <span class="number">6</span> <span class="operator">+</span> <span class="number">2</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="number">6</span> <span class="operator">-</span> <span class="number">2</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="number">6</span> <span class="operator">*</span> <span class="number">2</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="number">6</span> <span class="operator">/</span> <span class="number">2</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="number">6</span> <span class="operator">%</span> <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 将每件商品的价格加10</span></span><br><span class="line"><span class="keyword">select</span> name,price <span class="operator">+</span> <span class="number">10</span> <span class="keyword">as</span> new_price <span class="keyword">from</span> product;</span><br><span class="line"><span class="comment">-- 将所有商品的价格上调10%</span></span><br><span class="line"><span class="keyword">select</span> pname,price <span class="operator">*</span> <span class="number">1.1</span> <span class="keyword">as</span> new_price <span class="keyword">from</span> product;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="比较运算符-2"><a href="#比较运算符-2" class="headerlink" title="比较运算符-2"></a>比较运算符</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 更新pid为18的category_id为null</span></span><br><span class="line"><span class="keyword">update</span> product <span class="keyword">set</span> category_id <span class="operator">=</span> <span class="keyword">null</span> <span class="keyword">where</span> pid <span class="operator">=</span> <span class="number">18</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 比较运算符——条件查询</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询商品名称为“海尔洗衣机”的商品所有信息：</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> product <span class="keyword">where</span> pname <span class="operator">=</span> <span class="string">&#x27;海尔洗衣机&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询价格为800的商品</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> product <span class="keyword">where</span> price <span class="operator">=</span> <span class="number">800</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询价格不是800的所有商品(三种方法)</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> product <span class="keyword">where</span> price <span class="operator">!=</span> <span class="number">800</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> product <span class="keyword">where</span> price <span class="operator">&lt;&gt;</span> <span class="number">800</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> product <span class="keyword">where</span> <span class="keyword">not</span>(price <span class="operator">=</span> <span class="number">800</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询商品价格大于60元的所有商品信息</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> product <span class="keyword">where</span> price <span class="operator">&gt;</span> <span class="number">60</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询商品价格在200到1000之间所有商品(三种方法)</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> product <span class="keyword">where</span> price <span class="operator">&gt;=</span> <span class="number">200</span> <span class="keyword">and</span> price <span class="operator">&lt;=</span> <span class="number">1000</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> product <span class="keyword">where</span> price <span class="operator">&gt;=</span> <span class="number">200</span> <span class="operator">&amp;&amp;</span> price <span class="operator">&lt;=</span> <span class="number">1000</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> product <span class="keyword">where</span> price <span class="keyword">between</span> <span class="number">200</span> <span class="keyword">and</span> <span class="number">1000</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询商品价格是200或800的所有商品(三种方法)</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> product <span class="keyword">where</span> price <span class="operator">=</span> <span class="number">200</span> <span class="keyword">or</span> price <span class="operator">=</span> <span class="number">800</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> product <span class="keyword">where</span> price <span class="operator">=</span> <span class="number">200</span> <span class="operator">||</span> price <span class="operator">=</span> <span class="number">800</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> product <span class="keyword">where</span> price <span class="keyword">in</span>(<span class="number">200</span>, <span class="number">800</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询含有‘裤&#x27;字的所有商品</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> product <span class="keyword">where</span> pname <span class="keyword">like</span> <span class="string">&#x27;%裤%&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询以&#x27;海&#x27;开头的所有商品</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> product <span class="keyword">where</span> pname <span class="keyword">like</span> <span class="string">&#x27;海%&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询第二个字为&#x27;蔻&#x27;的所有商品</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> product <span class="keyword">where</span> pname <span class="keyword">like</span> <span class="string">&#x27;_蔻%&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询category_id为null的商品</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> product <span class="keyword">where</span> category_id <span class="keyword">is</span> <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询category_id不为null分类的商品</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> product <span class="keyword">where</span> category_id <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 使用least求最小值(可以结合表来查询)</span></span><br><span class="line"><span class="keyword">select</span> least(<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>) <span class="keyword">as</span> small_number; <span class="comment">-- 10</span></span><br><span class="line"><span class="keyword">select</span> least(<span class="number">10</span>, <span class="keyword">null</span> , <span class="number">30</span>); <span class="comment">-- null</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">-- 使用greatest求最大值</span></span><br><span class="line"><span class="keyword">select</span> greatest(<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>) <span class="keyword">as</span> big_number;  <span class="comment">-- 30</span></span><br><span class="line"><span class="keyword">select</span> greatest(<span class="number">10</span>, <span class="keyword">null</span>, <span class="number">30</span>); <span class="comment">-- null</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="位运算符（了解）"><a href="#位运算符（了解）" class="headerlink" title="位运算符（了解）"></a>位运算符（了解）</h5><blockquote><p>位运算符是在二进制数上进行计算的运算符。位运算会先将操作数变成二进制数，进行位运算。然后再将计算结果从二进制数变回十进制数。</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="number">3</span> <span class="operator">&amp;</span> <span class="number">5</span>;  <span class="comment">-- 位与</span></span><br><span class="line"><span class="keyword">select</span> <span class="number">3</span> <span class="operator">|</span> <span class="number">5</span>;  <span class="comment">-- 位或</span></span><br><span class="line"><span class="keyword">select</span> <span class="number">3</span> <span class="operator">^</span> <span class="number">5</span>;  <span class="comment">-- 位异或</span></span><br><span class="line"><span class="keyword">select</span> <span class="number">3</span> <span class="operator">&gt;&gt;</span> <span class="number">1</span>;  <span class="comment">-- 位右移</span></span><br><span class="line"><span class="keyword">select</span> <span class="number">3</span> <span class="operator">&lt;&lt;</span> <span class="number">1</span>;  <span class="comment">-- 位左移</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">~</span> <span class="number">3</span>;   <span class="comment">-- 位取反</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="基本查询—排序查询"><a href="#基本查询—排序查询" class="headerlink" title="基本查询—排序查询"></a>基本查询—排序查询</h3><h4 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h4><blockquote><p>如果我们需要对读取的数据进行排序，我们就可以使用MySQL的 order by 子句来设定你想按哪个字段哪种方式来进行排序，再返回搜索结果。</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法格式：</span></span><br><span class="line"><span class="keyword">select</span> </span><br><span class="line">字段名<span class="number">1</span>, 字段名<span class="number">2</span>, ……</span><br><span class="line"><span class="keyword">from</span> 表名</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> 字段名<span class="number">1</span> [<span class="keyword">asc</span><span class="operator">|</span><span class="keyword">desc</span>], 字段名<span class="number">2</span>[<span class="keyword">asc</span><span class="operator">|</span><span class="keyword">desc</span>] ……;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h4><blockquote><ol><li>asc代表升序，desc代表降序，如果不写默认升序；</li><li>order by用于子句中可以支持单个字段，多个字段，表达式，函数，别名；</li><li>order by子句，放在查询语句的最后面。LIMIT子句除外。</li></ol></blockquote><h4 id="操作-3"><a href="#操作-3" class="headerlink" title="操作-3"></a>操作</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1.使用价格排序（降序）</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> product <span class="keyword">order</span> <span class="keyword">by</span> price <span class="keyword">desc</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2.在价格排序（降序）的基础上，以分类排序（降序）</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> product <span class="keyword">order</span> <span class="keyword">by</span> price <span class="keyword">desc</span>, category_id <span class="keyword">desc</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3.显示商品的价格（去重复），并排序（降序）</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> price <span class="keyword">from</span> product <span class="keyword">order</span> <span class="keyword">by</span> price <span class="keyword">desc</span>;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="基本查询—聚合查询"><a href="#基本查询—聚合查询" class="headerlink" title="基本查询—聚合查询"></a>基本查询—聚合查询</h3><h4 id="简介-3"><a href="#简介-3" class="headerlink" title="简介-3"></a>简介</h4><blockquote><p>之前我们做的查询都是横向查询，它们都是根据条件一行一行的进行判断，而使用聚合函数查询是纵向查询，它是对一列的值进行计算，然后返回一个单一的值；另外聚合函数会忽略空值。</p></blockquote><table><thead><tr><th style="text-align:center">聚合函数</th><th style="text-align:center">作用</th></tr></thead><tbody><tr><td style="text-align:center">count()</td><td style="text-align:center">统计指定列不为NULL的记录行数；</td></tr><tr><td style="text-align:center">sum()</td><td style="text-align:center">计算指定列的数值和，如果指定列类型不是数值类型，那么计算结果为0；</td></tr><tr><td style="text-align:center">max()</td><td style="text-align:center">计算指定列的最大值，如果指定列是字符串类型，那么使用字符串排序运算；</td></tr><tr><td style="text-align:center">min()</td><td style="text-align:center">计算指定列的最小值，如果指定列是字符串类型，那么使用字符串排序运算；</td></tr><tr><td style="text-align:center">avg()</td><td style="text-align:center">计算指定列的平均值，如果指定列类型不是数值类型，那么计算结果为0</td></tr></tbody></table><h4 id="操作-4"><a href="#操作-4" class="headerlink" title="操作-4"></a>操作</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1 查询商品的总条数</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> product;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2 查询价格大于200商品的总条数</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> product <span class="keyword">where</span> price <span class="operator">&gt;</span> <span class="number">200</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3 查询分类为&#x27;c001&#x27;的所有商品的总和</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">sum</span>(price) <span class="keyword">from</span> product <span class="keyword">where</span> category_id <span class="operator">=</span> <span class="string">&#x27;c001&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 4 查询商品的最大价格</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">max</span>(price) <span class="keyword">from</span> product;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 5 查询商品的最小价格</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">min</span>(price) <span class="keyword">from</span> product;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 6 查询分类为&#x27;c002&#x27;所有商品的平均价格</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">avg</span>(price) <span class="keyword">from</span> product <span class="keyword">where</span> category_id <span class="operator">=</span> <span class="string">&#x27;c002&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 7 查询商品的最大和最小价格,并分别命名为 max_price 和 min_price :</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">max</span>(price) max_price, <span class="built_in">min</span>(price) min_price <span class="keyword">from</span> product;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="NULL值的处理"><a href="#NULL值的处理" class="headerlink" title="NULL值的处理"></a>NULL值的处理</h4><h5 id="介绍-2"><a href="#介绍-2" class="headerlink" title="介绍-2"></a>介绍</h5><blockquote><ol><li><p>count函数对null值的处理：<br>如果count函数的参数为星号（*），则统计所有记录的个数。而如果参数为某字段，不统计含null值的记录个数。</p></li><li><p>sum和avg函数对null值的处理：</p><p>这两个函数忽略null值的存在，就好像该条记录不存在一样。</p></li><li><p>max和min函数对null值的处理：</p><p>max和min两个函数同样忽略null值的存在。</p></li></ol></blockquote><h5 id="操作-5"><a href="#操作-5" class="headerlink" title="操作-5"></a>操作</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建表</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> test_null (</span><br><span class="line">c1 <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">    c2 <span class="type">int</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 插入数据</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> test_null <span class="keyword">values</span>(<span class="string">&#x27;aaa&#x27;</span>,<span class="number">3</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> test_null <span class="keyword">values</span>(<span class="string">&#x27;bbb&#x27;</span>,<span class="number">3</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> test_null <span class="keyword">values</span>(<span class="string">&#x27;ccc&#x27;</span>,<span class="keyword">null</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> test_null <span class="keyword">values</span>(<span class="string">&#x27;ddd&#x27;</span>,<span class="number">6</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 测试</span></span><br><span class="line"><span class="comment">-- SELECT COUNT(*)和 SELECT COUNT(1)  是一个意思</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>), <span class="built_in">count</span>(<span class="number">1</span>), <span class="built_in">count</span>(c2) <span class="keyword">from</span> test_null;</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">sum</span>(c2),<span class="built_in">max</span>(c2),<span class="built_in">min</span>(c2),<span class="built_in">avg</span>(c2) <span class="keyword">from</span> test_null;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="基本查询—分组查询—group-by"><a href="#基本查询—分组查询—group-by" class="headerlink" title="基本查询—分组查询—group-by"></a>基本查询—分组查询—group by</h3><h4 id="简介-4"><a href="#简介-4" class="headerlink" title="简介-4"></a>简介</h4><blockquote><p>分组查询是指使用group by字句对查询信息进行分组。</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 格式：</span></span><br><span class="line"><span class="keyword">select</span> 字段<span class="number">1</span>，字段<span class="number">2</span>…… <span class="keyword">from</span> 表名 <span class="keyword">group</span> <span class="keyword">by</span> 分组字段 <span class="keyword">having</span> 分组条件;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 操作</span></span><br><span class="line"><span class="comment">-- 1、统计各个分类商品的个数(注意：分组之后select的后边只能写分组字段和聚合函数)</span></span><br><span class="line"><span class="keyword">select</span> category_id,<span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> product <span class="keyword">group</span> <span class="keyword">by</span> category_id;</span><br><span class="line"><span class="comment">-- group by可以指定多个分组字段；假如有三个分组字段，则筛选时必须三个分组字段一致才会分到一起（不分先后）。</span></span><br><span class="line"><span class="comment">-- 例如：学生表，有： 学号  名字  年龄  省  市  县；（分组字段可不分先后）</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">from</span> product <span class="keyword">group</span> <span class="keyword">by</span> 市, 省, 县;  <span class="comment">-- 筛查结果为同一个省市县的分到一起并统计个数</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>如果要进行分组的话，则select子句之后，只能出现分组的字段和统计函数，其他的字段不能出现；</p></blockquote><h4 id="分组之后的条件筛选—having"><a href="#分组之后的条件筛选—having" class="headerlink" title="分组之后的条件筛选—having"></a>分组之后的条件筛选—having</h4><blockquote><ul><li>分组之后对统计结果进行筛选的话必须使用having，不能使用where；</li><li>where子句用来筛选FROM子句中指定的操作所产生的行；</li><li>group by 子句用来分组where子句的输出；</li><li>having 子句用来从分组的结果中筛选行。</li></ul></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 格式</span></span><br><span class="line"><span class="keyword">select</span> 字段<span class="number">1</span>, 字段<span class="number">2</span>… <span class="keyword">from</span> 表名 <span class="keyword">group</span> <span class="keyword">by</span> 分组字段 <span class="keyword">having</span> 分组条件;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 操作</span></span><br><span class="line"><span class="comment">-- 2.统计各个分类商品的个数，且只显示个数大于4的信息</span></span><br><span class="line"><span class="keyword">select</span> category_id, <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> product <span class="keyword">group</span> <span class="keyword">by</span> category_id <span class="keyword">having</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="operator">&gt;</span> <span class="number">4</span>;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="基本查询—分页查询—limit"><a href="#基本查询—分页查询—limit" class="headerlink" title="基本查询—分页查询—limit"></a>基本查询—分页查询—limit</h3><h4 id="简介-5"><a href="#简介-5" class="headerlink" title="简介-5"></a>简介</h4><p>分页查询在项目开发中常见，由于数据量很大，显示屏长度有限，因此对数据需要采取分页显示方式。例如数据共有30条，每页显示5条，第一页显示1-5条，第二页显示6-10条。</p><h4 id="格式"><a href="#格式" class="headerlink" title="格式"></a>格式</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 方式1——显示前n条</span></span><br><span class="line"><span class="keyword">select</span> 字段<span class="number">1</span>, 字段<span class="number">2</span>… <span class="keyword">from</span> 表名 limit n;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 方式2——分页显示</span></span><br><span class="line"><span class="keyword">select</span> 字段<span class="number">1</span>, 字段<span class="number">2</span>… <span class="keyword">from</span> 表名 limit m,n;</span><br><span class="line"></span><br><span class="line">m：整数，表示从第几条索引开始，计算方式（当前页<span class="number">-1</span>）<span class="operator">*</span>每页显示条数</span><br><span class="line">n：整数，表示查询多少条数据</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="操作-6"><a href="#操作-6" class="headerlink" title="操作-6"></a>操作</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询product表的前5条记录</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> product limit <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 从第4条开始显示，显示5条</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> product limit <span class="number">3</span>,<span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="基本查询—INSERT-INTO-SELECT语句"><a href="#基本查询—INSERT-INTO-SELECT语句" class="headerlink" title="基本查询—INSERT-INTO-SELECT语句"></a>基本查询—INSERT INTO SELECT语句</h3><h4 id="简介-6"><a href="#简介-6" class="headerlink" title="简介-6"></a>简介</h4><blockquote><p>将一张表的数据导入到另一张表中，可以使用INSERT INTO SELECT语句 。</p></blockquote><h4 id="格式-2"><a href="#格式-2" class="headerlink" title="格式-2"></a>格式</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Table2(field1, field2) <span class="keyword">select</span> value1, value2,… <span class="keyword">from</span> Table1;</span><br><span class="line">或者：</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Table2 <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> Table1;</span><br><span class="line"></span><br><span class="line">注意：要求目标表Table2必须存在</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="操作-7"><a href="#操作-7" class="headerlink" title="操作-7"></a>操作</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 实例</span></span><br><span class="line"><span class="comment">-- 创建表名为product2的表(要与表1中的字段名一致)</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> product2 (</span><br><span class="line">pname <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">    price <span class="keyword">double</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 从表1将数据插入到表2（pname，price）</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> product2(pname,price) <span class="keyword">select</span> pname,price <span class="keyword">from</span> product;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 检查是否成功插入</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> product2;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="SELECT-INTO-FROM语句"><a href="#SELECT-INTO-FROM语句" class="headerlink" title="SELECT-INTO-FROM语句"></a>SELECT INTO FROM语句</h3><h4 id="简介-7"><a href="#简介-7" class="headerlink" title="简介-7"></a>简介</h4><blockquote><p>将一张表的数据导入到另一张表中，有两种选择 SELECT INTO 和 INSERT INTO SELECT 。</p></blockquote><h4 id="格式-3"><a href="#格式-3" class="headerlink" title="格式-3"></a>格式</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> value1, value2 <span class="keyword">into</span> Table2 <span class="keyword">from</span> Table1;</span><br></pre></td></tr></table></figure><blockquote><p>注意： 要求目标表Table2不存在，因为在插入时会自动创建表Table2，并将Table1中指定字段数据复制到Table2中。</p></blockquote><h4 id="操作-8"><a href="#操作-8" class="headerlink" title="操作-8"></a>操作</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> pname,price <span class="keyword">into</span> product3 <span class="keyword">from</span> product;</span><br></pre></td></tr></table></figure><h3 id="练习1"><a href="#练习1" class="headerlink" title="练习1"></a>练习1</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 选择数据库</span></span><br><span class="line">use mydb2;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 创建学生表</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> student (</span><br><span class="line">id <span class="type">int</span>,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">    gender <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">    chinese <span class="type">int</span>,</span><br><span class="line">    english <span class="type">int</span>,</span><br><span class="line">    math <span class="type">int</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 插入数据</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student(id,name,gender,chinese,english,math) <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;张明&#x27;</span>,<span class="string">&#x27;男&#x27;</span>,<span class="number">89</span>,<span class="number">78</span>,<span class="number">90</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student(id,name,gender,chinese,english,math) <span class="keyword">values</span>(<span class="number">2</span>,<span class="string">&#x27;李进&#x27;</span>,<span class="string">&#x27;男&#x27;</span>,<span class="number">67</span>,<span class="number">53</span>,<span class="number">95</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student(id,name,gender,chinese,english,math) <span class="keyword">values</span>(<span class="number">3</span>,<span class="string">&#x27;王五&#x27;</span>,<span class="string">&#x27;女&#x27;</span>,<span class="number">87</span>,<span class="number">78</span>,<span class="number">77</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student(id,name,gender,chinese,english,math) <span class="keyword">values</span>(<span class="number">4</span>,<span class="string">&#x27;李一&#x27;</span>,<span class="string">&#x27;女&#x27;</span>,<span class="number">88</span>,<span class="number">98</span>,<span class="number">92</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student(id,name,gender,chinese,english,math) <span class="keyword">values</span>(<span class="number">5</span>,<span class="string">&#x27;李财&#x27;</span>,<span class="string">&#x27;男&#x27;</span>,<span class="number">82</span>,<span class="number">84</span>,<span class="number">67</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student(id,name,gender,chinese,english,math) <span class="keyword">values</span>(<span class="number">6</span>,<span class="string">&#x27;张宝&#x27;</span>,<span class="string">&#x27;男&#x27;</span>,<span class="number">55</span>,<span class="number">85</span>,<span class="number">45</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student(id,name,gender,chinese,english,math) <span class="keyword">values</span>(<span class="number">7</span>,<span class="string">&#x27;黄蓉&#x27;</span>,<span class="string">&#x27;女&#x27;</span>,<span class="number">75</span>,<span class="number">65</span>,<span class="number">30</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student(id,name,gender,chinese,english,math) <span class="keyword">values</span>(<span class="number">7</span>,<span class="string">&#x27;黄蓉&#x27;</span>,<span class="string">&#x27;女&#x27;</span>,<span class="number">75</span>,<span class="number">65</span>,<span class="number">30</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询数据</span></span><br><span class="line"><span class="comment">-- 1.查询表中所有学生的信息。</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student;</span><br><span class="line"><span class="comment">-- 2.查询表中所有学生的姓名和对应的英语成绩。</span></span><br><span class="line"><span class="keyword">select</span> name,english <span class="keyword">from</span> student;</span><br><span class="line"><span class="comment">-- 3.过滤表中重复数据。</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> <span class="operator">*</span> <span class="keyword">from</span> student;</span><br><span class="line"><span class="comment">-- 4.统计每个学生的总分。</span></span><br><span class="line"><span class="keyword">select</span> name,(chinese <span class="operator">+</span> english <span class="operator">+</span> math) <span class="keyword">as</span> total_score <span class="keyword">from</span> student;</span><br><span class="line"><span class="comment">-- 5.在所有学生总分数上加10分特长分。</span></span><br><span class="line"><span class="keyword">select</span> name,(chinese <span class="operator">+</span> english <span class="operator">+</span> math)<span class="operator">+</span><span class="number">10</span> <span class="keyword">as</span> total_score <span class="keyword">from</span> student;</span><br><span class="line"><span class="comment">-- 6.使用别名表示学生分数。</span></span><br><span class="line"><span class="keyword">select</span> name,chinese <span class="string">&#x27;语文成绩&#x27;</span>, english <span class="string">&#x27;英语成绩&#x27;</span>, math <span class="string">&#x27;数学成绩&#x27;</span> <span class="keyword">from</span> student;</span><br><span class="line"><span class="comment">-- 7.查询英语成绩大于90分的同学。</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student <span class="keyword">where</span> english <span class="operator">&gt;</span> <span class="number">90</span>;</span><br><span class="line"><span class="comment">-- 8.查询总分大于200分的所有同学。</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span>,(chinese <span class="operator">+</span> english <span class="operator">+</span> math) <span class="keyword">as</span> total_score <span class="keyword">from</span> student <span class="keyword">where</span> (chinese <span class="operator">+</span> english <span class="operator">+</span> math) <span class="operator">&gt;</span> <span class="number">200</span>;</span><br><span class="line"><span class="comment">-- 9.查询英语分数在80-90之间的同学。(两种方法)</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student <span class="keyword">where</span> english <span class="keyword">between</span> <span class="number">80</span> <span class="keyword">and</span> <span class="number">90</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student <span class="keyword">where</span> english <span class="operator">&gt;=</span> <span class="number">80</span> <span class="keyword">and</span> english <span class="operator">&lt;=</span> <span class="number">90</span>;</span><br><span class="line"><span class="comment">-- 10.查询英语成绩不在80-90之间的同学。(四种方法)</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student <span class="keyword">where</span> <span class="keyword">not</span> (english <span class="keyword">between</span> <span class="number">80</span> <span class="keyword">and</span> <span class="number">90</span>);</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student <span class="keyword">where</span> english <span class="keyword">not</span> <span class="keyword">between</span> <span class="number">80</span> <span class="keyword">and</span> <span class="number">90</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student <span class="keyword">where</span> <span class="keyword">not</span> (english <span class="operator">&gt;=</span> <span class="number">80</span> <span class="keyword">and</span> english <span class="operator">&lt;=</span> <span class="number">90</span>);</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student <span class="keyword">where</span> english <span class="operator">&lt;</span> <span class="number">80</span> <span class="operator">||</span> english <span class="operator">&gt;</span> <span class="number">90</span>;</span><br><span class="line"><span class="comment">-- 11.查询数学分数为89,90,91的同学。</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student <span class="keyword">where</span> math <span class="keyword">in</span>(<span class="number">89</span>,<span class="number">90</span>,<span class="number">91</span>);</span><br><span class="line"><span class="comment">-- 12.查询数学分数不为89,90,91的同学。</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student <span class="keyword">where</span> math <span class="keyword">not</span> <span class="keyword">in</span>(<span class="number">89</span>,<span class="number">90</span>,<span class="number">91</span>);</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student <span class="keyword">where</span> <span class="keyword">not</span> math <span class="keyword">in</span>(<span class="number">89</span>,<span class="number">90</span>,<span class="number">91</span>);</span><br><span class="line"><span class="comment">-- 13.查询所有姓李的学生英语成绩。</span></span><br><span class="line"><span class="keyword">select</span> name,english <span class="keyword">from</span> student <span class="keyword">where</span> name <span class="keyword">like</span> <span class="string">&#x27;李%&#x27;</span>;</span><br><span class="line"><span class="comment">-- 14.查询数学分80并且语文分80的同学。</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student <span class="keyword">where</span> math <span class="operator">=</span> <span class="number">80</span> <span class="keyword">and</span> chinese <span class="operator">=</span> <span class="number">80</span>;</span><br><span class="line"><span class="comment">-- 15.查询英语80或者总分200的同学。</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student <span class="keyword">where</span> english <span class="operator">=</span> <span class="number">80</span> <span class="keyword">or</span> (chinese <span class="operator">+</span> english <span class="operator">+</span> math) <span class="operator">=</span> <span class="number">200</span>;</span><br><span class="line"><span class="comment">-- 16.对数学成绩降序排序后输出。</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student <span class="keyword">order</span> <span class="keyword">by</span> math <span class="keyword">desc</span>;</span><br><span class="line"><span class="comment">-- 17.对总分排序后输出，然后再按从高到低的顺序输出。</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span>,(chinese <span class="operator">+</span> english <span class="operator">+</span> math) <span class="keyword">as</span> total_score <span class="keyword">from</span> student <span class="keyword">order</span> <span class="keyword">by</span> (chinese <span class="operator">+</span> english <span class="operator">+</span> math) <span class="keyword">desc</span>;</span><br><span class="line"><span class="comment">-- 18.对姓李的学生总分成绩降序排序输出。</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span>,(chinese <span class="operator">+</span> english <span class="operator">+</span> math) <span class="keyword">as</span> total_score <span class="keyword">from</span> student <span class="keyword">where</span> name <span class="keyword">like</span> <span class="string">&#x27;李%&#x27;</span> <span class="keyword">order</span> <span class="keyword">by</span> (chinese <span class="operator">+</span> english <span class="operator">+</span> math) <span class="keyword">desc</span>;</span><br><span class="line"><span class="comment">-- 19.查询男生和女生分别有多少人，并将人数降序排序输出。</span></span><br><span class="line"><span class="keyword">select</span> gender,<span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">as</span> total_count <span class="keyword">from</span> student <span class="keyword">group</span> <span class="keyword">by</span> gender <span class="keyword">order</span> <span class="keyword">by</span> total_count <span class="keyword">desc</span>;</span><br><span class="line"><span class="comment">-- 20.查询男生和女生分别有多少人，并将人数降序排序输出,查询出人数大于等于4的性别人数信息。</span></span><br><span class="line"><span class="keyword">select</span> gender,<span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">as</span> total_count <span class="keyword">from</span> student <span class="keyword">group</span> <span class="keyword">by</span> gender <span class="keyword">having</span> total_count <span class="operator">&gt;=</span> <span class="number">4</span> <span class="keyword">order</span> <span class="keyword">by</span> total_count <span class="keyword">desc</span>;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="练习2"><a href="#练习2" class="headerlink" title="练习2"></a>练习2</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 选择mydb2数据库</span></span><br><span class="line">use mydb2;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 创建工资表</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> emp (</span><br><span class="line">empno <span class="type">int</span>,     <span class="comment">-- 员工编号</span></span><br><span class="line">    ename <span class="type">varchar</span>(<span class="number">50</span>),  <span class="comment">-- 员工名字</span></span><br><span class="line">    job <span class="type">varchar</span>(<span class="number">50</span>),  <span class="comment">-- 工作名字</span></span><br><span class="line">    mgr <span class="type">int</span>,     <span class="comment">-- 上级领导编号</span></span><br><span class="line">    hiredate <span class="type">date</span>,  <span class="comment">-- 入职日期</span></span><br><span class="line">    sal <span class="type">int</span>,       <span class="comment">-- 薪资</span></span><br><span class="line">    comm <span class="type">int</span>,      <span class="comment">-- 奖金</span></span><br><span class="line">    deptno <span class="type">int</span>     <span class="comment">-- 部门编号</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 插入数据</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp <span class="keyword">values</span>(<span class="number">7369</span>,<span class="string">&#x27;SMITH&#x27;</span>,<span class="string">&#x27;CLERK&#x27;</span>,<span class="number">7902</span>,<span class="string">&#x27;1980-12-17&#x27;</span>,<span class="number">800</span>,<span class="keyword">NULL</span>,<span class="number">20</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp <span class="keyword">values</span>(<span class="number">7499</span>,<span class="string">&#x27;ALLEN&#x27;</span>,<span class="string">&#x27;SALESMAN&#x27;</span>,<span class="number">7698</span>,<span class="string">&#x27;1981-02-20&#x27;</span>,<span class="number">1600</span>,<span class="number">300</span>,<span class="number">30</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp <span class="keyword">values</span>(<span class="number">7521</span>,<span class="string">&#x27;WARD&#x27;</span>,<span class="string">&#x27;SALESMAN&#x27;</span>,<span class="number">7698</span>,<span class="string">&#x27;1981-02-22&#x27;</span>,<span class="number">1250</span>,<span class="number">500</span>,<span class="number">30</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp <span class="keyword">values</span>(<span class="number">7566</span>,<span class="string">&#x27;JONES&#x27;</span>,<span class="string">&#x27;MANAGER&#x27;</span>,<span class="number">7839</span>,<span class="string">&#x27;1981-04-02&#x27;</span>,<span class="number">2975</span>,<span class="keyword">NULL</span>,<span class="number">20</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp <span class="keyword">values</span>(<span class="number">7654</span>,<span class="string">&#x27;MARTIN&#x27;</span>,<span class="string">&#x27;SALESMAN&#x27;</span>,<span class="number">7698</span>,<span class="string">&#x27;1981-09-28&#x27;</span>,<span class="number">1250</span>,<span class="number">1400</span>,<span class="number">30</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp <span class="keyword">values</span>(<span class="number">7698</span>,<span class="string">&#x27;BLAKE&#x27;</span>,<span class="string">&#x27;MANAGER&#x27;</span>,<span class="number">7839</span>,<span class="string">&#x27;1981-05-01&#x27;</span>,<span class="number">2850</span>,<span class="keyword">NULL</span>,<span class="number">30</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp <span class="keyword">values</span>(<span class="number">7782</span>,<span class="string">&#x27;CLARK&#x27;</span>,<span class="string">&#x27;MANAGER&#x27;</span>,<span class="number">7839</span>,<span class="string">&#x27;1981-06-09&#x27;</span>,<span class="number">2450</span>,<span class="keyword">NULL</span>,<span class="number">10</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp <span class="keyword">values</span>(<span class="number">7788</span>,<span class="string">&#x27;SCOTT&#x27;</span>,<span class="string">&#x27;ANALYST&#x27;</span>,<span class="number">7566</span>,<span class="string">&#x27;1987-04-19&#x27;</span>,<span class="number">3000</span>,<span class="keyword">NULL</span>,<span class="number">20</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp <span class="keyword">values</span>(<span class="number">7839</span>,<span class="string">&#x27;KING&#x27;</span>,<span class="string">&#x27;PRESIDENT&#x27;</span>,<span class="keyword">NULL</span>,<span class="string">&#x27;1981-11-17&#x27;</span>,<span class="number">5000</span>,<span class="keyword">NULL</span>,<span class="number">10</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp <span class="keyword">values</span>(<span class="number">7844</span>,<span class="string">&#x27;TURNER&#x27;</span>,<span class="string">&#x27;SALESMAN&#x27;</span>,<span class="number">7698</span>,<span class="string">&#x27;1981-09-08&#x27;</span>,<span class="number">1500</span>,<span class="number">0</span>,<span class="number">30</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp <span class="keyword">values</span>(<span class="number">7876</span>,<span class="string">&#x27;ADAMS&#x27;</span>,<span class="string">&#x27;CLERK&#x27;</span>,<span class="number">7788</span>,<span class="string">&#x27;1987-05-23&#x27;</span>,<span class="number">1100</span>,<span class="keyword">NULL</span>,<span class="number">20</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp <span class="keyword">values</span>(<span class="number">7900</span>,<span class="string">&#x27;JAMES&#x27;</span>,<span class="string">&#x27;CLERK&#x27;</span>,<span class="number">7698</span>,<span class="string">&#x27;1981-12-03&#x27;</span>,<span class="number">950</span>,<span class="keyword">NULL</span>,<span class="number">30</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp <span class="keyword">values</span>(<span class="number">7902</span>,<span class="string">&#x27;FORD&#x27;</span>,<span class="string">&#x27;ANALYST&#x27;</span>,<span class="number">7566</span>,<span class="string">&#x27;1981-12-03&#x27;</span>,<span class="number">3000</span>,<span class="keyword">NULL</span>,<span class="number">20</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp <span class="keyword">values</span>(<span class="number">7934</span>,<span class="string">&#x27;MTLLER&#x27;</span>,<span class="string">&#x27;CLERK&#x27;</span>,<span class="number">7782</span>,<span class="string">&#x27;1982-1-23&#x27;</span>,<span class="number">1300</span>,<span class="keyword">NULL</span>,<span class="number">10</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询数据</span></span><br><span class="line"><span class="comment">-- 1、按员工编号升序排列不在10号部门工作的员工信息。（两种方法）</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> deptno <span class="keyword">not</span> <span class="keyword">in</span>(<span class="number">10</span>) <span class="keyword">order</span> <span class="keyword">by</span> empno;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> deptno <span class="operator">!=</span> <span class="number">10</span> <span class="keyword">order</span> <span class="keyword">by</span> empno;</span><br><span class="line"><span class="comment">-- 2、查询姓名第二个字母不是“A”且薪水大于1000元的员工信息，按年薪降序排列。</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span>,(sal <span class="operator">*</span> <span class="number">12</span> <span class="operator">+</span> ifnull(comm,<span class="number">0</span>)) yearly <span class="keyword">from</span> emp <span class="keyword">where</span> ename <span class="keyword">not</span>  <span class="keyword">like</span> <span class="string">&#x27;_A%&#x27;</span> <span class="keyword">and</span> sal <span class="operator">&gt;</span> <span class="number">1000</span> <span class="keyword">order</span> <span class="keyword">by</span> (sal <span class="operator">*</span> <span class="number">12</span> <span class="operator">+</span> ifnull(comm,<span class="number">0</span>)) <span class="keyword">desc</span>;</span><br><span class="line"><span class="comment">-- 3、求每个部门的平均薪水,并按平均薪水降序排序。</span></span><br><span class="line"><span class="keyword">select</span> deptno,<span class="built_in">avg</span>(sal) <span class="keyword">as</span> avg_sal <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno <span class="keyword">order</span> <span class="keyword">by</span> avg_sal <span class="keyword">desc</span>;</span><br><span class="line"><span class="comment">-- 4、求各个部门的最高薪水。</span></span><br><span class="line"><span class="keyword">select</span> deptno,<span class="built_in">max</span>(sal) <span class="keyword">as</span> max_sal <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno;</span><br><span class="line"><span class="comment">-- 5、求每个部门每个岗位的最高薪水并按部门排序。</span></span><br><span class="line"><span class="keyword">select</span> deptno,job,<span class="built_in">max</span>(sal) <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno,job <span class="keyword">order</span> <span class="keyword">by</span> deptno;</span><br><span class="line"><span class="comment">-- 6、求平均薪水大于2000的部门编号。</span></span><br><span class="line"><span class="keyword">select</span> deptno,<span class="built_in">avg</span>(sal) <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno <span class="keyword">having</span> <span class="built_in">avg</span>(sal) <span class="operator">&gt;</span> <span class="number">2000</span>;</span><br><span class="line"><span class="comment">-- 7、将部门平均薪水大于1500的部门编号列出来，按部门平均薪水降序排列。</span></span><br><span class="line"><span class="keyword">select</span> deptno,<span class="built_in">avg</span>(sal) avg_sal <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno <span class="keyword">having</span> <span class="built_in">avg</span>(sal) <span class="operator">&gt;</span> <span class="number">1500</span> <span class="keyword">order</span> <span class="keyword">by</span> avg_sal <span class="keyword">desc</span>;</span><br><span class="line"><span class="comment">-- 8、选择公司中有奖金的员工姓名，工资。</span></span><br><span class="line"><span class="keyword">select</span> ename,sal,comm <span class="keyword">from</span> emp <span class="keyword">where</span> comm <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span>;</span><br><span class="line"><span class="comment">-- 9、查询员工最高工资和最低工资的差距。</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">max</span>(sal) <span class="operator">-</span> <span class="built_in">min</span>(sal) <span class="string">&#x27;薪资差距&#x27;</span> <span class="keyword">from</span> emp;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h3><h4 id="介绍-3"><a href="#介绍-3" class="headerlink" title="介绍-3"></a>介绍</h4><blockquote><p>​正则表达式(regular expression)描述了一种字符串匹配的规则，正则表达式本身就是一个字符串，使用这个字符串来描述、用来定义匹配规则，匹配一系列符合某个句法规则的字符串。在开发中，正则表达式通常被用来检索、替换那些符合某个规则的文本。</p><p>​MySQL通过<strong>REGEXP关键字</strong>支持正则表达式进行字符串匹配。</p></blockquote><h4 id="格式-4"><a href="#格式-4" class="headerlink" title="格式-4"></a>格式</h4><table><thead><tr><th style="text-align:center">模式</th><th style="text-align:center">描述</th></tr></thead><tbody><tr><td style="text-align:center">^</td><td style="text-align:center">匹配输入字符串的开始位置。</td></tr><tr><td style="text-align:center">$</td><td style="text-align:center">匹配输入字符串的结束位置。</td></tr><tr><td style="text-align:center">.</td><td style="text-align:center">匹配除&quot;\n&quot;之外的任何某个字符。</td></tr><tr><td style="text-align:center">[…]</td><td style="text-align:center">字符集合。匹配所包含的任意一个字符。例如，'[abc]‘可以匹配&quot;plain&quot;中的’a’。</td></tr><tr><td style="text-align:center">[^…]</td><td style="text-align:center">负值字符集合。匹配未包含的任意字符。例如，'[^abc]‘可以匹配&quot;plain&quot;中的’p’。</td></tr><tr><td style="text-align:center">p1|p2|p3</td><td style="text-align:center">匹配p1或p2或p3。例如，‘z|food’能匹配&quot;z&quot;或&quot;food&quot;。’(z|f)ood’则匹配&quot;zood&quot;或&quot;food&quot;。</td></tr><tr><td style="text-align:center">*</td><td style="text-align:center">匹配前面的子表达式零次或多次。例如，&quot;zo*“能匹配&quot;z&quot;以及&quot;zoo”。 * 等价于{0,}。</td></tr><tr><td style="text-align:center">+</td><td style="text-align:center">匹配前面的子表达式一次或多次。例如，“zo+“能匹配&quot;zo&quot;以及&quot;zoo”，但不能匹配&quot;z”。+ 等价于 {1,}。</td></tr><tr><td style="text-align:center">{n}</td><td style="text-align:center">n 是一个非负整数。匹配确定的 n 次。例如，‘o{2}’ 不能匹配 “Bob” 中的 ‘o’，但是能匹配 “food” 中的两个 o。</td></tr><tr><td style="text-align:center">{n,m}</td><td style="text-align:center">m 和 n 均为非负整数，其中n &lt;= m。最少匹配 n 次且最多匹配 m 次。</td></tr></tbody></table><h3 id="正则表达式匹配查询"><a href="#正则表达式匹配查询" class="headerlink" title="正则表达式匹配查询"></a>正则表达式匹配查询</h3><h4 id="操作上"><a href="#操作上" class="headerlink" title="操作上"></a>操作上</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- ^ 在字符串开始处进行匹配</span></span><br><span class="line"><span class="keyword">SELECT</span>  <span class="string">&#x27;abc&#x27;</span> REGEXP <span class="string">&#x27;^a&#x27;</span>;</span><br><span class="line"> </span><br><span class="line"><span class="comment">-- $ 在字符串末尾开始匹配</span></span><br><span class="line"><span class="keyword">SELECT</span>  <span class="string">&#x27;abc&#x27;</span> REGEXP <span class="string">&#x27;a$&#x27;</span>;</span><br><span class="line"><span class="keyword">SELECT</span>  <span class="string">&#x27;abc&#x27;</span> REGEXP <span class="string">&#x27;c$&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- . 匹配任意字符</span></span><br><span class="line"><span class="keyword">SELECT</span>  <span class="string">&#x27;abc&#x27;</span> REGEXP <span class="string">&#x27;.b&#x27;</span>;</span><br><span class="line"><span class="keyword">SELECT</span>  <span class="string">&#x27;abc&#x27;</span> REGEXP <span class="string">&#x27;.c&#x27;</span>;</span><br><span class="line"><span class="keyword">SELECT</span>  <span class="string">&#x27;abc&#x27;</span> REGEXP <span class="string">&#x27;a.&#x27;</span>;</span><br><span class="line"> </span><br><span class="line"><span class="comment">-- [...] 匹配括号内的任意单个字符</span></span><br><span class="line"><span class="keyword">SELECT</span>  <span class="string">&#x27;abc&#x27;</span> REGEXP <span class="string">&#x27;[xyz]&#x27;</span>;</span><br><span class="line"><span class="keyword">SELECT</span>  <span class="string">&#x27;abc&#x27;</span> REGEXP <span class="string">&#x27;[xaz]&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- [^...] 注意^符合只有在[]内才是取反的意思，在别的地方都是表示开始处匹配</span></span><br><span class="line"><span class="keyword">SELECT</span>  <span class="string">&#x27;a&#x27;</span> REGEXP <span class="string">&#x27;[^abc]&#x27;</span>;</span><br><span class="line"><span class="keyword">SELECT</span>  <span class="string">&#x27;x&#x27;</span> REGEXP <span class="string">&#x27;[^abc]&#x27;</span>;</span><br><span class="line"><span class="keyword">SELECT</span>  <span class="string">&#x27;abc&#x27;</span> REGEXP <span class="string">&#x27;[^a]&#x27;</span>;</span><br><span class="line"> </span><br><span class="line"><span class="comment">-- a* 匹配0个或多个a,包括空字符串。 可以作为占位符使用.有没有指定字符都可以匹配到数据</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">&#x27;stab&#x27;</span> REGEXP <span class="string">&#x27;.ta*b&#x27;</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">&#x27;stb&#x27;</span> REGEXP <span class="string">&#x27;.ta*b&#x27;</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">&#x27;&#x27;</span> REGEXP <span class="string">&#x27;a*&#x27;</span>;</span><br><span class="line"> </span><br><span class="line"><span class="comment">-- a+  匹配1个或者多个a,但是不包括空字符</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">&#x27;stab&#x27;</span> REGEXP <span class="string">&#x27;.ta+b&#x27;</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">&#x27;stb&#x27;</span> REGEXP <span class="string">&#x27;.ta+b&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="操作下"><a href="#操作下" class="headerlink" title="操作下"></a>操作下</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- a?  匹配0个或者1个a</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">&#x27;stb&#x27;</span> REGEXP <span class="string">&#x27;.ta?b&#x27;</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">&#x27;stab&#x27;</span> REGEXP <span class="string">&#x27;.ta?b&#x27;</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">&#x27;staab&#x27;</span> REGEXP <span class="string">&#x27;.ta?b&#x27;</span>;</span><br><span class="line"> </span><br><span class="line"><span class="comment">-- a1|a2  匹配a1或者a2，</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">&#x27;a&#x27;</span> REGEXP <span class="string">&#x27;a|b&#x27;</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">&#x27;b&#x27;</span> REGEXP <span class="string">&#x27;a|b&#x27;</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">&#x27;b&#x27;</span> REGEXP <span class="string">&#x27;^(a|b)&#x27;</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">&#x27;a&#x27;</span> REGEXP <span class="string">&#x27;^(a|b)&#x27;</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">&#x27;c&#x27;</span> REGEXP <span class="string">&#x27;^(a|b)&#x27;</span>;</span><br><span class="line"> </span><br><span class="line"><span class="comment">-- a&#123;m&#125; 匹配m个a</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">&#x27;auuuuc&#x27;</span> REGEXP <span class="string">&#x27;au&#123;4&#125;c&#x27;</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">&#x27;auuuuc&#x27;</span> REGEXP <span class="string">&#x27;au&#123;3&#125;c&#x27;</span>;</span><br><span class="line"></span><br><span class="line"> <span class="comment">-- a&#123;m,n&#125; 匹配m到n个a,包含m和n</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">&#x27;auuuuc&#x27;</span> REGEXP <span class="string">&#x27;au&#123;3,5&#125;c&#x27;</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">&#x27;auuuuc&#x27;</span> REGEXP <span class="string">&#x27;au&#123;4,5&#125;c&#x27;</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">&#x27;auuuuc&#x27;</span> REGEXP <span class="string">&#x27;au&#123;5,10&#125;c&#x27;</span>;</span><br><span class="line"> </span><br><span class="line"><span class="comment">-- (abc) abc作为一个序列匹配，不用括号括起来都是用单个字符去匹配，如果要把多个字符作为一个整体去匹配就需要用到括号，所以括号适合上面的所有情况。</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">&#x27;xababy&#x27;</span> REGEXP <span class="string">&#x27;x(abab)y&#x27;</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">&#x27;xababy&#x27;</span> REGEXP <span class="string">&#x27;x(ab)*y&#x27;</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">&#x27;xababy&#x27;</span> REGEXP <span class="string">&#x27;x(ab)&#123;1,2&#125;y&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="多表操作"><a href="#多表操作" class="headerlink" title="多表操作"></a>多表操作</h2><h3 id="介绍-4"><a href="#介绍-4" class="headerlink" title="介绍-4"></a>介绍</h3><blockquote><p>​实际开发中，一个项目通常需要很多张表才能完成。例如：一个商城项目就需要分类表(category)、商品表(products)、订单表(orders)等多张表。且这些表的数据之间存在一定的关系，接下来我们将在单表的基础上，一起学习多表方面的知识。</p></blockquote><h3 id="多表关系"><a href="#多表关系" class="headerlink" title="多表关系"></a>多表关系</h3><blockquote><p>MySQL多表之间的关系可以概括为：一对一、一对多/多对一关系，多对多</p></blockquote><h4 id="一对一关系"><a href="#一对一关系" class="headerlink" title="一对一关系"></a>一对一关系</h4><blockquote><blockquote><p>一个学生只有一张身份证；一张身份证只能对应一学生。</p><p>在任一表中添加唯一外键，指向另一方主键，确保一对一关系。</p><p>一般一对一关系很少见，遇到一对一关系的表最好是合并表。</p></blockquote></blockquote><p class='item-img' data-src='/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/1723458272353.png'><img src="/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/1723458272353.png" alt="一对一关系"></p><h4 id="一对多-多对一关系"><a href="#一对多-多对一关系" class="headerlink" title="一对多-多对一关系"></a>一对多/多对一关系</h4><blockquote><blockquote><p>部门和员工：</p><p>分析：一个部门有多个员工，一个员工只能对应一个部门；</p><p>实现原则：在多的一方建立外键，指向一的一方的主键。</p></blockquote></blockquote><p class='item-img' data-src='/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/1723458422997.png'><img src="/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/1723458422997.png" alt="一对多/多对一关系"></p><h4 id="多对多关系"><a href="#多对多关系" class="headerlink" title="多对多关系"></a>多对多关系</h4><blockquote><blockquote><p>学生和课程：</p><p>分析：一个学生可以选择很多门课程，一个课程也可以被很多学生选择；</p><p>原则：多对多关系实现需要借助第三张中间表。中间表至少包含两个字段，将多对多的关系，拆成一对多的关系，中间表至少要有两个外键，这两个外键分别指向原来的那两张表的主键。</p><p>​注：多对多的关系需要一个中间表作为桥梁</p></blockquote></blockquote><p class='item-img' data-src='/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/1723458752429.png'><img src="/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/1723458752429.png" alt="多对多关系"></p><h3 id="外键约束—概念"><a href="#外键约束—概念" class="headerlink" title="外键约束—概念"></a>外键约束—概念</h3><h4 id="介绍-5"><a href="#介绍-5" class="headerlink" title="介绍-5"></a>介绍</h4><blockquote><p>MySQL 外键约束（FOREIGN KEY）是表的一个特殊字段，经常与主键约束一起使用。对于两个具有关联关系的表而言，相关联字段中主键所在的表就是主表（父表），外键所在的表就是从表（子表）。</p><p>外键用来建立主表与从表的关联关系，为两个表的数据建立连接，约束两个表中数据的一致性和完整性。比如，一个水果摊，只有苹果、桃子、李子、西瓜等 4 种水果，那么，你来到水果摊要买水果就只能选择苹果、桃子、李子和西瓜，其它的水果都是不能购买的。</p></blockquote><p class='item-img' data-src='/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/1723513337738.png'><img src="/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/1723513337738.png" alt="外键约束"></p><h4 id="特点-2"><a href="#特点-2" class="headerlink" title="特点-2"></a>特点</h4><blockquote><p>定义一个外键时，需要遵守下列规则：</p><ul><li><p>主表必须已经存在于数据库中，或者是当前正在创建的表。</p></li><li><p>必须为主表定义主键。</p></li><li><p>​    主键不能包含空值，但允许在外键中出现空值。也就是说，只要外键的每个非空值出现在指定的主键中，这 个外键的内容就是正确的。</p></li><li><p>在主表的表名后面指定列名或列名的组合。这个列或列的组合必须是主表的主键或候选键。</p></li><li><p>外键中列的数目必须和主表的主键中列的数目相同。</p></li><li><p>外键中列的数据类型必须和主表主键中对应列的数据类型相同。</p></li></ul></blockquote><h3 id="外键约束—一对多关系"><a href="#外键约束—一对多关系" class="headerlink" title="外键约束—一对多关系"></a>外键约束—一对多关系</h3><h4 id="操作-创建外键约束"><a href="#操作-创建外键约束" class="headerlink" title="操作-创建外键约束"></a>操作-创建外键约束</h4><p>方式1-在创建表时设置外键约束</p><p>在 create table 语句中，通过 <strong><code>foreign key</code></strong> 关键字来指定外键，具体的语法格式如下：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="keyword">constraint</span> <span class="operator">&lt;</span>外键名<span class="operator">&gt;</span>] <span class="keyword">foreign</span> key 字段名 [，字段名<span class="number">2</span>，…] <span class="keyword">references</span> <span class="operator">&lt;</span>主表名<span class="operator">&gt;</span> 主键列<span class="number">1</span> [，主键列<span class="number">2</span>，…];</span><br></pre></td></tr></table></figure><p>实现：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> database mydb3; </span><br><span class="line">use mydb3;</span><br><span class="line"><span class="comment">-- 创建部门表</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> if <span class="keyword">not</span> <span class="keyword">exists</span> dept(</span><br><span class="line">  deptno <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">primary</span> key,  <span class="comment">-- 部门号</span></span><br><span class="line">  name <span class="type">varchar</span>(<span class="number">20</span>) <span class="comment">-- 部门名字</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 创建员工表</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> if <span class="keyword">not</span> <span class="keyword">exists</span> emp(</span><br><span class="line">  eid <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">primary</span> key , <span class="comment">-- 员工编号</span></span><br><span class="line">  ename <span class="type">varchar</span>(<span class="number">20</span>), <span class="comment">-- 员工名字</span></span><br><span class="line">  age <span class="type">int</span>,  <span class="comment">-- 员工年龄</span></span><br><span class="line">  dept_id <span class="type">varchar</span>(<span class="number">20</span>),  <span class="comment">-- 员工所属部门</span></span><br><span class="line">  <span class="keyword">constraint</span> emp_fk <span class="keyword">foreign</span> key (dept_id) <span class="keyword">references</span> dept (deptno)         <span class="comment">-- 外键约束</span></span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p class='item-img' data-src='/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/1723628931930.png'><img src="/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/1723628931930.png" alt="创建外键"></p><p>方式2-在创建表时设置外键约束</p><blockquote><p>外键约束也可以在修改表时添加，但是添加外键约束的前提是：从表中外键列中的数据必须与主表中主键列中的数据一致或者是没有数据。</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> <span class="operator">&lt;</span>数据表名<span class="operator">&gt;</span> <span class="keyword">add</span> <span class="keyword">constraint</span> <span class="operator">&lt;</span>外键名<span class="operator">&gt;</span> <span class="keyword">foreign</span> key(<span class="operator">&lt;</span>列名<span class="operator">&gt;</span>) <span class="keyword">references</span> <span class="operator">&lt;</span>主表名<span class="operator">&gt;</span> (<span class="operator">&lt;</span>列名<span class="operator">&gt;</span>);</span><br></pre></td></tr></table></figure><p>实现：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建部门表</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> if <span class="keyword">not</span> <span class="keyword">exists</span> dept2(</span><br><span class="line">  deptno <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">primary</span> key ,  <span class="comment">-- 部门号</span></span><br><span class="line">  name <span class="type">varchar</span>(<span class="number">20</span>) <span class="comment">-- 部门名字</span></span><br><span class="line">);</span><br><span class="line"><span class="comment">-- 创建员工表</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> if <span class="keyword">not</span> <span class="keyword">exists</span> emp2(</span><br><span class="line">  eid <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">primary</span> key , <span class="comment">-- 员工编号</span></span><br><span class="line">  ename <span class="type">varchar</span>(<span class="number">20</span>), <span class="comment">-- 员工名字</span></span><br><span class="line">  age <span class="type">int</span>,  <span class="comment">-- 员工年龄</span></span><br><span class="line">  dept_id <span class="type">varchar</span>(<span class="number">20</span>)  <span class="comment">-- 员工所属部门</span></span><br><span class="line">);</span><br><span class="line"><span class="comment">-- 创建外键约束</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> emp2 <span class="keyword">add</span> <span class="keyword">constraint</span> dept_id_fk <span class="keyword">foreign</span> key(dept_id) <span class="keyword">references</span> dept2 (deptno);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p class='item-img' data-src='/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/1723638273956.png'><img src="/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/1723638273956.png" alt="创建外键"></p><h4 id="操作-在外键约束下的数据操作"><a href="#操作-在外键约束下的数据操作" class="headerlink" title="操作-在外键约束下的数据操作"></a>操作-在外键约束下的数据操作</h4><p>验证外键约束的作用</p><p>1、数据插入</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1、添加主表数据</span></span><br><span class="line"> <span class="comment">-- 注意必须先给主表添加数据</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> dept <span class="keyword">values</span>(<span class="string">&#x27;1001&#x27;</span>,<span class="string">&#x27;研发部&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> dept <span class="keyword">values</span>(<span class="string">&#x27;1002&#x27;</span>,<span class="string">&#x27;销售部&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> dept <span class="keyword">values</span>(<span class="string">&#x27;1003&#x27;</span>,<span class="string">&#x27;财务部&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> dept <span class="keyword">values</span>(<span class="string">&#x27;1004&#x27;</span>,<span class="string">&#x27;人事部&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2、添加从表数据</span></span><br><span class="line">  <span class="comment">-- 注意给从表添加数据时，外键列的值不能随便写，必须依赖主表的主键列</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp <span class="keyword">values</span>(<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;乔峰&#x27;</span>,<span class="number">20</span>, <span class="string">&#x27;1001&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp <span class="keyword">values</span>(<span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;段誉&#x27;</span>,<span class="number">21</span>, <span class="string">&#x27;1001&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp <span class="keyword">values</span>(<span class="string">&#x27;3&#x27;</span>,<span class="string">&#x27;虚竹&#x27;</span>,<span class="number">23</span>, <span class="string">&#x27;1001&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp <span class="keyword">values</span>(<span class="string">&#x27;4&#x27;</span>,<span class="string">&#x27;阿紫&#x27;</span>,<span class="number">18</span>, <span class="string">&#x27;1002&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp <span class="keyword">values</span>(<span class="string">&#x27;5&#x27;</span>,<span class="string">&#x27;扫地僧&#x27;</span>,<span class="number">35</span>, <span class="string">&#x27;1002&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp <span class="keyword">values</span>(<span class="string">&#x27;6&#x27;</span>,<span class="string">&#x27;李秋水&#x27;</span>,<span class="number">33</span>, <span class="string">&#x27;1003&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp <span class="keyword">values</span>(<span class="string">&#x27;7&#x27;</span>,<span class="string">&#x27;鸠摩智&#x27;</span>,<span class="number">50</span>, <span class="string">&#x27;1003&#x27;</span>); </span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp <span class="keyword">values</span>(<span class="string">&#x27;8&#x27;</span>,<span class="string">&#x27;天山童姥&#x27;</span>,<span class="number">60</span>, <span class="string">&#x27;1005&#x27;</span>);  <span class="comment">-- 不可以</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>2、删除数据</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 3、删除数据</span></span><br><span class="line"> <span class="comment">/*</span></span><br><span class="line"><span class="comment">   注意：</span></span><br><span class="line"><span class="comment">       1：主表的数据被从表依赖时，不能删除，否则可以删除</span></span><br><span class="line"><span class="comment">       2: 从表的数据可以随便删除</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> dept <span class="keyword">where</span> deptno <span class="operator">=</span> <span class="string">&#x27;1001&#x27;</span>; <span class="comment">-- 不可以删除</span></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> dept <span class="keyword">where</span> deptno <span class="operator">=</span> <span class="string">&#x27;1004&#x27;</span>; <span class="comment">-- 可以删除</span></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> emp <span class="keyword">where</span> eid <span class="operator">=</span> <span class="string">&#x27;7&#x27;</span>; <span class="comment">-- 可以删除</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="操作-删除外键约束"><a href="#操作-删除外键约束" class="headerlink" title="操作-删除外键约束"></a>操作-删除外键约束</h4><blockquote><p>当一个表中不需要外键约束时，就需要从表中将其删除。外键一旦删除，就会解除主表和从表间的关联关系</p></blockquote><p>格式：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span> <span class="keyword">drop</span> <span class="keyword">foreign</span> key <span class="operator">&lt;</span>外键约束名<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure><p>实现：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> emp2 <span class="keyword">drop</span> <span class="keyword">foreign</span> key dept_id_fk;</span><br></pre></td></tr></table></figure><h3 id="外键约束-多对多关系"><a href="#外键约束-多对多关系" class="headerlink" title="外键约束-多对多关系"></a>外键约束-多对多关系</h3><h4 id="介绍-6"><a href="#介绍-6" class="headerlink" title="介绍-6"></a>介绍</h4><blockquote><p>在多对多关系中，A表的一行对应B的多行，B表的一行对应A表的多行，我们要新增加一个中间表，来建立多对多关系。</p></blockquote><p class='item-img' data-src='/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/1723949414488.png'><img src="/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/1723949414488.png" alt="外键约束-多对多关系"></p><h4 id="操作-9"><a href="#操作-9" class="headerlink" title="操作-9"></a>操作</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 选择mydb3数据库</span></span><br><span class="line">use mydb3;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 学生表和课程表(多对多)</span></span><br><span class="line">  <span class="comment">-- 1 创建学生表student(左侧主表)</span></span><br><span class="line">   <span class="keyword">create</span> <span class="keyword">table</span> if <span class="keyword">not</span> <span class="keyword">exists</span> student(</span><br><span class="line">    sid <span class="type">int</span> <span class="keyword">primary</span> key auto_increment,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">    age <span class="type">int</span>,</span><br><span class="line">    gender <span class="type">varchar</span>(<span class="number">20</span>)</span><br><span class="line">   );</span><br><span class="line">  <span class="comment">-- 2 创建课程表course(右侧主表)</span></span><br><span class="line">  <span class="keyword">create</span> <span class="keyword">table</span> course(</span><br><span class="line">   cid  <span class="type">int</span> <span class="keyword">primary</span> key auto_increment,</span><br><span class="line">   cidname <span class="type">varchar</span>(<span class="number">20</span>)</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3创建中间表student_course/score(从表)</span></span><br><span class="line">  <span class="keyword">create</span> <span class="keyword">table</span> score(</span><br><span class="line">    sid <span class="type">int</span>,</span><br><span class="line">    cid <span class="type">int</span>,</span><br><span class="line">    score <span class="keyword">double</span></span><br><span class="line">  );</span><br><span class="line">    </span><br><span class="line"><span class="comment">-- 4建立外键约束(2次)</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> score <span class="keyword">add</span> <span class="keyword">foreign</span> key(sid) <span class="keyword">references</span> student(sid);</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> score <span class="keyword">add</span> <span class="keyword">foreign</span> key(cid) <span class="keyword">references</span> course(cid);</span><br><span class="line"> </span><br><span class="line"><span class="comment">-- 5给学生表添加数据</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;小龙女&#x27;</span>,<span class="number">18</span>,<span class="string">&#x27;女&#x27;</span>),(<span class="number">2</span>,<span class="string">&#x27;阿紫&#x27;</span>,<span class="number">19</span>,<span class="string">&#x27;女&#x27;</span>),(<span class="number">3</span>,<span class="string">&#x27;周芷若&#x27;</span>,<span class="number">20</span>,<span class="string">&#x27;男&#x27;</span>);</span><br><span class="line"><span class="comment">-- 6给课程表添加数据</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> course <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;语文&#x27;</span>),(<span class="number">2</span>,<span class="string">&#x27;数学&#x27;</span>),(<span class="number">3</span>,<span class="string">&#x27;英语&#x27;</span>);</span><br><span class="line"><span class="comment">-- 7给中间表添加数据</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> score <span class="keyword">values</span>(<span class="number">1</span>,<span class="number">1</span>,<span class="number">78</span>),(<span class="number">1</span>,<span class="number">2</span>,<span class="number">75</span>),(<span class="number">2</span>,<span class="number">1</span>,<span class="number">88</span>),(<span class="number">2</span>,<span class="number">3</span>,<span class="number">90</span>),(<span class="number">3</span>,<span class="number">2</span>,<span class="number">80</span>),(<span class="number">3</span>,<span class="number">3</span>,<span class="number">65</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>注意：修改和删除时，中间从表可以随便删除和修改，但是两边的主表受从表依赖的数据不能删除或者修改。</p></blockquote><h3 id="多表联合查询"><a href="#多表联合查询" class="headerlink" title="多表联合查询"></a>多表联合查询</h3><h4 id="介绍-7"><a href="#介绍-7" class="headerlink" title="介绍-7"></a>介绍</h4><blockquote><p>多表查询就是同时查询两个或两个以上的表，因为有的时候用户在查看数据的时候,需要显示的数据来自多张表。</p></blockquote><p>多表查询有以下分类：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">交叉连接查询 [产生笛卡尔积，了解]</span><br><span class="line">      语法：<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> A,B;  </span><br><span class="line"></span><br><span class="line">内连接查询(使用的关键字 <span class="keyword">inner</span> <span class="keyword">join</span>  <span class="comment">-- inner可以省略)</span></span><br><span class="line">    隐式内连接（SQL92标准）：<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> A,B <span class="keyword">where</span> 条件;</span><br><span class="line">    显示内连接（SQL99标准）：<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> A <span class="keyword">inner</span> <span class="keyword">join</span> B <span class="keyword">on</span> 条件;</span><br><span class="line"></span><br><span class="line">外连接查询(使用的关键字 <span class="keyword">outer</span> <span class="keyword">join</span> <span class="comment">-- outer可以省略)</span></span><br><span class="line">        左外连接：<span class="keyword">left</span> <span class="keyword">outer</span> <span class="keyword">join</span></span><br><span class="line">            <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> A <span class="keyword">left</span> <span class="keyword">outer</span> <span class="keyword">join</span> B <span class="keyword">on</span> 条件;</span><br><span class="line">        右外连接：<span class="keyword">right</span> <span class="keyword">outer</span> <span class="keyword">join</span></span><br><span class="line">            <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> A <span class="keyword">right</span> <span class="keyword">outer</span> <span class="keyword">join</span> B <span class="keyword">on</span> 条件;</span><br><span class="line">        满外连接: <span class="keyword">full</span> <span class="keyword">outer</span> <span class="keyword">join</span></span><br><span class="line">             <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> A <span class="keyword">full</span> <span class="keyword">outer</span> <span class="keyword">join</span> B <span class="keyword">on</span> 条件;</span><br><span class="line">子查询</span><br><span class="line">       <span class="keyword">select</span>的嵌套</span><br><span class="line">表自关联：</span><br><span class="line">       将一张表当成多张表来用</span><br><span class="line"></span><br></pre></td></tr></table></figure><p class='item-img' data-src='/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/1723972088858.png'><img src="/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/1723972088858.png" alt="多表联合查询"></p><h4 id="准备查询数据"><a href="#准备查询数据" class="headerlink" title="准备查询数据"></a>准备查询数据</h4><blockquote><p>接下来准备多表查询需要数据，注意，<strong>外键约束对多表查询并无影响</strong>。</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">use mydb3;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 创建部门表</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> if <span class="keyword">not</span> <span class="keyword">exists</span> dept3(</span><br><span class="line">  deptno <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">primary</span> key ,  <span class="comment">-- 部门号</span></span><br><span class="line">  name <span class="type">varchar</span>(<span class="number">20</span>) <span class="comment">-- 部门名字</span></span><br><span class="line">);</span><br><span class="line"> </span><br><span class="line"><span class="comment">-- 创建员工表</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> if <span class="keyword">not</span> <span class="keyword">exists</span> emp3(</span><br><span class="line">  eid <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">primary</span> key , <span class="comment">-- 员工编号</span></span><br><span class="line">  ename <span class="type">varchar</span>(<span class="number">20</span>), <span class="comment">-- 员工名字</span></span><br><span class="line">  age <span class="type">int</span>,  <span class="comment">-- 员工年龄</span></span><br><span class="line">  dept_id <span class="type">varchar</span>(<span class="number">20</span>)  <span class="comment">-- 员工所属部门</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 给dept3表添加数据</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> dept3 <span class="keyword">values</span>(<span class="string">&#x27;1001&#x27;</span>,<span class="string">&#x27;研发部&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> dept3 <span class="keyword">values</span>(<span class="string">&#x27;1002&#x27;</span>,<span class="string">&#x27;销售部&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> dept3 <span class="keyword">values</span>(<span class="string">&#x27;1003&#x27;</span>,<span class="string">&#x27;财务部&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> dept3 <span class="keyword">values</span>(<span class="string">&#x27;1004&#x27;</span>,<span class="string">&#x27;人事部&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 给emp表添加数据</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp3 <span class="keyword">values</span>(<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;乔峰&#x27;</span>,<span class="number">20</span>, <span class="string">&#x27;1001&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp3 <span class="keyword">values</span>(<span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;段誉&#x27;</span>,<span class="number">21</span>, <span class="string">&#x27;1001&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp3 <span class="keyword">values</span>(<span class="string">&#x27;3&#x27;</span>,<span class="string">&#x27;虚竹&#x27;</span>,<span class="number">23</span>, <span class="string">&#x27;1001&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp3 <span class="keyword">values</span>(<span class="string">&#x27;4&#x27;</span>,<span class="string">&#x27;阿紫&#x27;</span>,<span class="number">18</span>, <span class="string">&#x27;1001&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp3 <span class="keyword">values</span>(<span class="string">&#x27;5&#x27;</span>,<span class="string">&#x27;扫地僧&#x27;</span>,<span class="number">85</span>, <span class="string">&#x27;1002&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp3 <span class="keyword">values</span>(<span class="string">&#x27;6&#x27;</span>,<span class="string">&#x27;李秋水&#x27;</span>,<span class="number">33</span>, <span class="string">&#x27;1002&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp3 <span class="keyword">values</span>(<span class="string">&#x27;7&#x27;</span>,<span class="string">&#x27;鸠摩智&#x27;</span>,<span class="number">50</span>, <span class="string">&#x27;1002&#x27;</span>); </span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp3 <span class="keyword">values</span>(<span class="string">&#x27;8&#x27;</span>,<span class="string">&#x27;天山童姥&#x27;</span>,<span class="number">60</span>, <span class="string">&#x27;1003&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp3 <span class="keyword">values</span>(<span class="string">&#x27;9&#x27;</span>,<span class="string">&#x27;慕容博&#x27;</span>,<span class="number">58</span>, <span class="string">&#x27;1003&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp3 <span class="keyword">values</span>(<span class="string">&#x27;10&#x27;</span>,<span class="string">&#x27;丁春秋&#x27;</span>,<span class="number">71</span>, <span class="string">&#x27;1005&#x27;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="多表联合查询—交叉连接查询"><a href="#多表联合查询—交叉连接查询" class="headerlink" title="多表联合查询—交叉连接查询"></a>多表联合查询—交叉连接查询</h3><blockquote><ul><li>交叉连接查询返回被连接的两个表所有数据行的笛卡尔积</li><li>笛卡尔积可以理解为一张表的每一行去和另外一张表的任意一行进行匹配</li><li>假如A表有m行数据，B表有n行数据，则返回m*n行数据</li><li>笛卡尔积会产生很多冗余的数据，后期的其他查询可以在该集合的基础上进行条件筛选</li></ul></blockquote><h4 id="格式："><a href="#格式：" class="headerlink" title="格式："></a>格式：</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> 表<span class="number">1</span>,表<span class="number">2</span>,表<span class="number">3</span>….;</span><br></pre></td></tr></table></figure><h4 id="实现："><a href="#实现：" class="headerlink" title="实现："></a>实现：</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 交叉连接查询</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> dept3,emp3;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="结果："><a href="#结果：" class="headerlink" title="结果："></a>结果：</h4><p class='item-img' data-src='/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/1724030412027.png'><img src="/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/1724030412027.png" alt="交叉连接查询"></p><h3 id="多表联合查询—内连接查询"><a href="#多表联合查询—内连接查询" class="headerlink" title="多表联合查询—内连接查询"></a>多表联合查询—内连接查询</h3><p>内连接查询求多张表的交集</p><h4 id="格式-5"><a href="#格式-5" class="headerlink" title="格式-5"></a>格式</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">隐式内连接（SQL92标准）：<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> A,B <span class="keyword">where</span> 条件; </span><br><span class="line">显示内连接（SQL99标准）：<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> A <span class="keyword">inner</span> <span class="keyword">join</span> B <span class="keyword">on</span> 条件;</span><br></pre></td></tr></table></figure><h4 id="操作-10"><a href="#操作-10" class="headerlink" title="操作-10"></a>操作</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询每个部门的所属员工</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> dept3,emp3 <span class="keyword">where</span> dept3.deptno <span class="operator">=</span> emp3.dept_id;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> dept3 <span class="keyword">inner</span> <span class="keyword">join</span> emp3 <span class="keyword">on</span> dept3.deptno <span class="operator">=</span> emp3.dept_id;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询研发部和销售部的所属员工</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> dept3,emp3 <span class="keyword">where</span> dept3.deptno <span class="operator">=</span> emp3.dept_id <span class="keyword">and</span> name <span class="keyword">in</span>( <span class="string">&#x27;研发部&#x27;</span>,<span class="string">&#x27;销售部&#x27;</span>);</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> dept3 <span class="keyword">join</span> emp3 <span class="keyword">on</span> dept3.deptno <span class="operator">=</span> emp3.dept_id <span class="keyword">and</span> name <span class="keyword">in</span>( <span class="string">&#x27;研发部&#x27;</span>,<span class="string">&#x27;销售部&#x27;</span>);</span><br><span class="line"> </span><br><span class="line"><span class="comment">-- 查询每个部门的员工数,并升序排序</span></span><br><span class="line"><span class="keyword">select</span> deptno,<span class="built_in">count</span>(<span class="number">1</span>) <span class="keyword">as</span> total_cnt <span class="keyword">from</span> dept3,emp3 <span class="keyword">where</span> dept3.deptno <span class="operator">=</span> emp3.dept_id <span class="keyword">group</span> <span class="keyword">by</span> deptno <span class="keyword">order</span> <span class="keyword">by</span> total_cnt;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">select</span> deptno,<span class="built_in">count</span>(<span class="number">1</span>) <span class="keyword">as</span> total_cnt <span class="keyword">from</span> dept3 <span class="keyword">join</span> emp3 <span class="keyword">on</span> dept3.deptno <span class="operator">=</span> emp3.dept_id <span class="keyword">group</span> <span class="keyword">by</span> deptno <span class="keyword">order</span> <span class="keyword">by</span> total_cnt;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询人数大于等于3的部门，并按照人数降序排序</span></span><br><span class="line"><span class="keyword">select</span> deptno,<span class="built_in">count</span>(<span class="number">1</span>) <span class="keyword">as</span> total_cnt <span class="keyword">from</span> dept3,emp3 <span class="keyword">where</span> dept3.deptno <span class="operator">=</span> emp3.dept_id <span class="keyword">group</span> <span class="keyword">by</span> deptno <span class="keyword">having</span> total_cnt <span class="operator">&gt;=</span> <span class="number">3</span> <span class="keyword">order</span> <span class="keyword">by</span> total_cnt <span class="keyword">desc</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">select</span> deptno,<span class="built_in">count</span>(<span class="number">1</span>) <span class="keyword">as</span> total_cnt <span class="keyword">from</span> dept3 <span class="keyword">join</span> emp3 <span class="keyword">on</span> dept3.deptno <span class="operator">=</span> emp3.dept_id <span class="keyword">group</span> <span class="keyword">by</span> deptno <span class="keyword">having</span> total_cnt <span class="operator">&gt;=</span> <span class="number">3</span> <span class="keyword">order</span> <span class="keyword">by</span> total_cnt <span class="keyword">desc</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="外连接查询"><a href="#外连接查询" class="headerlink" title="外连接查询"></a>外连接查询</h3><blockquote><ol><li>外连接分为左外连接（left outer join）、右外连接(right outer join)，满外连接(full outer join)。</li><li>注意：oracle里面有full join,可是在mysql对full join支持的不好。我们可以使用union来达到目的。</li></ol></blockquote><h4 id="格式-6"><a href="#格式-6" class="headerlink" title="格式-6"></a>格式</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">左外连接：<span class="keyword">left</span> <span class="keyword">outer</span> <span class="keyword">join</span></span><br><span class="line">            <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> A <span class="keyword">left</span> <span class="keyword">outer</span> <span class="keyword">join</span> B <span class="keyword">on</span> 条件;</span><br><span class="line">  右外连接：<span class="keyword">right</span> <span class="keyword">outer</span> <span class="keyword">join</span></span><br><span class="line">            <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> A <span class="keyword">right</span> <span class="keyword">outer</span> <span class="keyword">join</span> B <span class="keyword">on</span> 条件;</span><br><span class="line">  满外连接: <span class="keyword">full</span> <span class="keyword">outer</span> <span class="keyword">join</span></span><br><span class="line">             <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> A <span class="keyword">full</span> <span class="keyword">outer</span> <span class="keyword">join</span> B <span class="keyword">on</span> 条件;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="操作-11"><a href="#操作-11" class="headerlink" title="操作-11"></a>操作</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 外连接查询</span></span><br><span class="line"><span class="comment">-- 查询哪些部门有员工，哪些部门没有员工</span></span><br><span class="line">use mydb3;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> dept3 <span class="keyword">left</span> <span class="keyword">outer</span> <span class="keyword">join</span> emp3 <span class="keyword">on</span> dept3.deptno <span class="operator">=</span> emp3.dept_id;</span><br><span class="line"> </span><br><span class="line"><span class="comment">-- 查询哪些员工有对应的部门，哪些没有</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> dept3 <span class="keyword">right</span> <span class="keyword">outer</span> <span class="keyword">join</span> emp3 <span class="keyword">on</span> dept3.deptno <span class="operator">=</span> emp3.dept_id;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment">-- 使用union关键字实现左外连接和右外连接的并集（union后使用all代表不去重，不用代表去重）</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> dept3 <span class="keyword">left</span> <span class="keyword">outer</span> <span class="keyword">join</span> emp3 <span class="keyword">on</span> dept3.deptno <span class="operator">=</span> emp3.dept_id</span><br><span class="line"><span class="keyword">union</span> </span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> dept3 <span class="keyword">right</span> <span class="keyword">outer</span> <span class="keyword">join</span> emp3 <span class="keyword">on</span> dept3.deptno <span class="operator">=</span> emp3.dept_id;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h3><h4 id="介绍-8"><a href="#介绍-8" class="headerlink" title="介绍-8"></a>介绍</h4><blockquote><p>子查询就是指的在一个完整的查询语句之中，嵌套若干个不同功能的小查询，从而一起完成复杂查询的一种编写形式，通俗一点就是包含select嵌套的查询。</p></blockquote><h4 id="特点-3"><a href="#特点-3" class="headerlink" title="特点-3"></a>特点</h4><blockquote><p>子查询可以返回的数据类型一共分为四种：</p><ol><li>单行单列：返回的是一个具体列的内容，可以理解为一个单值数据；</li><li>单行多列：返回一行数据中多个列的内容；</li><li>多行单列：返回多行记录之中同一列的内容，相当于给出了一个操作范围；</li><li>多行多列：查询返回的结果是一张临时表</li></ol></blockquote><h4 id="操作-12"><a href="#操作-12" class="headerlink" title="操作-12"></a>操作</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询年龄最大的员工信息，显示信息包含员工号、员工名字，员工年龄</span></span><br><span class="line"><span class="comment">-- 1：查询最大年龄：</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">max</span>(age) <span class="keyword">from</span> emp3;</span><br><span class="line"><span class="comment">-- 2：让每一个员工的年龄和最大年龄进行比较，相等则满足条件(嵌套查询也称子查询)</span></span><br><span class="line"><span class="keyword">select</span> eid,ename,age <span class="keyword">from</span> emp3 <span class="keyword">where</span> age <span class="operator">=</span> (<span class="keyword">select</span> <span class="built_in">max</span>(age) <span class="keyword">from</span> emp3);  <span class="comment">-- 单行单列，可以作为一个值来用</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">-- 查询年研发部和销售部的员工信息，包含员工号、员工名字</span></span><br><span class="line"><span class="comment">-- 方式1-关联查询</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> dept3 a <span class="keyword">join</span> emp3 b <span class="keyword">on</span> a.deptno <span class="operator">=</span> b.dept_id <span class="keyword">and</span> (name <span class="operator">=</span> <span class="string">&#x27;研发部&#x27;</span> <span class="keyword">or</span> name <span class="operator">=</span> <span class="string">&#x27;销售部&#x27;</span>);</span><br><span class="line"><span class="comment">-- 方式2-子查询</span></span><br><span class="line"><span class="comment">-- 2.1 先查询研发部和销售部的部门号：deptno 1001 和 1002</span></span><br><span class="line"><span class="keyword">select</span> deptno <span class="keyword">from</span> dept3 <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">&#x27;研发部&#x27;</span> <span class="keyword">or</span> name <span class="operator">=</span> <span class="string">&#x27;销售部&#x27;</span>;</span><br><span class="line"><span class="comment">-- 2.2 查询哪个员工的部门号是1001 或者 1002</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp3 <span class="keyword">where</span> dept_id <span class="keyword">in</span> (<span class="keyword">select</span> deptno <span class="keyword">from</span> dept3 <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">&#x27;研发部&#x27;</span> <span class="keyword">or</span> name <span class="operator">=</span> <span class="string">&#x27;销售部&#x27;</span>);  <span class="comment">-- 多行单列，多个值</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">-- 查询研发部20岁以下的员工信息,包括员工号、员工名字，部门名字</span></span><br><span class="line"><span class="comment">-- 方式1-关联查询</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> dept3 a <span class="keyword">join</span> emp3 b <span class="keyword">on</span> a.deptno <span class="operator">=</span> b.dept_id <span class="keyword">and</span> (name <span class="operator">=</span> <span class="string">&#x27;研发部&#x27;</span> <span class="keyword">and</span> age <span class="operator">&lt;</span> <span class="number">20</span>);</span><br><span class="line"><span class="comment">-- 方式2-子查询</span></span><br><span class="line"><span class="comment">-- 2.1 在部门表中查询研发部信息</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> dept3 <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">&#x27;研发部&#x27;</span>;  <span class="comment">-- 单行多列</span></span><br><span class="line"><span class="comment">-- 2.2 在员工表中查询年龄小于20岁的员工信息</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp3 <span class="keyword">where</span> age <span class="operator">&lt;</span> <span class="number">20</span>;</span><br><span class="line"><span class="comment">-- 2.3 将以上两个查询的结果进行关联查询</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> (<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> dept3 <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">&#x27;研发部&#x27;</span>) t1 <span class="keyword">join</span> (<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp3 <span class="keyword">where</span> age <span class="operator">&lt;</span><span class="number">20</span>) t2 <span class="keyword">on</span> t1.deptno <span class="operator">=</span> t2.dept_id;  <span class="comment">-- 多行多列</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="子查询关键字"><a href="#子查询关键字" class="headerlink" title="子查询关键字"></a>子查询关键字</h3><h4 id="介绍-9"><a href="#介绍-9" class="headerlink" title="介绍-9"></a>介绍</h4><blockquote><p>在子查询中，有一些常用的逻辑关键字，这些关键字可以给我们提供更丰富的查询功能，主要关键字如下：</p><ol><li>ALL关键字</li><li>ANY关键字</li><li>SOME关键字</li><li>IN关键字</li><li>EXISTS关键字</li></ol></blockquote><h4 id="子查询关键字—ALL"><a href="#子查询关键字—ALL" class="headerlink" title="子查询关键字—ALL"></a>子查询关键字—ALL</h4><h5 id="格式-7"><a href="#格式-7" class="headerlink" title="格式-7"></a>格式</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> …<span class="keyword">from</span> …<span class="keyword">where</span> c <span class="operator">&gt;</span> <span class="keyword">all</span>(查询语句)</span><br><span class="line"><span class="comment">-- 等价于：</span></span><br><span class="line"><span class="keyword">select</span> ...<span class="keyword">from</span> ... <span class="keyword">where</span> c <span class="operator">&gt;</span> result1 <span class="keyword">and</span> c <span class="operator">&gt;</span> result2 <span class="keyword">and</span> c <span class="operator">&gt;</span> result3</span><br></pre></td></tr></table></figure><h5 id="特点-4"><a href="#特点-4" class="headerlink" title="特点-4"></a>特点</h5><blockquote><ul><li>ALL: 与子查询返回的所有值比较为true则返回true</li><li>ALL可以与=、&gt;、&gt;=、&lt;、&lt;=、&lt;&gt;结合是来使用，分别表示等于、大于、大于等于、小于、小于等于、不等于其中的其中的所有数据。</li><li>ALL表示指定列中的值必须要大于子查询集的每一个值，即必须要大于子查询集的最大值；如果是小于号即小于子查询集的最小值。同理可以推出其它的比较运算符的情况。</li></ul></blockquote><h5 id="操作-13"><a href="#操作-13" class="headerlink" title="操作-13"></a>操作</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1.查询年龄大于‘1003’部门所有年龄的员工信息</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp3 <span class="keyword">where</span> age <span class="operator">&gt;</span> <span class="keyword">all</span>(<span class="keyword">select</span> age <span class="keyword">from</span> emp3 <span class="keyword">where</span> dept_id <span class="operator">=</span> <span class="string">&#x27;1003&#x27;</span>);</span><br><span class="line"><span class="comment">-- 2.查询不属于任何一个部门的员工信息</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp3 <span class="keyword">where</span> dept_id <span class="operator">!=</span> <span class="keyword">all</span>(<span class="keyword">select</span> deptno <span class="keyword">from</span> dept3);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="子查询关键字-ANY和SOME"><a href="#子查询关键字-ANY和SOME" class="headerlink" title="子查询关键字-ANY和SOME"></a>子查询关键字-ANY和SOME</h4><h5 id="格式-8"><a href="#格式-8" class="headerlink" title="格式-8"></a>格式</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> …<span class="keyword">from</span> …<span class="keyword">where</span> c <span class="operator">&gt;</span> <span class="keyword">any</span>(查询语句)</span><br><span class="line"><span class="comment">--等价于：</span></span><br><span class="line"><span class="keyword">select</span> ...<span class="keyword">from</span> ... <span class="keyword">where</span> c <span class="operator">&gt;</span> result1 <span class="keyword">or</span> c <span class="operator">&gt;</span> result2 <span class="keyword">or</span> c <span class="operator">&gt;</span> result3</span><br></pre></td></tr></table></figure><h5 id="特点-5"><a href="#特点-5" class="headerlink" title="特点-5"></a>特点</h5><blockquote><ul><li>ANY:与子查询返回的任何值比较为true 则返回true</li><li>ANY可以与=、&gt;、&gt;=、&lt;、&lt;=、&lt;&gt;结合是来使用，分别表示等于、大于、大于等于、小于、小于等于、不等于其中的其中的任何一个数据。</li><li>表示制定列中的值要大于子查询中的任意一个值，即必须要大于子查询集中的最小值。同理可以推出其它的比较运算符的情况。</li><li>SOME和ANY的作用一样，SOME可以理解为ANY的别名</li></ul></blockquote><h5 id="操作-14"><a href="#操作-14" class="headerlink" title="操作-14"></a>操作</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询年龄大于‘1003’部门任意一个员工年龄的员工信息</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp3 <span class="keyword">where</span> age <span class="operator">&gt;</span> <span class="keyword">any</span>(<span class="keyword">select</span> age <span class="keyword">from</span> emp3 <span class="keyword">where</span> dept_id <span class="operator">=</span> <span class="string">&#x27;1003&#x27;</span>);  <span class="comment">-- 去掉自己后面加：and dept_id != &#x27;1003&#x27;  即可。</span></span><br><span class="line"><span class="comment">-- 使用some(和any用处一样)</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp3 <span class="keyword">where</span> age <span class="operator">&gt;</span> <span class="keyword">some</span>(<span class="keyword">select</span> age <span class="keyword">from</span> emp3 <span class="keyword">where</span> dept_id <span class="operator">=</span> <span class="string">&#x27;1003&#x27;</span>) <span class="keyword">and</span> dept_id <span class="operator">!=</span> <span class="string">&#x27;1003&#x27;</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="子查询关键字-IN"><a href="#子查询关键字-IN" class="headerlink" title="子查询关键字-IN"></a>子查询关键字-IN</h4><h5 id="格式-9"><a href="#格式-9" class="headerlink" title="格式-9"></a>格式</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> …<span class="keyword">from</span> …<span class="keyword">where</span> c <span class="keyword">in</span>(查询语句)</span><br><span class="line"><span class="comment">--等价于：</span></span><br><span class="line"><span class="keyword">select</span> ...<span class="keyword">from</span> ... <span class="keyword">where</span> c <span class="operator">=</span> result1 <span class="keyword">or</span> c <span class="operator">=</span> result2 <span class="keyword">or</span> c <span class="operator">=</span> result3</span><br></pre></td></tr></table></figure><h5 id="特点-6"><a href="#特点-6" class="headerlink" title="特点-6"></a>特点</h5><blockquote><ul><li>IN关键字，用于判断某个记录的值，是否在指定的集合中</li><li>在IN关键字前边加上not可以将条件反过来</li></ul></blockquote><h5 id="操作-15"><a href="#操作-15" class="headerlink" title="操作-15"></a>操作</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询研发部和销售部的员工信息，包含员工号、员工名字</span></span><br><span class="line"><span class="keyword">select</span> eid,ename <span class="keyword">from</span> emp3 <span class="keyword">where</span> dept_id <span class="keyword">in</span> (<span class="keyword">select</span> deptno <span class="keyword">from</span> dept3 <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">&#x27;研发部&#x27;</span> <span class="keyword">or</span> name <span class="operator">=</span> <span class="string">&#x27;销售部&#x27;</span>) ;</span><br></pre></td></tr></table></figure><h4 id="子查询关键字-EXISTS"><a href="#子查询关键字-EXISTS" class="headerlink" title="子查询关键字-EXISTS"></a>子查询关键字-EXISTS</h4><h5 id="格式-10"><a href="#格式-10" class="headerlink" title="格式-10"></a>格式</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> …<span class="keyword">from</span> …<span class="keyword">where</span> <span class="keyword">exists</span>(查询语句)</span><br></pre></td></tr></table></figure><h5 id="特点-7"><a href="#特点-7" class="headerlink" title="特点-7"></a>特点</h5><blockquote><ul><li>该子查询如果“有数据结果”(至少返回一行数据)， 则该EXISTS() 的结果为“true”，外层查询执行</li><li>该子查询如果“没有数据结果”（没有任何数据返回），则该EXISTS()的结果为“false”，外层查询不执行</li><li>EXISTS后面的子查询不返回任何实际数据，只返回真或假，当返回真时 where条件成立</li><li>注意，EXISTS关键字，比IN关键字的运算效率高，因此，在实际开发中，特别是大数据量时，推荐使用EXISTS关键字</li><li>有exists的时候是从外向内查询（在exists中判断），而其他的都是从内向外查询</li></ul></blockquote><h5 id="操作-16"><a href="#操作-16" class="headerlink" title="操作-16"></a>操作</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询公司是否有大于60岁的员工，有则输出</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp3 a <span class="keyword">where</span> <span class="keyword">exists</span>(<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp3 b <span class="keyword">where</span> a.age <span class="operator">&gt;</span> <span class="number">60</span>);</span><br><span class="line"><span class="comment">-- 也可以使用 in 替换 </span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp3 a <span class="keyword">where</span> eid <span class="keyword">in</span>(<span class="keyword">select</span> eid <span class="keyword">from</span> emp3 b <span class="keyword">where</span> a.age <span class="operator">&gt;</span> <span class="number">60</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询有所属部门的员工信息</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp3 a <span class="keyword">where</span> <span class="keyword">exists</span>(<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> dept3 b <span class="keyword">where</span> a.dept_id <span class="operator">=</span> b.deptno);</span><br><span class="line"><span class="comment">-- 也可以使用 in 替换 </span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp3 a <span class="keyword">where</span> dept_id <span class="keyword">in</span>(<span class="keyword">select</span> deptno <span class="keyword">from</span> dept3 b <span class="keyword">where</span> a.dept_id <span class="operator">=</span> b.deptno);</span><br></pre></td></tr></table></figure><h3 id="自关联查询"><a href="#自关联查询" class="headerlink" title="自关联查询"></a>自关联查询</h3><h4 id="概念-6"><a href="#概念-6" class="headerlink" title="概念-6"></a>概念</h4><blockquote><p>MySQL有时在信息查询时需要进行对表自身进行关联查询，即一张表自己和自己关联，一张表当成多张表来用。注意自关联时表必须给表起别名。</p></blockquote><h4 id="格式-11"><a href="#格式-11" class="headerlink" title="格式-11"></a>格式</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> 字段列表 <span class="keyword">from</span> 表<span class="number">1</span> a , 表<span class="number">1</span> b <span class="keyword">where</span> 条件;</span><br><span class="line">或者 </span><br><span class="line"><span class="keyword">select</span> 字段列表 <span class="keyword">from</span> 表<span class="number">1</span> a [<span class="keyword">left</span>] <span class="keyword">join</span> 表<span class="number">1</span> b <span class="keyword">on</span> 条件;</span><br></pre></td></tr></table></figure><h4 id="操作-17"><a href="#操作-17" class="headerlink" title="操作-17"></a>操作</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建表,并建立自关联约束</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_sanguo(</span><br><span class="line">    eid <span class="type">int</span> <span class="keyword">primary</span> key ,</span><br><span class="line">    ename <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">    manager_id <span class="type">int</span>,</span><br><span class="line"> <span class="keyword">foreign</span> key (manager_id) <span class="keyword">references</span> t_sanguo (eid)  <span class="comment">-- 添加自关联约束</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 添加数据 </span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_sanguo <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;刘协&#x27;</span>,<span class="keyword">NULL</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_sanguo <span class="keyword">values</span>(<span class="number">2</span>,<span class="string">&#x27;刘备&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_sanguo <span class="keyword">values</span>(<span class="number">3</span>,<span class="string">&#x27;关羽&#x27;</span>,<span class="number">2</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_sanguo <span class="keyword">values</span>(<span class="number">4</span>,<span class="string">&#x27;张飞&#x27;</span>,<span class="number">2</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_sanguo <span class="keyword">values</span>(<span class="number">5</span>,<span class="string">&#x27;曹操&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_sanguo <span class="keyword">values</span>(<span class="number">6</span>,<span class="string">&#x27;许褚&#x27;</span>,<span class="number">5</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_sanguo <span class="keyword">values</span>(<span class="number">7</span>,<span class="string">&#x27;典韦&#x27;</span>,<span class="number">5</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_sanguo <span class="keyword">values</span>(<span class="number">8</span>,<span class="string">&#x27;孙权&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_sanguo <span class="keyword">values</span>(<span class="number">9</span>,<span class="string">&#x27;周瑜&#x27;</span>,<span class="number">8</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_sanguo <span class="keyword">values</span>(<span class="number">10</span>,<span class="string">&#x27;鲁肃&#x27;</span>,<span class="number">8</span>);</span><br><span class="line"> </span><br><span class="line"><span class="comment">-- 进行关联查询</span></span><br><span class="line"><span class="comment">-- 1.查询每个三国人物及他的上级信息，如:  关羽  刘备 </span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> t_sanguo a, t_sanguo b <span class="keyword">where</span> a.manager_id <span class="operator">=</span> b.eid;</span><br><span class="line"><span class="comment">-- 也可以是（显示内连接查询）：</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> t_sanguo a <span class="keyword">join</span> t_sanguo b <span class="keyword">on</span> a.manager_id <span class="operator">=</span> b.eid;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2.查询所有人物及上级(左外连接➕自关联)</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> t_sanguo a <span class="keyword">left</span> <span class="keyword">join</span> t_sanguo b <span class="keyword">on</span> a.manager_id <span class="operator">=</span> b.eid;</span><br><span class="line"><span class="comment">-- 仅显示名字</span></span><br><span class="line"><span class="keyword">select</span> a.ename,b.ename <span class="keyword">from</span> t_sanguo a <span class="keyword">left</span> <span class="keyword">join</span> t_sanguo b <span class="keyword">on</span> a.manager_id <span class="operator">=</span> b.eid;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3.查询所以人物、上级，上上级 比如：张飞  刘备  刘协</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> t_sanguo a <span class="keyword">left</span> <span class="keyword">join</span> t_sanguo b <span class="keyword">on</span> a.manager_id <span class="operator">=</span> b.eid <span class="keyword">left</span> <span class="keyword">join</span> t_sanguo c <span class="keyword">on</span> b.manager_id <span class="operator">=</span> c.eid;</span><br><span class="line"><span class="comment">-- 仅显示名字</span></span><br><span class="line"><span class="keyword">select</span> a.ename,b.ename,c.ename <span class="keyword">from</span> t_sanguo a <span class="keyword">left</span> <span class="keyword">join</span> t_sanguo b <span class="keyword">on</span> a.manager_id <span class="operator">=</span> b.eid <span class="keyword">left</span> <span class="keyword">join</span> t_sanguo c <span class="keyword">on</span> b.manager_id <span class="operator">=</span> c.eid;</span><br></pre></td></tr></table></figure><h3 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建test1数据库</span></span><br><span class="line"><span class="keyword">create</span> database test1;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 选择使用test1数据库</span></span><br><span class="line">use test1;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 创建部门表</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> dept (</span><br><span class="line">deptno <span class="type">int</span> <span class="keyword">primary</span> key,   <span class="comment">-- 部门编号</span></span><br><span class="line">dname <span class="type">varchar</span>(<span class="number">14</span>),    <span class="comment">-- 部门名称</span></span><br><span class="line">loc <span class="type">varchar</span>(<span class="number">13</span>)   <span class="comment">-- 部门地址</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 插入数据（部门表）</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> dept <span class="keyword">values</span> (<span class="number">10</span>,<span class="string">&#x27;accounting&#x27;</span>,<span class="string">&#x27;new york&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> dept <span class="keyword">values</span> (<span class="number">20</span>,<span class="string">&#x27;research&#x27;</span>,<span class="string">&#x27;dallas&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> dept <span class="keyword">values</span> (<span class="number">30</span>,<span class="string">&#x27;sales&#x27;</span>,<span class="string">&#x27;chicago&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> dept <span class="keyword">values</span> (<span class="number">40</span>,<span class="string">&#x27;operations&#x27;</span>,<span class="string">&#x27;boston&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 创建员工表</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> emp (</span><br><span class="line">empno <span class="type">int</span> <span class="keyword">primary</span> key,  <span class="comment">-- 员工编号</span></span><br><span class="line">ename <span class="type">varchar</span>(<span class="number">10</span>),  <span class="comment">-- 员工姓名</span></span><br><span class="line">job <span class="type">varchar</span>(<span class="number">9</span>),  <span class="comment">-- 员工工作</span></span><br><span class="line">mgr <span class="type">int</span>,  <span class="comment">-- 员工直属领导编号</span></span><br><span class="line">hiredate <span class="type">date</span>,  <span class="comment">-- 入职时间</span></span><br><span class="line">sal <span class="keyword">double</span>,  <span class="comment">-- 工资</span></span><br><span class="line">comm <span class="keyword">double</span>,  <span class="comment">-- 奖金</span></span><br><span class="line">deptno <span class="type">int</span>  <span class="comment">-- 对应dept表的外键</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 添加 部门 和 员工 之间的主外键关系</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> emp <span class="keyword">add</span> <span class="keyword">constraint</span> <span class="keyword">foreign</span> key emp(deptno) <span class="keyword">references</span> dept(deptno);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 插入数据（员工表）</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp <span class="keyword">values</span>(<span class="number">7369</span>,<span class="string">&#x27;smith&#x27;</span>,<span class="string">&#x27;clerk&#x27;</span>,<span class="number">7902</span>,<span class="string">&#x27;1980-12-17&#x27;</span>,<span class="number">800</span>,<span class="keyword">null</span>,<span class="number">20</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp <span class="keyword">values</span>(<span class="number">7499</span>,<span class="string">&#x27;allen&#x27;</span>,<span class="string">&#x27;salesman&#x27;</span>,<span class="number">7698</span>,<span class="string">&#x27;1981-02-20&#x27;</span>,<span class="number">1600</span>,<span class="number">300</span>,<span class="number">30</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp <span class="keyword">values</span>(<span class="number">7521</span>,<span class="string">&#x27;ward&#x27;</span>,<span class="string">&#x27;salesman&#x27;</span>,<span class="number">7698</span>,<span class="string">&#x27;1981-02-22&#x27;</span>,<span class="number">1250</span>,<span class="number">500</span>,<span class="number">30</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp <span class="keyword">values</span>(<span class="number">7566</span>,<span class="string">&#x27;jones&#x27;</span>,<span class="string">&#x27;manager&#x27;</span>,<span class="number">7839</span>,<span class="string">&#x27;1981-04-02&#x27;</span>,<span class="number">2975</span>,<span class="keyword">null</span>,<span class="number">20</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp <span class="keyword">values</span>(<span class="number">7654</span>,<span class="string">&#x27;martin&#x27;</span>,<span class="string">&#x27;salesman&#x27;</span>,<span class="number">7698</span>,<span class="string">&#x27;1981-09-28&#x27;</span>,<span class="number">1250</span>,<span class="number">1400</span>,<span class="number">30</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp <span class="keyword">values</span>(<span class="number">7698</span>,<span class="string">&#x27;blake&#x27;</span>,<span class="string">&#x27;manager&#x27;</span>,<span class="number">7839</span>,<span class="string">&#x27;1981-05-01&#x27;</span>,<span class="number">2850</span>,<span class="keyword">null</span>,<span class="number">30</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp <span class="keyword">values</span>(<span class="number">7782</span>,<span class="string">&#x27;clark&#x27;</span>,<span class="string">&#x27;manager&#x27;</span>,<span class="number">7839</span>,<span class="string">&#x27;1981-06-09&#x27;</span>,<span class="number">2450</span>,<span class="keyword">null</span>,<span class="number">10</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp <span class="keyword">values</span>(<span class="number">7788</span>,<span class="string">&#x27;scott&#x27;</span>,<span class="string">&#x27;analyst&#x27;</span>,<span class="number">7566</span>,<span class="string">&#x27;1987-07-03&#x27;</span>,<span class="number">3000</span>,<span class="keyword">null</span>,<span class="number">20</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp <span class="keyword">values</span>(<span class="number">7839</span>,<span class="string">&#x27;king&#x27;</span>,<span class="string">&#x27;president&#x27;</span>,<span class="keyword">null</span>,<span class="string">&#x27;1981-11-17&#x27;</span>,<span class="number">5000</span>,<span class="keyword">null</span>,<span class="number">10</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp <span class="keyword">values</span>(<span class="number">7844</span>,<span class="string">&#x27;turner&#x27;</span>,<span class="string">&#x27;salesman&#x27;</span>,<span class="number">7698</span>,<span class="string">&#x27;1981-09-08&#x27;</span>,<span class="number">1500</span>,<span class="number">0</span>,<span class="number">30</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp <span class="keyword">values</span>(<span class="number">7876</span>,<span class="string">&#x27;adams&#x27;</span>,<span class="string">&#x27;clerk&#x27;</span>,<span class="number">7788</span>,<span class="string">&#x27;1987-07-13&#x27;</span>,<span class="number">1100</span>,<span class="keyword">null</span>,<span class="number">20</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp <span class="keyword">values</span>(<span class="number">7900</span>,<span class="string">&#x27;james&#x27;</span>,<span class="string">&#x27;clerk&#x27;</span>,<span class="number">7698</span>,<span class="string">&#x27;1981-12-03&#x27;</span>,<span class="number">950</span>,<span class="keyword">null</span>,<span class="number">30</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp <span class="keyword">values</span>(<span class="number">7902</span>,<span class="string">&#x27;ford&#x27;</span>,<span class="string">&#x27;analyst&#x27;</span>,<span class="number">7566</span>,<span class="string">&#x27;1981-12-03&#x27;</span>,<span class="number">3000</span>,<span class="keyword">null</span>,<span class="number">20</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp <span class="keyword">values</span>(<span class="number">7934</span>,<span class="string">&#x27;miller&#x27;</span>,<span class="string">&#x27;clerk&#x27;</span>,<span class="number">7782</span>,<span class="string">&#x27;1981-01-23&#x27;</span>,<span class="number">1300</span>,<span class="keyword">null</span>,<span class="number">10</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 创建工资等级表</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> salgrade (</span><br><span class="line">grade <span class="type">int</span>,  <span class="comment">-- 等级</span></span><br><span class="line">losal <span class="keyword">double</span>,  <span class="comment">-- 最低工资</span></span><br><span class="line">hisal <span class="keyword">double</span>  <span class="comment">-- 最高工资</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 插入数据（工资等级表）</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> salgrade <span class="keyword">values</span> (<span class="number">1</span>,<span class="number">700</span>,<span class="number">1200</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> salgrade <span class="keyword">values</span> (<span class="number">2</span>,<span class="number">1201</span>,<span class="number">1400</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> salgrade <span class="keyword">values</span> (<span class="number">3</span>,<span class="number">1401</span>,<span class="number">2000</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> salgrade <span class="keyword">values</span> (<span class="number">4</span>,<span class="number">2001</span>,<span class="number">3000</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> salgrade <span class="keyword">values</span> (<span class="number">5</span>,<span class="number">3001</span>,<span class="number">9999</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 练习：</span></span><br><span class="line"><span class="comment">-- 1、返回拥有员工的部门名、部门号。</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> d.dname,d.deptno <span class="keyword">from</span> dept d <span class="keyword">join</span> emp e <span class="keyword">on</span> d.deptno <span class="operator">=</span> e.deptno;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2、工资水平多于smith的员工信息。</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> sal <span class="operator">&gt;</span> <span class="keyword">all</span>(<span class="keyword">select</span> sal <span class="keyword">from</span> emp <span class="keyword">where</span> ename <span class="operator">=</span> <span class="string">&#x27;smith&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3、返回员工和所属经理的姓名。</span></span><br><span class="line"><span class="keyword">select</span> a.ename,b.ename <span class="keyword">from</span> emp a <span class="keyword">join</span> emp b <span class="keyword">on</span> a.mgr <span class="operator">=</span> b.empno;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 4、返回雇员的雇佣日期早于其经理雇佣日期的员工及其经理姓名。</span></span><br><span class="line"><span class="keyword">select</span> a.ename,a.hiredate,b.ename,b.hiredate <span class="keyword">from</span> emp a <span class="keyword">join</span> emp b <span class="keyword">on</span> a.mgr <span class="operator">=</span> b.empno <span class="keyword">and</span> a.hiredate <span class="operator">&lt;</span> b.hiredate;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 5、返回员工姓名及其所在的部门名称。</span></span><br><span class="line"><span class="keyword">select</span> a.ename,b.dname <span class="keyword">from</span> emp a <span class="keyword">join</span> dept b <span class="keyword">on</span> a.deptno <span class="operator">=</span> b.deptno;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 6、返回从事clerk工作的员工姓名和所在部门名称。</span></span><br><span class="line"><span class="keyword">select</span> a.ename,b.dname,a.job <span class="keyword">from</span> emp a <span class="keyword">join</span> dept b <span class="keyword">on</span> a.deptno <span class="operator">=</span> b.deptno <span class="keyword">and</span> job <span class="operator">=</span> <span class="string">&#x27;clerk&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 7、返回部门号及其本部门的最低工资。</span></span><br><span class="line"><span class="keyword">select</span> deptno,<span class="built_in">min</span>(sal) <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 8、返回销售部(sales)所有员工的姓名。</span></span><br><span class="line"><span class="keyword">select</span> a.ename <span class="keyword">from</span> emp a <span class="keyword">join</span> dept b <span class="keyword">on</span> a.deptno <span class="operator">=</span> b.deptno <span class="keyword">and</span> b.dname <span class="operator">=</span> <span class="string">&#x27;sales&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 9、返回工资水平多于平均工资的员工。</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> sal <span class="operator">&gt;</span> (<span class="keyword">select</span> <span class="built_in">avg</span>(sal) <span class="keyword">from</span> emp);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 10、返回与scott从事相同工作的员工。</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> job <span class="operator">=</span> (<span class="keyword">select</span> job <span class="keyword">from</span> emp <span class="keyword">where</span> ename <span class="operator">=</span> <span class="string">&#x27;scott&#x27;</span>) <span class="keyword">and</span> ename <span class="operator">!=</span> <span class="string">&#x27;scott&#x27;</span>;  <span class="comment">-- and 以后是为了去掉自己</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 11、返回与30部门员工工资水平相同的员工姓名与工资。</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> sal <span class="operator">&gt;</span> <span class="keyword">all</span>(<span class="keyword">select</span> sal <span class="keyword">from</span> emp <span class="keyword">where</span> deptno <span class="operator">=</span> <span class="number">30</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 12、返回员工工作及其从事此工作的最低工资。</span></span><br><span class="line"><span class="keyword">select</span> job,<span class="built_in">min</span>(sal) <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> job;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 13、计算出员工的年薪，并且以年薪排序。</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span>,(sal <span class="operator">*</span> <span class="number">12</span> <span class="operator">+</span> ifnull(comm,<span class="number">0</span>)) year_sal <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> year_sal <span class="keyword">desc</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 14、返回工资处于第四级别的员工的姓名。</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> sal <span class="keyword">between</span> (<span class="keyword">select</span> losal <span class="keyword">from</span> salgrade <span class="keyword">where</span> grade <span class="operator">=</span> <span class="number">4</span>) <span class="keyword">and</span> (<span class="keyword">select</span> hisal <span class="keyword">from</span> salgrade <span class="keyword">where</span> grade <span class="operator">=</span> <span class="number">4</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 15、返回工资为二等级的职员名字、部门所在地。（select 后面可以按照题目写： c.grade,b.ename,a.loc）</span></span><br><span class="line"><span class="comment">-- 显示内连接</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> dept a <span class="keyword">join</span> emp b <span class="keyword">on</span> a.deptno <span class="operator">=</span> b.deptno <span class="keyword">join</span> salgrade c <span class="keyword">on</span> c.grade <span class="operator">=</span> <span class="number">2</span> <span class="keyword">and</span> b.sal <span class="keyword">between</span> c.losal <span class="keyword">and</span> c.hisal;</span><br><span class="line"><span class="comment">-- 隐式内连接</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> dept a,emp b,salgrade c <span class="keyword">where</span> a.deptno <span class="operator">=</span> b.deptno <span class="keyword">and</span> c.grade <span class="operator">=</span> <span class="number">2</span> <span class="keyword">and</span> b.sal <span class="keyword">between</span> c.losal <span class="keyword">and</span> c.hisal;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="MySQL函数"><a href="#MySQL函数" class="headerlink" title="MySQL函数"></a>MySQL函数</h2><h3 id="基本介绍-2"><a href="#基本介绍-2" class="headerlink" title="基本介绍-2"></a>基本介绍</h3><h4 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h4><blockquote><p>在MySQL中，为了提高代码重用性和隐藏实现细节，MySQL提供了很多函数。函数可以理解为别人封装好的模板代码。</p></blockquote><h4 id="分类-2"><a href="#分类-2" class="headerlink" title="分类-2"></a>分类</h4><blockquote><p>在MySQL中，函数非常多，主要可以分为以下几类:</p><ul><li>聚合函数</li><li>数学函数</li><li>字符串函数</li><li>日期函数</li><li>控制流函数</li><li>窗口函数</li></ul></blockquote><h3 id="聚合函数"><a href="#聚合函数" class="headerlink" title="聚合函数"></a>聚合函数</h3><h4 id="概述-2"><a href="#概述-2" class="headerlink" title="概述-2"></a>概述</h4><ul><li>在MySQL中，聚合函数主要由：count, sum, min, max, avg, 这些聚合函数我们之前都学过，不再重复。这里我们学习另外一个函数: <code>group_concat(）</code>，该函数用户实现行的合并。</li><li><code>group_concat()</code>函数首先根据group by指定的列进行分组，并且用分隔符分隔，将同一个分组中的值连接起来，返回一个字符串结果。</li></ul><h4 id="格式-12"><a href="#格式-12" class="headerlink" title="格式-12"></a>格式</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">group_concat([<span class="keyword">distinct</span>] 字段名 [<span class="keyword">order</span> <span class="keyword">by</span> 排序字段 <span class="keyword">asc</span><span class="operator">/</span><span class="keyword">desc</span>] [separator <span class="string">&#x27;分隔符&#x27;</span>])</span><br></pre></td></tr></table></figure><blockquote><p>说明：</p><p>（1）使用distinct可以排除重复值；</p><p>（2）如果需要对结果中的值进行排序，可以使用order by子句；</p><p>（3）separator是一个字符串值，默认为逗号。</p></blockquote><h4 id="操作-18"><a href="#操作-18" class="headerlink" title="操作-18"></a>操作</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建并选择mydb4</span></span><br><span class="line"><span class="keyword">create</span> database mydb4;</span><br><span class="line">use mydb4;</span><br><span class="line"> </span><br><span class="line"> <span class="comment">-- 建表emp</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> emp(</span><br><span class="line">    emp_id <span class="type">int</span> <span class="keyword">primary</span> key auto_increment comment <span class="string">&#x27;编号&#x27;</span>,</span><br><span class="line">    emp_name <span class="type">char</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">default</span> <span class="string">&#x27;&#x27;</span> comment <span class="string">&#x27;姓名&#x27;</span>,</span><br><span class="line">    salary <span class="type">decimal</span>(<span class="number">10</span>,<span class="number">2</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">default</span> <span class="number">0</span> comment <span class="string">&#x27;工资&#x27;</span>,</span><br><span class="line">    department <span class="type">char</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">default</span> <span class="string">&#x27;&#x27;</span> comment <span class="string">&#x27;部门&#x27;</span></span><br><span class="line">);</span><br><span class="line"> </span><br><span class="line"> <span class="comment">-- 插入数据</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp(emp_name,salary,department) </span><br><span class="line"><span class="keyword">values</span>(<span class="string">&#x27;张晶晶&#x27;</span>,<span class="number">5000</span>,<span class="string">&#x27;财务部&#x27;</span>),(<span class="string">&#x27;王飞飞&#x27;</span>,<span class="number">5800</span>,<span class="string">&#x27;财务部&#x27;</span>),(<span class="string">&#x27;赵刚&#x27;</span>,<span class="number">6200</span>,<span class="string">&#x27;财务部&#x27;</span>),(<span class="string">&#x27;刘小贝&#x27;</span>,<span class="number">5700</span>,<span class="string">&#x27;人事部&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;王大鹏&#x27;</span>,<span class="number">6700</span>,<span class="string">&#x27;人事部&#x27;</span>),(<span class="string">&#x27;张小斐&#x27;</span>,<span class="number">5200</span>,<span class="string">&#x27;人事部&#x27;</span>),(<span class="string">&#x27;刘云云&#x27;</span>,<span class="number">7500</span>,<span class="string">&#x27;销售部&#x27;</span>),(<span class="string">&#x27;刘云鹏&#x27;</span>,<span class="number">7200</span>,<span class="string">&#x27;销售部&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;刘云鹏&#x27;</span>,<span class="number">7800</span>,<span class="string">&#x27;销售部&#x27;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 将所有员工的名字合并成一行 </span></span><br><span class="line"><span class="keyword">select</span> group_concat(emp_name) <span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure><p class='item-img' data-src='/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/1727935527927.png'><img src="/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/1727935527927.png" alt="将所有员工的名字合并成一行 "></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 指定分隔符合并 </span></span><br><span class="line"><span class="keyword">select</span> department,group_concat(emp_name separator <span class="string">&#x27;;&#x27;</span> ) <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> department; </span><br></pre></td></tr></table></figure><p class='item-img' data-src='/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/1727935546016.png'><img src="/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/1727935546016.png" alt="指定分隔符合并 "></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 指定排序方式和分隔符 </span></span><br><span class="line"><span class="keyword">select</span> department,group_concat(emp_name <span class="keyword">order</span> <span class="keyword">by</span> salary <span class="keyword">desc</span> separator <span class="string">&#x27;;&#x27;</span> ) <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> department;</span><br></pre></td></tr></table></figure><p class='item-img' data-src='/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/1727935597678.png'><img src="/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/1727935597678.png" alt="指定排序方式和分隔符"></p><h3 id="数学函数"><a href="#数学函数" class="headerlink" title="数学函数"></a>数学函数</h3><h4 id="函数名"><a href="#函数名" class="headerlink" title="函数名"></a>函数名</h4><p>由于表格行数有限，也为了方便查看，以下分为三张表来展示(加粗代表常用)：</p><table><thead><tr><th>函数名</th><th>描述</th><th>实例</th></tr></thead><tbody><tr><td>ABS(x)</td><td>返回 x 的绝对值</td><td>返回 -1 的绝对值：SELECT ABS(-1) – 返回1</td></tr><tr><td><strong>CEIL(x)</strong></td><td>返回大于或等于 x 的最小整数(向上取整)</td><td>SELECT CEIL(1.5) – 返回2</td></tr><tr><td><strong>FLOOR(x)</strong></td><td>返回小于或等于 x 的最大整数(向下取整)</td><td>小于或等于 1.5 的整数：SELECT FLOOR(1.5) – 返回1</td></tr><tr><td>GREATEST(expr1, expr2, expr3, …)</td><td>返回列表中的最大值</td><td>返回以下数字列表中的最大值：SELECT GREATEST(3, 12, 34, 8, 25); – 34返回以下字符串列表中的最大值：SELECT GREATEST(“Google”, “Runoob”, “Apple”);   – Runoob</td></tr><tr><td>LEAST(expr1, expr2, expr3, …)</td><td>返回列表中的最小值</td><td>返回以下数字列表中的最小值：SELECT LEAST(3, 12, 34, 8, 25); – 3返回以下字符串列表中的最小值：SELECT LEAST(“Google”, “Runoob”, “Apple”);   – Apple</td></tr></tbody></table><table><thead><tr><th>函数名</th><th>描述</th><th>实例</th></tr></thead><tbody><tr><td>MAX(expression)</td><td>返回字段 expression 中的最大值</td><td>返回数据表 Products 中字段 Price 的最大值：SELECT MAX(Price) AS LargestPrice FROM Products;</td></tr><tr><td>MIN(expression)</td><td>返回字段 expression 中的最小值</td><td>返回数据表 Products 中字段 Price 的最小值：SELECT MIN(Price) AS MinPrice FROM Products;</td></tr><tr><td><strong>MOD(x,y)</strong></td><td>返回 x 除以 y 以后的余数</td><td>5 除于 2 的余数：SELECT MOD(5,2) – 1</td></tr><tr><td>PI()</td><td>返回圆周率(3.141593）</td><td>SELECT PI() --3.141593</td></tr><tr><td>POW(x,y)</td><td>返回 x 的 y 次方</td><td>2 的 3 次方：SELECT POW(2,3) – 8</td></tr></tbody></table><table><thead><tr><th>函数名</th><th>描述</th><th>实例</th></tr></thead><tbody><tr><td><strong>RAND()</strong></td><td>返回 0 到 1 的随机数</td><td>SELECT RAND() --0.93099315644334</td></tr><tr><td>ROUND(x)</td><td>返回离 x 最近的整数（遵循四舍五入）</td><td>SELECT ROUND(1.23456) --1</td></tr><tr><td><strong>ROUND(x,y)</strong></td><td>返回指定位数的小数（遵循四舍五入）</td><td>SELECT ROUND(1.23456,3) –1.235</td></tr><tr><td>TRUNCATE(x,y)</td><td>返回数值 x 保留到小数点后 y 位的值（与 ROUND 最大的区别是不会进行四舍五入）</td><td>SELECT TRUNCATE(1.23456,3) – 1.234</td></tr></tbody></table><h4 id="操作-19"><a href="#操作-19" class="headerlink" title="操作-19"></a>操作</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 案例：通过数据库的函数，生成一个六位数的随机验证码。</span></span><br><span class="line"><span class="keyword">select</span> lpad(round(rand()<span class="operator">*</span><span class="number">1000000</span>,<span class="number">0</span>),<span class="number">6</span>,<span class="string">&#x27;0&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 四舍五入平均价格，保留两位小数。</span></span><br><span class="line">use mydb2;</span><br><span class="line"><span class="keyword">select</span> category_id,round(<span class="built_in">avg</span>(price),<span class="number">2</span>) <span class="keyword">from</span> product <span class="keyword">group</span> <span class="keyword">by</span> category_id;</span><br></pre></td></tr></table></figure><h3 id="字符串函数"><a href="#字符串函数" class="headerlink" title="字符串函数"></a>字符串函数</h3><p>字符串等的位置：从1开始；索引：从0开始。两者都是描述位置的，但是计数起点不同。</p><h4 id="函数名-2"><a href="#函数名-2" class="headerlink" title="函数名-2"></a>函数名</h4><table><thead><tr><th>函数</th><th>描述</th><th>实例</th></tr></thead><tbody><tr><td>CHAR_LENGTH(s)</td><td>返回字符串 s 的字符数</td><td>返回字符串 RUNOOB 的字符数SELECT CHAR_LENGTH(“RUNOOB”) AS LengthOfString;</td></tr><tr><td>LENGTH(s)</td><td>返回字符串 s 的字节数</td><td>SELECT LENGTH(“明天”) AS LengthOfString;   – 6（utf-8 一个汉字为3个字节）</td></tr><tr><td>CHARACTER_LENGTH(s)</td><td>返回字符串 s 的字符数</td><td>返回字符串 RUNOOB 的字符数SELECT CHARACTER_LENGTH(“RUNOOB”) AS LengthOfString;</td></tr><tr><td>CONCAT(s1,s2…sn)</td><td>字符串 s1,s2 等多个字符串合并为一个字符串</td><td>合并多个字符串SELECT CONCAT(&quot;SQL &quot;, &quot;Runoob &quot;, &quot;Gooogle &quot;, “Facebook”) AS ConcatenatedString;</td></tr><tr><td><strong>CONCAT_WS(x, s1,s2…sn)</strong></td><td>同 CONCAT(s1,s2,…) 函数，但是每个字符串之间要加上 x，x 可以是分隔符</td><td>合并多个字符串，并添加分隔符：SELECT CONCAT_WS(“-”, “SQL”, “Tutorial”, “is”, “fun!”)AS ConcatenatedString;</td></tr><tr><td>FIELD(s,s1,s2…)</td><td>返回第一个字符串 s 在字符串列表(s1,s2…)中的位置</td><td>返回字符串 c 在列表值中的位置：SELECT FIELD(“c”, “a”, “b”, “c”, “d”, “e”,“c”);  后面重复的’c’就不会输出位置，只能输出第一个查到的‘c’</td></tr></tbody></table><table><thead><tr><th>函数</th><th>描述</th><th>实例</th></tr></thead><tbody><tr><td>LTRIM(s)</td><td>去掉字符串 s 开始处的空格</td><td>去掉字符串 RUNOOB开始处的空格：SELECT LTRIM(&quot;    RUNOOB&quot;) AS LeftTrimmedString;-- RUNOOB</td></tr><tr><td>RTRIM(s)</td><td>去掉字符串 s 结尾处的空格</td><td>去掉字符串 RUNOOB结尾处的空格：SELECT RTRIM(&quot;      RUNOOB    &quot;) AS LeftTrimmedString;-- RUNOOB</td></tr><tr><td><strong>MID(s,n,len)</strong></td><td>从字符串 s 的 n 位置截取长度为 len 的子字符串，同 SUBSTRING(s,n,len)</td><td>从字符串 RUNOOB 中的第 2 个位置截取 3个 字符：SELECT MID(“RUNOOB”, 2, 3) AS ExtractString; – UNO</td></tr><tr><td>POSITION(s1 IN s)</td><td>从字符串 s 中获取 s1 的开始位置</td><td>返回字符串 abc 中 b 的位置：SELECT POSITION(‘b’ in ‘abc’) – 2</td></tr><tr><td>REPLACE(s,s1,s2)</td><td>将字符串 s2 替代字符串 s 中的字符串 s1</td><td>将字符串 abc 中的字符 a 替换为字符 x：SELECT REPLACE(‘abca’,‘a’,‘x’) --xbcx</td></tr><tr><td>REVERSE(s)</td><td>将字符串s的顺序反过来</td><td>将字符串 abc 的顺序反过来：SELECT REVERSE(‘abc’) – cba</td></tr></tbody></table><table><thead><tr><th>函数</th><th>描述</th><th>实例</th></tr></thead><tbody><tr><td>LEFT(s,n)</td><td>返回字符串 s 的前 n 个字符</td><td>返回字符串 runoob 的前两个字符：SELECT left(‘runoob’,2) – ru</td></tr><tr><td>RIGHT(s,n)</td><td>返回字符串 s 的后 n 个字符</td><td>返回字符串 runoob 的后两个字符：SELECT RIGHT(‘runoob’,2) – ob</td></tr><tr><td>STRCMP(s1,s2)</td><td>比较字符串 s1 和 s2，如果 s1 与 s2 相等返回 0 ，如果 s1&gt;s2 返回 1，如果 s1&lt;s2 返回 -1</td><td>比较字符串：SELECT STRCMP(“runoob”, “runoob”);  – 0</td></tr><tr><td>SUBSTR(s, start, length)</td><td>从字符串 s 的 start 位置截取长度为 length 的子字符串</td><td>从字符串 RUNOOB 中的第 2 个位置截取 3个 字符：SELECT SUBSTR(“RUNOOB”, 2, 3) AS ExtractString; – UNO</td></tr><tr><td><strong>SUBSTRING(s, start, length)</strong></td><td>从字符串 s 的 start 位置截取长度为 length 的子字符串</td><td>从字符串 RUNOOB 中的第 2 个位置截取 3个 字符：SELECT SUBSTRING(“RUNOOB”, 2, 3) AS ExtractString; – UNO</td></tr></tbody></table><table><thead><tr><th>函数</th><th>描述</th><th>实例</th></tr></thead><tbody><tr><td><strong>TRIM(s)</strong></td><td>去掉字符串 s 开始和结尾处的空格</td><td>去掉字符串 RUNOOB 的首尾空格：SELECT TRIM(’    RUNOOB    ') AS TrimmedString;</td></tr><tr><td>UCASE(s)</td><td>将字符串转换为大写</td><td>将字符串 runoob 转换为大写：SELECT UCASE(“runoob”); – RUNOOB</td></tr><tr><td><strong>UPPER(s)</strong></td><td>将字符串转换为大写</td><td>将字符串 runoob 转换为大写：SELECT UPPER(“runoob”); – RUNOOB</td></tr><tr><td>LCASE(s)</td><td>将字符串 s 的所有字母变成小写字母</td><td>字符串 RUNOOB 转换为小写：SELECT LCASE(‘RUNOOB’) – runoob</td></tr><tr><td><strong>LOWER(s)</strong></td><td>将字符串 s 的所有字母变成小写字母</td><td>字符串 RUNOOB 转换为小写：SELECT LOWER(‘RUNOOB’) – runoob</td></tr><tr><td><strong>LPAD(str,n,pad)</strong></td><td>左填充，用字符串pad对str的左边进行填充，达到n个字符串长度</td><td>左填充：select lpad(‘01’,5,‘-’);</td></tr><tr><td><strong>RPAD(str,n,pad)</strong></td><td>右填充，用字符串pad对str的右边进行填充，达到n个字符串长度</td><td>右填充：select rpad(‘01’,5,‘-’);</td></tr></tbody></table><h4 id="操作-20"><a href="#操作-20" class="headerlink" title="操作-20"></a>操作</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 案例：由于业务需求变更，企业员工的工号，统一为5位数，目前不足5位数的全部在前面补0，比如：1号员工的工号应该为00001</span></span><br><span class="line"><span class="keyword">update</span> emp <span class="keyword">set</span> workno <span class="operator">=</span> lpad(<span class="string">&#x27;1&#x27;</span>,<span class="number">5</span>,<span class="string">&#x27;0&#x27;</span>);</span><br></pre></td></tr></table></figure><h3 id="日期函数"><a href="#日期函数" class="headerlink" title="日期函数"></a>日期函数</h3><h4 id="函数名-3"><a href="#函数名-3" class="headerlink" title="函数名-3"></a>函数名</h4><table><thead><tr><th>函数名</th><th>描述</th><th>实例</th></tr></thead><tbody><tr><td>UNIX_TIMESTAMP()</td><td>返回从1970-01-01 00:00:00到当前毫秒值(时间戳)</td><td>select UNIX_TIMESTAMP() -&gt; 1632729059</td></tr><tr><td>UNIX_TIMESTAMP(DATE_STRING)</td><td>将制定日期转为毫秒值时间戳</td><td>SELECT UNIX_TIMESTAMP(‘2011-12-07 13:01:03’);</td></tr><tr><td>FROM_UNIXTIME(BIGINT UNIXTIME[, STRING FORMAT])</td><td>将毫秒值时间戳转为指定格式日期</td><td>SELECT FROM_UNIXTIME(1598079966,‘%Y-%m-%d %H:%i:%s’); (1598079966,‘%Y-%m-%d %H:%i:%s’); -&gt; 2020-08-22 15-06-06</td></tr><tr><td><strong>CURDATE()</strong></td><td>返回当前日期</td><td>SELECT CURDATE();-&gt; 2018-09-19</td></tr><tr><td>CURRENT_DATE()</td><td>返回当前日期</td><td>SELECT CURRENT_DATE();-&gt; 2018-09-19</td></tr></tbody></table><table><thead><tr><th>函数名</th><th>描述</th><th>实例</th></tr></thead><tbody><tr><td>CURRENT_TIME</td><td>返回当前时间</td><td>SELECT CURRENT_TIME();-&gt; 19:59:02</td></tr><tr><td><strong>CURTIME()</strong></td><td>返回当前时间</td><td>SELECT CURTIME();-&gt; 19:59:02</td></tr><tr><td>CURRENT_TIMESTAMP()</td><td>返回当前日期和时间</td><td>SELECT CURRENT_TIMESTAMP()-&gt; 2018-09-19 20:57:43</td></tr><tr><td>DATE()</td><td>从日期或日期时间表达式中提取日期值</td><td>SELECT DATE(“2017-06-15”);    -&gt; 2017-06-15</td></tr><tr><td><strong>DATEDIFF(d1,d2)</strong></td><td>计算日期 d1-&gt;d2 之间相隔的天数</td><td>SELECT DATEDIFF(‘2001-01-01’,‘2001-02-02’)-&gt; -32</td></tr></tbody></table><table><thead><tr><th>函数名</th><th>描述</th><th>实例</th></tr></thead><tbody><tr><td><strong>TIMEDIFF(time1, time2)</strong></td><td>计算时间差值</td><td>SELECT TIMEDIFF(“13:10:11”, “13:10:10”);-&gt; 00:00:01</td></tr><tr><td>DATE_FORMAT(d,f)</td><td>按表达式 f的要求显示日期 d</td><td>SELECT DATE_FORMAT(‘2011-11-11 11:11:11’,‘%Y-%m-%d %r’)-&gt; 2011-11-11 11:11:11 AM</td></tr><tr><td>STR_TO_DATE(string, format_mask)</td><td>将字符串转变为日期</td><td>SELECT STR_TO_DATE(“August 10 2017”, “%M %d %Y”);-&gt; 2017-08-10</td></tr><tr><td>DATE_SUB(date,INTERVAL expr type)</td><td>函数从日期减去指定的时间间隔。</td><td>Orders 表中 OrderDate 字段减去 2 天：SELECT OrderId,DATE_SUB(OrderDate,INTERVAL 2 DAY) AS OrderPayDate FROM Orders;</td></tr></tbody></table><table><thead><tr><th>函数名</th><th>描述</th><th>实例</th></tr></thead><tbody><tr><td>ADDDATE/DATE_ADD(d，INTERVAL expr type)</td><td>计算起始日期 d 加上一个时间段后的日期，type 值可以是：<br>MICROSECOND<br>SECOND<br>MINUTE<br>HOUR<br>DAY<br>WEEK<br>MONTH<br>QUARTER<br>YEAR<br>DAY_MINUTE<br>DAY_HOUR<br>YEAR_MONTH</td><td>SELECT DATE_ADD(“2017-06-15”, INTERVAL 10 DAY); -&gt; 2017-06-25<br><br>SELECT DATE_ADD(“2017-06-15 09:34:21”, INTERVAL 15 MINUTE); -&gt; 2017-06-15 09:49:21<br><br>SELECT DATE_ADD(“2017-06-15 09:34:21”, INTERVAL -3 HOUR); -&gt;2017-06-15 06:34:21<br><br>SELECT DATE_ADD(“2017-06-15 09:34:21”, INTERVAL -3 HOUR); -&gt;2017-04-15</td></tr></tbody></table><table><thead><tr><th>函数名</th><th>描述</th><th>实例</th></tr></thead><tbody><tr><td><strong>DATE_ADD(d，INTERVAL expr type)</strong></td><td>计算起始日期 d 加上一个时间段后的日期，type 值可以是：<br>SECOND_MICROSECOND<br>MINUTE_MICROSECOND<br>MINUTE_SECOND<br>HOUR_MICROSECOND<br>HOUR_SECOND<br>HOUR_MINUTE<br>DAY_MICROSECOND<br>DAY_SECOND<br>DAY_MINUTE<br>DAY_HOUR<br>YEAR_MONTH</td><td>SELECT DATE_ADD(“2017-06-15”, INTERVAL 10 DAY);  -&gt; 2017-06-25<br><br>SELECT DATE_ADD(“2017-06-15 09:34:21”, INTERVAL 15 MINUTE);  -&gt; 2017-06-15 09:49:21<br><br>SELECT DATE_ADD(“2017-06-15 09:34:21”, INTERVAL -3 HOUR);  -&gt;2017-06-15 06:34:21<br><br>SELECT DATE_ADD(“2017-06-15 09:34:21”, INTERVAL -3 HOUR);  -&gt;2017-04-15</td></tr></tbody></table><table><thead><tr><th></th><th></th><th></th></tr></thead><tbody><tr><td>EXTRACT(type FROM d)</td><td>从日期 d 中获取指定的值，type 指定返回的值。type可取值为：MICROSECOND<br>SECOND<br>MINUTE<br>HOUR    ……</td><td>SELECT EXTRACT(MINUTE FROM ‘2011-11-11 11:11:11’) -&gt; 11</td></tr><tr><td>LAST_DAY(d)</td><td>返回给给定日期的那一月份的最后一天</td><td>SELECT LAST_DAY(“2017-06-20”);-&gt; 2017-06-30</td></tr><tr><td>MAKEDATE(year, day-of-year)</td><td>基于给定参数年份 year 和所在年中的天数序号 day-of-year 返回一个日期</td><td>SELECT MAKEDATE(2017, 3);-&gt; 2017-01-03</td></tr></tbody></table><table><thead><tr><th>函数名</th><th>描述</th><th>实例</th></tr></thead><tbody><tr><td><strong>YEAR(d)</strong></td><td>返回年份</td><td>SELECT YEAR(“2017-06-15”);-&gt; 2017</td></tr><tr><td><strong>MONTH(d)</strong></td><td>返回日期d中的月份值，1 到 12</td><td>SELECT MONTH(‘2011-11-11 11:11:11’)-&gt;11</td></tr><tr><td><strong>DAY(d)</strong></td><td>返回日期值 d 的日期部分</td><td>SELECT DAY(“2017-06-15”);  -&gt; 15</td></tr><tr><td>HOUR(t)</td><td>返回 t 中的小时值</td><td>SELECT HOUR(‘1:2:3’)-&gt; 1</td></tr><tr><td>MINUTE(t)</td><td>返回 t 中的分钟值</td><td>SELECT MINUTE(‘1:2:3’)-&gt; 2</td></tr><tr><td>SECOND(t)</td><td>返回 t 中的秒钟值</td><td>SELECT SECOND(‘1:2:3’)-&gt; 3</td></tr><tr><td>QUARTER(d)</td><td>返回日期d是第几季节，返回 1 到 4</td><td>SELECT QUARTER(‘2011-11-11 11:11:11’)-&gt; 4</td></tr></tbody></table><table><thead><tr><th>函数名</th><th>描述</th><th>实例</th></tr></thead><tbody><tr><td>MONTHNAME(d)</td><td>返回日期当中的月份名称，如 November</td><td>SELECT MONTHNAME(‘2011-11-11 11:11:11’)-&gt; November</td></tr><tr><td><strong>DAYNAME(d)</strong></td><td>返回日期 d 是星期几，如 Monday,Tuesday</td><td>SELECT DAYNAME(‘2011-11-11 11:11:11’)-&gt;Friday</td></tr><tr><td>DAYOFMONTH(d)</td><td>计算日期 d 是本月的第几天</td><td>SELECT DAYOFMONTH(‘2011-11-11 11:11:11’)-&gt;11</td></tr><tr><td>DAYOFWEEK(d)</td><td>日期 d 今天是星期几，1 星期日，2 星期一，以此类推</td><td>SELECT DAYOFWEEK(‘2011-11-11 11:11:11’)-&gt;6</td></tr><tr><td>DAYOFYEAR(d)</td><td>计算日期 d 是本年的第几天</td><td>SELECT DAYOFYEAR(‘2011-11-11 11:11:11’)-&gt;315</td></tr></tbody></table><table><thead><tr><th>函数名</th><th>描述</th><th>实例</th></tr></thead><tbody><tr><td>WEEK(d)</td><td>计算日期 d 是本年的第几个星期，范围是 0 到 53</td><td>SELECT WEEK(‘2011-11-11 11:11:11’)-&gt; 45</td></tr><tr><td>WEEKDAY(d)</td><td>日期 d 是星期几，0 表示星期一，1 表示星期二</td><td>SELECT WEEKDAY(“2017-06-15”);-&gt; 3</td></tr><tr><td>WEEKOFYEAR(d)</td><td>计算日期 d 是本年的第几个星期，范围是 0 到 53</td><td>SELECT WEEKOFYEAR(‘2011-11-11 11:11:11’)-&gt; 45</td></tr><tr><td>YEARWEEK(date, mode)</td><td>返回年份及第几周（0到53），mode 中 0 表示周天，1表示周一，以此类推</td><td>SELECT YEARWEEK(“2017-06-15”);-&gt; 201724</td></tr><tr><td><strong>NOW()</strong></td><td>返回当前日期和时间</td><td>SELECT NOW()-&gt; 2018-09-19 20:57:43</td></tr></tbody></table><h4 id="操作-21"><a href="#操作-21" class="headerlink" title="操作-21"></a>操作</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 案例：查询所有员工的入职天数，并根据入职天数倒序排序。</span></span><br><span class="line"><span class="keyword">select</span> ename, datediff(curdate(), hiredate) hiredays <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> hiredays <span class="keyword">desc</span>;</span><br></pre></td></tr></table></figure><h3 id="控制流函数"><a href="#控制流函数" class="headerlink" title="控制流函数"></a>控制流函数</h3><h4 id="if逻辑判断语句"><a href="#if逻辑判断语句" class="headerlink" title="if逻辑判断语句"></a>if逻辑判断语句</h4><table><thead><tr><th>格式</th><th>解释</th><th>案例</th></tr></thead><tbody><tr><td>IF(expr,v1,v2)</td><td>如果表达式 expr 成立，返回结果 v1；否则，返回结果 v2。</td><td>SELECT IF(1 &gt; 0,‘正确’,‘错误’)    -&gt;正确</td></tr><tr><td>IFNULL(v1,v2)</td><td>如果 v1 的值不为 NULL，则返回 v1，否则返回 v2。</td><td>SELECT IFNULL(null,‘Hello Word’)  -&gt;Hello Word</td></tr><tr><td>ISNULL(expression)</td><td>判断表达式是否为 NULL</td><td>SELECT ISNULL(NULL);  -&gt;1</td></tr><tr><td>NULLIF(expr1, expr2)</td><td>比较两个字符串，如果字符串 expr1 与 expr2 相等 返回 NULL，否则返回 expr1</td><td>SELECT NULLIF(25, 25);  -&gt;null</td></tr></tbody></table><h4 id="case-when语句"><a href="#case-when语句" class="headerlink" title="case-when语句"></a>case when语句</h4><table><thead><tr><th>格式</th><th>解释</th><th>操作</th></tr></thead><tbody><tr><td>CASE expression    <br>WHEN condition1 THEN result1    WHEN condition2 THEN result2   …    WHEN conditionN THEN resultN    <br>ELSE result<br>END</td><td>CASE 表示函数开始，END 表示函数结束。如果 condition1 成立，则返回 result1, 如果 condition2 成立，则返回 result2，当全部不成立则返回 result，而当有一个成立之后，后面的就不执行了。</td><td>select case 100 when 50 then ‘tom’ when 100 then ‘mary’else ‘tim’ end ;<br>select case when 1=2 then ‘tom’ when 2=2 then ‘mary’ else’tim’ end ;</td></tr></tbody></table><h5 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 案例1：</span></span><br><span class="line"></span><br><span class="line">use mydb4;</span><br><span class="line"><span class="comment">-- 创建订单表</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> orders(</span><br><span class="line">oid <span class="type">int</span> <span class="keyword">primary</span> key,  <span class="comment">-- 订单id</span></span><br><span class="line">price <span class="keyword">double</span>,  <span class="comment">-- 订单价格</span></span><br><span class="line">payType <span class="type">int</span>  <span class="comment">-- 支付类型(1:微信支付 2:支付宝支付 3:银行卡支付 4:其他)</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 插入数据</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> orders <span class="keyword">values</span>(<span class="number">1</span>,<span class="number">1200</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> orders <span class="keyword">values</span>(<span class="number">2</span>,<span class="number">1000</span>,<span class="number">2</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> orders <span class="keyword">values</span>(<span class="number">3</span>,<span class="number">200</span>,<span class="number">3</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> orders <span class="keyword">values</span>(<span class="number">4</span>,<span class="number">3000</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> orders <span class="keyword">values</span>(<span class="number">5</span>,<span class="number">1500</span>,<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 操作</span></span><br><span class="line"><span class="comment">-- 方式1</span></span><br><span class="line"><span class="keyword">select</span> </span><br><span class="line"><span class="operator">*</span>,</span><br><span class="line"><span class="keyword">case</span> payType </span><br><span class="line"><span class="keyword">when</span> <span class="number">1</span> <span class="keyword">then</span> <span class="string">&#x27;微信支付&#x27;</span> </span><br><span class="line"><span class="keyword">when</span> <span class="number">2</span> <span class="keyword">then</span> <span class="string">&#x27;支付宝支付&#x27;</span></span><br><span class="line"><span class="keyword">when</span> <span class="number">3</span> <span class="keyword">then</span> <span class="string">&#x27;银行卡支付&#x27;</span></span><br><span class="line"><span class="keyword">else</span> </span><br><span class="line"><span class="string">&#x27;其他支付方式&#x27;</span> </span><br><span class="line"><span class="keyword">end</span> <span class="keyword">as</span> payTypeStr</span><br><span class="line"><span class="keyword">from</span> orders;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 方式2</span></span><br><span class="line"><span class="keyword">select</span> </span><br><span class="line"><span class="operator">*</span>,</span><br><span class="line"><span class="keyword">case</span>  </span><br><span class="line"><span class="keyword">when</span> payType<span class="operator">=</span><span class="number">1</span> <span class="keyword">then</span> <span class="string">&#x27;微信支付&#x27;</span> </span><br><span class="line"><span class="keyword">when</span> payType<span class="operator">=</span><span class="number">2</span> <span class="keyword">then</span> <span class="string">&#x27;支付宝支付&#x27;</span></span><br><span class="line"><span class="keyword">when</span> payType<span class="operator">=</span><span class="number">3</span> <span class="keyword">then</span> <span class="string">&#x27;银行卡支付&#x27;</span></span><br><span class="line"><span class="keyword">else</span> </span><br><span class="line"><span class="string">&#x27;其他支付方式&#x27;</span> </span><br><span class="line"><span class="keyword">end</span> <span class="keyword">as</span> payTypeStr</span><br><span class="line"><span class="keyword">from</span> orders;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 案例2：统计班级各个学员的成绩，展示的规则如下：</span></span><br><span class="line"><span class="comment">-- &gt;= 85，展示优秀</span></span><br><span class="line"><span class="comment">-- &gt;= 60，展示及格</span></span><br><span class="line"><span class="comment">-- 否则，展示不及格</span></span><br><span class="line"></span><br><span class="line">use mydb4;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 创建表并插入数据</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> score(</span><br><span class="line">id <span class="type">int</span> comment <span class="string">&#x27;ID&#x27;</span>,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">20</span>) comment <span class="string">&#x27;姓名&#x27;</span>,</span><br><span class="line">math <span class="type">int</span> comment <span class="string">&#x27;数学&#x27;</span>,</span><br><span class="line">english <span class="type">int</span> comment <span class="string">&#x27;英语&#x27;</span>,</span><br><span class="line">chinese <span class="type">int</span> comment <span class="string">&#x27;语文&#x27;</span></span><br><span class="line">) comment <span class="string">&#x27;学员成绩表&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> score(id,name,math,english,chinese) <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;Tom&#x27;</span>,<span class="number">67</span>,<span class="number">88</span>,<span class="number">95</span>),(<span class="number">2</span>,<span class="string">&#x27;Rose&#x27;</span>,<span class="number">23</span>,<span class="number">66</span>,<span class="number">90</span>),(<span class="number">3</span>,<span class="string">&#x27;Jack&#x27;</span>,<span class="number">56</span>,<span class="number">98</span>,<span class="number">76</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 操作</span></span><br><span class="line"><span class="keyword">select</span> </span><br><span class="line">id,</span><br><span class="line">name,</span><br><span class="line"><span class="keyword">case</span> <span class="keyword">when</span> math <span class="operator">&gt;=</span> <span class="number">85</span> <span class="keyword">then</span> <span class="string">&#x27;优秀&#x27;</span> <span class="keyword">when</span> math <span class="operator">&gt;=</span><span class="number">60</span> <span class="keyword">then</span> <span class="string">&#x27;及格&#x27;</span> <span class="keyword">else</span> <span class="string">&#x27;不及格&#x27;</span> <span class="keyword">end</span> <span class="string">&#x27;数学&#x27;</span>,</span><br><span class="line"><span class="keyword">case</span> <span class="keyword">when</span> english <span class="operator">&gt;=</span> <span class="number">85</span> <span class="keyword">then</span> <span class="string">&#x27;优秀&#x27;</span> <span class="keyword">when</span> english <span class="operator">&gt;=</span><span class="number">60</span> <span class="keyword">then</span> <span class="string">&#x27;及格&#x27;</span> <span class="keyword">else</span> <span class="string">&#x27;不及格&#x27;</span> <span class="keyword">end</span> <span class="string">&#x27;英语&#x27;</span>,</span><br><span class="line"><span class="keyword">case</span> <span class="keyword">when</span> chinese <span class="operator">&gt;=</span> <span class="number">85</span> <span class="keyword">then</span> <span class="string">&#x27;优秀&#x27;</span> <span class="keyword">when</span> chinese <span class="operator">&gt;=</span><span class="number">60</span> <span class="keyword">then</span> <span class="string">&#x27;及格&#x27;</span> <span class="keyword">else</span> <span class="string">&#x27;不及格&#x27;</span> <span class="keyword">end</span> <span class="string">&#x27;语文&#x27;</span></span><br><span class="line"><span class="keyword">from</span> score;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="窗口函数"><a href="#窗口函数" class="headerlink" title="窗口函数"></a>窗口函数</h3><h4 id="介绍-10"><a href="#介绍-10" class="headerlink" title="介绍-10"></a>介绍</h4><blockquote><ul><li><strong>MySQL 8.0 新增窗口函数</strong> ,窗口函数又被称为开窗函数，与Oracle 窗口函数类似，属于MySQL的一大特点。</li><li>非聚合窗口函数是相对于聚函数来说的。聚合函数是对一组数据计算后返回单个值（即分组），非聚合函数一次只会处理一行数据。窗口聚合函数在行记录上计算某个字段的结果时，可将窗口范围内的数据输入到聚合函数中，并不改变行数。</li></ul></blockquote><p class='item-img' data-src='/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/1728290697257.png'><img src="/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/1728290697257.png" alt="聚合函数-窗口函数"></p><h4 id="分类-3"><a href="#分类-3" class="headerlink" title="分类-3"></a>分类</h4><p class='item-img' data-src='/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/1728290736332.png'><img src="/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/1728290736332.png" alt="窗口函数"></p><p><strong>另外还有开窗聚合函数:</strong> <code>SUM</code>,<code>AVG</code>,<code>MIN</code>,<code>MAX</code></p><h4 id="语法结构"><a href="#语法结构" class="headerlink" title="语法结构"></a>语法结构</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">window_function ( expr ) <span class="keyword">OVER</span> ( </span><br><span class="line">  <span class="keyword">PARTITION</span> <span class="keyword">BY</span> ... </span><br><span class="line">  <span class="keyword">ORDER</span> <span class="keyword">BY</span> ... </span><br><span class="line">  frame_clause </span><br><span class="line">)</span><br></pre></td></tr></table></figure><blockquote><p>其中，window_function 是窗口函数的名称；expr 是参数，有些函数不需要参数；OVER子句包含三个选项：</p><blockquote><ul><li><strong>分区（PARTITION BY）:</strong></li></ul><p>PARTITION BY选项用于将数据行拆分成多个分区（组），它的作用类似于GROUP BY分组。如果省略了 PARTITION BY，所有的数据作为一个组进行计算</p><ul><li><strong>排序（ORDER BY）:</strong></li></ul><p>OVER 子句中的ORDER BY选项用于指定分区内的排序方式，与 ORDER BY 子句的作用类似</p><ul><li><strong>以及窗口大小（frame_clause）:</strong></li></ul><p>frame_clause选项用于在当前分区内指定一个计算窗口，也就是一个与当前行相关的数据子集。</p></blockquote></blockquote><h4 id="序号函数"><a href="#序号函数" class="headerlink" title="序号函数"></a>序号函数</h4><p>序号函数有三个：ROW_NUMBER()、RANK()、DENSE_RANK()，可以用来实现分组排序，并添加序号。</p><h5 id="格式-13"><a href="#格式-13" class="headerlink" title="格式-13"></a>格式</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">row_number</span>()<span class="operator">|</span><span class="built_in">rank</span>()<span class="operator">|</span><span class="built_in">dense_rank</span>() <span class="keyword">over</span> ( </span><br><span class="line">  <span class="keyword">partition</span> <span class="keyword">by</span> ... </span><br><span class="line">  <span class="keyword">order</span> <span class="keyword">by</span> ... </span><br><span class="line">) </span><br></pre></td></tr></table></figure><h5 id="操作-22"><a href="#操作-22" class="headerlink" title="操作-22"></a>操作</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">use mydb4; </span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> employee( </span><br><span class="line">   dname <span class="type">varchar</span>(<span class="number">20</span>), <span class="comment">-- 部门名 </span></span><br><span class="line">   eid <span class="type">varchar</span>(<span class="number">20</span>), </span><br><span class="line">   ename <span class="type">varchar</span>(<span class="number">20</span>), </span><br><span class="line">   hiredate <span class="type">date</span>, <span class="comment">-- 入职日期 </span></span><br><span class="line">   salary <span class="keyword">double</span> <span class="comment">-- 薪资</span></span><br><span class="line">); </span><br><span class="line"></span><br><span class="line"><span class="comment">-- 插入数据</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> employee <span class="keyword">values</span>(<span class="string">&#x27;研发部&#x27;</span>,<span class="string">&#x27;1001&#x27;</span>,<span class="string">&#x27;刘备&#x27;</span>,<span class="string">&#x27;2021-11-01&#x27;</span>,<span class="number">3000</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> employee <span class="keyword">values</span>(<span class="string">&#x27;研发部&#x27;</span>,<span class="string">&#x27;1002&#x27;</span>,<span class="string">&#x27;关羽&#x27;</span>,<span class="string">&#x27;2021-11-02&#x27;</span>,<span class="number">5000</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> employee <span class="keyword">values</span>(<span class="string">&#x27;研发部&#x27;</span>,<span class="string">&#x27;1003&#x27;</span>,<span class="string">&#x27;张飞&#x27;</span>,<span class="string">&#x27;2021-11-03&#x27;</span>,<span class="number">7000</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> employee <span class="keyword">values</span>(<span class="string">&#x27;研发部&#x27;</span>,<span class="string">&#x27;1004&#x27;</span>,<span class="string">&#x27;赵云&#x27;</span>,<span class="string">&#x27;2021-11-04&#x27;</span>,<span class="number">7000</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> employee <span class="keyword">values</span>(<span class="string">&#x27;研发部&#x27;</span>,<span class="string">&#x27;1005&#x27;</span>,<span class="string">&#x27;马超&#x27;</span>,<span class="string">&#x27;2021-11-05&#x27;</span>,<span class="number">4000</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> employee <span class="keyword">values</span>(<span class="string">&#x27;研发部&#x27;</span>,<span class="string">&#x27;1006&#x27;</span>,<span class="string">&#x27;黄忠&#x27;</span>,<span class="string">&#x27;2021-11-06&#x27;</span>,<span class="number">4000</span>);</span><br><span class="line"> </span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> employee <span class="keyword">values</span>(<span class="string">&#x27;销售部&#x27;</span>,<span class="string">&#x27;1007&#x27;</span>,<span class="string">&#x27;曹操&#x27;</span>,<span class="string">&#x27;2021-11-01&#x27;</span>,<span class="number">2000</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> employee <span class="keyword">values</span>(<span class="string">&#x27;销售部&#x27;</span>,<span class="string">&#x27;1008&#x27;</span>,<span class="string">&#x27;许褚&#x27;</span>,<span class="string">&#x27;2021-11-02&#x27;</span>,<span class="number">3000</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> employee <span class="keyword">values</span>(<span class="string">&#x27;销售部&#x27;</span>,<span class="string">&#x27;1009&#x27;</span>,<span class="string">&#x27;典韦&#x27;</span>,<span class="string">&#x27;2021-11-03&#x27;</span>,<span class="number">5000</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> employee <span class="keyword">values</span>(<span class="string">&#x27;销售部&#x27;</span>,<span class="string">&#x27;1010&#x27;</span>,<span class="string">&#x27;张辽&#x27;</span>,<span class="string">&#x27;2021-11-04&#x27;</span>,<span class="number">6000</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> employee <span class="keyword">values</span>(<span class="string">&#x27;销售部&#x27;</span>,<span class="string">&#x27;1011&#x27;</span>,<span class="string">&#x27;徐晃&#x27;</span>,<span class="string">&#x27;2021-11-05&#x27;</span>,<span class="number">9000</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> employee <span class="keyword">values</span>(<span class="string">&#x27;销售部&#x27;</span>,<span class="string">&#x27;1012&#x27;</span>,<span class="string">&#x27;曹洪&#x27;</span>,<span class="string">&#x27;2021-11-06&#x27;</span>,<span class="number">6000</span>);</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>row_number()</code></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 对每个部门的员工按照薪资降序排序，并给出排名</span></span><br><span class="line"><span class="keyword">select</span> </span><br><span class="line">dname,</span><br><span class="line">ename,</span><br><span class="line">salary,</span><br><span class="line"><span class="built_in">row_number</span>() <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> dname <span class="keyword">order</span> <span class="keyword">by</span> salary <span class="keyword">desc</span>) <span class="keyword">as</span> rn </span><br><span class="line"><span class="keyword">from</span> employee;</span><br></pre></td></tr></table></figure><p class='item-img' data-src='/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/1728294250007.png'><img src="/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/1728294250007.png" alt="row_number()"></p><p><code>rank()</code></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 对每个部门的员工按照薪资排序，并给出排名 rank</span></span><br><span class="line"><span class="keyword">select</span> </span><br><span class="line">dname,</span><br><span class="line">ename,</span><br><span class="line">salary,</span><br><span class="line"><span class="built_in">rank</span>() <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> dname <span class="keyword">order</span> <span class="keyword">by</span> salary <span class="keyword">desc</span>) <span class="keyword">as</span> rn </span><br><span class="line"><span class="keyword">from</span> employee;</span><br></pre></td></tr></table></figure><p class='item-img' data-src='/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/1728294484066.png'><img src="/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/1728294484066.png" alt="rank()"></p><p><code>dense_rank()</code></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 对每个部门的员工按照薪资排序，并给出排名 dense-rank</span></span><br><span class="line"><span class="keyword">select</span> </span><br><span class="line">dname,</span><br><span class="line">ename,</span><br><span class="line">salary,</span><br><span class="line"><span class="built_in">dense_rank</span>() <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> dname <span class="keyword">order</span> <span class="keyword">by</span> salary <span class="keyword">desc</span>) <span class="keyword">as</span> rn </span><br><span class="line"><span class="keyword">from</span> employee;</span><br></pre></td></tr></table></figure><p class='item-img' data-src='/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/1728294563192.png'><img src="/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/1728294563192.png" alt="dense_rank()"></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--求出每个部门薪资排在前三名的员工- 分组求TOPN</span></span><br><span class="line"><span class="keyword">select</span> </span><br><span class="line"><span class="operator">*</span> </span><br><span class="line"><span class="keyword">from</span> </span><br><span class="line">(</span><br><span class="line">    <span class="keyword">select</span> </span><br><span class="line">     dname,</span><br><span class="line">     ename,</span><br><span class="line">     salary,</span><br><span class="line">     <span class="built_in">dense_rank</span>() <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> dname <span class="keyword">order</span> <span class="keyword">by</span> salary <span class="keyword">desc</span>)  <span class="keyword">as</span> rn</span><br><span class="line">    <span class="keyword">from</span> employee</span><br><span class="line">)t</span><br><span class="line"><span class="keyword">where</span> t.rn <span class="operator">&lt;=</span> <span class="number">3</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p class='item-img' data-src='/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/1728297383059.png'><img src="/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/1728297383059.png" alt="分组求TOPN"></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 对所有员工进行全局排序（不分组）</span></span><br><span class="line"><span class="comment">-- 不加partition by表示全局排序</span></span><br><span class="line"><span class="keyword">select</span> </span><br><span class="line">     dname,</span><br><span class="line">     ename,</span><br><span class="line">     salary,</span><br><span class="line">     <span class="built_in">dense_rank</span>() <span class="keyword">over</span>( <span class="keyword">order</span> <span class="keyword">by</span> salary <span class="keyword">desc</span>)  <span class="keyword">as</span> rn</span><br><span class="line"><span class="keyword">from</span> employee;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p class='item-img' data-src='/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/1728297539439.png'><img src="/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/1728297539439.png" alt="全局排序（不分组）"></p><h4 id="开窗聚合函数-SUM-AVG-MIN-MAX"><a href="#开窗聚合函数-SUM-AVG-MIN-MAX" class="headerlink" title="开窗聚合函数-SUM-AVG-MIN-MAX"></a>开窗聚合函数- SUM,AVG,MIN,MAX</h4><h5 id="概念-7"><a href="#概念-7" class="headerlink" title="概念-7"></a>概念</h5><blockquote><p>在窗口中每条记录动态地应用聚合函数（SUM()、AVG()、MAX()、MIN()、COUNT()），可以动态计算在指定的窗口内的各种聚合函数值。</p></blockquote><h5 id="操作-23"><a href="#操作-23" class="headerlink" title="操作-23"></a>操作</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 开窗聚合函数</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span>  </span><br><span class="line"> dname,</span><br><span class="line"> ename,</span><br><span class="line"> salary,</span><br><span class="line"> <span class="built_in">sum</span>(salary) <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> dname <span class="keyword">order</span> <span class="keyword">by</span> hiredate) <span class="keyword">as</span> pv1 </span><br><span class="line"><span class="keyword">from</span> employee;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">select</span> </span><br><span class="line"> dname,</span><br><span class="line"> ename,</span><br><span class="line"> salary,</span><br><span class="line"> <span class="built_in">sum</span>(salary) <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> dname) <span class="keyword">as</span> pv3</span><br><span class="line"><span class="keyword">from</span> employee;  <span class="comment">-- 如果没有order  by排序语句  默认把分组内的所有数据进行sum操作</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span>  </span><br><span class="line"> dname,</span><br><span class="line"> ename,</span><br><span class="line"> salary,</span><br><span class="line"> <span class="built_in">sum</span>(salary) <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> dname <span class="keyword">order</span> <span class="keyword">by</span> hiredate  <span class="keyword">rows</span> <span class="keyword">between</span> unbounded preceding <span class="keyword">and</span> <span class="keyword">current</span> <span class="type">row</span>) <span class="keyword">as</span> c1 </span><br><span class="line"><span class="keyword">from</span> employee;    <span class="comment">-- rows代表行，between从哪里到哪里，unbounded preceding代表 从开头 开始 到当前行current row 结束</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">select</span>  </span><br><span class="line"> dname,</span><br><span class="line"> ename,</span><br><span class="line"> salary,</span><br><span class="line"> <span class="built_in">sum</span>(salary) <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> dname <span class="keyword">order</span> <span class="keyword">by</span> hiredate   <span class="keyword">rows</span> <span class="keyword">between</span> <span class="number">3</span> preceding <span class="keyword">and</span> <span class="keyword">current</span> <span class="type">row</span>) <span class="keyword">as</span> c1 </span><br><span class="line"><span class="keyword">from</span> employee;   <span class="comment">-- rows代表行，between从哪里到哪里，3 preceding代表 从当前行向上三行 开始 到当前行current row 结束</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span>  </span><br><span class="line"> dname,</span><br><span class="line"> ename,</span><br><span class="line"> salary,</span><br><span class="line"> <span class="built_in">sum</span>(salary) <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> dname <span class="keyword">order</span> <span class="keyword">by</span> hiredate   <span class="keyword">rows</span> <span class="keyword">between</span> <span class="number">3</span> preceding <span class="keyword">and</span> <span class="number">1</span> following) <span class="keyword">as</span> c1 </span><br><span class="line"><span class="keyword">from</span> employee; <span class="comment">-- rows代表行，between从哪里到哪里，3 preceding代表 从当前行向上三行 开始 到当前行下一行 1 following 结束</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span>  </span><br><span class="line"> dname,</span><br><span class="line"> ename,</span><br><span class="line"> salary,</span><br><span class="line"> <span class="built_in">sum</span>(salary) <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> dname <span class="keyword">order</span> <span class="keyword">by</span> hiredate   <span class="keyword">rows</span> <span class="keyword">between</span> <span class="keyword">current</span> <span class="type">row</span> <span class="keyword">and</span> unbounded following) <span class="keyword">as</span> c1 </span><br><span class="line"><span class="keyword">from</span> employee;    <span class="comment">-- rows代表行，between从哪里到哪里，current row代表 从当前行 开始 到最后 unbounded following 结束</span></span><br><span class="line"> </span><br></pre></td></tr></table></figure><h4 id="分布函数-CUME-DIST"><a href="#分布函数-CUME-DIST" class="headerlink" title="分布函数-CUME-DIST"></a>分布函数-(CUME_DIST)</h4><h5 id="介绍-11"><a href="#介绍-11" class="headerlink" title="介绍-11"></a>介绍</h5><blockquote><ul><li>用途：分组内小于、等于当前rank值的行数 / 分组内总行数</li><li>应用场景：查询小于等于当前薪资（salary）的比例</li></ul></blockquote><h5 id="操作-24"><a href="#操作-24" class="headerlink" title="操作-24"></a>操作</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span>  </span><br><span class="line"> dname,</span><br><span class="line"> ename,</span><br><span class="line"> salary,</span><br><span class="line"> <span class="built_in">cume_dist</span>() <span class="keyword">over</span>(<span class="keyword">order</span> <span class="keyword">by</span> salary) <span class="keyword">as</span> rn1, <span class="comment">-- 没有partition语句 所有的数据位于一组</span></span><br><span class="line"> <span class="built_in">cume_dist</span>() <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> dname <span class="keyword">order</span> <span class="keyword">by</span> salary) <span class="keyword">as</span> rn2 </span><br><span class="line"><span class="keyword">from</span> employee;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">rn1: 没有partition,所有数据均为1组，总行数为12，</span></span><br><span class="line"><span class="comment">     第一行：小于等于3000的行数为3，因此，3/12=0.25</span></span><br><span class="line"><span class="comment">     第二行：小于等于4000的行数为5，因此，5/12=0.4166666666666667</span></span><br><span class="line"><span class="comment">rn2: 按照部门分组，dname=&#x27;研发部&#x27;的行数为6,</span></span><br><span class="line"><span class="comment">     第一行：研发部小于等于3000的行数为1，因此，1/6=0.16666666666666666</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p class='item-img' data-src='/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/1728547134931.png'><img src="/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/1728547134931.png" alt="分布函数-(CUME_DIST)"></p><h4 id="分布函数-PERCENT-RANK"><a href="#分布函数-PERCENT-RANK" class="headerlink" title="分布函数-PERCENT-RANK"></a>分布函数-(PERCENT_RANK)</h4><h5 id="介绍-12"><a href="#介绍-12" class="headerlink" title="介绍-12"></a>介绍</h5><blockquote><ul><li>用途：每行按照公式(rank-1) / (rows-1)进行计算。其中，rank为RANK()函数产生的序号，rows为当前窗口的记录总行数；</li><li>应用场景：不常用。</li></ul></blockquote><h5 id="操作-25"><a href="#操作-25" class="headerlink" title="操作-25"></a>操作</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> </span><br><span class="line"> dname,</span><br><span class="line"> ename,</span><br><span class="line"> salary,</span><br><span class="line"> <span class="built_in">rank</span>() <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> dname <span class="keyword">order</span> <span class="keyword">by</span> salary <span class="keyword">desc</span> ) <span class="keyword">as</span> rn,</span><br><span class="line"> <span class="built_in">percent_rank</span>() <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> dname <span class="keyword">order</span> <span class="keyword">by</span> salary <span class="keyword">desc</span> ) <span class="keyword">as</span> rn2</span><br><span class="line"><span class="keyword">from</span> employee;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> rn2:</span></span><br><span class="line"><span class="comment">  第一行: (1 - 1) / (6 - 1) = 0</span></span><br><span class="line"><span class="comment">  第二行: (1 - 1) / (6 - 1) = 0</span></span><br><span class="line"><span class="comment">  第三行: (3 - 1) / (6 - 1) = 0.4</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p class='item-img' data-src='/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/1728547548943.png'><img src="/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/1728547548943.png" alt="分布函数-(PERCENT_RANK)"></p><h4 id="前后函数-LAG和LEAD"><a href="#前后函数-LAG和LEAD" class="headerlink" title="前后函数-LAG和LEAD"></a>前后函数-LAG和LEAD</h4><h5 id="介绍-13"><a href="#介绍-13" class="headerlink" title="介绍-13"></a>介绍</h5><blockquote><ul><li>用途：返回位于当前行的前n行（LAG(expr,n)）或后n行（LEAD(expr,n)）的expr的值</li><li>应用场景：查询前1名同学的成绩和当前同学成绩的差值</li></ul></blockquote><h5 id="操作-26"><a href="#操作-26" class="headerlink" title="操作-26"></a>操作</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- lag的用法</span></span><br><span class="line"><span class="keyword">select</span> </span><br><span class="line"> dname,</span><br><span class="line"> ename,</span><br><span class="line"> salary,</span><br><span class="line"> hiredate,</span><br><span class="line"> <span class="built_in">lag</span>(hiredate,<span class="number">1</span>,<span class="string">&#x27;2000-01-01&#x27;</span>) <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> dname <span class="keyword">order</span> <span class="keyword">by</span> hiredate) <span class="keyword">as</span> last_1_time,</span><br><span class="line"> <span class="built_in">lag</span>(hiredate,<span class="number">2</span>) <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> dname <span class="keyword">order</span> <span class="keyword">by</span> hiredate) <span class="keyword">as</span> last_2_time </span><br><span class="line"><span class="keyword">from</span> employee;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">last_1_time: 指定了往上第1行的值，default为&#x27;2000-01-01&#x27;  </span></span><br><span class="line"><span class="comment">                         第一行，往上1行为null,因此取默认值 &#x27;2000-01-01&#x27;</span></span><br><span class="line"><span class="comment">                         第二行，往上1行值为第一行值，2021-11-01 </span></span><br><span class="line"><span class="comment">                         第三行，往上1行值为第二行值，2021-11-02 </span></span><br><span class="line"><span class="comment">last_2_time: 指定了往上第2行的值，为指定默认值</span></span><br><span class="line"><span class="comment">                         第一行，往上2行为null</span></span><br><span class="line"><span class="comment">                         第二行，往上2行为null</span></span><br><span class="line"><span class="comment">                         第四行，往上2行为第二行值，2021-11-01 </span></span><br><span class="line"><span class="comment">                         第七行，往上2行为第五行值，2021-11-02 </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- lead的用法</span></span><br><span class="line"><span class="keyword">select</span> </span><br><span class="line"> dname,</span><br><span class="line"> ename,</span><br><span class="line"> salary,</span><br><span class="line"> hiredate,</span><br><span class="line"> <span class="built_in">lead</span>(hiredate,<span class="number">1</span>,<span class="string">&#x27;2000-01-01&#x27;</span>) <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> dname <span class="keyword">order</span> <span class="keyword">by</span> hiredate) <span class="keyword">as</span> last_1_time,</span><br><span class="line"> <span class="built_in">lead</span>(hiredate,<span class="number">2</span>) <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> dname <span class="keyword">order</span> <span class="keyword">by</span> hiredate) <span class="keyword">as</span> last_2_time </span><br><span class="line"><span class="keyword">from</span> employee;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>LAG(expr,n)</code>：</p><p class='item-img' data-src='/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/1728548447438.png'><img src="/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/1728548447438.png" alt="LAG(expr,n)"></p><p><code>LEAD(expr,n)</code>：</p><p class='item-img' data-src='/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/1728548647234.png'><img src="/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/1728548647234.png" alt="LEAD(expr,n)"></p><h4 id="头尾函数-FIRST-VALUE和LAST-VALUE"><a href="#头尾函数-FIRST-VALUE和LAST-VALUE" class="headerlink" title="头尾函数-FIRST-VALUE和LAST-VALUE"></a>头尾函数-FIRST_VALUE和LAST_VALUE</h4><h5 id="介绍-14"><a href="#介绍-14" class="headerlink" title="介绍-14"></a>介绍</h5><p>用途：返回第一个（FIRST_VALUE(expr)）或最后一个（LAST_VALUE(expr)）expr的值</p><p>应用场景：截止到当前，按照日期排序查询第1个入职和最后1个入职员工的薪资</p><h5 id="操作-27"><a href="#操作-27" class="headerlink" title="操作-27"></a>操作</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 注意,  如果不指定ORDER BY，则进行排序混乱，会出现错误的结果</span></span><br><span class="line"><span class="keyword">select</span></span><br><span class="line">  dname,</span><br><span class="line">  ename,</span><br><span class="line">  hiredate,</span><br><span class="line">  salary,</span><br><span class="line">  <span class="built_in">first_value</span>(salary) <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> dname <span class="keyword">order</span> <span class="keyword">by</span> hiredate) <span class="keyword">as</span> <span class="keyword">first</span>,</span><br><span class="line">  <span class="built_in">last_value</span>(salary) <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> dname <span class="keyword">order</span> <span class="keyword">by</span>  hiredate) <span class="keyword">as</span> <span class="keyword">last</span> </span><br><span class="line"><span class="keyword">from</span>  employee;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p class='item-img' data-src='/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/1728549344799.png'><img src="/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/1728549344799.png" alt="头尾函数-FIRST_VALUE和LAST_VALUE"></p><h4 id="其他函数-NTH-VALUE-expr-n-、NTILE-n"><a href="#其他函数-NTH-VALUE-expr-n-、NTILE-n" class="headerlink" title="其他函数-NTH-VALUE-expr-n-、NTILE-n"></a>其他函数-NTH_VALUE(expr, n)、NTILE(n)</h4><h5 id="介绍-NTH-VALUE-expr-n"><a href="#介绍-NTH-VALUE-expr-n" class="headerlink" title="介绍-NTH-VALUE-expr-n"></a>介绍-NTH_VALUE(expr,n)</h5><blockquote><ul><li>用途：返回窗口中第n个expr的值。expr可以是表达式，也可以是列名</li><li>应用场景：截止到当前薪资，显示每个员工的薪资中排名第2或者第3的薪资</li></ul></blockquote><h5 id="操作-28"><a href="#操作-28" class="headerlink" title="操作-28"></a>操作</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询每个部门截止目前薪资排在第二和第三的员工信息</span></span><br><span class="line"><span class="keyword">select</span> </span><br><span class="line">  dname,</span><br><span class="line">  ename,</span><br><span class="line">  hiredate,</span><br><span class="line">  salary,</span><br><span class="line">  <span class="built_in">nth_value</span>(salary,<span class="number">2</span>) <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> dname <span class="keyword">order</span> <span class="keyword">by</span> hiredate) <span class="keyword">as</span> second_score,</span><br><span class="line">  <span class="built_in">nth_value</span>(salary,<span class="number">3</span>) <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> dname <span class="keyword">order</span> <span class="keyword">by</span> hiredate) <span class="keyword">as</span> third_score</span><br><span class="line"><span class="keyword">from</span> employee;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p class='item-img' data-src='/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/1728551173493.png'><img src="/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/1728551173493.png" alt="NTH_VALUE(expr,n)"></p><h5 id="介绍-NTILE-n"><a href="#介绍-NTILE-n" class="headerlink" title="介绍-NTILE-n"></a>介绍-NTILE(n)</h5><blockquote><ul><li>用途：将分区中的有序数据分为n个等级，记录等级数</li><li>应用场景：将每个部门员工按照入职日期分成3组</li></ul></blockquote><h5 id="操作-29"><a href="#操作-29" class="headerlink" title="操作-29"></a>操作</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 根据入职日期将每个部门的员工分成3组</span></span><br><span class="line"><span class="keyword">select</span> </span><br><span class="line">  dname,</span><br><span class="line">  ename,</span><br><span class="line">  hiredate,</span><br><span class="line">  salary,</span><br><span class="line"><span class="built_in">ntile</span>(<span class="number">3</span>) <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> dname <span class="keyword">order</span> <span class="keyword">by</span>  hiredate  ) <span class="keyword">as</span> rn </span><br><span class="line"><span class="keyword">from</span> employee;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p class='item-img' data-src='/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/1728552007010.png'><img src="/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/1728552007010.png" alt="NTILE(n)"></p><h5 id="练习-2"><a href="#练习-2" class="headerlink" title="练习-2"></a>练习</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 取出每个部门的第一组员工</span></span><br><span class="line"><span class="keyword">select</span></span><br><span class="line"><span class="operator">*</span></span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">(</span><br><span class="line">    <span class="keyword">SELECT</span> </span><br><span class="line">        dname,</span><br><span class="line">        ename,</span><br><span class="line">        hiredate,</span><br><span class="line">        salary,</span><br><span class="line">    <span class="built_in">NTILE</span>(<span class="number">3</span>) <span class="keyword">OVER</span>(<span class="keyword">PARTITION</span> <span class="keyword">BY</span> dname <span class="keyword">ORDER</span> <span class="keyword">BY</span>  hiredate  ) <span class="keyword">AS</span> rn </span><br><span class="line">    <span class="keyword">FROM</span> employee</span><br><span class="line">)t</span><br><span class="line"><span class="keyword">where</span> t.rn <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p class='item-img' data-src='/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/1728552403002.png'><img src="/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/1728552403002.png" alt="每个部门的第一组员工"></p><h2 id="MySQL的视图"><a href="#MySQL的视图" class="headerlink" title="MySQL的视图"></a>MySQL的视图</h2><h3 id="介绍-15"><a href="#介绍-15" class="headerlink" title="介绍-15"></a>介绍</h3><blockquote><ul><li>视图（view）是一个虚拟表，非真实存在，其本质是根据SQL语句获取动态的数据集，并为其命名，用户使用时只需使用视图名称即可获取结果集，并可以将其当作表来使用。(就是原表的一个映射)</li><li>数据库中只存放了视图的定义，而并没有存放视图中的数据。这些数据存放在原来的表中。</li><li>使用视图查询数据时，数据库系统会从原来的表中取出对应的数据。因此，视图中的数据是依赖于原来的表中的数据的。一旦表中的数据发生改变，显示在视图中的数据也会发生改变。</li></ul></blockquote><h3 id="作用-2"><a href="#作用-2" class="headerlink" title="作用-2"></a>作用</h3><blockquote><ul><li>简化代码，可以把重复使用的查询封装成视图重复使用，同时可以使复杂的查询易于理解和使用。</li><li>安全原因，如果一张表中有很多数据，很多信息不希望让所有人看到，此时可以使用视图视，如：社会保险基金表，可以用视图只显示姓名，地址，而不显示社会保险号和工资数等，可以对不同的用户，设定不同的视图。</li></ul></blockquote><h3 id="视图的创建"><a href="#视图的创建" class="headerlink" title="视图的创建"></a>视图的创建</h3><h4 id="格式-14"><a href="#格式-14" class="headerlink" title="格式-14"></a>格式</h4><p>创建视图的语法为：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> [<span class="keyword">or</span> replace] [algorithm <span class="operator">=</span> &#123;undefined <span class="operator">|</span> <span class="keyword">merge</span> <span class="operator">|</span> temptable&#125;]</span><br><span class="line"> </span><br><span class="line"><span class="keyword">view</span> view_name [(column_list)]</span><br><span class="line"> </span><br><span class="line"><span class="keyword">as</span> select_statement</span><br><span class="line"> </span><br><span class="line">[<span class="keyword">with</span> [<span class="keyword">cascaded</span> <span class="operator">|</span> <span class="keyword">local</span>] <span class="keyword">check</span> option]</span><br><span class="line"></span><br><span class="line">参数说明：</span><br><span class="line">（<span class="number">1</span>）algorithm：可选项，表示视图选择的算法。</span><br><span class="line">（<span class="number">2</span>）view_name ：表示要创建的视图名称。</span><br><span class="line">（<span class="number">3</span>）column_list：可选项，指定视图中各个属性的名词，默认情况下与<span class="keyword">SELECT</span>语句中的查询的属性相同。</span><br><span class="line">（<span class="number">4</span>）select_statement  ：表示一个完整的查询语句，将查询记录导入视图中。</span><br><span class="line">（<span class="number">5</span>）[<span class="keyword">with</span> [<span class="keyword">cascaded</span> <span class="operator">|</span> <span class="keyword">local</span>] <span class="keyword">check</span> option] ：可选项，表示更新视图时要保证在该视图的权限范围之内。</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="数据准备"><a href="#数据准备" class="headerlink" title="数据准备"></a>数据准备</h4><p>创建 数据库mydb6_view,然后在该数据库下执行sql脚本view_data.sql 导入数据</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> database mydb6_view;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 创建部门表并插入数据</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> dept(</span><br><span class="line">deptno <span class="type">int</span> <span class="keyword">primary</span> key,</span><br><span class="line">  dname <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">loc <span class="type">varchar</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> dept <span class="keyword">values</span>(<span class="number">10</span>, <span class="string">&#x27;教研部&#x27;</span>,<span class="string">&#x27;北京&#x27;</span>),</span><br><span class="line">(<span class="number">20</span>, <span class="string">&#x27;学工部&#x27;</span>,<span class="string">&#x27;上海&#x27;</span>),</span><br><span class="line">(<span class="number">30</span>, <span class="string">&#x27;销售部&#x27;</span>,<span class="string">&#x27;广州&#x27;</span>),</span><br><span class="line">(<span class="number">40</span>, <span class="string">&#x27;财务部&#x27;</span>,<span class="string">&#x27;武汉&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 创建员工表并插入数据</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> emp(</span><br><span class="line">empno <span class="type">int</span> <span class="keyword">primary</span> key,</span><br><span class="line">ename <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">job <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">mgr <span class="type">int</span>,</span><br><span class="line">hiredate <span class="type">date</span>,</span><br><span class="line">sal <span class="type">numeric</span>(<span class="number">8</span>,<span class="number">2</span>),</span><br><span class="line">comm <span class="type">numeric</span>(<span class="number">8</span>, <span class="number">2</span>),</span><br><span class="line">deptno <span class="type">int</span>,</span><br><span class="line"><span class="comment">-- FOREIGN KEY (mgr) REFERENCES emp(empno),</span></span><br><span class="line"><span class="keyword">FOREIGN</span> KEY (deptno) <span class="keyword">REFERENCES</span> dept(deptno) <span class="keyword">ON</span> <span class="keyword">DELETE</span> <span class="keyword">SET</span> <span class="keyword">NULL</span> <span class="keyword">ON</span> <span class="keyword">UPDATE</span> CASCADE</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp <span class="keyword">VALUES</span></span><br><span class="line">(<span class="number">1001</span>, <span class="string">&#x27;甘宁&#x27;</span>, <span class="string">&#x27;文员&#x27;</span>, <span class="number">1013</span>, <span class="string">&#x27;2000-12-17&#x27;</span>, <span class="number">8000.00</span>, <span class="keyword">NULL</span>, <span class="number">20</span>),</span><br><span class="line">(<span class="number">1002</span>, <span class="string">&#x27;黛绮丝&#x27;</span>, <span class="string">&#x27;销售员&#x27;</span>, <span class="number">1006</span>, <span class="string">&#x27;2001-02-20&#x27;</span>, <span class="number">16000.00</span>, <span class="number">3000.00</span>, <span class="number">30</span>),</span><br><span class="line">(<span class="number">1003</span>, <span class="string">&#x27;殷天正&#x27;</span>, <span class="string">&#x27;销售员&#x27;</span>, <span class="number">1006</span>, <span class="string">&#x27;2001-02-22&#x27;</span>, <span class="number">12500.00</span>, <span class="number">5000.00</span>, <span class="number">30</span>),</span><br><span class="line">(<span class="number">1004</span>, <span class="string">&#x27;刘备&#x27;</span>, <span class="string">&#x27;经理&#x27;</span>, <span class="number">1009</span>, <span class="string">&#x27;2001-4-02&#x27;</span>, <span class="number">29750.00</span>, <span class="keyword">NULL</span>, <span class="number">20</span>),</span><br><span class="line">(<span class="number">1005</span>, <span class="string">&#x27;谢逊&#x27;</span>, <span class="string">&#x27;销售员&#x27;</span>, <span class="number">1006</span>, <span class="string">&#x27;2001-9-28&#x27;</span>, <span class="number">12500.00</span>, <span class="number">14000.00</span>, <span class="number">30</span>),</span><br><span class="line">(<span class="number">1006</span>, <span class="string">&#x27;关羽&#x27;</span>, <span class="string">&#x27;经理&#x27;</span>, <span class="number">1009</span>, <span class="string">&#x27;2001-05-01&#x27;</span>, <span class="number">28500.00</span>, <span class="keyword">NULL</span>, <span class="number">30</span>),</span><br><span class="line">(<span class="number">1007</span>, <span class="string">&#x27;张飞&#x27;</span>, <span class="string">&#x27;经理&#x27;</span>, <span class="number">1009</span>, <span class="string">&#x27;2001-09-01&#x27;</span>, <span class="number">24500.00</span>, <span class="keyword">NULL</span>, <span class="number">10</span>),</span><br><span class="line">(<span class="number">1008</span>, <span class="string">&#x27;诸葛亮&#x27;</span>, <span class="string">&#x27;分析师&#x27;</span>, <span class="number">1004</span>, <span class="string">&#x27;2007-04-19&#x27;</span>, <span class="number">30000.00</span>, <span class="keyword">NULL</span>, <span class="number">20</span>),</span><br><span class="line">(<span class="number">1009</span>, <span class="string">&#x27;曾阿牛&#x27;</span>, <span class="string">&#x27;董事长&#x27;</span>, <span class="keyword">NULL</span>, <span class="string">&#x27;2001-11-17&#x27;</span>, <span class="number">50000.00</span>, <span class="keyword">NULL</span>, <span class="number">10</span>),</span><br><span class="line">(<span class="number">1010</span>, <span class="string">&#x27;韦一笑&#x27;</span>, <span class="string">&#x27;销售员&#x27;</span>, <span class="number">1006</span>, <span class="string">&#x27;2001-09-08&#x27;</span>, <span class="number">15000.00</span>, <span class="number">0.00</span>, <span class="number">30</span>),</span><br><span class="line">(<span class="number">1011</span>, <span class="string">&#x27;周泰&#x27;</span>, <span class="string">&#x27;文员&#x27;</span>, <span class="number">1008</span>, <span class="string">&#x27;2007-05-23&#x27;</span>, <span class="number">11000.00</span>, <span class="keyword">NULL</span>, <span class="number">20</span>),</span><br><span class="line">(<span class="number">1012</span>, <span class="string">&#x27;程普&#x27;</span>, <span class="string">&#x27;文员&#x27;</span>, <span class="number">1006</span>, <span class="string">&#x27;2001-12-03&#x27;</span>, <span class="number">9500.00</span>, <span class="keyword">NULL</span>, <span class="number">30</span>),</span><br><span class="line">(<span class="number">1013</span>, <span class="string">&#x27;庞统&#x27;</span>, <span class="string">&#x27;分析师&#x27;</span>, <span class="number">1004</span>, <span class="string">&#x27;2001-12-03&#x27;</span>, <span class="number">30000.00</span>, <span class="keyword">NULL</span>, <span class="number">20</span>),</span><br><span class="line">(<span class="number">1014</span>, <span class="string">&#x27;黄盖&#x27;</span>, <span class="string">&#x27;文员&#x27;</span>, <span class="number">1007</span>, <span class="string">&#x27;2002-01-23&#x27;</span>, <span class="number">13000.00</span>, <span class="keyword">NULL</span>, <span class="number">10</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 创建工资等级表并插入数据</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> salgrade (</span><br><span class="line">grade <span class="type">int</span>,  <span class="comment">-- 等级</span></span><br><span class="line">losal <span class="keyword">double</span>,  <span class="comment">-- 最低工资</span></span><br><span class="line">hisal <span class="keyword">double</span>  <span class="comment">-- 最高工资</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 插入数据</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> salgrade <span class="keyword">values</span> (<span class="number">1</span>,<span class="number">7000</span>,<span class="number">12000</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> salgrade <span class="keyword">values</span> (<span class="number">2</span>,<span class="number">12010</span>,<span class="number">14000</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> salgrade <span class="keyword">values</span> (<span class="number">3</span>,<span class="number">14010</span>,<span class="number">20000</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> salgrade <span class="keyword">values</span> (<span class="number">4</span>,<span class="number">20010</span>,<span class="number">30000</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> salgrade <span class="keyword">values</span> (<span class="number">5</span>,<span class="number">30010</span>,<span class="number">99990</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="操作-30"><a href="#操作-30" class="headerlink" title="操作-30"></a>操作</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建视图</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace <span class="keyword">view</span> view1_emp</span><br><span class="line"><span class="keyword">as</span> </span><br><span class="line"><span class="keyword">select</span> ename,job <span class="keyword">from</span> emp; </span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查看表和视图 </span></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">full</span> tables;</span><br></pre></td></tr></table></figure><h3 id="修改视图"><a href="#修改视图" class="headerlink" title="修改视图"></a>修改视图</h3><p>修改视图是指修改数据库中已存在的表的定义。当基本表的某些字段发生改变时，可以通过修改视图来保持视图和基本表之间一致。MySQL中通过<code>CREATE OR REPLACE VIEW</code>语句来创建视图和<code>ALTER VIEW</code>语句来修改视图。</p><h4 id="格式-15"><a href="#格式-15" class="headerlink" title="格式-15"></a>格式</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">view</span> 视图名 <span class="keyword">as</span> <span class="keyword">select</span>语句</span><br></pre></td></tr></table></figure><h4 id="操作-31"><a href="#操作-31" class="headerlink" title="操作-31"></a>操作</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">view</span> view1_emp</span><br><span class="line"><span class="keyword">as</span> </span><br><span class="line"><span class="keyword">select</span> a.deptno,a.dname,a.loc,b.ename,b.sal <span class="keyword">from</span> dept a, emp b <span class="keyword">where</span> a.deptno <span class="operator">=</span> b.deptno;</span><br></pre></td></tr></table></figure><h3 id="更新视图"><a href="#更新视图" class="headerlink" title="更新视图"></a>更新视图</h3><h4 id="介绍-16"><a href="#介绍-16" class="headerlink" title="介绍-16"></a>介绍</h4><blockquote><p>某些视图是可更新的。也就是说，可以在UPDATE、DELETE或INSERT等语句中使用它们，以更新基表的内容。对于可更新的视图，在视图中的行和基表中的行之间必须具有一对一的关系。如果视图包含下述结构中的任何一种，那么它就是不可更新的：</p><blockquote><ul><li>聚合函数（SUM(), MIN(), MAX(), COUNT()等）</li><li>DISTINCT</li><li>GROUP BY</li><li>ORDER BY</li><li>HAVING</li><li>UNION或UNION ALL</li><li>位于选择列表中的子查询</li><li>JOIN</li><li>FROM子句中的不可更新视图</li><li>WHERE子句中的子查询，引用FROM子句中的表。</li><li>仅引用文字值（在该情况下，没有要更新的基本表）</li></ul></blockquote></blockquote><p><strong>视图中虽然可以更新数据，但是有很多的限制。一般情况下，最好将视图作为查询数据的虚拟表，而不要通过视图更新数据。因为，使用视图更新数据时，如果没有全面考虑在视图中更新数据的限制，就可能会造成数据更新失败。</strong></p><h4 id="操作-32"><a href="#操作-32" class="headerlink" title="操作-32"></a>操作</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--  ---------更新视图-------</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace <span class="keyword">view</span> view1_emp</span><br><span class="line"><span class="keyword">as</span> </span><br><span class="line"><span class="keyword">select</span> ename,job <span class="keyword">from</span> emp;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">update</span> view1_emp <span class="keyword">set</span> ename <span class="operator">=</span> <span class="string">&#x27;周瑜&#x27;</span> <span class="keyword">where</span> ename <span class="operator">=</span> <span class="string">&#x27;鲁肃&#x27;</span>;  <span class="comment">-- 可以修改</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> view1_emp <span class="keyword">values</span>(<span class="string">&#x27;孙权&#x27;</span>,<span class="string">&#x27;文员&#x27;</span>);  <span class="comment">-- 不可以插入</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------视图包含聚合函数不可更新--------------</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace <span class="keyword">view</span> view2_emp</span><br><span class="line"><span class="keyword">as</span> </span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) cnt <span class="keyword">from</span> emp;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> view2_emp <span class="keyword">values</span>(<span class="number">100</span>);</span><br><span class="line"><span class="keyword">update</span> view2_emp <span class="keyword">set</span> cnt <span class="operator">=</span> <span class="number">100</span>; </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------视图包含distinct不可更新---------</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace <span class="keyword">view</span> view3_emp</span><br><span class="line"><span class="keyword">as</span> </span><br><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> job <span class="keyword">from</span> emp;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> view3_emp <span class="keyword">values</span>(<span class="string">&#x27;财务&#x27;</span>);</span><br><span class="line"> </span><br><span class="line"><span class="comment">-- ----------视图包含goup by 、having不可更新------------------</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace <span class="keyword">view</span> view4_emp</span><br><span class="line"><span class="keyword">as</span> </span><br><span class="line"><span class="keyword">select</span> deptno ,<span class="built_in">count</span>(<span class="operator">*</span>) cnt <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno <span class="keyword">having</span>  cnt <span class="operator">&gt;</span> <span class="number">2</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> view4_emp <span class="keyword">values</span>(<span class="number">30</span>,<span class="number">100</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------视图包含union或者union all不可更新----------------</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace <span class="keyword">view</span> view5_emp</span><br><span class="line"><span class="keyword">as</span> </span><br><span class="line"><span class="keyword">select</span> empno,ename <span class="keyword">from</span> emp <span class="keyword">where</span> empno <span class="operator">&lt;=</span> <span class="number">1005</span></span><br><span class="line"><span class="keyword">union</span> </span><br><span class="line"><span class="keyword">select</span> empno,ename <span class="keyword">from</span> emp <span class="keyword">where</span> empno <span class="operator">&gt;</span> <span class="number">1005</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> view5_emp <span class="keyword">values</span>(<span class="number">1015</span>,<span class="string">&#x27;韦小宝&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- -------------------视图包含子查询不可更新--------------------</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace <span class="keyword">view</span> view6_emp</span><br><span class="line"><span class="keyword">as</span> </span><br><span class="line"><span class="keyword">select</span> empno,ename,sal <span class="keyword">from</span> emp <span class="keyword">where</span> sal <span class="operator">=</span> (<span class="keyword">select</span> <span class="built_in">max</span>(sal) <span class="keyword">from</span> emp);</span><br><span class="line"> </span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> view6_emp <span class="keyword">values</span>(<span class="number">1015</span>,<span class="string">&#x27;韦小宝&#x27;</span>,<span class="number">30000</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------视图包含join不可更新-----------------</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace <span class="keyword">view</span> view7_emp</span><br><span class="line"><span class="keyword">as</span> </span><br><span class="line"><span class="keyword">select</span> dname,ename,sal <span class="keyword">from</span> emp a <span class="keyword">join</span>  dept b  <span class="keyword">on</span> a.deptno <span class="operator">=</span> b.deptno;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> view7_emp(dname,ename,sal) <span class="keyword">values</span>(<span class="string">&#x27;行政部&#x27;</span>,<span class="string">&#x27;韦小宝&#x27;</span>,<span class="number">30000</span>);</span><br><span class="line"> </span><br><span class="line"><span class="comment">-- --------------------视图包含常量文字值不可更新-------------------</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace <span class="keyword">view</span> view8_emp</span><br><span class="line"><span class="keyword">as</span> </span><br><span class="line"><span class="keyword">select</span> <span class="string">&#x27;行政部&#x27;</span> dname,<span class="string">&#x27;杨过&#x27;</span>  ename;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> view8_emp <span class="keyword">values</span>(<span class="string">&#x27;行政部&#x27;</span>,<span class="string">&#x27;韦小宝&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="其他操作"><a href="#其他操作" class="headerlink" title="其他操作"></a>其他操作</h3><h4 id="重命名视图"><a href="#重命名视图" class="headerlink" title="重命名视图"></a>重命名视图</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- rename table 视图名 to 新视图名; </span></span><br><span class="line">rename <span class="keyword">table</span> view1_emp <span class="keyword">to</span> my_view1</span><br></pre></td></tr></table></figure><h4 id="删除视图"><a href="#删除视图" class="headerlink" title="删除视图"></a>删除视图</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- drop view 视图名[,视图名…];</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">view</span> if <span class="keyword">exists</span> view_student;</span><br></pre></td></tr></table></figure><p><strong>删除视图时，只能删除视图的定义，不会删除数据。</strong></p><h3 id="练习-3"><a href="#练习-3" class="headerlink" title="练习-3"></a>练习</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1：查询部门平均薪水最高的部门名称</span></span><br><span class="line"><span class="comment">-- 方式一：视图</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> avg_sal <span class="keyword">as</span> <span class="keyword">select</span> deptno,<span class="built_in">avg</span>(sal) <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno <span class="keyword">order</span> <span class="keyword">by</span> <span class="built_in">avg</span>(sal) <span class="keyword">desc</span> limit <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> dname <span class="keyword">from</span> dept  a ,avg_sal b <span class="keyword">where</span> a.deptno <span class="operator">=</span> b.deptno;  </span><br><span class="line"> </span><br><span class="line"><span class="comment">-- 方式二：子查询</span></span><br><span class="line"><span class="keyword">select</span> dname <span class="keyword">from</span> dept  a ,(<span class="keyword">select</span> deptno,<span class="built_in">avg</span>(sal) <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno <span class="keyword">order</span> <span class="keyword">by</span> <span class="built_in">avg</span>(sal) <span class="keyword">desc</span> limit <span class="number">1</span>) b </span><br><span class="line"><span class="keyword">where</span> a.deptno <span class="operator">=</span> b.deptno;   </span><br><span class="line"> </span><br><span class="line"><span class="comment">-- 2：查询员工比所属领导薪资高的部门名、员工名、员工领导编号</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> dept x,</span><br><span class="line">(<span class="keyword">select</span> a.ename aname ,a.sal asal,b.ename bname,b.sal bsal,a.deptno</span><br><span class="line"><span class="keyword">from</span> emp a, emp b </span><br><span class="line"><span class="keyword">where</span> a.mgr <span class="operator">=</span> b.empno <span class="keyword">and</span> a.sal <span class="operator">&gt;</span> b.sal) y</span><br><span class="line"><span class="keyword">where</span> x.deptno <span class="operator">=</span> y.deptno;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3：查询工资等级为4级，2000年以后入职的工作地点为北京的员工编号、姓名和工资，并查询出薪资在前三名的员工信息</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> xxx</span><br><span class="line"><span class="keyword">as</span>       </span><br><span class="line"><span class="keyword">SELECT</span> e.empno,e.ename,e.sal,e.hiredate</span><br><span class="line"><span class="keyword">FROM</span> emp e,dept d,salgrade s</span><br><span class="line"><span class="keyword">WHERE</span> (e.sal <span class="keyword">BETWEEN</span>  losal <span class="keyword">AND</span> hisal) <span class="keyword">AND</span> s.GRADE <span class="operator">=</span> <span class="number">4</span></span><br><span class="line"><span class="keyword">AND</span> <span class="keyword">year</span>(e.hiredate) <span class="operator">&gt;</span> <span class="string">&#x27;2000&#x27;</span></span><br><span class="line"><span class="keyword">AND</span> d.loc <span class="operator">=</span> <span class="string">&#x27;北京&#x27;</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> </span><br><span class="line">(</span><br><span class="line"><span class="keyword">select</span> </span><br><span class="line"> <span class="operator">*</span>,</span><br><span class="line"> <span class="built_in">dense_rank</span>() <span class="keyword">over</span>(<span class="keyword">order</span> <span class="keyword">by</span> sal <span class="keyword">desc</span> ) rn</span><br><span class="line"><span class="keyword">from</span> xxx</span><br><span class="line">) t</span><br><span class="line"><span class="keyword">where</span> t.rn <span class="operator">&lt;=</span><span class="number">3</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="MySQL的存储过程"><a href="#MySQL的存储过程" class="headerlink" title="MySQL的存储过程"></a>MySQL的存储过程</h2><h3 id="介绍-17"><a href="#介绍-17" class="headerlink" title="介绍-17"></a>介绍</h3><blockquote><ol><li><strong>什么是存储过程</strong></li></ol><ul><li>MySQL 5.0 版本开始支持存储过程。</li><li>简单的说，存储过程就是一组SQL语句集，功能强大，可以实现一些比较复杂的逻辑功能，类似于JAVA语言中的方法；</li><li>存储过就是数据库 SQL 语言层面的代码封装与重用。</li></ul></blockquote><blockquote><ol start="2"><li><strong>有哪些特性</strong></li></ol><ul><li>有输入输出参数，可以声明变量，有if/else, case,while等控制语句，通过编写存储过程，可以实现复杂的逻辑功能；</li><li>函数的普遍特性：模块化，封装，代码复用；</li><li>速度快，只有首次执行需经过编译和优化步骤，后续被调用可以直接执行，省去以上步骤；</li></ul></blockquote><h3 id="入门案例"><a href="#入门案例" class="headerlink" title="入门案例"></a>入门案例</h3><h4 id="格式-16"><a href="#格式-16" class="headerlink" title="格式-16"></a>格式</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">delimiter 自定义结束符号</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> 储存名([ <span class="keyword">in</span> ,<span class="keyword">out</span> ,<span class="keyword">inout</span> ] 参数名 数据类形...)</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">sql</span>语句</span><br><span class="line"><span class="keyword">end</span> 自定义的结束符合</span><br><span class="line">delimiter ;</span><br></pre></td></tr></table></figure><h4 id="操作-数据准备"><a href="#操作-数据准备" class="headerlink" title="操作-数据准备"></a>操作-数据准备</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1：创建数据库和表 </span></span><br><span class="line"><span class="keyword">create</span> database mydb7_procedure; </span><br><span class="line"></span><br><span class="line"><span class="comment">-- 选择mydb7_procedure数据库</span></span><br><span class="line">use mydb7_procedure;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 创建部门表并插入数据</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> dept(</span><br><span class="line">deptno <span class="type">int</span> <span class="keyword">primary</span> key,</span><br><span class="line">  dname <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">loc <span class="type">varchar</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> dept <span class="keyword">values</span>(<span class="number">10</span>, <span class="string">&#x27;教研部&#x27;</span>,<span class="string">&#x27;北京&#x27;</span>),</span><br><span class="line">(<span class="number">20</span>, <span class="string">&#x27;学工部&#x27;</span>,<span class="string">&#x27;上海&#x27;</span>),</span><br><span class="line">(<span class="number">30</span>, <span class="string">&#x27;销售部&#x27;</span>,<span class="string">&#x27;广州&#x27;</span>),</span><br><span class="line">(<span class="number">40</span>, <span class="string">&#x27;财务部&#x27;</span>,<span class="string">&#x27;武汉&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 创建员工表并插入数据</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> emp(</span><br><span class="line">empno <span class="type">int</span> <span class="keyword">primary</span> key,</span><br><span class="line">ename <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">job <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">mgr <span class="type">int</span>,</span><br><span class="line">hiredate <span class="type">date</span>,</span><br><span class="line">sal <span class="type">numeric</span>(<span class="number">8</span>,<span class="number">2</span>),</span><br><span class="line">comm <span class="type">numeric</span>(<span class="number">8</span>, <span class="number">2</span>),</span><br><span class="line">deptno <span class="type">int</span>,</span><br><span class="line"><span class="comment">-- FOREIGN KEY (mgr) REFERENCES emp(empno),</span></span><br><span class="line"><span class="keyword">FOREIGN</span> KEY (deptno) <span class="keyword">REFERENCES</span> dept(deptno) <span class="keyword">ON</span> <span class="keyword">DELETE</span> <span class="keyword">SET</span> <span class="keyword">NULL</span> <span class="keyword">ON</span> <span class="keyword">UPDATE</span> CASCADE</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp <span class="keyword">VALUES</span></span><br><span class="line">(<span class="number">1001</span>, <span class="string">&#x27;甘宁&#x27;</span>, <span class="string">&#x27;文员&#x27;</span>, <span class="number">1013</span>, <span class="string">&#x27;2000-12-17&#x27;</span>, <span class="number">8000.00</span>, <span class="keyword">NULL</span>, <span class="number">20</span>),</span><br><span class="line">(<span class="number">1002</span>, <span class="string">&#x27;黛绮丝&#x27;</span>, <span class="string">&#x27;销售员&#x27;</span>, <span class="number">1006</span>, <span class="string">&#x27;2001-02-20&#x27;</span>, <span class="number">16000.00</span>, <span class="number">3000.00</span>, <span class="number">30</span>),</span><br><span class="line">(<span class="number">1003</span>, <span class="string">&#x27;殷天正&#x27;</span>, <span class="string">&#x27;销售员&#x27;</span>, <span class="number">1006</span>, <span class="string">&#x27;2001-02-22&#x27;</span>, <span class="number">12500.00</span>, <span class="number">5000.00</span>, <span class="number">30</span>),</span><br><span class="line">(<span class="number">1004</span>, <span class="string">&#x27;刘备&#x27;</span>, <span class="string">&#x27;经理&#x27;</span>, <span class="number">1009</span>, <span class="string">&#x27;2001-4-02&#x27;</span>, <span class="number">29750.00</span>, <span class="keyword">NULL</span>, <span class="number">20</span>),</span><br><span class="line">(<span class="number">1005</span>, <span class="string">&#x27;谢逊&#x27;</span>, <span class="string">&#x27;销售员&#x27;</span>, <span class="number">1006</span>, <span class="string">&#x27;2001-9-28&#x27;</span>, <span class="number">12500.00</span>, <span class="number">14000.00</span>, <span class="number">30</span>),</span><br><span class="line">(<span class="number">1006</span>, <span class="string">&#x27;关羽&#x27;</span>, <span class="string">&#x27;经理&#x27;</span>, <span class="number">1009</span>, <span class="string">&#x27;2001-05-01&#x27;</span>, <span class="number">28500.00</span>, <span class="keyword">NULL</span>, <span class="number">30</span>),</span><br><span class="line">(<span class="number">1007</span>, <span class="string">&#x27;张飞&#x27;</span>, <span class="string">&#x27;经理&#x27;</span>, <span class="number">1009</span>, <span class="string">&#x27;2001-09-01&#x27;</span>, <span class="number">24500.00</span>, <span class="keyword">NULL</span>, <span class="number">10</span>),</span><br><span class="line">(<span class="number">1008</span>, <span class="string">&#x27;诸葛亮&#x27;</span>, <span class="string">&#x27;分析师&#x27;</span>, <span class="number">1004</span>, <span class="string">&#x27;2007-04-19&#x27;</span>, <span class="number">30000.00</span>, <span class="keyword">NULL</span>, <span class="number">20</span>),</span><br><span class="line">(<span class="number">1009</span>, <span class="string">&#x27;曾阿牛&#x27;</span>, <span class="string">&#x27;董事长&#x27;</span>, <span class="keyword">NULL</span>, <span class="string">&#x27;2001-11-17&#x27;</span>, <span class="number">50000.00</span>, <span class="keyword">NULL</span>, <span class="number">10</span>),</span><br><span class="line">(<span class="number">1010</span>, <span class="string">&#x27;韦一笑&#x27;</span>, <span class="string">&#x27;销售员&#x27;</span>, <span class="number">1006</span>, <span class="string">&#x27;2001-09-08&#x27;</span>, <span class="number">15000.00</span>, <span class="number">0.00</span>, <span class="number">30</span>),</span><br><span class="line">(<span class="number">1011</span>, <span class="string">&#x27;周泰&#x27;</span>, <span class="string">&#x27;文员&#x27;</span>, <span class="number">1008</span>, <span class="string">&#x27;2007-05-23&#x27;</span>, <span class="number">11000.00</span>, <span class="keyword">NULL</span>, <span class="number">20</span>),</span><br><span class="line">(<span class="number">1012</span>, <span class="string">&#x27;程普&#x27;</span>, <span class="string">&#x27;文员&#x27;</span>, <span class="number">1006</span>, <span class="string">&#x27;2001-12-03&#x27;</span>, <span class="number">9500.00</span>, <span class="keyword">NULL</span>, <span class="number">30</span>),</span><br><span class="line">(<span class="number">1013</span>, <span class="string">&#x27;庞统&#x27;</span>, <span class="string">&#x27;分析师&#x27;</span>, <span class="number">1004</span>, <span class="string">&#x27;2001-12-03&#x27;</span>, <span class="number">30000.00</span>, <span class="keyword">NULL</span>, <span class="number">20</span>),</span><br><span class="line">(<span class="number">1014</span>, <span class="string">&#x27;黄盖&#x27;</span>, <span class="string">&#x27;文员&#x27;</span>, <span class="number">1007</span>, <span class="string">&#x27;2002-01-23&#x27;</span>, <span class="number">13000.00</span>, <span class="keyword">NULL</span>, <span class="number">10</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 创建工资等级表并插入数据</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> salgrade (</span><br><span class="line">grade <span class="type">int</span>,  <span class="comment">-- 等级</span></span><br><span class="line">losal <span class="keyword">double</span>,  <span class="comment">-- 最低工资</span></span><br><span class="line">hisal <span class="keyword">double</span>  <span class="comment">-- 最高工资</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 插入数据</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> salgrade <span class="keyword">values</span> (<span class="number">1</span>,<span class="number">7000</span>,<span class="number">12000</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> salgrade <span class="keyword">values</span> (<span class="number">2</span>,<span class="number">12010</span>,<span class="number">14000</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> salgrade <span class="keyword">values</span> (<span class="number">3</span>,<span class="number">14010</span>,<span class="number">20000</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> salgrade <span class="keyword">values</span> (<span class="number">4</span>,<span class="number">20010</span>,<span class="number">30000</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> salgrade <span class="keyword">values</span> (<span class="number">5</span>,<span class="number">30010</span>,<span class="number">99990</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2：创建存储过程</span></span><br><span class="line">delimiter $$</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> proc01()</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">select</span> empno,ename <span class="keyword">from</span> emp; </span><br><span class="line"><span class="keyword">end</span>  $$</span><br><span class="line">delimiter ;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 调用存储过程</span></span><br><span class="line"><span class="keyword">call</span> proc01(); </span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="MySQL操作-变量定义"><a href="#MySQL操作-变量定义" class="headerlink" title="MySQL操作-变量定义"></a>MySQL操作-变量定义</h3><h4 id="局部变量"><a href="#局部变量" class="headerlink" title="局部变量"></a>局部变量</h4><h5 id="格式-17"><a href="#格式-17" class="headerlink" title="格式-17"></a>格式</h5><blockquote><p>用户自定义，在begin/end块中有效</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">语法： 声明变量 <span class="keyword">declare</span> var_name type [<span class="keyword">default</span> var_value]; </span><br><span class="line">举例：<span class="keyword">declare</span> nickname <span class="type">varchar</span>(<span class="number">32</span>);</span><br></pre></td></tr></table></figure><h5 id="操作-33"><a href="#操作-33" class="headerlink" title="操作-33"></a>操作</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 定义局部变量</span></span><br><span class="line">delimiter $$</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> proc02()</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">declare</span> var_name01 <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">default</span> <span class="string">&#x27;aaa&#x27;</span>;  <span class="comment">-- 定义局部变量</span></span><br><span class="line">    <span class="keyword">set</span> var_name01 <span class="operator">=</span> <span class="string">&#x27;zhangsan&#x27;</span>;   <span class="comment">-- 给变量赋值</span></span><br><span class="line">    <span class="keyword">select</span> var_name01;   <span class="comment">-- 输出变量的值</span></span><br><span class="line"><span class="keyword">end</span> $$</span><br><span class="line">delimiter ;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 调用存储过程</span></span><br><span class="line"><span class="keyword">call</span> proc02();</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>MySQL 中还可以使用 SELECT…INTO 语句为变量赋值。其基本语法如下：</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 格式</span></span><br><span class="line"><span class="keyword">select</span> col_name [...] <span class="keyword">into</span> var_name[,...] </span><br><span class="line"><span class="keyword">from</span> table_name wehre <span class="keyword">condition</span> </span><br><span class="line"></span><br><span class="line">其中：</span><br><span class="line">col_name 参数表示查询的字段名称；</span><br><span class="line">var_name 参数是变量的名称；</span><br><span class="line">table_name 参数指表的名称；</span><br><span class="line"><span class="keyword">condition</span> 参数指查询条件。</span><br><span class="line"></span><br><span class="line">🌟注意：当将查询结果赋值给变量时，该查询语句的返回结果只能是单行单列。</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 例子</span></span><br><span class="line">delimiter $$</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> proc03()</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">declare</span> my_ename <span class="type">varchar</span>(<span class="number">20</span>) ;</span><br><span class="line">  <span class="keyword">select</span> ename <span class="keyword">into</span> my_ename <span class="keyword">from</span> emp <span class="keyword">where</span> empno<span class="operator">=</span><span class="number">1001</span>;</span><br><span class="line">  <span class="keyword">select</span> my_ename;</span><br><span class="line"><span class="keyword">end</span> $$</span><br><span class="line">delimiter ;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 调用存储过程</span></span><br><span class="line"><span class="keyword">call</span> proc03();</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="用户变量"><a href="#用户变量" class="headerlink" title="用户变量"></a>用户变量</h4><h5 id="格式-18"><a href="#格式-18" class="headerlink" title="格式-18"></a>格式</h5><blockquote><p>用户自定义，当前会话（连接）有效。类比java的成员变量</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">语法： </span><br><span class="line"><span class="variable">@var_name</span></span><br><span class="line">不需要提前声明，使用即声明</span><br></pre></td></tr></table></figure><h5 id="操作-34"><a href="#操作-34" class="headerlink" title="操作-34"></a>操作</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">delimiter $$</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> proc04()</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">set</span> <span class="variable">@var_name01</span>  <span class="operator">=</span> <span class="string">&#x27;ZS&#x27;</span>;</span><br><span class="line"><span class="keyword">end</span> $$</span><br><span class="line">delimiter;</span><br><span class="line"><span class="keyword">call</span> proc04() ;</span><br><span class="line"><span class="keyword">select</span> <span class="variable">@var_name01</span>  ;  <span class="comment">--可以看到结果</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="系统变量"><a href="#系统变量" class="headerlink" title="系统变量"></a>系统变量</h4><h5 id="介绍-18"><a href="#介绍-18" class="headerlink" title="介绍-18"></a>介绍</h5><blockquote><ol><li>系统变量又分为全局变量与会话变量。</li><li>全局变量在MYSQL启动的时候由服务器自动将它们初始化为默认值，这些默认值可以通过更改my.ini这个文件来更改。</li><li>会话变量在每次建立一个新的连接的时候，由MYSQL来初始化。MYSQL会将当前所有全局变量的值复制一份。来做为会话变量。</li><li>也就是说，如果在建立会话以后，没有手动更改过会话变量与全局变量的值，那所有这些变量的值都是一样的。</li><li>全局变量与会话变量的区别就在于，对全局变量的修改会影响到整个服务器，但是对会话变量的修改，只会影响到当前的会话（也就是当前的数据库连接）。</li><li>有些系统变量的值是可以利用语句来动态进行更改的，但是有些系统变量的值却是只读的，对于那些可以更改的系统变量，我们可以利用set语句进行更改。</li></ol></blockquote><h4 id="系统变量-全局变量"><a href="#系统变量-全局变量" class="headerlink" title="系统变量-全局变量"></a>系统变量-全局变量</h4><blockquote><p>由系统提供，在整个数据库有效。</p></blockquote><h5 id="格式-19"><a href="#格式-19" class="headerlink" title="格式-19"></a>格式</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">@<span class="variable">@global</span>.var_name</span><br></pre></td></tr></table></figure><h5 id="操作-35"><a href="#操作-35" class="headerlink" title="操作-35"></a>操作</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查看全局变量 </span></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">global</span> variables; </span><br><span class="line"><span class="comment">-- 查看某全局变量 </span></span><br><span class="line"><span class="keyword">select</span> @<span class="variable">@global</span>.auto_increment_increment; </span><br><span class="line"><span class="comment">-- 修改全局变量的值 </span></span><br><span class="line"><span class="keyword">set</span> <span class="keyword">global</span> sort_buffer_size <span class="operator">=</span> <span class="number">40000</span>; </span><br><span class="line"><span class="keyword">set</span> @<span class="variable">@global</span>.sort_buffer_size <span class="operator">=</span> <span class="number">40000</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="系统变量-会话变量"><a href="#系统变量-会话变量" class="headerlink" title="系统变量-会话变量"></a>系统变量-会话变量</h4><blockquote><p>由系统提供，当前会话（连接）有效</p></blockquote><h5 id="格式-20"><a href="#格式-20" class="headerlink" title="格式-20"></a>格式</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">@<span class="variable">@session</span>.var_name</span><br></pre></td></tr></table></figure><h5 id="操作-36"><a href="#操作-36" class="headerlink" title="操作-36"></a>操作</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查看会话变量</span></span><br><span class="line"><span class="keyword">show</span> session variables;</span><br><span class="line"><span class="comment">-- 查看某会话变量 </span></span><br><span class="line"><span class="keyword">select</span> @<span class="variable">@session</span>.auto_increment_increment;</span><br><span class="line"><span class="comment">-- 修改会话变量的值</span></span><br><span class="line"><span class="keyword">set</span> session sort_buffer_size <span class="operator">=</span> <span class="number">50000</span>; </span><br><span class="line"><span class="keyword">set</span> @<span class="variable">@session</span>.sort_buffer_size <span class="operator">=</span> <span class="number">50000</span> ;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="存储过程传参-in"><a href="#存储过程传参-in" class="headerlink" title="存储过程传参-in"></a>存储过程传参-in</h3><blockquote><p>in 表示传入的参数， 可以传入数值或者变量，即使传入变量，并不会更改变量的值，可以内部更改，仅仅作用在函数范围内。</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 封装有参数的存储过程，传入员工编号，查找员工信息</span></span><br><span class="line">delimiter $$</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> dec_param01(<span class="keyword">in</span> param_empno <span class="type">varchar</span>(<span class="number">20</span>))</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">        <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> empno <span class="operator">=</span> param_empno;</span><br><span class="line"><span class="keyword">end</span> $$</span><br><span class="line"> </span><br><span class="line">delimiter ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">call</span> dec_param01(<span class="string">&#x27;1001&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 案例</span></span><br><span class="line"><span class="comment">-- 封装有参数的存储过程，可以通过传入部门名和薪资，查询指定部门，并且薪资大于指定值的员工信息</span></span><br><span class="line">delimiter $$</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> dec_param0x(<span class="keyword">in</span> dname <span class="type">varchar</span>(<span class="number">50</span>),<span class="keyword">in</span> sal <span class="type">decimal</span>(<span class="number">7</span>,<span class="number">2</span>))</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">        <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> dept a, emp b <span class="keyword">where</span> b.sal <span class="operator">&gt;</span> sal <span class="keyword">and</span> a.dname <span class="operator">=</span> dname;</span><br><span class="line"><span class="keyword">end</span> $$</span><br><span class="line"> </span><br><span class="line">delimiter ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">call</span> dec_param0x(<span class="string">&#x27;学工部&#x27;</span>,<span class="number">20000</span>);</span><br><span class="line"><span class="keyword">call</span> dec_param0x(<span class="string">&#x27;教研部&#x27;</span>,<span class="number">20000</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="存储过程传参-out"><a href="#存储过程传参-out" class="headerlink" title="存储过程传参-out"></a>存储过程传参-out</h3><blockquote><p>out 表示从存储过程内部传值给调用者</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- ---------传出参数：out---------------------------------</span></span><br><span class="line">use mydb7_procedure;</span><br><span class="line"><span class="comment">-- 封装有参数的存储过程，传入员工编号，返回员工名字</span></span><br><span class="line">delimiter $$</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> proc08(<span class="keyword">in</span> empno <span class="type">int</span> ,<span class="keyword">out</span> out_ename <span class="type">varchar</span>(<span class="number">50</span>) )</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">select</span> ename <span class="keyword">into</span> out_ename <span class="keyword">from</span> emp <span class="keyword">where</span> emp.empno <span class="operator">=</span> empno;</span><br><span class="line"><span class="keyword">end</span> $$</span><br><span class="line"> </span><br><span class="line">delimiter ;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">call</span> proc08(<span class="number">1001</span>, <span class="variable">@o_ename</span>);</span><br><span class="line"><span class="keyword">select</span> <span class="variable">@o_ename</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 案例</span></span><br><span class="line"><span class="comment">-- 封装有参数的存储过程，传入员工编号，返回员工名字和薪资</span></span><br><span class="line">delimiter $$</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> proc09(<span class="keyword">in</span> empno <span class="type">int</span> ,<span class="keyword">out</span> out_ename <span class="type">varchar</span>(<span class="number">50</span>) ,<span class="keyword">out</span> out_sal <span class="type">decimal</span>(<span class="number">7</span>,<span class="number">2</span>))</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">select</span> ename,sal <span class="keyword">into</span> out_ename,out_sal <span class="keyword">from</span> emp <span class="keyword">where</span> emp.empno <span class="operator">=</span> empno;</span><br><span class="line"><span class="keyword">end</span> $$</span><br><span class="line"> </span><br><span class="line">delimiter ;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">call</span> proc09(<span class="number">1001</span>, <span class="variable">@o_dname</span>,<span class="variable">@o_sal</span>);</span><br><span class="line"><span class="keyword">select</span> <span class="variable">@o_dname</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="variable">@o_sal</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="存储过程传参-inout"><a href="#存储过程传参-inout" class="headerlink" title="存储过程传参-inout"></a>存储过程传参-inout</h3><blockquote><p>inout 表示从外部传入的参数经过修改后可以返回的变量，既可以使用传入变量的值也可以修改变量的值（即使函数执行完）</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 传入员工名，拼接部门号，传入薪资，求出年薪</span></span><br><span class="line"><span class="comment">-- 关羽 ----&gt; 30_关羽</span></span><br><span class="line">delimiter $$</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> proc10(<span class="keyword">inout</span> inout_ename <span class="type">varchar</span>(<span class="number">50</span>),<span class="keyword">inout</span> inout_sal <span class="type">int</span>)</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">select</span>  concat(deptno,&quot;_&quot;,inout_ename) <span class="keyword">into</span> inout_ename <span class="keyword">from</span> emp <span class="keyword">where</span> ename <span class="operator">=</span> inout_ename;</span><br><span class="line">  <span class="keyword">set</span> inout_sal <span class="operator">=</span> inout_sal <span class="operator">*</span> <span class="number">12</span>;  </span><br><span class="line"><span class="keyword">end</span> $$</span><br><span class="line">delimiter ;</span><br><span class="line"><span class="keyword">set</span> <span class="variable">@inout_ename</span> <span class="operator">=</span> <span class="string">&#x27;关羽&#x27;</span>;</span><br><span class="line"><span class="keyword">set</span> <span class="variable">@inout_sal</span> <span class="operator">=</span> <span class="number">3000</span>;</span><br><span class="line"><span class="keyword">call</span> proc10(<span class="variable">@inout_ename</span>, <span class="variable">@inout_sal</span>) ;</span><br><span class="line"><span class="keyword">select</span> <span class="variable">@inout_ename</span> ;</span><br><span class="line"><span class="keyword">select</span> <span class="variable">@inout_sal</span> ;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p class='item-img' data-src='/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/image-20241018155744214.png'><img src="/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/image-20241018155744214.png" alt="inout"></p><h3 id="存储过程传参-in，out-inout"><a href="#存储过程传参-in，out-inout" class="headerlink" title="存储过程传参-in，out-inout"></a>存储过程传参-in，out, inout</h3><h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4><blockquote><ul><li><p>in 输入参数，意思说你的参数要传到存过过程的过程里面去，在存储过程中修改该参数的值不能被返回</p></li><li><p>out 输出参数:该值可在存储过程内部被改变，并向外输出</p></li><li><p>inout 输入输出参数，既能输入一个值又能传出来一个值)</p></li></ul></blockquote><h3 id="流程控制-判断"><a href="#流程控制-判断" class="headerlink" title="流程控制-判断"></a>流程控制-判断</h3><h4 id="格式-21"><a href="#格式-21" class="headerlink" title="格式-21"></a>格式</h4><blockquote><p>IF语句包含多个条件判断，根据结果为TRUE、FALSE执行语句，与编程语言中的if、else if、else语法类似，其语法格式如下：</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法</span></span><br><span class="line">if search_condition_1 <span class="keyword">then</span> statement_list_1</span><br><span class="line">    [elseif search_condition_2 <span class="keyword">then</span> statement_list_2] ...</span><br><span class="line">    [<span class="keyword">else</span> statement_list_n]</span><br><span class="line"><span class="keyword">end</span> if</span><br></pre></td></tr></table></figure><h4 id="操作-37"><a href="#操作-37" class="headerlink" title="操作-37"></a>操作</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 输入学生的成绩，来判断成绩的级别：</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  score &lt; 60 :不及格</span></span><br><span class="line"><span class="comment">  score &gt;= 60  , score &lt;80 :及格</span></span><br><span class="line"><span class="comment">    score &gt;= 80 , score &lt; 90 :良好</span></span><br><span class="line"><span class="comment">    score &gt;= 90 , score &lt;= 100 :优秀</span></span><br><span class="line"><span class="comment">    score &gt; 100 :成绩错误</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">delimiter  $$</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> proc_12_if(<span class="keyword">in</span> score <span class="type">int</span>)</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  if score <span class="operator">&lt;</span> <span class="number">60</span> </span><br><span class="line">      <span class="keyword">then</span></span><br><span class="line">          <span class="keyword">select</span> <span class="string">&#x27;不及格&#x27;</span>;</span><br><span class="line">    elseif  score <span class="operator">&lt;</span> <span class="number">80</span></span><br><span class="line">      <span class="keyword">then</span></span><br><span class="line">          <span class="keyword">select</span> <span class="string">&#x27;及格&#x27;</span> ;</span><br><span class="line">    elseif score <span class="operator">&gt;=</span> <span class="number">80</span> <span class="keyword">and</span> score <span class="operator">&lt;</span> <span class="number">90</span></span><br><span class="line">       <span class="keyword">then</span> </span><br><span class="line">           <span class="keyword">select</span> <span class="string">&#x27;良好&#x27;</span>;</span><br><span class="line">  elseif score <span class="operator">&gt;=</span> <span class="number">90</span> <span class="keyword">and</span> score <span class="operator">&lt;=</span> <span class="number">100</span></span><br><span class="line">       <span class="keyword">then</span> </span><br><span class="line">           <span class="keyword">select</span> <span class="string">&#x27;优秀&#x27;</span>;</span><br><span class="line">     <span class="keyword">else</span></span><br><span class="line">       <span class="keyword">select</span> <span class="string">&#x27;成绩错误&#x27;</span>;</span><br><span class="line">  <span class="keyword">end</span> if;</span><br><span class="line"><span class="keyword">end</span> $$</span><br><span class="line">delimiter  ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">call</span> proc_12_if(<span class="number">120</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 输入员工的名字，判断工资的情况。</span></span><br><span class="line">delimiter $$</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> proc12_if(<span class="keyword">in</span> in_ename <span class="type">varchar</span>(<span class="number">50</span>))</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">declare</span> <span class="keyword">result</span> <span class="type">varchar</span>(<span class="number">20</span>);</span><br><span class="line">    <span class="keyword">declare</span> var_sal <span class="type">decimal</span>(<span class="number">7</span>,<span class="number">2</span>);</span><br><span class="line">        <span class="keyword">select</span> sal <span class="keyword">into</span>  var_sal <span class="keyword">from</span> emp <span class="keyword">where</span> ename <span class="operator">=</span> in_ename;</span><br><span class="line">    if var_sal <span class="operator">&lt;</span> <span class="number">10000</span> </span><br><span class="line">        <span class="keyword">then</span> <span class="keyword">set</span> <span class="keyword">result</span> <span class="operator">=</span> <span class="string">&#x27;试用薪资&#x27;</span>;</span><br><span class="line">    elseif var_sal <span class="operator">&lt;</span> <span class="number">20000</span></span><br><span class="line">        <span class="keyword">then</span> <span class="keyword">set</span> <span class="keyword">result</span> <span class="operator">=</span> <span class="string">&#x27;转正薪资&#x27;</span>;</span><br><span class="line">    elseif var_sal <span class="operator">&gt;=</span> <span class="number">20000</span></span><br><span class="line">        <span class="keyword">then</span> <span class="keyword">set</span> <span class="keyword">result</span> <span class="operator">=</span> <span class="string">&#x27;元老薪资&#x27;</span>;</span><br><span class="line"><span class="keyword">else</span> </span><br><span class="line"><span class="keyword">set</span> <span class="keyword">result</span> <span class="operator">=</span> <span class="string">&#x27;查询名字不存在&#x27;</span>;</span><br><span class="line">    <span class="keyword">end</span> if;</span><br><span class="line">    <span class="keyword">select</span> <span class="keyword">result</span>;</span><br><span class="line"><span class="keyword">end</span>$$</span><br><span class="line">delimiter ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">call</span> proc12_if(<span class="string">&#x27;庞统&#x27;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="流程控制-case"><a href="#流程控制-case" class="headerlink" title="流程控制-case"></a>流程控制-case</h3><blockquote><p>CASE是另一个条件判断的语句，类似于编程语言中的switch语法</p></blockquote><h4 id="操作-38"><a href="#操作-38" class="headerlink" title="操作-38"></a>操作</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法一（类比java的switch）：</span></span><br><span class="line"><span class="keyword">case</span> case_value</span><br><span class="line">    <span class="keyword">when</span> when_value <span class="keyword">then</span> statement_list</span><br><span class="line">    [<span class="keyword">when</span> when_value <span class="keyword">then</span> statement_list] ...</span><br><span class="line">    [<span class="keyword">else</span> statement_list]</span><br><span class="line"><span class="keyword">end</span> <span class="keyword">case</span></span><br><span class="line"><span class="comment">-- 语法二：</span></span><br><span class="line"><span class="keyword">case</span></span><br><span class="line">    <span class="keyword">when</span> search_condition <span class="keyword">then</span> statement_list</span><br><span class="line">    [<span class="keyword">when</span> search_condition <span class="keyword">then</span> statement_list] ...</span><br><span class="line">    [<span class="keyword">else</span> statement_list]</span><br><span class="line"><span class="keyword">end</span> <span class="keyword">case</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 案例</span></span><br><span class="line"><span class="comment">-- 语法一</span></span><br><span class="line">delimiter $$</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> proc14_case(<span class="keyword">in</span> pay_type <span class="type">int</span>)</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">case</span> pay_type</span><br><span class="line">        <span class="keyword">when</span>  <span class="number">1</span> </span><br><span class="line">          <span class="keyword">then</span> </span><br><span class="line">              <span class="keyword">select</span> <span class="string">&#x27;微信支付&#x27;</span> ;</span><br><span class="line">        <span class="keyword">when</span>  <span class="number">2</span> <span class="keyword">then</span> <span class="keyword">select</span> <span class="string">&#x27;支付宝支付&#x27;</span> ;</span><br><span class="line">        <span class="keyword">when</span>  <span class="number">3</span> <span class="keyword">then</span> <span class="keyword">select</span> <span class="string">&#x27;银行卡支付&#x27;</span>;</span><br><span class="line">      <span class="keyword">else</span> <span class="keyword">select</span> <span class="string">&#x27;其他方式支付&#x27;</span>;</span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">case</span> ;</span><br><span class="line"><span class="keyword">end</span> $$</span><br><span class="line">delimiter ;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">call</span> proc14_case(<span class="number">2</span>);</span><br><span class="line"><span class="keyword">call</span> proc14_case(<span class="number">4</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 语法二</span></span><br><span class="line">delimiter  $$</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> proc_15_case(<span class="keyword">in</span> score <span class="type">int</span>)</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">case</span></span><br><span class="line">  <span class="keyword">when</span> score <span class="operator">&lt;</span> <span class="number">60</span> </span><br><span class="line">      <span class="keyword">then</span></span><br><span class="line">          <span class="keyword">select</span> <span class="string">&#x27;不及格&#x27;</span>;</span><br><span class="line">    <span class="keyword">when</span>  score <span class="operator">&lt;</span> <span class="number">80</span></span><br><span class="line">      <span class="keyword">then</span></span><br><span class="line">          <span class="keyword">select</span> <span class="string">&#x27;及格&#x27;</span> ;</span><br><span class="line">    <span class="keyword">when</span> score <span class="operator">&gt;=</span> <span class="number">80</span> <span class="keyword">and</span> score <span class="operator">&lt;</span> <span class="number">90</span></span><br><span class="line">       <span class="keyword">then</span> </span><br><span class="line">           <span class="keyword">select</span> <span class="string">&#x27;良好&#x27;</span>;</span><br><span class="line">  <span class="keyword">when</span> score <span class="operator">&gt;=</span> <span class="number">90</span> <span class="keyword">and</span> score <span class="operator">&lt;=</span> <span class="number">100</span></span><br><span class="line">       <span class="keyword">then</span> </span><br><span class="line">           <span class="keyword">select</span> <span class="string">&#x27;优秀&#x27;</span>;</span><br><span class="line">     <span class="keyword">else</span></span><br><span class="line">       <span class="keyword">select</span> <span class="string">&#x27;成绩错误&#x27;</span>;</span><br><span class="line">  <span class="keyword">end</span> <span class="keyword">case</span>;</span><br><span class="line"><span class="keyword">end</span> $$</span><br><span class="line">delimiter  ;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">call</span> proc_15_case(<span class="number">88</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="流程控制-循环"><a href="#流程控制-循环" class="headerlink" title="流程控制-循环"></a>流程控制-循环</h3><h4 id="概述："><a href="#概述：" class="headerlink" title="概述："></a>概述：</h4><blockquote><ul><li>循环是一段在程序中只出现一次,但可能会连续运行多次的代码。</li><li>循环中的代码会运行特定的次数,或者是运行到特定条件成立时结束循环。</li></ul></blockquote><h4 id="循环分类："><a href="#循环分类：" class="headerlink" title="循环分类："></a>循环分类：</h4><blockquote><ul><li>while</li><li>repeat</li><li>loop</li></ul></blockquote><h4 id="循环控制："><a href="#循环控制：" class="headerlink" title="循环控制："></a>循环控制：</h4><blockquote><ul><li>leave 类似于 break，跳出，结束当前所在的循环；</li><li>iterate类似于 continue，继续，结束本次循环，继续下一次。</li></ul></blockquote><p class='item-img' data-src='/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/image-20241020165153048.png'><img src="/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/image-20241020165153048.png" alt="循环"></p><h3 id="流程控制-循环-while"><a href="#流程控制-循环-while" class="headerlink" title="流程控制-循环-while"></a>流程控制-循环-while</h3><h4 id="格式-22"><a href="#格式-22" class="headerlink" title="格式-22"></a>格式</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">【标签:】while 循环条件 do</span><br><span class="line">    循环体;</span><br><span class="line"><span class="keyword">end</span> while【 标签】;</span><br></pre></td></tr></table></figure><h4 id="操作-39"><a href="#操作-39" class="headerlink" title="操作-39"></a>操作</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 选择 mydb7_procedure 数据库</span></span><br><span class="line">use mydb7_procedure;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 创建测试表</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> <span class="keyword">user</span> (</span><br><span class="line">    uid <span class="type">int</span> <span class="keyword">primary</span> key,</span><br><span class="line">    username <span class="type">varchar</span> ( <span class="number">50</span> ),</span><br><span class="line">    password <span class="type">varchar</span> ( <span class="number">50</span> )</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 需求：向表中添加10条数据。</span></span><br><span class="line"><span class="comment">-- -------存储过程-while</span></span><br><span class="line">delimiter $$</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> proc16_while1(<span class="keyword">in</span> insertcount <span class="type">int</span>)</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">declare</span> i <span class="type">int</span> <span class="keyword">default</span> <span class="number">1</span>;</span><br><span class="line">    label:while i<span class="operator">&lt;=</span>insertcount do</span><br><span class="line">        <span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">user</span>(uid,username,password) <span class="keyword">values</span>(i,concat(<span class="string">&#x27;user-&#x27;</span>,i),<span class="string">&#x27;123456&#x27;</span>);</span><br><span class="line">        <span class="keyword">set</span> i<span class="operator">=</span>i<span class="operator">+</span><span class="number">1</span>;</span><br><span class="line">    <span class="keyword">end</span> while label;</span><br><span class="line"><span class="keyword">end</span> $$</span><br><span class="line">delimiter ;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">call</span> proc16_while1(<span class="number">10</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- -------存储过程-while + leave</span></span><br><span class="line"><span class="keyword">truncate</span> <span class="keyword">table</span> <span class="keyword">user</span>;</span><br><span class="line">delimiter $$</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> proc16_while2(<span class="keyword">in</span> insertcount <span class="type">int</span>)</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">declare</span> i <span class="type">int</span> <span class="keyword">default</span> <span class="number">1</span>;</span><br><span class="line">    label:while i<span class="operator">&lt;=</span>insertcount do</span><br><span class="line">        <span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">user</span>(uid,username,password) <span class="keyword">values</span>(i,concat(<span class="string">&#x27;user-&#x27;</span>,i),<span class="string">&#x27;123456&#x27;</span>);</span><br><span class="line">        if i<span class="operator">=</span><span class="number">5</span> <span class="keyword">then</span> leave label;</span><br><span class="line">        <span class="keyword">end</span> if;</span><br><span class="line">        <span class="keyword">set</span> i<span class="operator">=</span>i<span class="operator">+</span><span class="number">1</span>;</span><br><span class="line">    <span class="keyword">end</span> while label;</span><br><span class="line"><span class="keyword">end</span> $$</span><br><span class="line">delimiter ;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">call</span> proc16_while2(<span class="number">10</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- -------存储过程-while+iterate</span></span><br><span class="line"><span class="keyword">truncate</span> <span class="keyword">table</span> <span class="keyword">user</span>;</span><br><span class="line">delimiter $$</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> proc16_while3(<span class="keyword">in</span> insertcount <span class="type">int</span>)</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">declare</span> i <span class="type">int</span> <span class="keyword">default</span> <span class="number">1</span>;</span><br><span class="line">    label:while i<span class="operator">&lt;=</span>insertcount do</span><br><span class="line">        <span class="keyword">set</span> i<span class="operator">=</span>i<span class="operator">+</span><span class="number">1</span>;</span><br><span class="line">        if i<span class="operator">=</span><span class="number">5</span> <span class="keyword">then</span> iterate label;</span><br><span class="line">        <span class="keyword">end</span> if;</span><br><span class="line">        <span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">user</span>(uid,username,password) <span class="keyword">values</span>(i,concat(<span class="string">&#x27;user-&#x27;</span>,i),<span class="string">&#x27;123456&#x27;</span>);</span><br><span class="line">    <span class="keyword">end</span> while label;</span><br><span class="line"><span class="keyword">end</span> $$</span><br><span class="line">delimiter ;</span><br><span class="line"><span class="keyword">call</span> proc16_while3(<span class="number">10</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="流程控制-循环-repeat"><a href="#流程控制-循环-repeat" class="headerlink" title="流程控制-循环-repeat"></a>流程控制-循环-repeat</h3><h4 id="格式-23"><a href="#格式-23" class="headerlink" title="格式-23"></a>格式</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[标签:]repeat </span><br><span class="line"> 循环体;</span><br><span class="line">until 条件表达式</span><br><span class="line"><span class="keyword">end</span> repeat [标签];</span><br></pre></td></tr></table></figure><h4 id="操作-40"><a href="#操作-40" class="headerlink" title="操作-40"></a>操作</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- -------存储过程-循环控制-repeat </span></span><br><span class="line">use mydb7_procedure;</span><br><span class="line"><span class="keyword">truncate</span> <span class="keyword">table</span> <span class="keyword">user</span>;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">delimiter $$</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> proc18_repeat(<span class="keyword">in</span> insertCount <span class="type">int</span>)</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">     <span class="keyword">declare</span> i <span class="type">int</span> <span class="keyword">default</span> <span class="number">1</span>;</span><br><span class="line">     label:repeat</span><br><span class="line">         <span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">user</span>(uid, username, password) <span class="keyword">values</span>(i,concat(<span class="string">&#x27;user-&#x27;</span>,i),<span class="string">&#x27;123456&#x27;</span>);</span><br><span class="line">         <span class="keyword">set</span> i <span class="operator">=</span> i <span class="operator">+</span> <span class="number">1</span>;</span><br><span class="line">         until  i  <span class="operator">&gt;</span> insertCount</span><br><span class="line">     <span class="keyword">end</span> repeat label;</span><br><span class="line">     <span class="keyword">select</span> <span class="string">&#x27;循环结束&#x27;</span>;</span><br><span class="line"><span class="keyword">end</span> $$</span><br><span class="line">delimiter ;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">call</span> proc18_repeat(<span class="number">100</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="流程控制-循环-loop"><a href="#流程控制-循环-loop" class="headerlink" title="流程控制-循环-loop"></a>流程控制-循环-loop</h3><h4 id="格式-24"><a href="#格式-24" class="headerlink" title="格式-24"></a>格式</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[标签:] loop</span><br><span class="line">  循环体;</span><br><span class="line">  if 条件表达式 <span class="keyword">then</span> </span><br><span class="line">     leave [标签]; </span><br><span class="line">  <span class="keyword">end</span> if;</span><br><span class="line"><span class="keyword">end</span> loop;</span><br></pre></td></tr></table></figure><h4 id="操作-41"><a href="#操作-41" class="headerlink" title="操作-41"></a>操作</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- -------存储过程-循环控制-loop</span></span><br><span class="line"><span class="keyword">truncate</span> <span class="keyword">table</span> <span class="keyword">user</span>;</span><br><span class="line"> </span><br><span class="line">delimiter $$</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> proc19_loop(<span class="keyword">in</span> insertCount <span class="type">int</span>) </span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">     <span class="keyword">declare</span> i <span class="type">int</span> <span class="keyword">default</span> <span class="number">1</span>;</span><br><span class="line">     label:loop</span><br><span class="line">         <span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">user</span>(uid, username, password) <span class="keyword">values</span>(i,concat(<span class="string">&#x27;user-&#x27;</span>,i),<span class="string">&#x27;123456&#x27;</span>);</span><br><span class="line">         <span class="keyword">set</span> i <span class="operator">=</span> i <span class="operator">+</span> <span class="number">1</span>;</span><br><span class="line">         if i <span class="operator">&gt;</span> <span class="number">5</span> </span><br><span class="line">          <span class="keyword">then</span> </span><br><span class="line">           leave label;</span><br><span class="line">         <span class="keyword">end</span> if;</span><br><span class="line">     <span class="keyword">end</span> loop label;</span><br><span class="line">     <span class="keyword">select</span> <span class="string">&#x27;循环结束&#x27;</span>;</span><br><span class="line"><span class="keyword">end</span> $$</span><br><span class="line">delimiter ;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">call</span> proc19_loop(<span class="number">10</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="MySQL的索引"><a href="#MySQL的索引" class="headerlink" title="MySQL的索引"></a>MySQL的索引</h2><h3 id="介绍-19"><a href="#介绍-19" class="headerlink" title="介绍-19"></a>介绍</h3><blockquote><ul><li><p>索引是通过某种算法，构建出一个数据模型，用于快速找出在某个列中有一特定值的行，不使用索引，MySQL必须从第一条记录开始读完整个表，直到找出相关的行，表越大，查询数据所花费的时间就越多，如果表中查询的列有一个索引，MySQL能够快速到达一个位置去搜索数据文件，而不必查看所有数据，那么将会节省很大一部分时间。</p></li><li><p>索引类似一本书的目录，比如要查找’student’这个单词，可以先找到s开头的页然后向后查找，这个就类似索引。</p></li></ul></blockquote><h3 id="索引的分类-按照实现的方式类分"><a href="#索引的分类-按照实现的方式类分" class="headerlink" title="索引的分类-按照实现的方式类分"></a>索引的分类(按照实现的方式类分)</h3><blockquote><p>索引是存储引擎用来快速查找记录的一种数据结构，按照实现的方式类分，主要有<strong>Hash索引</strong>和<strong>B+Tree索引</strong></p></blockquote><h4 id="Hash索引"><a href="#Hash索引" class="headerlink" title="Hash索引"></a>Hash索引</h4><p>Hash索引有时会产生Hash冲突，优化使用公式能降低冲突。</p><p class='item-img' data-src='/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/image-20241208144926974.png'><img src="/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/image-20241208144926974.png" alt="Hash索引"></p><h4 id="B-Tree索引"><a href="#B-Tree索引" class="headerlink" title="B-Tree索引"></a>B+Tree索引</h4><p class='item-img' data-src='/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/image-20241208145005607.png'><img src="/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/image-20241208145005607.png" alt="B+Tree索引"></p><h3 id="索引的分类-按照功能划分"><a href="#索引的分类-按照功能划分" class="headerlink" title="索引的分类-按照功能划分"></a>索引的分类(按照功能划分)</h3><blockquote><p>按照功能划分，索引划为以下分类:</p></blockquote><p class='item-img' data-src='/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/image-20241208150027512.png'><img src="/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/image-20241208150027512.png" alt="按照功能划分"></p><h4 id="索引的操作-创建索引-单列索引-普通索引"><a href="#索引的操作-创建索引-单列索引-普通索引" class="headerlink" title="索引的操作-创建索引-单列索引-普通索引"></a>索引的操作-创建索引-单列索引-普通索引</h4><h5 id="介绍-20"><a href="#介绍-20" class="headerlink" title="介绍-20"></a>介绍</h5><blockquote><ul><li>单列索引：一个索引只包含单个列，但一个表中可以有多个单列索引;<ul><li>普通索引(NORMAL)：MySQL中基本索引类型，没有什么限制，允许在定义索引的列中插入重复值和空值，纯粹为了查询数据更快一点。</li></ul></li></ul></blockquote><h5 id="格式-25"><a href="#格式-25" class="headerlink" title="格式-25"></a>格式</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> database mydb5;</span><br><span class="line">use mydb5;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 方式1-创建表的时候直接指定</span></span><br><span class="line"><span class="keyword">create</span>  <span class="keyword">table</span> student(</span><br><span class="line">    sid <span class="type">int</span> <span class="keyword">primary</span> key,</span><br><span class="line">    card_id <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">    gender <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">    age <span class="type">int</span>,</span><br><span class="line">    birth <span class="type">date</span>, </span><br><span class="line">    phone_num <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">    score <span class="keyword">double</span>,</span><br><span class="line">    index index_name(name) <span class="comment">-- 给name列创建索引</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 方式2-直接创建</span></span><br><span class="line"><span class="comment">-- create index indexname on tablename(columnname); </span></span><br><span class="line"><span class="keyword">create</span> index index_gender <span class="keyword">on</span> student(gender); </span><br><span class="line"></span><br><span class="line"><span class="comment">-- 方式3-修改表结构(添加索引)</span></span><br><span class="line"><span class="comment">-- alter table tablename add index indexname(columnname)</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student <span class="keyword">add</span> index index_age(age);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="索引的操作-查看索引-单列索引-普通索引"><a href="#索引的操作-查看索引-单列索引-普通索引" class="headerlink" title="索引的操作-查看索引-单列索引-普通索引"></a>索引的操作-查看索引-单列索引-普通索引</h4><h5 id="操作-42"><a href="#操作-42" class="headerlink" title="操作-42"></a>操作</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1、查看数据库所有索引 </span></span><br><span class="line"><span class="comment">-- select * from mysql.`innodb_index_stats` a where a.`database_name` = &#x27;数据库名’; </span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> mysql.`innodb_index_stats` a <span class="keyword">where</span> a.`database_name` <span class="operator">=</span> <span class="string">&#x27;mydb5&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2、查看表中所有索引 </span></span><br><span class="line"><span class="comment">-- select * from mysql.`innodb_index_stats` a where a.`database_name` = &#x27;数据库名&#x27; and a.table_name like &#x27;%表名%’; </span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> mysql.`innodb_index_stats` a <span class="keyword">where</span> a.`database_name` <span class="operator">=</span> <span class="string">&#x27;mydb5&#x27;</span> <span class="keyword">and</span> a.table_name <span class="keyword">like</span> <span class="string">&#x27;%student%&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3、查看表中所有索引 </span></span><br><span class="line"><span class="comment">-- show index from table_name; </span></span><br><span class="line"><span class="keyword">show</span> index <span class="keyword">from</span> student;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="索引的操作-删除索引"><a href="#索引的操作-删除索引" class="headerlink" title="索引的操作-删除索引"></a>索引的操作-删除索引</h4><h5 id="格式-26"><a href="#格式-26" class="headerlink" title="格式-26"></a>格式</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> index 索引名 <span class="keyword">on</span> 表名; </span><br><span class="line"><span class="comment">-- 或 </span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">drop</span> index 索引名;</span><br></pre></td></tr></table></figure><h5 id="操作-43"><a href="#操作-43" class="headerlink" title="操作-43"></a>操作</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> index index_gender <span class="keyword">on</span> student;</span><br><span class="line"><span class="comment">-- 或 </span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student <span class="keyword">drop</span> index index_name;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="索引的操作-创建索引-单列索引-唯一索引"><a href="#索引的操作-创建索引-单列索引-唯一索引" class="headerlink" title="索引的操作-创建索引-单列索引-唯一索引"></a>索引的操作-创建索引-单列索引-唯一索引</h4><h5 id="介绍-21"><a href="#介绍-21" class="headerlink" title="介绍-21"></a>介绍</h5><blockquote><p>唯一索引与前面的普通索引类似，不同的就是：索引列的值必须唯一，但允许有空值。如果是组合索引，则列值的组合必须唯一。它有以下几种创建方式：</p></blockquote><h5 id="操作-创建索引"><a href="#操作-创建索引" class="headerlink" title="操作-创建索引"></a>操作-创建索引</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 方式1-创建表的时候直接指定</span></span><br><span class="line"><span class="keyword">create</span>  <span class="keyword">table</span> student2(</span><br><span class="line">    sid <span class="type">int</span> <span class="keyword">primary</span> key,</span><br><span class="line">    card_id <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">    gender <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">    age <span class="type">int</span>,</span><br><span class="line">    birth <span class="type">date</span>, </span><br><span class="line">    phone_num <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">    score <span class="keyword">double</span>,</span><br><span class="line">    <span class="keyword">unique</span> index_card_id(card_id) <span class="comment">-- 给card_id列创建索引</span></span><br><span class="line">);</span><br><span class="line"><span class="comment">-- 方式2-直接创建</span></span><br><span class="line"><span class="comment">-- create unique index 索引名 on 表名(列名) </span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">unique</span> index index_card_id <span class="keyword">on</span> student2(card_id);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 方式3-修改表结构(添加索引)</span></span><br><span class="line"><span class="comment">-- alter table 表名 add unique [索引名] (列名)</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student2 <span class="keyword">add</span> <span class="keyword">unique</span> index_phone_num(phone_num)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="操作-删除索引"><a href="#操作-删除索引" class="headerlink" title="操作-删除索引"></a>操作-删除索引</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> index index_card_id <span class="keyword">on</span> student2 </span><br><span class="line"><span class="comment">-- 或 </span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student2 <span class="keyword">drop</span> index index_phone_num</span><br></pre></td></tr></table></figure><hr><p><strong>文章作者:</strong> [<a href="https://yjh021.github.io/">Blue Eagle</a>]</p><p><strong>文章链接:</strong> [<a href="https://yjh021.github.io/2024/10/04/MySQL%E5%AD%A6%E4%B9%A0%E4%BB%A3%E7%A0%81/">https://yjh021.github.io/2024/10/04/MySQL学习代码/</a>]</p><p><strong>版权声明:</strong> 本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 [<a href="https://yjh021.github.io/">Blue Eagle</a>]</p><hr>]]></content>
    
    
    <summary type="html">本文记录了MySQL学习过程中的代码示例，包括SQL基础语法、DDL、DML、DQL、DCL等内容。</summary>
    
    
    
    <category term="数据库" scheme="https://yjh021.github.io/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    <category term="MySQL" scheme="https://yjh021.github.io/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/"/>
    
    
    <category term="SQL" scheme="https://yjh021.github.io/tags/SQL/"/>
    
    <category term="数据库管理" scheme="https://yjh021.github.io/tags/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AE%A1%E7%90%86/"/>
    
    <category term="学习笔记" scheme="https://yjh021.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>MySQL上课笔记整理</title>
    <link href="https://yjh021.github.io/2024/10/04/MySQL%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86/"/>
    <id>https://yjh021.github.io/2024/10/04/MySQL%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86/</id>
    <published>2024-10-04T08:15:00.000Z</published>
    <updated>2026-01-31T04:05:56.988Z</updated>
    
    <content type="html"><![CDATA[<h1>MySQL笔记整理</h1><h2 id="范式"><a href="#范式" class="headerlink" title="范式"></a>范式</h2><p>x`➡️y</p><p>存在：部分函数依赖<br>不存在：完全</p><p>传递函数：<br>x➡️y<br>y➡️z<br>x➡️z<br>反过来不成立</p><p>第一范式：不存在可分割项<br>第二范式：需先满足第一范式，找到候选码，再去掉部分函数依赖<br>第三范式：每一个非主属性都不传递函数依赖</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">6</span></span><br></pre></td></tr></table></figure><p>解决之道：分解</p><hr><p><strong>文章作者:</strong> [<a href="https://yjh021.github.io/">Blue Eagle</a>]</p><p><strong>文章链接:</strong> [<a href="https://yjh021.github.io/2024/10/04/MySQL%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86/">https://yjh021.github.io/2024/10/04/MySQL笔记整理/</a>]</p><p><strong>版权声明:</strong> 本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 [<a href="https://yjh021.github.io/">Blue Eagle</a>]</p><hr>]]></content>
    
    
    <summary type="html">这是我使用Hexo撰写的博客文章。</summary>
    
    
    
    <category term="数据库" scheme="https://yjh021.github.io/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    <category term="MySQL" scheme="https://yjh021.github.io/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/"/>
    
    
    <category term="SQL" scheme="https://yjh021.github.io/tags/SQL/"/>
    
    <category term="数据库管理" scheme="https://yjh021.github.io/tags/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AE%A1%E7%90%86/"/>
    
    <category term="博客" scheme="https://yjh021.github.io/tags/%E5%8D%9A%E5%AE%A2/"/>
    
  </entry>
  
  <entry>
    <title>我的第一篇文章</title>
    <link href="https://yjh021.github.io/2024/10/04/%E6%88%91%E7%9A%84%E7%AC%AC%E4%B8%80%E7%AF%87%E6%96%87%E7%AB%A0/"/>
    <id>https://yjh021.github.io/2024/10/04/%E6%88%91%E7%9A%84%E7%AC%AC%E4%B8%80%E7%AF%87%E6%96%87%E7%AB%A0/</id>
    <published>2024-10-04T08:10:00.000Z</published>
    <updated>2024-10-22T03:53:43.212Z</updated>
    
    <content type="html"><![CDATA[<h2 id="欢迎阅读我的第一篇文章"><a href="#欢迎阅读我的第一篇文章" class="headerlink" title="欢迎阅读我的第一篇文章"></a>欢迎阅读我的第一篇文章</h2><p>这是我的第一篇使用Hexo撰写的博客文章。在这里，我将分享一些关于如何使用Hexo创建和管理博客的经验。</p><h3 id="使用Hexo的好处"><a href="#使用Hexo的好处" class="headerlink" title="使用Hexo的好处"></a>使用Hexo的好处</h3><ul><li><strong>简单易用</strong>：Hexo的安装和使用都非常简单，适合初学者。</li><li><strong>强大的生态系统</strong>：Hexo有丰富的主题和插件，可以满足各种需求。</li><li><strong>快速生成</strong>：Hexo可以非常快速地生成静态页面，适合大型博客。</li></ul><h3 id="如何开始"><a href="#如何开始" class="headerlink" title="如何开始"></a>如何开始</h3><ol><li><strong>安装Node.js</strong>：确保您的计算机上安装了Node.js。</li><li><strong>安装Hexo</strong>：使用npm安装Hexo。</li><li><strong>创建站点</strong>：使用Hexo命令创建一个新的站点。</li><li><strong>编写文章</strong>：使用Markdown编写文章，并配置好元数据。</li><li><strong>生成和部署</strong>：生成静态页面并部署到服务器。</li></ol><p>希望这篇文章对您有所帮助！</p><hr><p><strong>文章作者:</strong> [<a href="https://yjh021.github.io/">Blue Eagle</a>]</p><p><strong>文章链接:</strong> [<a href="https://yjh021.github.io/2024/10/04/%E6%88%91%E7%9A%84%E7%AC%AC%E4%B8%80%E7%AF%87%E6%96%87%E7%AB%A0/">https://yjh021.github.io/2024/10/04/我的第一篇文章/</a>]</p><p><strong>版权声明:</strong> 本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 [<a href="https://yjh021.github.io/">Blue Eagle</a>]</p><hr>]]></content>
    
    
    <summary type="html">这是我的第一篇使用Hexo撰写的博客文章。</summary>
    
    
    
    <category term="技术" scheme="https://yjh021.github.io/categories/%E6%8A%80%E6%9C%AF/"/>
    
    <category term="博客" scheme="https://yjh021.github.io/categories/%E6%8A%80%E6%9C%AF/%E5%8D%9A%E5%AE%A2/"/>
    
    
    <category term="Hexo" scheme="https://yjh021.github.io/tags/Hexo/"/>
    
    <category term="Markdown" scheme="https://yjh021.github.io/tags/Markdown/"/>
    
    <category term="写作" scheme="https://yjh021.github.io/tags/%E5%86%99%E4%BD%9C/"/>
    
  </entry>
  
</feed>
