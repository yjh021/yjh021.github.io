<!DOCTYPE html><html lang="en" theme-mode="dark"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>MySQL课程笔记 | Personal blog</title><link rel="icon" type="image/x-icon" href="/favicon.ico"><link rel="preload" as="font" crossorigin="anonymous" href="/font/Bender.ttf"><link rel="preload" as="font" crossorigin="anonymous" href="/font/BenderLight.ttf"><link rel="preload" as="font" crossorigin="anonymous" href="/font/JetBrainsMono-Regular.woff2"><link rel="stylesheet" href="/css/arknights.css"><style>@font-face {
  font-family: Bender;
  src: local('Bender'), url("/font/Bender.ttf"), url("/font/Bender.otf");
}
@font-face {
  font-family: BenderLight;
  src: local('BenderLight'), url("/font/BenderLight.ttf");
}
@font-face {
  font-family: 'JetBrains Mono';
  src: local('JetBrains Mono'), url('/font/JetBrainsMono-Regular.woff2') format('woff2');
}
</style><script>var config = {"root":"/","search":{"preload":false,"activeHolder":"键入以继续","blurHolder":"数据检索","noResult":"无 $0 相关数据"},"code":{"codeInfo":"$0 - $1 行","copy":"复制"}}</script><link type="text/css" rel="stylesheet" href="/lib/encrypt/hbe.style.css"><script src="//unpkg.com/mermaid@10.5.0/dist/mermaid.min.js"></script><link type="text/css" rel="stylesheet" href="//unpkg.com/lightgallery@2.7.1/css/lightgallery.css"><link type="text/css" rel="stylesheet" href="//unpkg.com/lightgallery@2.7.1/css/lg-zoom.css"><link type="text/css" rel="stylesheet" href="//unpkg.com/lightgallery@2.7.1/css/lg-thumbnail.css"><link type="text/css" rel="stylesheet" href="/lib/fontawesome/css/all.min.css"><script>if (window.localStorage.getItem('theme-mode') === 'light')
 document.documentElement.setAttribute('theme-mode', 'light')
if (window.localStorage.getItem('theme-mode') === 'dark')
 document.documentElement.setAttribute('theme-mode', 'dark')</script><style>@font-face {
 font-family: BenderLight;
 src: local('Bender'), url("/font/BenderLight.woff2") format('woff2');
}
@font-face {
 font-family: 'JetBrains Mono';
 src: local('JetBrains Mono'), url('/font/JetBrainsMono-Regular.woff2') format('woff2');
}</style><style>:root {
 --dark-background: url('https://ak.hypergryph.com/assets/index/images/ak/pc/bk.jpg');
 --light-background: url('/img/bk.jpg');
 --theme-encrypt-confirm: '确认'
}</style><script defer src="/js/arknights.js"></script><script defer src="/js/search.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script defer type="module">import mermaid from '//unpkg.com/mermaid@10.5.0/dist/mermaid.esm.mjs';
window.mermaid = mermaid;
code.paintMermaid();
</script><script async src="//unpkg.com/lightgallery@2.7.1/lightgallery.min.js"></script><script async src="//unpkg.com/lightgallery@2.7.1/plugins/zoom/lg-zoom.min.js"></script><script async src="//unpkg.com/lightgallery@2.7.1/plugins/thumbnail/lg-thumbnail.min.js"></script><script async src="/lib/encrypt/hbe.js"></script><script async src="/js/pjax.js"></script><script class="pjax-js">reset= () => {document.querySelector('.lg-container')?.remove()
lightGallery(document.getElementById('post-bg'), {
  plugins: [lgZoom,lgThumbnail],
  selector: '.item-img'})}</script><script>window.addEventListener("load",() => {pjax = new Pjax({
 cacheBust: false,
 selectors: ['title','article','#aside-block','.pjax-js','data-pjax','.busuanzi'],
 switches: {'article': Pjax.switches.sideBySide},
 switchesOptions: {
   'article': {
     classNames: {
       remove: "pjax-out",
       add: "pjax-in"
     }
   }
 }
});
document.addEventListener("pjax:complete", reset);document.addEventListener('pjax:success', _ => bszCaller.fetch(
 "//busuanzi.ibruce.info/busuanzi?jsonpCallback=BusuanziCallback", a => {
  bszTag.texts(a),
  bszTag.shows()
}));reset()})</script><script class="pjax-js">reset= () => {document.querySelector('.lg-container')?.remove()
lightGallery(document.getElementById('post-bg'), {
  plugins: [lgZoom,lgThumbnail],
  selector: '.item-img'})}</script><script>window.addEventListener("load",() => {pjax = new Pjax({
 cacheBust: false,
 selectors: ['title','article','#aside-block','.pjax-js'],
 switches: {'article': Pjax.switches.sideBySide},
 switchesOptions: {
   'article': {
     classNames: {
       remove: "pjax-out",
       add: "pjax-in"
     }
   }
 }
});
document.addEventListener("pjax:complete", reset);reset()})</script><meta name="generator" content="Hexo 7.3.0"></head><body><div class="loading" style="opacity: 0;"><div class="loadingBar left"></div><div class="loadingBar right"></div></div><main><header class="closed"><div class="navBtn"><i class="navBtnIcon"><span class="navBtnIconBar"></span><span class="navBtnIconBar"></span><span class="navBtnIconBar"></span></i></div><nav><div class="navItem" id="search-header"><span class="navItemTitle"><input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="数据检索" spellcheck="false" maxlength="50" type="text" id="search-input"></span></div><div class="navItem" id="search-holder"></div><div class="search-popup" tabindex="0"><div id="search-result"></div></div><ol class="navContent"><li class="navItem"><a class="navBlock" href="/"><span class="navItemTitle">Home</span></a></li><li class="navItem" matchdata="categories,tags"><a class="navBlock" href="/archives/"><span class="navItemTitle">Archives</span></a></li></ol></nav></header><article><div id="post-bg"><div id="post-title"><h1>MySQL课程笔记</h1></div><hr><div id="post-content"><h1>MySQL课程笔记</h1>
<h2 id="数据库基础知识"><a href="#数据库基础知识" class="headerlink" title="数据库基础知识"></a>数据库基础知识</h2>
<h3 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h3>
<blockquote>
<ul>
<li>数据管理技术的发展阶段：人工管理阶段-〉文件系统阶段 -〉 数据库管理阶段</li>
<li>所谓数据库(DataBase, DB)，是将数据按一定的数据模型组织、描述和存储，具有较小的冗余度，较高的数据独立性和易扩展性，并可为各种用户共享的数据集合。</li>
<li>数据库系统(DataBase System, DBS)一般由数据库、数据库管理系统(及其开发工具)、应用系统、数据库管理员和用户结构组成</li>
<li>数据库管理系统（DataBase Management System, DBMS）对收集到的大量数据进行整理、加工、归并、分类、计算、存储等处理，产生新的数据，以便反映事物或现象的本质和特征及其内在联系。</li>
<li>数据库应用系统(DataBase Application System, DBAS) 数据库应用系统是由<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F/0?fromModule=lemma_inlink">数据库系统</a>、<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F/0?fromModule=lemma_inlink">应用程序</a>系统、用户组成的，具体包括：数据库、<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/0?fromModule=lemma_inlink">数据库管理系统</a>、<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AE%A1%E7%90%86%E5%91%98/0?fromModule=lemma_inlink">数据库管理员</a>、硬件平台、软件平台、<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E5%BA%94%E7%94%A8%E8%BD%AF%E4%BB%B6/0?fromModule=lemma_inlink">应用软件</a>、应用界面。</li>
</ul>
</blockquote>
<h3 id="结构化查询语言SQL"><a href="#结构化查询语言SQL" class="headerlink" title="结构化查询语言SQL"></a>结构化查询语言SQL</h3>
<h4 id="SQL概念"><a href="#SQL概念" class="headerlink" title="SQL概念"></a>SQL概念</h4>
<blockquote>
<ol>
<li><strong>结构化查询语言SQL</strong>（Structured Query Language）,SQL语言是用于关系数据库查询的结构化语言，最早由Boyce和Chambedin在1974年提出，称为SEQUEL语言。1976年，IBM公司的San Jose研究所在研制关系数据库管理系统System R时修改为SEQUEL2，即目前的SQL语言。</li>
<li><strong>SQL-关系型数据库管理系统（RDBMS）</strong>：
<ul>
<li>不同的角色（开发者，用户，数据库管理员）使用相同的语言。</li>
<li>不同的RDBMS使用统一标准的语言。</li>
<li>SQL使用一种高级的非结构化查询语言。</li>
<li>坚持 ACID 准则 (原子性，一致性，隔离性，持久性)</li>
</ul>
</li>
<li><strong>NoSQL</strong>- <strong>非关系性数据库</strong>
<ul>
<li>采用Key-value方式存储数据。采取最终一致性原则，更加适合互联网数据，但这也可能导致数据丢失。</li>
</ul>
</li>
<li><strong>NewSQL-结合SQL和NoSQL</strong>
<ul>
<li>将SQL的ACID保证与NoSQL的可扩展性和高性能相结合，目前大多数NewSQL数据库都是专有软件或仅适用于特定场景，这显然限制了新技术的普及和应用。</li>
</ul>
</li>
</ol>
<p>主要特点包括：</p>
<p>（1）综合统一</p>
<p>（2）高度非过程化</p>
<p>（3）面向集合的操作方式</p>
<p>（4）以同一种语法结构提供两种使用方式</p>
<p>（5）语言简洁，易学易用</p>
</blockquote>
<p class='item-img' data-src='/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207112432050.png'><img src="/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207112432050.png" alt="数据库关系图"></p>
<h4 id="SQL分类"><a href="#SQL分类" class="headerlink" title="SQL分类"></a>SQL分类</h4>
<p>SQL 语句，根据其功能，主要分为四类:DDL、DML、DQL、DCL 。</p>
<table>
<thead>
<tr>
<th style="text-align:center">分类</th>
<th style="text-align:center">全称</th>
<th style="text-align:center">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">DDL</td>
<td style="text-align:center">Data Definition Language</td>
<td style="text-align:center">数据定义语言，用来定义数据库对象（数据库，表，字段)</td>
</tr>
<tr>
<td style="text-align:center">DML</td>
<td style="text-align:center">Data Manipulation Language</td>
<td style="text-align:center">数据操作语言，用来对数据库表中的数据进行增删改</td>
</tr>
<tr>
<td style="text-align:center">DQL</td>
<td style="text-align:center">Data Query Language</td>
<td style="text-align:center">数据查询语言，用来查询数据库中表的记录</td>
</tr>
<tr>
<td style="text-align:center">DCL</td>
<td style="text-align:center">Data Control Language</td>
<td style="text-align:center">数据控制语言，用来创建数据库用户、控制数据库的访问权限</td>
</tr>
</tbody>
</table>
<h4 id="SQL通用语法"><a href="#SQL通用语法" class="headerlink" title="SQL通用语法"></a>SQL通用语法</h4>
<blockquote>
<p>在学习具体的SQL语句之前，先来了解一下SQL语言的通用语法。</p>
<ol>
<li>SQL语句可以单行或多行书写,以分号结尾。</li>
<li>SQL语句可以使用空格/缩进来增强语句的可读性。</li>
<li>MySQL数据库的SQL语句不区分大小写，关键字建议使用大写。</li>
<li>注释:<br>
单行注释:-- 注释内容 或 # 注释内容<br>
多行注释:/** 注释内容*  */</li>
</ol>
</blockquote>
<p>注：MySQL下载安装教程详见<a target="_blank" rel="noopener" href="https://yjh021.github.io/2024/10/22/MySQL%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/">MySQL的安装和使用</a>。</p>
<h3 id="图形化软件"><a href="#图形化软件" class="headerlink" title="图形化软件"></a>图形化软件</h3>
<blockquote>
<p>本笔记所采用的图形化软件为 Navicat 。</p>
</blockquote>
<blockquote>
<p>“Navicat”是一套可创建多个连接的数据库管理工具，用以方便管理 <a target="_blank" rel="noopener" href="https://baike.baidu.com/item/MySQL/471251?fromModule=lemma_inlink">MySQL</a>、<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/Redis/6549233?fromModule=lemma_inlink">Redis</a>、<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/Oracle/301207?fromModule=lemma_inlink">Oracle</a>、<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/PostgreSQL/530240?fromModule=lemma_inlink">PostgreSQL</a>、<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/SQLite/375020?fromModule=lemma_inlink">SQLite</a>、[SQLServer](<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/SQL">https://baike.baidu.com/item/SQL</a> Server/245994?fromModule=lemma_inlink)、<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/MariaDB/6466119?fromModule=lemma_inlink">MariaDB</a> 和 <a target="_blank" rel="noopener" href="https://baike.baidu.com/item/MongoDB/60411?fromModule=lemma_inlink">MongoDB</a> 等不同类型的数据库，它与 <a target="_blank" rel="noopener" href="https://baike.baidu.com/item/GaussDB/63064379?fromModule=lemma_inlink">GaussDB</a>、<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/OceanBase/3041032?fromModule=lemma_inlink">OceanBase</a>、<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/PolarDB/23677557?fromModule=lemma_inlink">PolarDB</a> 以及 <a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E9%98%BF%E9%87%8C%E4%BA%91/297128?fromModule=lemma_inlink">阿里云</a>、<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E8%85%BE%E8%AE%AF%E4%BA%91/9905046?fromModule=lemma_inlink">腾讯云</a>、<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E5%8D%8E%E4%B8%BA%E4%BA%91/4572949?fromModule=lemma_inlink">华为云</a>、<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/Amazon/9842534?fromModule=lemma_inlink">Amazon</a> RDS、Amazon Aurora、Amazon Redshift、Microsoft Azure、Oracle Cloud 和 MongoDB Atlas等<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E4%BA%91%E6%95%B0%E6%8D%AE%E5%BA%93/4626630?fromModule=lemma_inlink">云数据库</a>兼容。它用于创建、管理和维护数据库。Navicat 的功能足以满足专业开发人员的所有需求，但是对<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E6%95%B0%E6%8D%AE%E5%BA%93%E6%9C%8D%E5%8A%A1%E5%99%A8/613818?fromModule=lemma_inlink">数据库服务器</a>初学者来说又简单易操作。Navicat 的<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E7%94%A8%E6%88%B7%E7%95%8C%E9%9D%A2/6582461?fromModule=lemma_inlink">用户界面</a> (<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/GUI/479966?fromModule=lemma_inlink">GUI</a>) 设计良好，以安全且简单的方法创建、组织、访问和共享信息。</p>
</blockquote>
<h4 id="Navicat-下载"><a href="#Navicat-下载" class="headerlink" title="Navicat-下载"></a>Navicat 下载</h4>
<blockquote>
<ul>
<li>
<p>Navicat 下载地址：<a target="_blank" rel="noopener" href="https://www.navicat.com/en/download/navicat-premium">https://www.navicat.com/en/download/navicat-premium</a></p>
</li>
<li>
<p>Navicat 下载完成后，打开安装包，选择接受条款，一直点下一步即可。</p>
</li>
<li>
<p>打开Navicat，连接到MySQL。</p>
</li>
</ul>
</blockquote>
<h2 id="数据库设计"><a href="#数据库设计" class="headerlink" title="数据库设计"></a>数据库设计</h2>
<blockquote>
<p>数据库设计就是将数据库中的数据对象以及这些数据对象之间关系进行规划和结构化的过程，当数据库比较复杂时我们需要设计数据库</p>
</blockquote>
<h3 id="关系数据库设计"><a href="#关系数据库设计" class="headerlink" title="关系数据库设计"></a>关系数据库设计</h3>
<h4 id="数据的加工"><a href="#数据的加工" class="headerlink" title="数据的加工"></a>数据的加工</h4>
<blockquote>
<ul>
<li>数据是描述事物的符号记录，模型是现实世界的抽象。</li>
<li>数据模型是数据特征的抽象，包括数据的结构部分，操作部分和约束条件。</li>
<li>每个事物的无穷特征如何数据化？事物之间错综复杂的关系如何数据化？现实世界直接数据化是不可行的，数据加工是一个逐步转换的过程，会经历<em><strong>现实世界</strong></em>、<em><strong>信息世界</strong></em>和<em><strong>数据世界</strong></em>三个不同层面。</li>
</ul>
</blockquote>
<p><strong>1.现实世界</strong></p>
<blockquote>
<p>现实世界是存在于人们头脑之外的客观世界。现实世界存在各种事物，事物与事物之间存在联系，这种联系是由事物本身的性质决定的。</p>
<p>例如，学校中有教师、学生、课程，教师为学生授课，学生选修课程并取得成绩；图书馆中有图书、管理员和读者，读者借阅图书，管理员对图书和读者进行管理等。</p>
</blockquote>
<p><strong>2.信息世界</strong></p>
<blockquote>
<ul>
<li>信息世界是现实世界在人们头脑中的反映，人们把它用文字或符号记载下来，然后用规范化的数据库定义语言来定义描述而构成的一个抽象世界。信息世界实际上是对现实世界的一种抽象化描述。</li>
<li>信息世界不是简单的对现实世界进行符号化，而是要通过筛选、归纳、总结、命名等抽象化过程形成概念模型，用以表示对现实世界的抽象和描述。</li>
</ul>
</blockquote>
<p><strong>3.数据世界</strong></p>
<blockquote>
<p>数据世界又称机器世界，它是将信息世界的内容数据化后的产物，即将信息世界中的概念模型，进一步转换成数据模型所形成的便于计算机处理的数据表现形式。</p>
</blockquote>
<h4 id="模型"><a href="#模型" class="headerlink" title="模型"></a>模型</h4>
<blockquote>
<ol>
<li>概念模型:把现实世界转换为信息世界的模型,E-R模型。</li>
<li>数据模型:把信息世界转化为数据世界使用的模型,关系模型。</li>
</ol>
</blockquote>
<p class='item-img' data-src='/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207113206885.png'><img src="/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207113206885.png" alt="设计数据库关系模型"></p>
<h4 id="规范化设计"><a href="#规范化设计" class="headerlink" title="规范化设计"></a>规范化设计</h4>
<blockquote>
<p>按照规范化设计的方法，考虑数据库及其应用系统开发的全过程，将数据库的设计分为以下6个设计阶段：</p>
<blockquote>
<ol>
<li>
<p>需求分析、</p>
</li>
<li>
<p>概念设计、</p>
</li>
<li>
<p>逻辑设计、</p>
</li>
<li>
<p>物理设计、</p>
</li>
<li>
<p>数据库实施、</p>
</li>
<li>
<p>数据库运行和维护。</p>
</li>
</ol>
</blockquote>
</blockquote>
<h3 id="数据库设计步骤"><a href="#数据库设计步骤" class="headerlink" title="数据库设计步骤"></a>数据库设计步骤</h3>
<p class='item-img' data-src='/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207114552607.png'><img src="/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207114552607.png" alt="数据库设计步骤"></p>
<h4 id="需求分析阶段"><a href="#需求分析阶段" class="headerlink" title="需求分析阶段"></a>需求分析阶段</h4>
<blockquote>
<p>需求分析就是根据用户的需求收集数据，是设计数据库的起点。需求分析的结果是否准确反映用户的实际需求，将直接影响到后面各个阶段的设计，并影响到设计结果是否合理和实用。</p>
<p>需求分析的任务就是收集数据，要尽可能多地收集关于数据库要存储的数据以及将来如何使用这些数据的信息，确保收集到数据库需要存储的全部信息。</p>
</blockquote>
<blockquote>
<p><strong>需求分析的目标</strong>可以参考以下问题：</p>
<p>（1）有多少数据，数据的来源在哪里，是否有已存在的数据资源？</p>
<p>（2）必须保存哪些数据，数据是字符、数字或日期型？</p>
<p>（3）谁使用数据，如何使用？</p>
<p>（4）数据是否经常修改，如何修改和什么时候修改？</p>
<p>（5）某个数据是否依赖于另一个数据或被其他数据引用？</p>
<p>（6）某个信息是否要唯一？</p>
<p>（7）哪些数据是组织内部的和哪些是外部数据？</p>
<p>（8）哪些业务活动与数据有关，数据如何支持业务活动？</p>
<p>（9）数据访问的频度和增长的幅度如何？</p>
<p>（10）谁可以访问数据，如何保护数据。</p>
</blockquote>
<blockquote>
<p><strong>需求分析的方法</strong>，常用的调查方法：</p>
<p>（1）跟班作业。通过亲身参加业务工作来了解业务活动的情况。通过这种方法可以比较准确地了解用户的需求，但比较耗费时间。</p>
<p>（2）开调查会。通过与用户座谈来了解业务活动情况及用户需求。座谈时，参加者和用户之间可以相互启发。</p>
<p>（3）请专人介绍。</p>
<p>（4）询问。对某些调查中的问题，可以找专人询问。</p>
<p>（5）问卷调查。设计调查表请用户填写。如果调查表设计得合理，这种方法是很有效的，也易于为用户所接受。</p>
<p>（6）查阅记录。查阅与原系统有关的数据记录。</p>
</blockquote>
<h4 id="概念设计阶段"><a href="#概念设计阶段" class="headerlink" title="概念设计阶段"></a>概念设计阶段</h4>
<blockquote>
<p>概念设计是整个数据库设计的关键，它通过对用户的需求进行综合、归纳与抽象，形成一个独立于具体DBMS的概念模型。</p>
<p>设计人员完成了数据库设计的第一步，收集到了现实世界中的数据，下一步的工作是将收集到的数据进行分析，找出它们之间的联系，并用E-R图来表示。</p>
</blockquote>
<blockquote>
<p><strong>概念模型的相关概念</strong>：</p>
<ol>
<li>
<p><strong>实体（Entity）</strong>：客观存在并且可以相互区别的事物称为实体。实体可以是具体的事物，也可以是抽象的事件。</p>
</li>
<li>
<p><strong>属性（Attribute）</strong>：描述实体的特性。一个实体可以用若干个属性来描述。</p>
</li>
<li>
<p><strong>主码（Key）</strong>：唯一标识实体的属性或属性的组合。</p>
</li>
<li>
<p><strong>域（Domain）</strong>：属性的取值范围称为该属性的域。</p>
</li>
<li>
<p><strong>实体集（Entity Set）</strong>：具有相同特征和性质的同一类实体的集合称为实体集。例如全体学生、一批图书等。</p>
</li>
<li>
<p><strong>联系（Relationship）</strong>：</p>
<p>在现实世界中，事物内部以及事物之间是有联系的，这些联系在信息世界中反映为实体（型）内部的联系和实体（型）之间的联系。</p>
<p>实体内部的联系通常是指组成实体的各属性之间的联系；</p>
<p>实体之间的联系通常是指不同实体集之间的联系。</p>
</li>
</ol>
</blockquote>
<blockquote>
<p><em>两个实体之间的联系可以分为</em> <strong>3类</strong>。</p>
<p>（1）一对一(1:1)联系（One-to-One Relationship）。</p>
<p>例如，如果一个人只能有一个身份证，一个身份证只能对应一个人，则人和身份证之间具有一对一的联系。</p>
<p>（2）一对多(1:n)联系（One-to-Many Relationship）。</p>
<p>例如，一个人可以有多个移动电话号码，但一个电话号码只能卖给一个人。人与移动电话号码之间的联系就是一对多的联系。</p>
<p>（3）多对多(m:n)联系（Many-to-Many Relationship）。</p>
<p>例如，一门课程同时可以由若干学生选修，而一个学生同时也可以选修若干门课程，课程与学生之间的联系是多对多的联系。</p>
</blockquote>
<blockquote>
<p><strong>概念模型</strong>是对信息世界的建模，它应当能够全面、准确地描述信息世界，是信息世界的基本概念。</p>
<p><strong>概念模型</strong>用于建立信息世界的模型，它是独立于计算机系统的模型，强调其语义表达功能，要求概念简单、清晰，易于用户理解，它是现实世界的第1层抽象，是用户和数据库设计人员之间进行交流的工具。</p>
<p>概念模型的表示方法很多，其中最为著名和使用最为广泛的是P.P.Chen于1976年提出的E-R（Entity-Relationship）模型。</p>
</blockquote>
<p class='item-img' data-src='/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207115838565.png'><img src="/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207115838565.png" alt="建模"></p>
<p><strong>E-R图的组成要素及其画法</strong></p>
<p class='item-img' data-src='/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207115919329.png'><img src="/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207115919329.png" alt="E-R图的组成要素及其画法"></p>
<blockquote>
<p><strong>概念结构设计的方法</strong>：</p>
<p>（1）自顶向下。首先定义全局概念结构的框架，然后逐步细化。</p>
<p>（2）自底向上。首先定义各局部应用的概念结构，然后将它们集成起来，得到全局概念结构。</p>
<p>（3）逐步扩张。首先定义最重要的核心概念结构，然后向外扩充，以滚雪球的方式逐步生成其他概念结构，直至总体概念结构。</p>
<p>（4）混合策略。将自顶向下和自底向上的方法相结合，用自顶向下策略设计一个全局概念结构的框架，以它为框架自底向上设计各局部概念结构。</p>
<p>最常采用的是混合策略，即自顶向下进行需求分析，然后自底向上设计概念结构。</p>
</blockquote>
<p class='item-img' data-src='/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207122230533.png'><img src="/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207122230533.png" alt="混合策略"></p>
<blockquote>
<p><strong>概念结构设计的步骤</strong></p>
<p>（1）进行数据抽象，设计局部E-R模型。<br>
（2）集成各局部E-R模型，形成全局E-R模型。</p>
</blockquote>
<p class='item-img' data-src='/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207122412013.png'><img src="/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207122412013.png" alt="概念结构设计的步骤"></p>
<blockquote>
<p><strong>E-R图设计步骤</strong> ：</p>
<p>对于复杂的系统，E-R图设计通常都应经过以下两个阶段：</p>
<p>（1）针对每一用户画出该用户信息的局部E—R图，确定该用户视图的实体、属性和联系。需注意的是：能作为属性的就不要作为实体，这有利于E—R图的简化。</p>
<p>（2）综合局部E—R图，生成总体E—R图。在综合过程中，同名实体只能出现一次，还要去掉不必要的联系，以便消除冗余。一般来说，从总体E—R图必须能导出原来的所有局部视图，包括实体、属性和联系。</p>
</blockquote>
<h4 id="逻辑设计阶段"><a href="#逻辑设计阶段" class="headerlink" title="逻辑设计阶段"></a>逻辑设计阶段</h4>
<blockquote>
<p>概念设计阶段完成后，下一步进入逻辑设计阶段，即将概念模型转换成某个DBMS所支持的数据模型，并对其进行优化。</p>
</blockquote>
<h5 id="数据模型"><a href="#数据模型" class="headerlink" title="数据模型"></a>数据模型</h5>
<blockquote>
<p>数据模型：它是直接面向数据库的逻辑结构，是现实世界的<strong>第2层抽象</strong>。<br>
数据模型涉及计算机系统和数据库管理系统。数据模型有严格的形式化定义，以便于在计算机系统中实现。</p>
</blockquote>
<p><strong>常见数据模型：</strong></p>
<p><strong>1.层次模型</strong>：用“树”结构来表示数据之间的关系</p>
<blockquote>
<p>优点：<br>
简单，只需很少几条命令就能操纵数据库。<br>
性能优于关系模型和网状模型。<br>
提供良好的完整性支持。<br>
缺点：<br>
不支持多对多联系，只能通过冗余数据（易产生数据不一致性）或引入虚拟结点来解决。</p>
</blockquote>
<p class='item-img' data-src='/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207123322428.png'><img src="/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207123322428.png" alt="层次模型"></p>
<p><strong>2.网状模型</strong>：用“图”结构来表示数据之间的关系</p>
<blockquote>
<p>优点：</p>
<p>​	能更直接地反映现实世界，效率高。</p>
<p>缺点：</p>
<p>​	结构比较复杂，DDL和DML语言复杂。</p>
</blockquote>
<p class='item-img' data-src='/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207141022973.png'><img src="/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207141022973.png" alt="网状模型"></p>
<p><strong>3.关系模型</strong>：用“表”结构（或称关系）来表示数据之间的关系。</p>
<blockquote>
<p>优点：</p>
<p>​	建立在严格的数学概念的基础上，概念单一，数据结构简单、清晰，用户易懂易用。</p>
<p>​	实体和各类联系都用关系来表示，对数据的检索结果也是关系。</p>
<p>​	关系模型的存取路径对用户透明，具有更高的数据独立性，更好的安全保密性。</p>
<p>​	简化了程序员的工作和数据库开发建立的工作，关系模型中的数据联系是靠数据冗余实现的。</p>
<p>缺点：</p>
<p>​	存取路径对用户透明导致查询效率往往不如非关系数据模型。</p>
<p>​	为提高性能，必须对用户的查询请求进行优化从而增加了开发数据库管理系统的难度。</p>
</blockquote>
<p class='item-img' data-src='/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207141127089.png'><img src="/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207141127089.png" alt="关系模型"></p>
<p><strong>E—R</strong>模型到关系模型的转换</p>
<blockquote>
<p><strong>把E-R图转换为关系模型可遵循如下原则</strong> ：</p>
<p>1.对于E—R图中每个<strong>实体集</strong>，都应转换为一个关系，该关系应包括对应实体的全部属性，并应根据关系所表达的语义确定哪个属性或哪几个属性组作为“主关键字”，主关键字用来标识实体。</p>
<p>2.对于E—R图中的<strong>联系</strong>，情况比较复杂，要根据实体联系方式的不同，采取不同的手段加以实现。</p>
</blockquote>
<blockquote>
<p><strong>转换规则：（必须牢记！！）</strong></p>
<p>规则1.1 实体类型的转换：将每个实体类型转换成一个关系模式，实体的属性即为关系的属性，实体的标识符即为关系模式的码。</p>
<p>规则1.2 联系类型的转换：根据不同的联系类型做不同的处理。</p>
</blockquote>
<blockquote>
<p>规则1.2.1 若实体间联系是1∶1，可以在两个实体类型转换成的两个关系模式中任意一个关系模式中加入另一个关系模式的码和联系类型的属性。</p>
</blockquote>
<p>【例】将下图所示的含有1∶1联系的E-R图根据上述规则转换为关系模式。</p>
<blockquote>
<p>方案1：“负责”与“职工”两关系模式合并。</p>
<p>职工（<u>职工号</u>，姓名，年龄，产品号）</p>
<p>产品（<u>产品号</u>，产品名，价格）</p>
<p>​	或者：</p>
<p>方案2：“负责”与“产品”两关系模式合并。</p>
<p>职工（<u>职工号</u>，姓名，年龄）</p>
<p>产品（<u>产品号</u>，产品名，价格，职工号）</p>
</blockquote>
<p class='item-img' data-src='/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207145928866.png'><img src="/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207145928866.png" alt="1:1"></p>
<blockquote>
<p>规则1.2.2 若实体间的联系是1∶<em>n</em>，则在<em>n</em>端实体类型转换成的关系模式中加入1端实体类型的码和联系类型的属性。</p>
</blockquote>
<p>【例】将下图所示的含有1∶n联系的E-R图根据上述规则转换为关系模式。</p>
<blockquote>
<p>仓库（<u>仓库号</u>，地点，面积）</p>
<p>产品（<u>产品号</u>，产品名，价格，<u>仓库号</u>，数量）</p>
</blockquote>
<p class='item-img' data-src='/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207150136781.png'><img src="/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207150136781.png" alt="1:n"></p>
<blockquote>
<p>规则1.2.3 若实体间联系是<em>m</em>∶<em>n</em>，则将联系类型也转换成关系模式，其属性为两端实体类型的码加上联系类型的属性，而码为两端实体码的组合。</p>
</blockquote>
<p>【例】将下图所示的含有m∶n联系的E-R图根据上述规则转换为关系模式。</p>
<blockquote>
<p>商店（<u>店号</u>，店名，店址，店经理）</p>
<p>商品（<u>商品号</u>，商品名，单价，产地）</p>
<p>经营（<u>店号</u>，<u>商品号</u>，月销售量）</p>
</blockquote>
<p class='item-img' data-src='/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207150354615.png'><img src="/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207150354615.png" alt="m:n"></p>
<blockquote>
<p>规则1.2.4  3个或3个以上的实体间的一个多元联系，不管联系类型是何种方法，总是将多元联系类型转换成一个关系模式，其属性为与该联系相连的各实体的码及联系本身的属性，其码为各实体码的组合。</p>
</blockquote>
<p>【例】将下图所示的多实体集间含有m∶n联系的E-R图根据上述规则转换为关系模式。</p>
<blockquote>
<p>供应商（<u>供应商号</u>，供应商名，地址）</p>
<p>零件（<u>零件号</u>，零件名，单价）</p>
<p>产品（<u>产品号</u>，产品名，型号）</p>
<p>供应（<u>供应商号</u>，<u>零件号</u>，<u>产品号</u>，数量）</p>
</blockquote>
<p class='item-img' data-src='/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207151251648.png'><img src="/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207151251648.png" alt="3个及以上"></p>
<h4 id="数据库设计规范化"><a href="#数据库设计规范化" class="headerlink" title="数据库设计规范化"></a>数据库设计规范化</h4>
<blockquote>
<p>仅有好的RDBMS并不足以避免数据冗余，必须在数据库的设计中创建好的表结构</p>
<p>关系数据库范式理论是在数据库设计过程中将要依据的准则，数据库结构必须要满足这些准则，才能确保数据的准确性和可靠性。这些准则则被称为规范化形式，即范式。</p>
<p>Dr E.F.codd 最初定义了规范化的三个级别，范式是具有最小冗余的表结构。这些范式是：</p>
<blockquote>
<p>第一范式(1st NF －First Normal Fromate)</p>
<p>第二范式(2nd NF－Second Normal Fromate)</p>
<p>第三范式(3rd NF－ Third Normal Fromate)</p>
</blockquote>
</blockquote>
<h5 id="函数依赖"><a href="#函数依赖" class="headerlink" title="函数依赖"></a>函数依赖</h5>
<blockquote>
<p>实体之间，实体内部的各个特征之间的相互依赖和制约关系——自然反映到关系数据库中的各关系和关系内部的各属性之间。</p>
<p>关系是由属性构成，函数依赖就是讲<strong>属性之间的依赖</strong>。</p>
</blockquote>
<p><strong>定义1函数依赖：</strong></p>
<blockquote>
<p>设有关系模式<em>R</em>(<em>U</em> )，<em>X</em>和<em>Y</em>均为<em>U</em>={<em>A</em>1，<em>A</em>2，…，<em>An</em>}的子集，若对于元素中X上的每个值都有Y上的一个惟一值与之相对应，则称<em>X</em>函数决定<em>Y</em>，或称<em>Y</em>函数依赖于<em>X</em>，记作<em>X</em>→<em>Y</em>，其中<em>X</em>叫做决定因素（Determinant），<em>Y</em>叫做依赖因素（Dependent）。</p>
</blockquote>
<blockquote>
<p>练习：指出学生关系S中存在的函数依赖关系</p>
<p>S（学号，姓名，班号，班级，课程号，教师，成绩）</p>
<p><strong>学号</strong> →<strong>姓名</strong>（每个学号只能有一个学生姓名）</p>
<p><strong>学号</strong> →<strong>班级</strong>（每个学号只能有一个班级）</p>
<p>（<strong>学号</strong>，<strong>课程号</strong>）→<strong>成绩</strong>（每个学生每门课只有一个成绩）</p>
</blockquote>
<p><strong>定义2：部分函数依赖 、完全函数依赖</strong></p>
<blockquote>
<p>在关系模式<em>R</em>(<em>U</em> )中，X和Y为属性集U上的子集，若<em>X</em>→<em>Y</em>，并且对于<em>X</em>的任何一个真子集<em>X</em>¢，都有<em>X</em>¢ → <em>Y</em>，则称X部分函数决定Y或<em>Y</em>部分函数依赖<em>X</em>，记作<em>X</em>   <em>Y</em>。</p>
<p>否则，若不存<em>X</em>的任何一个真子集<em>X</em>¢，使得<em>X</em>¢→<em>Y</em>，则称X完全函数决定Y或 <em>Y</em>完全函数依赖于X， 记作<em>X</em>   <em>Y</em>。</p>
</blockquote>
<blockquote>
<p>练习：指出学生关系S中存在的函数依赖关系是部分依赖还是完全依赖</p>
<p>S（学号，姓名，班号，班级，课程号，教师，成绩）</p>
<p>学号 →姓名（完全函数依赖）</p>
<p>学号 →班级（完全函数依赖）</p>
<p>（学号，课程号）→成绩（完全函数依赖）</p>
<p>（<strong>学号</strong>，课程号）→<strong>姓名</strong>（部分函数依赖）</p>
</blockquote>
<p><strong>定义3：传递函数依赖</strong></p>
<blockquote>
<p>在关系模式<em>R</em>(<em>U</em> )中，<em>X</em>、<em>Y</em>、<em>Z</em>是属性集U上的子集，如果<em>X</em>→<em>Y</em> <em>，**Y</em>→<em>Z</em>，但Y不包含于X，Y不能函数决定X,则存在<em>X</em> → <em>Z</em>。</p>
</blockquote>
<blockquote>
<p>练习：指出学生关系S中存在的函数依赖关系是否存在传递函数依赖</p>
<p>S（学号，姓名，班号，班级，课程号，教师，成绩）</p>
<p>学号 →班号   班号 →班级 （班号不属于学号，班号不决定学号）</p>
<p>学号→班级</p>
<p>所以班级传递依赖于学号</p>
</blockquote>
<blockquote>
<p><strong>属性间联系决定函数依赖</strong></p>
<p>① 1∶1联系：如果两属性集<em>X</em>、<em>Y</em>之间是1∶1联系，则存在函数依赖<em>X</em>  <em>Y</em>。</p>
<p>② 1∶n联系：如果两属性集<em>X</em>、<em>Y</em>之间是<em>n</em>∶1联系，则存在函数依赖<em>X</em>→<em>Y</em>，即多方决定一方。</p>
<p>③ m∶n联系：如果两属性集<em>X</em>、<em>Y</em>之间是<em>m</em>∶<em>n</em>联系，则不存在函数依赖。</p>
</blockquote>
<p><strong>定义4：候选码</strong></p>
<blockquote>
<p>在关系模式<em>R</em>(<em>U</em> )中，<em>X</em>是属性集U上的子集，如果<em>X</em>能够函数决定U中的每个属性*，*并且X的任何真子集都不能函数决定U中的每个属性，则称X为关系R上的一个候选码。</p>
<p>在一个关系中可以有多个候选码，可能是某几个属性，也可能是某几个属性的组合。</p>
</blockquote>
<blockquote>
<p>练习：指出学生关系S的候选码</p>
<p>S（学号，姓名，班号，班级，课程号，教师，成绩）</p>
<p>学号 →姓名，学号 →班号，班号→班级</p>
<p>（学号，课程号）→成绩</p>
<p>所以学生关系S的候选码是（学号，课程号）</p>
</blockquote>
<p><strong>定义5：主码/主键 主属性</strong></p>
<blockquote>
<p>一个关系包含多个候选码，可选取一个作为主码/主键。</p>
</blockquote>
<p><strong>定义6：主属性</strong></p>
<blockquote>
<p>主属性：包含在任一候选码中的属性称为主属性，其他为非主属性。</p>
</blockquote>
<h5 id="关系数据库范式理论"><a href="#关系数据库范式理论" class="headerlink" title="关系数据库范式理论"></a>关系数据库范式理论</h5>
<blockquote>
<p>（1）第一范式：若关系模式R(U)的 每个分量都是不可分割的数据项，则R(U)∈1NF</p>
</blockquote>
<p class='item-img' data-src='/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207205230772.png'><img src="/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207205230772.png" alt="第一范式"></p>
<blockquote>
<p>（2）第二范式：若R(U)∈1NF，且R(U)中的每一个非主属性都完全函数依赖于R(U)的任一候选码，则R(U)∈2NF</p>
</blockquote>
<table>
<thead>
<tr>
<th><strong>学号</strong></th>
<th><strong>姓名</strong></th>
<th><strong>班号</strong></th>
<th><strong>地址</strong></th>
<th><strong>课程号</strong></th>
<th><strong>课程名</strong></th>
<th><strong>教师</strong></th>
<th><strong>成绩</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>01001</td>
<td>王丽</td>
<td>01</td>
<td>河北省石家庄市裕华路</td>
<td>C001</td>
<td>C语言</td>
<td>刘峰</td>
<td>80</td>
</tr>
<tr>
<td>01002</td>
<td>张勇</td>
<td>01</td>
<td>河北省保定市裕华路</td>
<td>C001</td>
<td>C语言</td>
<td>刘峰</td>
<td>75</td>
</tr>
<tr>
<td>01003</td>
<td>李江</td>
<td>01</td>
<td>河北省邢台市新华路</td>
<td>C001</td>
<td>C语言</td>
<td>刘峰</td>
<td>86</td>
</tr>
</tbody>
</table>
<blockquote>
<p>候选码：学号，课程号</p>
<p>非主属性：姓名，班号，地址，课程名，教师，成绩</p>
<p>函数依赖（学号，课程号）→姓名 是部分函数依赖</p>
</blockquote>
<table>
<thead>
<tr>
<th><strong>学号</strong></th>
<th><strong>姓名</strong></th>
<th><strong>班号</strong></th>
<th><strong>地址</strong></th>
<th><strong>教师</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>01001</td>
<td>王丽</td>
<td>01</td>
<td>河北省石家庄市裕华路</td>
<td>刘峰</td>
</tr>
<tr>
<td>01002</td>
<td>张勇</td>
<td>01</td>
<td>河北省保定市裕华路</td>
<td>刘峰</td>
</tr>
<tr>
<td>01003</td>
<td>李江</td>
<td>01</td>
<td>河北省邢台市新华路</td>
<td>刘峰</td>
</tr>
</tbody>
</table>
<blockquote>
<p>第二范式还是存在数据冗余，操作异常情况</p>
</blockquote>
<blockquote>
<p>（3）第三范式：如果关系R(U)中的每一个非主属性都不传递函数依赖于R(U)的任一候选码，则R(U)∈3NF</p>
</blockquote>
<table>
<thead>
<tr>
<th><strong>学号</strong></th>
<th><strong>姓名</strong></th>
<th><strong>班号</strong></th>
<th><strong>班级</strong></th>
<th><strong>教师</strong></th>
<th><strong>成绩</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>01001</td>
<td>王丽</td>
<td>01</td>
<td>21级计算机网络技术</td>
<td>刘峰</td>
<td>80</td>
</tr>
<tr>
<td>01002</td>
<td>张勇</td>
<td>01</td>
<td>21级计算机网络技术</td>
<td>刘峰</td>
<td>75</td>
</tr>
<tr>
<td>01003</td>
<td>李江</td>
<td>01</td>
<td>21级计算机网络技术</td>
<td>刘峰</td>
<td>86</td>
</tr>
</tbody>
</table>
<blockquote>
<p>候选码：学号</p>
<p>非主属性：姓名，班号，班号，教师，成绩</p>
<p>学号→班号，班号→班级 所以 学号→班级 是传递函数依赖</p>
</blockquote>
<h5 id="数据库规范化实例"><a href="#数据库规范化实例" class="headerlink" title="数据库规范化实例"></a>数据库规范化实例</h5>
<blockquote>
<p><strong>规范化理论</strong></p>
<p>​	利用规范化力量来改造关系模式，通过<strong>分解关系模式</strong>来消除其中不合适的数据依赖，以解决插入异常、删除异常、更新异常和数据冗余问题。</p>
</blockquote>
<blockquote>
<p><strong>解决之道：分解、分解、再分解！</strong></p>
<p>让一个关系模式尽量只描述一个概念、一个实体或一种实体之间的联系，<strong>概念单一</strong>！</p>
</blockquote>
<p>例如：</p>
<table>
<thead>
<tr>
<th><strong>学号</strong></th>
<th><strong>姓名</strong></th>
<th><strong>性别</strong></th>
<th><strong>年龄</strong></th>
<th><strong>班级编号</strong></th>
<th><strong>班级名称</strong></th>
<th><strong>课程编号</strong></th>
<th><strong>课程名</strong></th>
<th><strong>成绩</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>00101</td>
<td>王丽</td>
<td>女</td>
<td>20</td>
<td>001</td>
<td>22级计算机班</td>
<td>C001</td>
<td>C语言</td>
<td>80</td>
</tr>
<tr>
<td>00201</td>
<td>张勇</td>
<td>男</td>
<td>18</td>
<td>002</td>
<td>22级会计班</td>
<td>C010</td>
<td>经济法</td>
<td>75</td>
</tr>
<tr>
<td>00102</td>
<td>李江</td>
<td>男</td>
<td>19</td>
<td>001</td>
<td>22级计算机班</td>
<td>C002</td>
<td>数据结构</td>
<td>86</td>
</tr>
</tbody>
</table>
<blockquote>
<p>候选码：（学号，课程编号）</p>
<p>（学号，课程号）→姓名 是部分函数依赖</p>
<p>学号→班级编号 班级编号→班级名称是传递函数依赖</p>
</blockquote>
<h5 id="数据库规范化实例——关系分解"><a href="#数据库规范化实例——关系分解" class="headerlink" title="数据库规范化实例——关系分解"></a>数据库规范化实例——关系分解</h5>
<p><strong>1NF→2NF：去掉部分依赖分解过程</strong></p>
<table>
<thead>
<tr>
<th><strong>学号</strong></th>
<th><strong>姓名</strong></th>
<th><strong>性别</strong></th>
<th><strong>年龄</strong></th>
<th><strong>班级编号</strong></th>
<th><strong>班级名称</strong></th>
<th><strong>课程编号</strong></th>
<th><strong>课程名</strong></th>
<th><strong>成绩</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>00101</td>
<td>王丽</td>
<td>女</td>
<td>20</td>
<td>001</td>
<td>22级计算机班</td>
<td>C001</td>
<td>C语言</td>
<td>80</td>
</tr>
<tr>
<td>00201</td>
<td>张勇</td>
<td>男</td>
<td>18</td>
<td>002</td>
<td>22级会计班</td>
<td>C010</td>
<td>经济法</td>
<td>75</td>
</tr>
<tr>
<td>00102</td>
<td>李江</td>
<td>男</td>
<td>19</td>
<td>001</td>
<td>22级计算机班</td>
<td>C002</td>
<td>数据结构</td>
<td>86</td>
</tr>
</tbody>
</table>
<blockquote>
<p>分解方法：候选码属性集合的每个子集，用它作为主键，将依赖于此主键的属性放置到此关系模式中，构成一个新关系模式</p>
</blockquote>
<blockquote>
<p><strong>候选码</strong>：（<strong>学号，课程编号</strong>）</p>
<p><strong>子集：学号，课程编号，（学号，课程编号）</strong></p>
<p><strong>学生</strong>（<strong>学号</strong>，姓名，性别，年龄，班级编号，班级名称）</p>
<p><strong>课程</strong>（<strong>课程编号</strong>，课程名称）</p>
<p><strong>选课</strong>（<strong>学号，课程编号</strong>，成绩）</p>
</blockquote>
<p class='item-img' data-src='/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207210227046.png'><img src="/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207210227046.png" alt="1NF➡️2NF"></p>
<blockquote>
<p>学生（学号，姓名，性别，年龄，班级编号，班级名称）</p>
<p>候选码：学号</p>
<p>学号→班级编号 班级编号→班级名称是传递函数依赖</p>
</blockquote>
<blockquote>
<p>分解方法：对于不是候选码的每个决定因子（班级编号），新建一个关系模式，将决定因子作为新关系模式的主键，在新关系模式中包含在原关系模式中所有依赖于该决定因子的属性（班级名称），从原关系模式中删去依赖于它的所有属性（班级名称）。</p>
</blockquote>
<blockquote>
<p><strong>学号→班级编号 班级编号→班级名称</strong>是<strong>传递函数依赖</strong></p>
</blockquote>
<blockquote>
<p>学生（<strong>学号</strong>，姓名，性别，年龄，班级编号，班级名称）</p>
<p>学生（<strong>学号</strong>，姓名，性别，年龄）</p>
<p>班级（<strong>班级编号</strong>，班级名称）</p>
</blockquote>
<p><strong>2NF→3NF：去掉传递依赖分解过程</strong></p>
<p class='item-img' data-src='/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207210523416.png'><img src="/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207210523416.png" alt="2NF→3NF"></p>
<blockquote>
<p>学生（<strong>学号</strong>，姓名，性别，年龄）</p>
<p>班级（<strong>班级编号</strong>，班级名称）</p>
<p>课程（<strong>课程编号</strong>，课程名称）</p>
<p>选课（<strong>学号，课程编号</strong>，成绩）</p>
</blockquote>
<h5 id="规范化和性能的关系"><a href="#规范化和性能的关系" class="headerlink" title="规范化和性能的关系"></a>规范化和性能的关系</h5>
<blockquote>
<p>为满足某种商业目标，数据库性能比规范化数据库更重要</p>
</blockquote>
<blockquote>
<ul>
<li>通过在给定的表中添加额外的字段，以大量减少需要从中搜索信息所需的时间</li>
<li>通过在给定的表中插入计算列（如成绩总分），以方便查询</li>
</ul>
</blockquote>
<blockquote>
<p>进行规范化的同时，还需要综合考虑数据库的性能。</p>
</blockquote>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3>
<blockquote>
<p>在需求分析阶段，设计数据库的一般步骤为：</p>
<p>​	收集信息</p>
<p>​	标识对象</p>
<p>​	标识每个对象的属性</p>
<p>​	标识对象之间的关系</p>
<p>在概要设计阶段和详细设计阶段，设计数据库的步骤为：</p>
<p>​	绘制E-R图</p>
<p>​	将E-R图转换为表格</p>
<p>​	应用三大范式规范化表格</p>
<p>为了设计结构良好的数据库，需要遵守一些专门的规则，称为数据库的设计范式。</p>
<p>​	第一范式（1NF）的目标：确保每列的原子性。</p>
<p>​	第二范式（2NF）的目标：确保表中的每列，都和主键相关 。</p>
<p>​	第三范式（3NF）的目标：确保每列都和主键列直接相关，而不是间接相关 。</p>
</blockquote>
<h2 id="数据定义语言—DDL"><a href="#数据定义语言—DDL" class="headerlink" title="数据定义语言—DDL"></a>数据定义语言—DDL</h2>
<h3 id="MySQL数据库文件介绍"><a href="#MySQL数据库文件介绍" class="headerlink" title="MySQL数据库文件介绍"></a>MySQL数据库文件介绍</h3>
<blockquote>
<p>数据库管理的核心任务包括创建、操作和支持数据库。在MySQL中，每个数据库都对应存放在一个与数据库同名的文件夹中。</p>
<p>MySQL数据库文件有“.frm”、“.MYD”和“.MYI”3种文件，其中“.frm”是描述表结构的文件，“.MYD”是表的数据文件，“.MYI”是表数据文件中的索引文件。它们都存放在与数据库同名的文件夹中。</p>
</blockquote>
<h3 id="MySQL数据库模型"><a href="#MySQL数据库模型" class="headerlink" title="MySQL数据库模型"></a>MySQL数据库模型</h3>
<blockquote>
<ul>
<li>在数据库服务器中可以存储多个数据库文件，所以建立数据库时要设定数据库的文件名，每个数据库有惟一的数据库文件名作为与其它数据库区别的标识。</li>
<li>数据库文件： 数据库是由相关数据表组成，一个数据库包括多个数据表。数据库文件用于记录数据库中数据表构成的信息。</li>
<li>数据库只能由得到授权的用户访问，这样保证了数据库的安全。</li>
</ul>
</blockquote class='item-img' data-src='/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207211337754.png'><img src="/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207211337754.png" alt="MySQL数据库模型" style="zoom: 50%;">
<h3 id="数据库和表"><a href="#数据库和表" class="headerlink" title="数据库和表"></a>数据库和表</h3>
<blockquote>
<p>数据库可以看成是一个存储数据对象的容器，这些数据对象包括表、视图、触发器、存储过程等，其中，表是最基本的数据对象，用以存放数据库的数据。</p>
</blockquote>
<blockquote>
<p>必须首先创建数据库，然后才能创建数据库的数据对象。</p>
<p>MySQL可以采用两种方式：</p>
<p>创建、操作数据库和数据对象</p>
<p>（1）命令行方式</p>
<p>（2）图形界面工具方式</p>
</blockquote class='item-img' data-src='/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207211551496.png'><img src="/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241207211551496.png" alt="数据库" style="zoom:50%;">
<blockquote>
<p><strong>MySQL自动建立的数据库介绍</strong></p>
<p>​     MySQL安装完成之后，将会在其data目录下自动创建information_schema、mysql、performance_schema、sys四个系统数据库。</p>
<p>​     可以使用<code>SHOW DATABASES</code>命令来查看当前所有存在的数据库。</p>
</blockquote>
<h3 id="创建数据库"><a href="#创建数据库" class="headerlink" title="创建数据库"></a>创建数据库</h3>
<blockquote>
<p>MySQL安装后，系统自动地创建information_scema和MySQL数据库，MySQL把有关数据库的信息存储在这两个数据库中。如果删除了这些数据库，MySQL就不能正常工作。</p>
<p>对于用户的数据，需要创建新的数据库来存放。</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法格式：</span></span><br><span class="line"><span class="keyword">CREATE</span> &#123;DATABASE <span class="operator">|</span> SCHEMA&#125; [IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span>] 数据库名</span><br><span class="line">        [ [<span class="keyword">DEFAULT</span>] <span class="type">CHARACTER</span> <span class="keyword">SET</span> 字符集名 <span class="operator">|</span> [<span class="keyword">DEFAULT</span>] <span class="keyword">COLLATE</span> 校对规则名]</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 说明：语句中“[ ]”内为可选项。</span></span><br><span class="line"><span class="comment">-- &#123;  |  &#125;表示二选一。</span></span><br><span class="line"><span class="comment">-- 例如：</span></span><br><span class="line"><span class="keyword">Create</span> database bookstore;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<p>在SQL语言创建数据库命令<code>create database</code>中，如果省略语句中“[ ]”中的所有可选项，其结构形式如下：</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> DATABASE 数据库名;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>MySQL数据库命名规则：</strong></p>
<ul>
<li>不能与其他数据库重名</li>
<li>名称可以由任意阿拉伯数字、字母、下划线和“$”组成，可以使用以上任意字符头，但不能使用单独的数字，否则会与其他数字混淆</li>
<li>名称最长64个字符</li>
<li>不能使用MySQL关键字</li>
<li>默认情况下，Windows对数据库大小写不敏感，而在Linux下对大小写是敏感的，为了数据库在不同平台下移植，建议使用小写数据库名。</li>
</ul>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例3.1】 创建一个名为Bookstore的数据库。</span></span><br><span class="line"><span class="keyword">CREATE</span> DATABASE Bookstore; </span><br></pre></td></tr></table></figure>
<h3 id="显示数据库命令"><a href="#显示数据库命令" class="headerlink" title="显示数据库命令"></a>显示数据库命令</h3>
<blockquote>
<p>显示服务器中已建立的数据库，使用<code>SHOW DATABASES;</code>命令。</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法格式：</span></span><br><span class="line"><span class="keyword">SHOW</span> DATABASES;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<p>此命令没有用户变量，执行“<code>SHOW DATABASES;</code>” 。</p>
<p><strong>注意：在MySQL中，每一条SQL语句都以“;”作为结束标志。</strong></p>
</blockquote>
<h3 id="打开数据库"><a href="#打开数据库" class="headerlink" title="打开数据库"></a>打开数据库</h3>
<blockquote>
<p>因为MySQL服务器中有多个数据库，可以使用USE命令可指定当前数据库。</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法格式：</span></span><br><span class="line">USE 数据库名;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>说明：这个语句也可以用来从一个数据库“跳转”到另一个数据库，在用<code>CREATE DATABASE</code>语句创建了数据库之后，该数据库不会自动成为当前数据库，需要用这条USE语句来指定。</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】将数据库test1设置为当前数据库。</span></span><br><span class="line">Use test1;</span><br></pre></td></tr></table></figure>
<h3 id="修改数据库"><a href="#修改数据库" class="headerlink" title="修改数据库"></a>修改数据库</h3>
<blockquote>
<p>数据库创建后，如果需要修改数据库的参数，可以使用<code>ALTER DATABASE;</code>命令。</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法格式：</span></span><br><span class="line"><span class="keyword">ALTER</span> &#123;DATABASE <span class="operator">|</span> SCHEMA&#125; [数据库名]</span><br><span class="line">               [[<span class="keyword">DEFAULT</span>] <span class="type">CHARACTER</span> <span class="keyword">SET</span> 字符集名 <span class="operator">|</span> [<span class="keyword">DEFAULT</span>] <span class="keyword">COLLATE</span> 校对规则名]</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 【例3.3】 修改数据库Pet的默认字符集为latin1，校对规则为latin1_swedish_ci。</span></span><br><span class="line"><span class="keyword">ALTER</span> DATABASE Pet</span><br><span class="line"><span class="keyword">DEFAULT</span> <span class="type">CHARACTER</span> <span class="keyword">SET</span> latin1</span><br><span class="line"><span class="keyword">DEFAULT</span> <span class="keyword">COLLATE</span>  latin1_swedish_ci; </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="删除数据库"><a href="#删除数据库" class="headerlink" title="删除数据库"></a>删除数据库</h3>
<blockquote>
<p>已经创建的数据库需要删除，使用<code>DROP DATABASE</code>命令。</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法格式：</span></span><br><span class="line"><span class="keyword">DROP</span> DATABASE  [IF <span class="keyword">EXISTS</span>] 数据库名;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 例如，数据库test2命令如下：</span></span><br><span class="line"><span class="keyword">DROP</span> DATABASE  test2;</span><br></pre></td></tr></table></figure>
<h3 id="MySQL数据类型"><a href="#MySQL数据类型" class="headerlink" title="MySQL数据类型"></a>MySQL数据类型</h3>
<blockquote>
<ul>
<li>确定表中每列的数据类型是设计表的重要步骤。</li>
<li>列的数据类型就是定义该列所能存放的数据的值的类型。</li>
</ul>
</blockquote>
<table>
<thead>
<tr>
<th><strong>字符串类型</strong></th>
<th><strong>数值类型</strong></th>
<th><strong>时间类型</strong></th>
<th><strong>大数据类型</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>Char(n)</td>
<td>int</td>
<td>date</td>
<td>blob</td>
</tr>
<tr>
<td>Varchar(n)</td>
<td>Float(M,D)</td>
<td>time</td>
<td>text</td>
</tr>
<tr>
<td></td>
<td></td>
<td>datetime</td>
<td></td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>MySQL常用数据类型：</strong></p>
<ul>
<li>整数类型</li>
<li>浮点数类型和定点数类型</li>
<li>字符串类型</li>
<li>日期时间类型</li>
<li>复合类型</li>
</ul>
</blockquote>
<h4 id="整数类型"><a href="#整数类型" class="headerlink" title="整数类型"></a>整数类型</h4>
<blockquote>
<p>在int类型里，MySQL支持tinyint、smallint、mediumint、int、bigint 5种类型，这些类型都是用来存放整形数据的，只不过存储的值的大小范围不一样。</p>
</blockquote>
<p class='item-img' data-src='/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241208114347133.png'><img src="/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241208114347133.png" alt="整数类型"></p>
<h4 id="浮点数类型和定点数类型"><a href="#浮点数类型和定点数类型" class="headerlink" title="浮点数类型和定点数类型"></a>浮点数类型和定点数类型</h4>
<blockquote>
<p>MySQL支持float、double、decimal 3种类型，float是单精度浮点数值、double是双精度浮点数值、decimal是定点数值，如果确定数值总长度以及小数点位数，就可以用decimal定点数值来表示。</p>
</blockquote>
<p class='item-img' data-src='/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241208114456261.png'><img src="/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241208114456261.png" alt="浮点数类型和定点数类型"></p>
<blockquote>
<p>**提示：**存储数值范围越小，精度越高；存储数值范围越大，精度就越不准确。对于既要求精度又固定小数点位数的数值存储，采用decimal（numeric），其优点在于可以自定义小数点位数，精度高。某些特殊情况，如数值范围巨大则只能用float（real）类型了，此类型一般不提倡使用。</p>
</blockquote>
<h4 id="字符串类型"><a href="#字符串类型" class="headerlink" title="字符串类型"></a>字符串类型</h4>
<blockquote>
<p>MySQL数据库提供了几种基本字符串类型，它们用来存放一个字符、一个字符串、巨大的文本或者二进制字符串数据。</p>
</blockquote>
<p class='item-img' data-src='/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241208114702446.png'><img src="/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241208114702446.png" alt="字符串类型"></p>
<h4 id="日期时间类型"><a href="#日期时间类型" class="headerlink" title="日期时间类型"></a>日期时间类型</h4>
<blockquote>
<p>MySQL数据库提供了5种不同的日期时间类型，用来存储和日期时间相关的数据，每个时间类型有一个有效值范围和一个“零”值，当指定不合法的MySQL不能表示的值时使用“零”值。</p>
</blockquote>
<p class='item-img' data-src='/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241208114804811.png'><img src="/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241208114804811.png" alt="日期时间类型"></p>
<blockquote>
<p>**提示：**MySQL数据库用date日期类型和datetime日期时间类型来存储日期值，使用time时间类型来存储时间值，使用year来存放年份值，date 类型的值应该用连字号“-”分隔开，而 time 类型的值应该用冒号“:”分隔开。</p>
</blockquote>
<h4 id="如何选取数据类型"><a href="#如何选取数据类型" class="headerlink" title="如何选取数据类型"></a>如何选取数据类型</h4>
<blockquote>
<p>数据类型的选择会影响存储空间的开销和数据查询性能，所以在设计数据库的时候，应该为存储的数据选择正确的存储数据类型。</p>
</blockquote>
<blockquote>
<p><strong>可以遵循以下原则来选取数据类型：</strong></p>
<p>（1）大小合适就是最好的，如存放姓名的字段类型，设置合适长度的字符串就可以，而不应该设置得非常大（65 535），因为这样可以用更少的磁盘容量、CPU缓存，大大减少了I/O开销。</p>
<p>（2）简单存放就好，如存放一个简单而又短小的字符串，可以选取varchar类型，而不应该选取text或者blob类型，简单的数据类型操作通常需要更少的CPU周期。</p>
<p>（3）尽量避免使用NULL，NULL是列默认的属性，通常我们要指定为NOT NULL。有NULL的列值会使得索引、索引统计和值比较更加复杂。</p>
<p>（4）数据类型的选择还应该考虑数据操作和应用处理的要求，如某些类型更适合于加快数据操作而不是其他方面。</p>
<p>（5）如果想用不同的标准对一列中所有的值进行排序，那么我们需要选择一种能够有效执行这些功能并且带有最大限度灵活性的类型。对相应字段添加索引，能够加快检索速度。需要保证使用的数据类型支持比较运算，并且相互兼容。</p>
</blockquote>
<h5 id="char和varchar"><a href="#char和varchar" class="headerlink" title="char和varchar"></a>char和varchar</h5>
<blockquote>
<p>​	char是固定长度的，查询速度比varchar快得多。char的缺点是浪费存储空间。检索char列时，返回的结果会删除尾部空格，所以程序需要对空格进行处理。</p>
<p>​	如果列中要存储的数据的长度差不多是一致的，则应该考虑使用char，否则应该考虑使用varchar；如果列中最大数据的长度小于50Byte，则一般也考虑使用char(当然，如果这个列很少用，则基于节省空间和减少I/O的考虑，还是可以使用varchar)；一般不宜定义大于50Byte的char类型列。</p>
</blockquote>
<h5 id="text和blob"><a href="#text和blob" class="headerlink" title="text和blob"></a>text和blob</h5>
<blockquote>
<p>​	在保存大文本时，通常选择text或者blob。二者的差别是blob可以保存二进制数据，如照片。text和blob又包括text、mediumtext、longtext和blob、mediumblob、longblob，它们之间的区别是存储文本长度不同和存储字节不同。在不必要的时候避免检索大型的blob或text值。把blob或text列分离到单独的表中。</p>
</blockquote>
<h5 id="浮点数和定点数"><a href="#浮点数和定点数" class="headerlink" title="浮点数和定点数"></a>浮点数和定点数</h5>
<blockquote>
<p>​	浮点数存在误差问题，因此对于货币等对精度敏感的数据，应该用定点数表示或存储。在编程中，如果用到浮点数，要特别注意误差问题，并尽量避免做浮点数比较；要注意一些特殊值的处理。</p>
<p>​	decimal用于存储精确数据，而float只能用于存储非精确的数据，故精确数据最好使用decimal类型；由于float的存储空间的开销一般比decimal小（精确到7位小数只需要4个字节，而精确到15位小数只需要8个字节），故非精确数据类型建议使用float。</p>
</blockquote>
<h5 id="日期类型的选择"><a href="#日期类型的选择" class="headerlink" title="日期类型的选择"></a>日期类型的选择</h5>
<blockquote>
<p>​	根据实际需要选择能够满足应用的最小存储日期类型。如果记录年、月、日、时、分、秒，并且记录年份比较久远，则最好使用datetime，不要使用timestamp；如果记录的日期需要让不同时区的用户使用，则最好使用timestamp，因为日期类型中只有它能够和实际时区相对应。</p>
</blockquote>
<h3 id="创建数据表"><a href="#创建数据表" class="headerlink" title="创建数据表"></a>创建数据表</h3>
<blockquote>
<p>为数据库<strong>创建数据表</strong>，可以使用SQL命令<code>CREATE TABLE</code>来完成</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法格式：</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> [IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span>] tbl_name</span><br><span class="line">      （列名<span class="number">1</span>  数据类型<span class="number">1</span>  [<span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="operator">|</span> <span class="keyword">NULL</span>] [<span class="keyword">DEFAULT</span> 列默认值]…，</span><br><span class="line">         列名<span class="number">2</span>  数据类型 <span class="number">2</span> [<span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="operator">|</span> <span class="keyword">NULL</span>] [<span class="keyword">DEFAULT</span> 列默认值]…</span><br><span class="line">       ）</span><br><span class="line">       ENGINE <span class="operator">=</span> 存储引擎；</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】命令行SQL语句方式创建数据库表book</span></span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th><strong>字段名</strong></th>
<th><strong>字段类型</strong></th>
<th><strong>宽度</strong></th>
<th><strong>是否为空</strong></th>
<th><strong>默认值</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>图书编号</strong></td>
<td><strong>char</strong></td>
<td><strong>10</strong></td>
<td>x</td>
<td></td>
<td><strong>主键，采用10位字符编号</strong></td>
</tr>
<tr>
<td><strong>类别</strong></td>
<td><strong>char</strong></td>
<td><strong>8</strong></td>
<td>x</td>
<td><strong>计算机</strong></td>
<td><strong>2-4个汉字</strong></td>
</tr>
<tr>
<td><strong>书名</strong></td>
<td><strong>varchar</strong></td>
<td><strong>40</strong></td>
<td>x</td>
<td></td>
<td><strong>不超过40个字符</strong></td>
</tr>
<tr>
<td><strong>出版时间</strong></td>
<td><strong>date</strong></td>
<td></td>
<td>x</td>
<td></td>
<td></td>
</tr>
<tr>
<td><strong>单价</strong></td>
<td><strong>Float</strong></td>
<td><strong>5,2</strong></td>
<td><strong>√</strong></td>
<td></td>
<td><strong>元为单位，精确到分</strong></td>
</tr>
<tr>
<td><strong>数量</strong></td>
<td><strong>int</strong></td>
<td></td>
<td><strong>√</strong></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 命令如下：</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span>  book</span><br><span class="line"> (</span><br><span class="line">       图书编号  <span class="type">char</span>(<span class="number">10</span>)   <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">       类别  <span class="type">varchar</span>(<span class="number">8</span>)  <span class="keyword">NOT</span> <span class="keyword">NULL</span>  <span class="keyword">DEFAULT</span>  <span class="string">&#x27;计算机&#x27;</span>,</span><br><span class="line">       书名       <span class="type">varchar</span>(<span class="number">40</span>)  <span class="keyword">NOT</span>  <span class="keyword">NULL</span> ,</span><br><span class="line">       出版时间   <span class="type">date</span>        <span class="keyword">NOT</span>  <span class="keyword">NULL</span> ,</span><br><span class="line">       单价      <span class="type">float</span>(<span class="number">5</span>,<span class="number">2</span>)    <span class="keyword">NULL</span> ,</span><br><span class="line">       数量      <span class="type">int</span>   </span><br><span class="line">); </span><br></pre></td></tr></table></figure>
<h3 id="显示数据表文件名"><a href="#显示数据表文件名" class="headerlink" title="显示数据表文件名"></a>显示数据表文件名</h3>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法格式： </span></span><br><span class="line"><span class="keyword">SHOW</span> TABLES;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 【例】显示Bookstore 数据库建立的数据表文件:</span></span><br><span class="line">USE Bookstore;  </span><br><span class="line"><span class="keyword">SHOW</span> TABLES;</span><br></pre></td></tr></table></figure>
<h3 id="显示数据表结构"><a href="#显示数据表结构" class="headerlink" title="显示数据表结构"></a>显示数据表结构</h3>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法格式(DESC是DESCRIBE的简写，二者用法相同。)：</span></span><br><span class="line">&#123;<span class="keyword">DESCRIBE</span> <span class="operator">|</span> <span class="keyword">DESC</span>&#125; 表名 [列名 <span class="operator">|</span> 通配符 ]</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 【例】 用DESCRIBE语句查看 Book 表的列的信息。</span></span><br><span class="line">USE Bookstore;</span><br><span class="line"><span class="keyword">DESCRIBE</span> Book;</span><br><span class="line"><span class="comment">-- 【例】 查看 Book 表图书编号列的信息。</span></span><br><span class="line">USE Bookstore;</span><br><span class="line"><span class="keyword">DESC</span> Book 图书编号;</span><br></pre></td></tr></table></figure>
<h3 id="修改表"><a href="#修改表" class="headerlink" title="修改表"></a>修改表</h3>
<blockquote>
<p>**<code>ALTER TABLE</code>**用于更改原有表的结构。例如，可以增加或删减列，创建或取消索引，更改原有列的类型，重新命名列或表，还可以更改表的评注和表的类型。</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法格式：</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名</span><br><span class="line">  <span class="keyword">ADD</span> [<span class="keyword">COLUMN</span>] 列定义  [<span class="keyword">FIRST</span> <span class="operator">|</span> AFTER列名]                	 <span class="comment">/*添加列*/</span>	</span><br><span class="line">  <span class="operator">|</span> <span class="keyword">ALTER</span> [<span class="keyword">COLUMN</span>] 列名 &#123;<span class="keyword">SET</span> <span class="keyword">DEFAULT</span> 默认值<span class="operator">|</span> <span class="keyword">DROP</span> <span class="keyword">DEFAULT</span>&#125; 	 <span class="comment">/*修改默认值*/</span></span><br><span class="line">  <span class="operator">|</span> CHANGE [<span class="keyword">COLUMN</span>] 旧列名 列定义    [<span class="keyword">FIRST</span><span class="operator">|</span>AFTER列名]		  <span class="comment">/*对列重命名*/</span>             </span><br><span class="line">  <span class="operator">|</span> MODIFY [<span class="keyword">COLUMN</span>] 列定义 [<span class="keyword">FIRST</span> <span class="operator">|</span> AFTER 列名]		 	    <span class="comment">/*修改列类型*/</span></span><br><span class="line">  <span class="operator">|</span> <span class="keyword">DROP</span> [<span class="keyword">COLUMN</span>] 列名									<span class="comment">/*删除列*/</span></span><br><span class="line">  <span class="operator">|</span> RENAME [<span class="keyword">TO</span>] 新表名	     							    <span class="comment">/*重命名该表*/</span> </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="增加列"><a href="#增加列" class="headerlink" title="增加列"></a>增加列</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法格式</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span>  表名   <span class="keyword">ADD</span>  列定义  [<span class="keyword">FIRST</span> <span class="operator">|</span> AFTER  列名];</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 【例】在表book中增加一列“浏览次数”。</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> book  <span class="keyword">ADD</span> 浏览次数 <span class="type">int</span> <span class="keyword">NULL</span>;</span><br><span class="line"><span class="comment">-- 【扩展】在表book中增加一列“浏览次数”，位置在单价列的后面。</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> book  <span class="keyword">ADD</span> 浏览次数 <span class="type">int</span> <span class="keyword">NULL</span> after 单价;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="删除列"><a href="#删除列" class="headerlink" title="删除列"></a>删除列</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法格式</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span>  表名  <span class="keyword">DROP</span> 列名</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 【例】删除book表中“浏览次数”列。</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> book <span class="keyword">DROP</span> 浏览次数;</span><br><span class="line"><span class="comment">-- 【扩展】在表book中增加“浏览次数”列，删除“封面图片”列。</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> book  <span class="keyword">ADD</span> 浏览次数 <span class="type">int</span> <span class="keyword">NULL</span>, <span class="keyword">DROP</span> 封面图片;</span><br></pre></td></tr></table></figure>
<h4 id="更改列名"><a href="#更改列名" class="headerlink" title="更改列名"></a>更改列名</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法格式</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span>  表名  CHANGE  旧列名  列定义 </span><br><span class="line"></span><br><span class="line"><span class="comment">-- 【例】将book表中“出版时间”列改为“出版日期”列。</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> book  CHANGE 出版时间 出版日期 <span class="type">date</span> <span class="keyword">not</span> <span class="keyword">null</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="更改列类型"><a href="#更改列类型" class="headerlink" title="更改列类型"></a>更改列类型</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法格式</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span>  表名  MODIFY 列定义</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 【例】将book表中“出版日期”列类型改为日期时间类型。</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> book MODIFY 出版日期 datetime <span class="keyword">not</span> <span class="keyword">null</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="总结-2"><a href="#总结-2" class="headerlink" title="总结-2"></a>总结</h4>
<blockquote>
<p><code>ALTER TABLE</code>用于更改原有表的结构。可以增加或删减列，创建或取消索引，更改原有列的类型，重新命名列或表，还可以更改表完整性约束和表的类型等。</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">增加列：<span class="keyword">ALTER</span> <span class="keyword">TABLE</span>  表名  <span class="keyword">ADD</span>  列定义</span><br><span class="line">删除列：<span class="keyword">ALTER</span> <span class="keyword">TABLE</span>  表名  <span class="keyword">DROP</span> 列名</span><br><span class="line">更改列名：<span class="keyword">ALTER</span> <span class="keyword">TABLE</span>  表名  CHANGE  旧列名  列定义 </span><br><span class="line">更改列类型：<span class="keyword">ALTER</span> <span class="keyword">TABLE</span>  表名  MODIFY 列定义</span><br></pre></td></tr></table></figure>
<h3 id="复制表"><a href="#复制表" class="headerlink" title="复制表"></a>复制表</h3>
<blockquote>
<ul>
<li>使用LIKE关键字创建一个与参照表相同结构的新表，但内容不会复制，因此创建的新表是一个空表。</li>
<li>使用AS关键字可以复制表的内容，但索引和完整性约束是不会复制的。</li>
</ul>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法格式如下：</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> [IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span>] 新表名</span><br><span class="line">     [ <span class="keyword">LIKE</span> 参照表名 ] <span class="operator">|</span> [<span class="keyword">AS</span> (<span class="keyword">select</span>语句)]	</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 【例】 假设数据库BookStore中有一个表Book，创建Book表的一个名为book_copy1的拷贝。</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> book_copy1 <span class="keyword">LIKE</span> Book; </span><br></pre></td></tr></table></figure>
<h3 id="删除表"><a href="#删除表" class="headerlink" title="删除表"></a>删除表</h3>
<blockquote>
<p>这个命令将表的描述、表的完整性约束、索引及和表相关的权限等都全部删除。</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法格式如下：</span></span><br><span class="line"><span class="keyword">DROP</span>  <span class="keyword">TABLE</span> [IF <span class="keyword">EXISTS</span>] 表名<span class="number">1</span> [,表名<span class="number">2</span> ] ...</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 【例】 删除表test。</span></span><br><span class="line">USE XSCJ  <span class="keyword">DROP</span>  <span class="keyword">TABLE</span>  IF  <span class="keyword">EXISTS</span>  test ;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="数据完整性"><a href="#数据完整性" class="headerlink" title="数据完整性"></a>数据完整性</h3>
<blockquote>
<p><strong>数据完整性有以下几个方面：</strong></p>
<ul>
<li>实体完整性</li>
<li>域完整性</li>
<li>参照完整性</li>
<li>用户定义的完整性</li>
</ul>
</blockquote>
<table>
<thead>
<tr>
<th><strong>完整性类型</strong></th>
<th><strong>约束类型</strong></th>
<th><strong>描 述</strong></th>
<th><strong>约束对象</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>列完整性</strong></td>
<td><strong>Default</strong></td>
<td><strong>当使用INSERT语句插入数据时，若已定义默认值的列没有提供指定值，则将该默认值插入记录中</strong></td>
<td><strong>列</strong></td>
</tr>
<tr>
<td><strong>列完整性</strong></td>
<td><strong>Check</strong></td>
<td><strong>指定某一列可接受的值</strong></td>
<td><strong>列</strong></td>
</tr>
<tr>
<td><strong>实体完整性</strong></td>
<td><strong>Primary Key</strong></td>
<td><strong>每行记录的惟一标识符，确保用户不能输入重复值，并自动创建索引，提高性能，该列不允许使用空值</strong></td>
<td><strong>行</strong></td>
</tr>
<tr>
<td><strong>实体完整性</strong></td>
<td><strong>Unique</strong></td>
<td><strong>在列集内强制执行值的惟一性，防止出现重复值，表中不允许有两行的同一列包含相同的非空值</strong></td>
<td><strong>行</strong></td>
</tr>
<tr>
<td><strong>参考完整性</strong></td>
<td><strong>Foreign Key</strong></td>
<td><strong>定义一列或几列，其值于本表或其他表的主键或UNIQUE列相匹配</strong></td>
<td><strong>表与表之间</strong></td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>提示：</strong></p>
<p>使用SQL语句给数据表添加约束有两种方式：</p>
<ul>
<li>一是在创建数据表时，将约束语句添加在相应字段或数据表中。</li>
<li>二是在已有的数据表中，使用ADD 语句将约束添加在相应的字段或数据表中。</li>
</ul>
</blockquote>
<h3 id="主键约束——primary-key"><a href="#主键约束——primary-key" class="headerlink" title="主键约束——primary-key"></a>主键约束——primary key</h3>
<blockquote>
<ul>
<li><strong>主键</strong>就是表中的<strong>一列或多个列的一组</strong>，其值能<strong>唯一</strong>地标志表中的每一行。</li>
<li>通过定义PRIMARY KEY约束来创建主键，而且PRIMARY KEY约束中的<strong>列不能取空值</strong>。</li>
<li>如果 PRIMARY KEY 约束是由多列组合定义的，则某一列的值可以重复，但 PRIMARY KEY 约束定义中所有列的<strong>组合值必须唯一</strong>。</li>
<li>可以用<strong>两种方式定义主键</strong>：作为<strong>列或表的完整性约束</strong>。作为<strong>列</strong>的完整性约束时，只需在列定义的时候加上关键字PRIMARY KEY。作为<strong>表</strong>的完整性约束时，需要在语句最后加上一条PRIMARY KEY（col_name，…）语句。</li>
</ul>
</blockquote>
<h4 id="语法格式"><a href="#语法格式" class="headerlink" title="语法格式"></a>语法格式</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1、创建数据表添加主键约束的语法格式为：</span></span><br><span class="line"><span class="keyword">CREATE</span>  <span class="keyword">TABLE</span>  tb_name    (</span><br><span class="line"> 列名  数据类型  <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">PRIMARY</span> KEY<span class="comment">/*列级*/</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">PRIMARY</span> KEY(列名<span class="number">1</span>[,列名<span class="number">2</span>]); <span class="comment">/*表级*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2、在已有数据表添加主键约束的语法格式为：</span></span><br><span class="line"><span class="keyword">ALTER</span>  <span class="keyword">TABLE</span>  tb_name <span class="keyword">ADD</span> <span class="keyword">PRIMARY</span> KEY(列名<span class="number">1</span>[,列名<span class="number">2</span>]);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3、删除主键约束的语法格式为：</span></span><br><span class="line"><span class="keyword">ALTER</span>  <span class="keyword">TABLE</span>  tb_name <span class="keyword">DROP</span> <span class="keyword">PRIMARY</span> KEY;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- （1）列的完整性约束：</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 【例】 创建表book2，将编号定义为主键。</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> book2</span><br><span class="line">    (  编号 <span class="type">char</span>(<span class="number">6</span>)  <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">       书名 <span class="type">char</span>(<span class="number">10</span>)  <span class="keyword">NOT</span>  <span class="keyword">NULL</span>,</span><br><span class="line">       数量 <span class="type">int</span> );</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- （2）表的完整性约束：</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 【例】在已有的cj表，将学号和课程号定义为复合主键。ALTER   TABLE cj</span></span><br><span class="line"><span class="keyword">ADD</span> <span class="keyword">PRIMARY</span>  KEY (学号, 课程号);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<p>原则上，任何列或者列的组合都可以充当一个主键。但是主键列必须遵守一些规则。</p>
<p>（1）<strong>每个表只能定义一个主键。</strong></p>
<p>（2）关系模型理论要求必须为每个表定义一个主键。</p>
<p>（3）<strong>唯一性原则</strong>：表中的两个不同的行在主键上不能具有相同的值。</p>
<p>（4）<strong>最小化规则</strong>：如果从一个复合主键中删除一列后，剩下的列构成主键仍然满足唯一性原则，那么，这个复合                   	主键是不正确的，这条规则称为最小化规则。</p>
<p>MySQL自动地为主键创建一个索引。通常，这个索引名为PRIMARY。然而，可以重新给这个索引起名。</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】 删除Book表上的主键约束。</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> Book;	</span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">PRIMARY</span> KEY;</span><br></pre></td></tr></table></figure>
<h3 id="唯一约束（替代键约束）——unique"><a href="#唯一约束（替代键约束）——unique" class="headerlink" title="唯一约束（替代键约束）——unique"></a>唯一约束（替代键约束）——unique</h3>
<h4 id="语法格式-2"><a href="#语法格式-2" class="headerlink" title="语法格式-2"></a>语法格式</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1、创建数据表添加唯一约束的语法格式为：</span></span><br><span class="line"><span class="keyword">CREATE</span>  <span class="keyword">TABLE</span>  tb_name (列名  数据类型  [<span class="keyword">NULL</span><span class="operator">|</span><span class="keyword">NOT</span> <span class="keyword">NULL</span> ] <span class="keyword">UNIQUE</span>,……);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2、在已有数据表添加唯一约束的语法格式为：</span></span><br><span class="line"><span class="keyword">ALTER</span>  <span class="keyword">TABLE</span>  tb_name <span class="keyword">ADD</span> <span class="keyword">UNIQUE</span>(列名);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3、删除唯一约束的语法格式为：</span></span><br><span class="line"><span class="keyword">ALTER</span>  <span class="keyword">TABLE</span>  tb_name <span class="keyword">DROP</span> INDEX 约束名;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<p>在关系模型中，唯一约束像主键一样，是表的一列或一组列，它们的值在任何时候都是唯一的。替代键是没有被选做主键的候选键。定义替代键的关键字是<strong>UNIQUE</strong>。</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】 创建表book_copy1中将图书编号作为主键，书名列定义为唯一约束。</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> book_copy1</span><br><span class="line">   (  图书编号 <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">primary</span> key,</span><br><span class="line">    书名     <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">UNIQUE</span>,</span><br><span class="line">    出版日期 <span class="type">date</span> <span class="keyword">NULL</span>  );</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 【例】假设已有Book表中主键未设定，给图书编号添加主键约束,给书名添加唯一性约束。</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> Book	</span><br><span class="line"><span class="keyword">ADD</span> <span class="keyword">PRIMARY</span> KEY(图书编号), </span><br><span class="line"><span class="keyword">ADD</span> <span class="keyword">UNIQUE</span> u_idx (书名) ;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<ul>
<li>这个例外键中，既包括主键约束, 也包括唯一性约束，说明MySQL可以<strong>同时创建多个约束</strong>。记住，使用PRIMARY KEY的列，必须是一个具有NOT NULL属性的列。</li>
<li>如果想要查看表中创建的约束的情况，可以使用语句，</li>
<li>例如：<code>SHOW INDEX FROM book;</code></li>
</ul>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】 删除Book表上的唯一约束。</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> Book <span class="keyword">DROP</span> index u_idx ;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<p>在MySQL中替代键和主键的区别主要有以下几点。</p>
<ol>
<li>一个数据表只能创建一个主键。但一个表可以有若干个UNIQUE键，并且它们甚至可以重合，例如，在C1和C2列上定义了一个替代键，并且在C2和C3上定义了另一个替代键，这两个替代键在C2列上重合了，而MySQL允许这样。</li>
<li>主键字段的值不允许为NULL，而UNIQUE字段的值可取NULL，但是必须使用NULL或NOT NULL声明。</li>
<li>一般创建PRIMARY KEY约束时，系统会自动产生PRIMARY KEY索引。创建UNIQUE约束时，系统自动产生UNIQUE索引。</li>
</ol>
</blockquote>
<h3 id="外键约束——foreign-key"><a href="#外键约束——foreign-key" class="headerlink" title="外键约束——foreign-key"></a>外键约束——foreign key</h3>
<h4 id="语法格式-3"><a href="#语法格式-3" class="headerlink" title="语法格式-3"></a>语法格式</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1、创建表的同时创建外键</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> 表名( 列名, ... </span><br><span class="line">       <span class="keyword">FOREIGN</span> KEY (列名)  <span class="keyword">REFERENCES</span> 表名 [(列名 [(长度)] [<span class="keyword">ASC</span> <span class="operator">|</span> <span class="keyword">DESC</span>],...)]</span><br><span class="line">       [<span class="keyword">ON</span> <span class="keyword">DELETE</span>  &#123;RESTRICT <span class="operator">|</span> CASCADE <span class="operator">|</span> <span class="keyword">SET</span> <span class="keyword">NULL</span> <span class="operator">|</span> <span class="keyword">NO</span> ACTION&#125;]</span><br><span class="line">       [<span class="keyword">ON</span> <span class="keyword">UPDATE</span>  &#123;RESTRICT <span class="operator">|</span> CASCADE <span class="operator">|</span> <span class="keyword">SET</span> <span class="keyword">NULL</span> <span class="operator">|</span> <span class="keyword">NO</span> ACTION&#125;] ）;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2、对已有表创建外键                </span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名  </span><br><span class="line"><span class="keyword">ADD</span> <span class="keyword">FOREIGN</span> KEY (列名)  <span class="keyword">REFERENCES</span> 表名 [(列名 [(长度)] [<span class="keyword">ASC</span> <span class="operator">|</span> <span class="keyword">DESC</span>],...)]</span><br><span class="line">       [<span class="keyword">ON</span> <span class="keyword">DELETE</span>  &#123;RESTRICT <span class="operator">|</span> CASCADE <span class="operator">|</span> <span class="keyword">SET</span> <span class="keyword">NULL</span> <span class="operator">|</span> <span class="keyword">NO</span> ACTION&#125;]</span><br><span class="line">       [<span class="keyword">ON</span> <span class="keyword">UPDATE</span>  &#123;RESTRICT <span class="operator">|</span> CASCADE <span class="operator">|</span> <span class="keyword">SET</span> <span class="keyword">NULL</span> <span class="operator">|</span> <span class="keyword">NO</span> ACTION&#125;]</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3、删除外键约束                </span></span><br><span class="line"><span class="keyword">ALTER</span>  <span class="keyword">TABLE</span>  tb_name <span class="keyword">DROP</span> <span class="keyword">FOREIGN</span> KEY 约束名; </span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>参数解释：</strong></p>
<ul>
<li><strong>RESTRICT</strong>：当要删除或更新主键中被参照列上在外键中出现的值时， <strong>拒绝</strong>对主键的删除或更新操作。如：要当要删除xs表中081102记录时，因为cj中还有081102记录，拒绝对xs表的删除操作。</li>
<li><strong>CASCADE</strong>：从主键删除或更新行时自动删除或更新外键表中匹配的行。如：从xs表更新081102学号为801102时自动更新cj表中学号为081102行为801102 。</li>
<li><strong>SET NULL</strong>：当从主键表删除或更新行时，设置外键表中与之对应的外键列为NULL。如：当从xs表删除081103行时，设置cj表中081103项为NULL。</li>
<li><strong>NO ACTION</strong>：NO ACTION意味着不采取动作，就是如果有一个相关的外键值在被参考的表里，删除或更新主键表中主要键值的企图不被允许，和RESTRICT一样。</li>
<li><strong>SET DEFAULT</strong>：作用和SET NULL一样，只不过SET DEFAULT是指定外键表中的外键列为默认值。</li>
<li>如果没有指定动作，两个参照动作就会<strong>默认地使用RESTRICT。</strong></li>
</ul>
</blockquote>
<h4 id="案例-2"><a href="#案例-2" class="headerlink" title="案例-2"></a>案例</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】 创建带有参照动作CASCADE的book_ref1表。</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> book_ref1   (  </span><br><span class="line">     图书编号 　 <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">NULL</span>,</span><br><span class="line">     书名　　  　<span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">     出版日期 　 <span class="type">date</span> <span class="keyword">NULL</span>,</span><br><span class="line">     <span class="keyword">PRIMARY</span> KEY (书名),</span><br><span class="line">     <span class="keyword">FOREIGN</span> KEY (图书编号)</span><br><span class="line">     <span class="keyword">REFERENCES</span> Book (图书编号)</span><br><span class="line">     <span class="keyword">ON</span>  <span class="keyword">UPDATE</span>  CASCADE</span><br><span class="line">    )ENGINE<span class="operator">=</span>INNODB;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 这个参照动作的作用是在主表更新时，外键表产生连锁更新动作，有些人称它为“级联”操作。举例说，如果book表中有一个图书编号为“TP.2525”的值修改为“TP.2525-1”，则book_ref1表中的“图书编号”列中的值“TP.2525”相应地改为“TP.2525-1”。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 通过修改添加</span></span><br><span class="line"><span class="comment">-- 【例】  在网络图书销售系统中，只有会员才能下订单。因此Sell表中的所有用户号也必须出现在Members表的用户号列中。定义参照完整性约束来实现这种约束。</span></span><br><span class="line"> <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> sell </span><br><span class="line"> <span class="keyword">ADD</span> <span class="keyword">FOREIGN</span> KEY (用户号) </span><br><span class="line"> <span class="keyword">REFERENCES</span> members (用户号) </span><br><span class="line"> <span class="keyword">ON</span> <span class="keyword">DELETE</span> CASCADE </span><br><span class="line"> <span class="keyword">ON</span> <span class="keyword">UPDATE</span> CASCADE;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="检查约束——check"><a href="#检查约束——check" class="headerlink" title="检查约束——check"></a>检查约束——check</h3>
<blockquote>
<p>主键、替代键、外键都是常见的完整性约束的实例。但是，每个数据库都还有一些专用的完整性约束。</p>
<p>例如，KC表中星期数要在1～7之间，XS表中出生日期必须大于1986年1月1日。这样的规则可以使用CHECK完整性约束来指定。</p>
</blockquote>
<blockquote>
<p>CHECK完整性约束在创建表的时候定义。可以定义为列完整性约束，也可以定义为表完整性约束。</p>
</blockquote>
<h4 id="语法格式-4"><a href="#语法格式-4" class="headerlink" title="语法格式-4"></a>语法格式</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1、创建数据表添加检查约束的语法格式为：</span></span><br><span class="line"><span class="keyword">CREATE</span>  <span class="keyword">TABLE</span>  tb_name    (</span><br><span class="line"> 列名  数据类型  [<span class="keyword">NULL</span> <span class="operator">|</span><span class="keyword">NOT</span> <span class="keyword">NULL</span>]…… <span class="keyword">CHECK</span>(expr),列级<span class="operator">|</span> <span class="keyword">CHECK</span>(expr) );表级</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2、在已有数据表添加检查约束的语法格式为：</span></span><br><span class="line"><span class="keyword">ALTER</span>  <span class="keyword">TABLE</span>  tb_name <span class="keyword">ADD</span> <span class="keyword">CHECK</span>(expr);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3、删除检查约束的语法格式为：</span></span><br><span class="line"><span class="keyword">ALTER</span>  <span class="keyword">TABLE</span>  tb_name <span class="keyword">DROP</span> <span class="keyword">CHECK</span> 约束名;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<p>说明：expr是一个表达式，指定需要检查的条件，在更新表数据的时候，MySQL会检查更新后的数据行是否满足CHECK的条件。</p>
</blockquote>
<h4 id="案例-3"><a href="#案例-3" class="headerlink" title="案例-3"></a>案例</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】 创建表student，只考虑学号和性别两列，性别只能包含男或女。</span></span><br><span class="line"><span class="keyword">CREATE</span>  <span class="keyword">TABLE</span>  student    (</span><br><span class="line">    学号 <span class="type">char</span>(<span class="number">6</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    性别 <span class="type">char</span>(<span class="number">2</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">CHECK</span>(性别 <span class="keyword">IN</span> (<span class="string">&#x27;男&#x27;</span>, <span class="string">&#x27;女&#x27;</span>))</span><br><span class="line">     );</span><br><span class="line"><span class="comment">-- 这里CHECK完整性约束指定了性别允许哪个值，由于CHECK包含在列自身的定义中，所以CHECK完整性约束被定义为列完整性约束。</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 【例】创建student3表，有学号，最好成绩，平均成绩3列，要求最好成绩必须大于平均成绩。</span></span><br><span class="line"> <span class="keyword">CREATE</span>  <span class="keyword">TABLE</span>  student3    (</span><br><span class="line">    	学号 <span class="type">char</span>(<span class="number">6</span>)    <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    	最好成绩 <span class="type">int</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    	平均成绩 <span class="type">int</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    	<span class="keyword">check</span>(最好成绩<span class="operator">&gt;</span>平均成绩); </span><br><span class="line"><span class="comment">-- 如果指定的完整性约束中要相互比较一个表或者两个或者多个列，那么该列的完整性约束必须定义为表完整性约束。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- CHECK约束可以同时定义多个，中间用逗号隔开。</span></span><br><span class="line"><span class="comment">-- 【例】 修改book表，单价必须大于等于0，折扣在0.1-1之间。</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> book</span><br><span class="line">	<span class="keyword">add</span> <span class="keyword">check</span>(单价<span class="operator">&gt;</span><span class="number">0</span>),</span><br><span class="line">	<span class="keyword">add</span> <span class="keyword">check</span>(折扣<span class="operator">&gt;=</span><span class="number">0.1</span> <span class="keyword">and</span> 折扣<span class="operator">&lt;=</span><span class="number">1</span>);     </span><br><span class="line">     </span><br></pre></td></tr></table></figure>
<h3 id="默认约束——default"><a href="#默认约束——default" class="headerlink" title="默认约束——default"></a>默认约束——default</h3>
<blockquote>
<p>默认约束的作用是给列设置一个默认值，在缺省录入的情况下，会自动填充默认值。</p>
</blockquote>
<h4 id="语法格式-5"><a href="#语法格式-5" class="headerlink" title="语法格式-5"></a>语法格式</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1、创建数据表添加默认约束的语法格式为：</span></span><br><span class="line"><span class="keyword">CREATE</span>  <span class="keyword">TABLE</span>  tb_name    (</span><br><span class="line"> 列名  数据类型  [<span class="keyword">NULL</span> <span class="operator">|</span><span class="keyword">NOT</span> <span class="keyword">NULL</span>]  <span class="keyword">default</span>  ‘列默认值’,……);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2、在已有数据表添加和修改默认约束的语法格式为：</span></span><br><span class="line">（<span class="number">1</span>）添加默认约束</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 modify 列名 数据类型 <span class="keyword">default</span> ‘默认值’;</span><br><span class="line">（<span class="number">2</span>）修改默认值</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">alter</span> <span class="keyword">column</span> 列名 <span class="keyword">set</span> <span class="keyword">default</span> ‘默认值’;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3、删除默认约束的语法格式为：</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">alter</span> <span class="keyword">column</span> 列名 <span class="keyword">drop</span> <span class="keyword">default</span>；</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="案例-4"><a href="#案例-4" class="headerlink" title="案例-4"></a>案例</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】book表中将折扣设置默认值为0.8折</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> book</span><br><span class="line">modify 折扣 <span class="type">decimal</span>(<span class="number">2</span>,<span class="number">1</span>) <span class="keyword">default</span> <span class="number">0.8</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 【例】book表中将折扣默认值修改为0.7折</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> book</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">column</span> 折扣 <span class="keyword">set</span>  <span class="keyword">default</span> <span class="number">0.7</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 【例】删除book表折扣列的默认约束</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> book</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">column</span> 折扣 <span class="keyword">drop</span> <span class="keyword">default</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="查看表相关信息"><a href="#查看表相关信息" class="headerlink" title="查看表相关信息"></a>查看表相关信息</h3>
<h4 id="格式"><a href="#格式" class="headerlink" title="格式"></a>格式</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">create</span> <span class="keyword">table</span> 表名;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>这个命令可以查看表的所有信息，包括一些字段类型，字段的约束，外键，主键，索引，字符编码等等</p>
</blockquote>
<h3 id="删除完整性约束"><a href="#删除完整性约束" class="headerlink" title="删除完整性约束"></a>删除完整性约束</h3>
<blockquote>
<p>如果使用一条<strong>DROP TABLE</strong>语句删除一个表，所有的完整性约束都自动被删除了,被参照表的所有外键也都被删除了。</p>
<p>使用<strong>ALTER TABLE</strong>语句，完整性可以独立地被删除，而不用去删除表本身。</p>
</blockquote>
<h4 id="案例-5"><a href="#案例-5" class="headerlink" title="案例-5"></a>案例</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】 删除表book的主键，删除sell表的外键，删除book表的单价check约束。</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> book <span class="keyword">DROP</span> <span class="keyword">PRIMARY</span> KEY;</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> sell <span class="keyword">DROP</span> <span class="keyword">FOREIGN</span> KEY sell_ibfk_1;</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> book <span class="keyword">DROP</span> <span class="keyword">check</span> book_chk_1;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="归纳总结"><a href="#归纳总结" class="headerlink" title="归纳总结"></a>归纳总结</h3>
<blockquote>
<p>归纳总结：使用ALTER TABLE管理约束</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1、显示表中的约束</span></span><br><span class="line"><span class="keyword">show</span> keys <span class="keyword">from</span> 表名;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2、主键约束</span></span><br><span class="line">（<span class="number">1</span>）添加主键约束</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名<span class="keyword">add</span> <span class="keyword">primary</span> key (列名)；</span><br><span class="line">（<span class="number">2</span>）删除主键约束</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span>  表名 <span class="keyword">drop</span> <span class="keyword">primary</span> key</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3、唯一约束</span></span><br><span class="line">（<span class="number">1</span>）添加唯一约束</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span>  表名 <span class="keyword">add</span> <span class="keyword">unique</span> (列名)；</span><br><span class="line">（<span class="number">2</span>）删除唯一约束</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span>  表名 <span class="keyword">drop</span> index 约束名；</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 4、外键约束</span></span><br><span class="line">（<span class="number">1</span>）添加外键约束</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 外键表 <span class="keyword">add</span> <span class="keyword">foreign</span> key (外键) </span><br><span class="line"><span class="keyword">references</span> 主键表(主键);</span><br><span class="line">（<span class="number">2</span>）删除外键约束</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 外键表  <span class="keyword">drop</span> <span class="keyword">foreign</span> key  约束名; </span><br><span class="line">          </span><br><span class="line"><span class="comment">-- 5、默认约束</span></span><br><span class="line">（<span class="number">1</span>）添加默认约束</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 modify 列名 数据类型 <span class="keyword">default</span> ‘默认值’;</span><br><span class="line">（<span class="number">2</span>）修改默认值</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">alter</span> <span class="keyword">column</span> 列名 <span class="keyword">set</span> <span class="keyword">default</span> ‘默认值’;</span><br><span class="line">（<span class="number">3</span>）删除默认约束</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">alter</span> <span class="keyword">column</span> 列名 <span class="keyword">drop</span> <span class="keyword">default</span>；</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 6、检查约束</span></span><br><span class="line">（<span class="number">1</span>）添加检查约束</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">add</span> <span class="keyword">check</span>(约束表达式);</span><br><span class="line">（<span class="number">2</span>）删除检查 约束</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">drop</span> <span class="keyword">check</span> 约束名</span><br></pre></td></tr></table></figure>
<h3 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h3>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 实训3-3 SQL语句修改数据表实训</span></span><br><span class="line"><span class="comment">-- 使用SQL语句实现下列操作(P84)</span></span><br><span class="line"><span class="comment">-- 1、创建schooldb数据库</span></span><br><span class="line"><span class="keyword">create</span> database schooldb;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2、创建schooldb各表</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> class  (</span><br><span class="line">  班级编号 <span class="type">char</span>(<span class="number">6</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">  班级名称 <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  院系 <span class="type">varchar</span>(<span class="number">30</span>)  <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  年级 <span class="type">int</span> <span class="keyword">NULL</span> ,</span><br><span class="line">  人数 <span class="type">int</span> <span class="keyword">NULL</span></span><br><span class="line">) ;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> course  (</span><br><span class="line">  课程号 <span class="type">char</span>(<span class="number">6</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">  课程名 <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  学分 <span class="type">int</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  学时 <span class="type">int</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  学期 <span class="type">char</span>(<span class="number">2</span>)  <span class="keyword">NULL</span> ,</span><br><span class="line">  前置课 <span class="type">char</span>(<span class="number">6</span>) <span class="keyword">NULL</span> </span><br><span class="line"> );</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> score  (</span><br><span class="line">  学号 <span class="type">char</span>(<span class="number">10</span>)  <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  课程号 <span class="type">char</span>(<span class="number">6</span>)  <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  成绩 <span class="type">float</span>(<span class="number">5</span>,<span class="number">2</span>) <span class="keyword">NULL</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (学号, 课程号) </span><br><span class="line">);</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> student  (</span><br><span class="line">  学号 <span class="type">char</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">PRIMARY</span> KEY ,</span><br><span class="line">  姓名 <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  性别 <span class="type">char</span>(<span class="number">2</span>)  <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  出生日期 <span class="type">date</span> <span class="keyword">NULL</span>,</span><br><span class="line">  地区 <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">NULL</span> ,</span><br><span class="line">  民族 <span class="type">varchar</span>(<span class="number">10</span>)  <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;汉&#x27;</span>,</span><br><span class="line">  班级编号 <span class="type">char</span>(<span class="number">6</span>)  <span class="keyword">NULL</span> </span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3、查看schooldb中的表文件</span></span><br><span class="line"><span class="keyword">show</span> tables;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 4、查看course表结构</span></span><br><span class="line"><span class="keyword">desc</span> course;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 5、在score表中增加一列备注 char（50）</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> score <span class="keyword">add</span> 备注 <span class="type">char</span>(<span class="number">50</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 6、将score表中的备注修改为varchar（50）</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> score modify 备注 <span class="type">varchar</span>(<span class="number">50</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 7、将备注名称修改为BZ </span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> score change 备注 BZ <span class="type">varchar</span>(<span class="number">50</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 8、删除在score表BZ列</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> score <span class="keyword">drop</span> BZ;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 9、复制class表命名为classcopy，只复制表结构</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> classcopy <span class="keyword">like</span> class;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 10、将classcopy表重命名为classcopy1</span></span><br><span class="line">rename <span class="keyword">table</span> classcopy <span class="keyword">to</span> classcopy1;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 11、删除classcopy1表</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> classcopy1;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 实训3-4 数据完整性实训</span></span><br><span class="line"><span class="comment">-- /**/在各表中添加相应约束</span></span><br><span class="line"><span class="comment">-- （1）class表班级编号设置为主键。</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> class <span class="keyword">add</span> <span class="keyword">primary</span> key(班级编号);</span><br><span class="line"></span><br><span class="line"><span class="comment">/** （2）student表学号设置为主键；</span></span><br><span class="line"><span class="comment">       姓名设置唯一约束</span></span><br><span class="line"><span class="comment">       班级编号设置为外键；</span></span><br><span class="line"><span class="comment">       民族设置默认约束，默认为‘汉’；</span></span><br><span class="line"><span class="comment">       性别设置默认约束，默认为‘男’，设置检查约束只能输入‘男’或‘女’。**/</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student <span class="keyword">add</span> <span class="keyword">primary</span> key(学号);</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student <span class="keyword">add</span> <span class="keyword">foreign</span> key(班级编号) <span class="keyword">references</span> class(班级编号);</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student modify 民族 <span class="type">char</span>(<span class="number">10</span>) <span class="keyword">default</span> <span class="string">&#x27;汉&#x27;</span>;</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student modify 性别 <span class="type">char</span>(<span class="number">2</span>) <span class="keyword">default</span> <span class="string">&#x27;男&#x27;</span>,<span class="keyword">add</span> <span class="keyword">check</span>(性别 <span class="keyword">in</span>(<span class="string">&#x27;男&#x27;</span>,<span class="string">&#x27;女&#x27;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">-- （3）course表课程号设置为主键；</span></span><br><span class="line"><span class="comment">--          前置课设置为外键。</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> course <span class="keyword">add</span> <span class="keyword">primary</span> key(课程号), <span class="keyword">ADD</span> <span class="keyword">FOREIGN</span> KEY (前置课) <span class="keyword">REFERENCES</span> course (课程号);</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> course <span class="keyword">ADD</span> <span class="keyword">FOREIGN</span> KEY (前置课) <span class="keyword">REFERENCES</span> course (课程号);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- （4）score表（学号，课程号）设置为主键；</span></span><br><span class="line"><span class="comment">--          学号，课程号分别设置为外键；</span></span><br><span class="line"><span class="comment">--         成绩设置检查约束有效成绩在0--100分。</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> score <span class="keyword">add</span> <span class="keyword">primary</span> key(学号,课程号);</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> score <span class="keyword">add</span> <span class="keyword">foreign</span> key(学号) <span class="keyword">references</span> student(学号),<span class="keyword">add</span> <span class="keyword">foreign</span> key(课程号) <span class="keyword">references</span> course(课程号);</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> score <span class="keyword">add</span> <span class="keyword">check</span>(成绩 <span class="keyword">between</span> <span class="number">0</span> <span class="keyword">and</span> <span class="number">100</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="数据操作语言—DML"><a href="#数据操作语言—DML" class="headerlink" title="数据操作语言—DML"></a>数据操作语言—DML</h2>
<blockquote>
<p>DML是指数据操作语言，英文全称是Data Manipulation Language，用来对数据库中表的数据记录进行更新（增删改）。</p>
<p><strong>关键字：</strong></p>
<blockquote>
<ul>
<li>插入insert</li>
<li>删除delete</li>
<li>更新update</li>
</ul>
</blockquote>
</blockquote>
<h3 id="数据插入"><a href="#数据插入" class="headerlink" title="数据插入"></a>数据插入</h3>
<blockquote>
<p>一旦创建了数据库和表，下一步就是向表里插入数据。通过INSERT或REPLACE语句可以向表中插入一行或多行数据。</p>
</blockquote>
<h4 id="语法格式-6"><a href="#语法格式-6" class="headerlink" title="语法格式-6"></a>语法格式</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> [IGNORE] [<span class="keyword">INTO</span>] 表名[(列名,...)]</span><br><span class="line">             <span class="keyword">VALUES</span> (&#123;表达式<span class="operator">|</span> <span class="keyword">DEFAULT</span>&#125;,..),(...),...</span><br><span class="line">            <span class="operator">|</span> <span class="keyword">SET</span>列名<span class="operator">=</span>&#123;表达式<span class="operator">|</span> <span class="keyword">DEFAULT</span>&#125;, ...</span><br></pre></td></tr></table></figure>
<blockquote>
<p>如果要给全部列插入数据，列名可以省略。如果只给表的部分列插入数据，需要指定这些列。对于没有指出的列，它们的值根据列默认值或有关属性来确定，MySQL处理的原则是：</p>
<p>（1）具有IDENTITY属性的列，系统生成序号值来唯一标志列。</p>
<p>（2）具有默认值的列，其值为默认值。</p>
<p>（3）没有默认值的列，若允许为空值，则其值为空值；若不允许为空值，则出错。</p>
<p>（4）类型为timestamp的列，系统自动赋值。</p>
</blockquote>
<blockquote>
<p>VALUES子句：包含各列需要插入的数据清单，数据的顺序要与列的顺序相对应。若tb1_name后不给出列名，则在VALUES子句中要给出每一列（除IDENTITY和timestamp类型的列）的值，如果列值为空，则值必须置为NULL，否则会出错。VALUES子句中的值：</p>
<p>（1）表达式：可以是一个常量、变量或一个表达式，也可以是空值NULL，其值的数据类型要与列的数据类型一致。例如，列的数据类型为int，插入的数据是‘aaa’就会出错。当数据为字符型时要用单引号括起。</p>
<p>（2）DEFAULT：指定为该列的默认值。前提是该列原先已经指定了默认值。</p>
</blockquote>
<blockquote>
<p>如果列清单和VALUES清单都为空，则INSERT会创建一行，每个列都设置成默认值。</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 插入语句最常用格式：</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span>  表名(列名,...) <span class="keyword">VALUES</span> (表达式, ...)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="案例-6"><a href="#案例-6" class="headerlink" title="案例-6"></a>案例</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】 向Bookstore数据库中的表Book中插入如下的一行数据：</span></span><br><span class="line">USE Bookstore;</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> book <span class="keyword">VALUES</span> (<span class="string">&#x27;TP.9501&#x27;</span>, <span class="string">&#x27;计算机&#x27;</span>, <span class="string">&#x27;Dreamwearer&#x27;</span>, <span class="string">&#x27;鲍里嘉&#x27;</span>,<span class="string">&#x27;高等教育出版社&#x27;</span>,<span class="string">&#x27;2020-08-16&#x27;</span>, <span class="number">33.25</span>,<span class="number">50</span>,<span class="number">0.8</span>, <span class="keyword">NULL</span> );</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 【例】 若表Book中图书类别的默认值为“计算机”，数量默认值为NULL，插入上例那行数据。</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> book (图书编号,书名,作者,出版社,出版时间,单价,数量,折扣 )</span><br><span class="line">       <span class="keyword">VALUES</span> ( <span class="string">&#x27;TP.9501&#x27;</span>,  <span class="string">&#x27;Dreamwearer&#x27;</span>,  <span class="string">&#x27;鲍里嘉&#x27;</span>, <span class="string">&#x27;高等教育出版社&#x27;</span>, <span class="string">&#x27;2020-08-16&#x27;</span>, <span class="number">33.25</span>, <span class="number">50</span>, <span class="number">0.8</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 与上列命令效果相同：</span></span><br><span class="line"> <span class="keyword">INSERT</span> <span class="keyword">INTO</span> book </span><br><span class="line">           <span class="keyword">SET</span> 图书编号<span class="operator">=</span><span class="string">&#x27;TP.9501&#x27;</span>, 书名<span class="operator">=</span><span class="string">&#x27;Dreamwearer&#x27;</span>, </span><br><span class="line">           图书类别<span class="operator">=</span><span class="keyword">DEFAULT</span>, 作者<span class="operator">=</span> <span class="string">&#x27;鲍里嘉&#x27;</span>, </span><br><span class="line">           出版社<span class="operator">=</span><span class="string">&#x27;高等教育出版社&#x27;</span>, </span><br><span class="line">           出版时间<span class="operator">=</span> <span class="string">&#x27;2020-08-16&#x27;</span>, 单价<span class="operator">=</span><span class="number">33.25</span>, </span><br><span class="line">           数量<span class="operator">=</span><span class="number">50</span>, 折扣<span class="operator">=</span><span class="number">0.8</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<p>如果例4.1正确执行，记录已经插入了，再执行例4.1的SQL代码，系统提示1062错误，这是因为两条记录的图书编号相同，而图书编号是Book表的主键，要求唯一。当插入第二条相同编号的记录时，系统提示错误，意为表中已有图书编号为6625的记录，第二条记录不能插入。</p>
<p>可以使用<code>REPLACE</code>语句，用第二条记录替换第一条记录：</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">REPLACE <span class="keyword">INTO</span> book </span><br><span class="line">    <span class="keyword">VALUES</span> ( <span class="string">&#x27;TP.9501&#x27;</span>, <span class="string">&#x27;计算机&#x27;</span>, <span class="string">&#x27;PHP网站制作’, </span></span><br><span class="line"><span class="string">          &#x27;</span>林小红<span class="string">&#x27;, &#x27;</span>高等教育出版社<span class="string">&#x27;, &#x27;</span><span class="number">2020</span><span class="number">-10</span><span class="number">-16</span>’, </span><br><span class="line">          <span class="number">23.5</span>, <span class="number">30</span>, <span class="number">0.8</span>, <span class="keyword">NULL</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<p>在一个单独的INSERT语句中使用多个VALUES（）子句一次插入多条记录。</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> members  <span class="keyword">VALUES</span> </span><br><span class="line">   (<span class="string">&#x27;D0138&#x27;</span>, <span class="string">&#x27;李小华&#x27;</span>,<span class="string">&#x27;女&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>,<span class="string">&#x27;13822551234&#x27;</span> ,<span class="string">&#x27;2020-8-23&#x27;</span>),</span><br><span class="line">   (<span class="string">&#x27;D0139&#x27;</span>, <span class="string">&#x27;张明&#x27;</span>,<span class="string">&#x27;男&#x27;</span>, <span class="string">&#x27;123456&#x27;</span>,<span class="string">&#x27;13822555432&#x27;</span> ,<span class="string">&#x27;2020-9-23&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<p>从上面的SQL代码可以看出，当一次插入多条记录时，每条记录的数据要用（）括起来，记录与记录之间用逗号分开。</p>
</blockquote>
<h3 id="数据修改-更新"><a href="#数据修改-更新" class="headerlink" title="数据修改-更新"></a>数据修改(更新)</h3>
<blockquote>
<p>要修改表中的一行数据，可以使用UPDATE语句，UPDATE可以用来修改一个表，也可以修改多个表。</p>
</blockquote>
<h4 id="格式-2"><a href="#格式-2" class="headerlink" title="格式-2"></a>格式</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 修改单个表，语法格式：</span></span><br><span class="line"><span class="keyword">UPDATE</span> [IGNORE]  表名  <span class="keyword">SET</span> 列名<span class="number">1</span><span class="operator">=</span>表达式<span class="number">1</span> [,列名<span class="number">2</span><span class="operator">=</span>表达式<span class="number">2</span> ...][<span class="keyword">WHERE</span> 条件];</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 修改多个表，语法格式：</span></span><br><span class="line"> <span class="keyword">UPDATE</span> [IGNORE] 表名列表</span><br><span class="line">             <span class="keyword">SET</span> 列名<span class="number">1</span><span class="operator">=</span>表达式<span class="number">1</span> [,列名<span class="number">2</span><span class="operator">=</span>表达式<span class="number">2</span> ...]</span><br><span class="line">             [<span class="keyword">WHERE</span> 条件];</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<p>SET子句：根据WHERE子句中指定的条件对符合条件的数据行进行修改。若语句中不设定WHERE子句，则更新所有行。</p>
<p>可以同时修改所在数据行的多个列值，中间用逗号隔开。</p>
</blockquote>
<h4 id="单表案例"><a href="#单表案例" class="headerlink" title="单表案例"></a>单表案例</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】 将Bookstore数据库中Book表的所有书籍数量都增加10。将Members表中姓名为“张三”的员工的联系电话改为“13802551234”，密码改为“111111”。</span></span><br><span class="line"><span class="keyword">UPDATE</span> Book</span><br><span class="line">    <span class="keyword">SET</span> 数量 <span class="operator">=</span> 数量<span class="operator">+</span><span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">UPDATE</span> Members</span><br><span class="line">    <span class="keyword">SET</span>联系电话 <span class="operator">=</span><span class="string">&#x27;13802551234&#x27;</span> , 密码 <span class="operator">=</span><span class="string">&#x27;111111&#x27;</span> </span><br><span class="line"> <span class="keyword">WHERE</span> 姓名 <span class="operator">=</span> <span class="string">&#x27;张三&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="多表案例"><a href="#多表案例" class="headerlink" title="多表案例"></a>多表案例</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】订单号为6的客户因某种原因退回2本图书，请在sell表中修改订购册数，同时书退回后，book表中该图书的数量增加4。</span></span><br><span class="line"><span class="keyword">UPDATE</span>  sell ,book</span><br><span class="line">                <span class="keyword">SET</span>  sell.订购册数<span class="operator">=</span>订购册数<span class="number">-2</span> , book.数量<span class="operator">=</span>数量<span class="operator">+</span><span class="number">2</span></span><br><span class="line">                <span class="keyword">WHERE</span> sell.图书编号<span class="operator">=</span>book.图书编号 <span class="keyword">and</span> sell.订单号<span class="operator">=</span><span class="string">&#x27;6&#x27;</span>;</span><br><span class="line">                </span><br></pre></td></tr></table></figure>
<h3 id="数据删除"><a href="#数据删除" class="headerlink" title="数据删除"></a>数据删除</h3>
<h4 id="使用DELETE语句删除数据"><a href="#使用DELETE语句删除数据" class="headerlink" title="使用DELETE语句删除数据"></a>使用DELETE语句删除数据</h4>
<h5 id="格式-3"><a href="#格式-3" class="headerlink" title="格式-3"></a>格式</h5>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 从单个表中删除，语法格式：</span></span><br><span class="line"> <span class="keyword">DELETE</span> [IGNORE] <span class="keyword">FROM</span> 表名 [<span class="keyword">WHERE</span>条件];</span><br></pre></td></tr></table></figure>
<blockquote>
<p>如果省略WHERE子句则删除该表的所有行。</p>
</blockquote>
<h5 id="案例-7"><a href="#案例-7" class="headerlink" title="案例-7"></a>案例</h5>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】 将Bookstore数据库的Members表中姓名为“张三”的员工的记录删除。</span></span><br><span class="line">USE Bookstore;</span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> Members  <span class="keyword">WHERE</span> 姓名<span class="operator">=</span><span class="string">&#x27;张三&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 【例】 将Book表中数量小于5的所有行删除。</span></span><br><span class="line">USE Bookstore;</span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> Book  <span class="keyword">WHERE</span> 数量<span class="operator">&lt;</span><span class="number">5</span>; </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="使用TRUNCATE-TABLE语句删除表数据"><a href="#使用TRUNCATE-TABLE语句删除表数据" class="headerlink" title="使用TRUNCATE-TABLE语句删除表数据"></a>使用TRUNCATE TABLE语句删除表数据</h4>
<blockquote>
<p>使用TRUNCATE TABLE语句将删除指定表中的所有数据，因此也称其为清除表数据语句。</p>
</blockquote>
<h5 id="格式-4"><a href="#格式-4" class="headerlink" title="格式-4"></a>格式</h5>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法格式：</span></span><br><span class="line"><span class="keyword">TRUNCATE</span> <span class="keyword">TABLE</span> 表名;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>说明：由于<code>TRUNCATE TABLE</code>语句将删除表中的所有数据，且无法恢复，因此使用时必须十分小心。</p>
</blockquote>
<blockquote>
<p><code>TRUNCATE TABLE</code> 在功能上与不带 <code>WHERE</code>子句的<code>DELETE</code>语句（如<code>DELETE FROM XS</code>）相同，二者均删除表中的全部行。但 <code>TRUNCATE TABLE</code>比<code>DELETE</code>速度快，且使用的系统和事务日志资源少。<code>DELETE</code> 语句每次删除一行，并在事务日志中为所删除的每行记录一项。而<code>TRUNCATE TABLE</code> 通过释放存储表数据所用的数据页来删除数据，并且只在事务日志中记录页的释放。使用 <code>TRUNCATE TABLE</code>，<code>AUTO_INCREMENT</code>计数器被重新设置为该列的初始值。</p>
</blockquote>
<h3 id="练习-2"><a href="#练习-2" class="headerlink" title="练习-2"></a>练习</h3>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/** 数据操作实训：</span></span><br><span class="line"><span class="comment">知识点提示：关系型数据库插入数据时以行为单位提交自动保存，有一个单元格不符合要求则整行记录都不能提交。</span></span><br><span class="line"><span class="comment">插入记录要符合数据类型、长度、约束的要求，尤其是添加约束的表格要考虑数据的插入顺序，删除时也要考虑相应问题。**/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 1.在schooldb各表中插入记录 </span></span><br><span class="line"><span class="comment">-- （使用SQL语句在各表中至少插入一行记录，其他记录插入方法不限）</span></span><br><span class="line"><span class="comment">-- Records of class</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `class` <span class="keyword">VALUES</span> (<span class="string">&#x27;AC1301&#x27;</span>, <span class="string">&#x27;会计13-1班&#x27;</span>, <span class="string">&#x27;会计学院&#x27;</span>, <span class="number">2013</span>, <span class="number">35</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `class` <span class="keyword">VALUES</span> (<span class="string">&#x27;AC1302&#x27;</span>, <span class="string">&#x27;会计13-2班&#x27;</span>, <span class="string">&#x27;会计学院&#x27;</span>, <span class="number">2013</span>, <span class="number">35</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `class` <span class="keyword">VALUES</span> (<span class="string">&#x27;CS1401&#x27;</span>, <span class="string">&#x27;计算机14-1班&#x27;</span>, <span class="string">&#x27;计算机学院&#x27;</span>, <span class="number">2014</span>, <span class="number">35</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `class` <span class="keyword">VALUES</span> (<span class="string">&#x27;IS1301&#x27;</span>, <span class="string">&#x27;信息系统13-1班&#x27;</span>, <span class="string">&#x27;信息学院&#x27;</span>, <span class="number">2013</span>, <span class="keyword">NULL</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `class` <span class="keyword">VALUES</span> (<span class="string">&#x27;IS1401&#x27;</span>, <span class="string">&#x27;信息系统14-1班&#x27;</span>, <span class="string">&#x27;信息学院&#x27;</span>, <span class="keyword">NULL</span>, <span class="number">30</span>);</span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Records of course</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `course` <span class="keyword">VALUES</span> (<span class="string">&#x27;11003&#x27;</span>, <span class="string">&#x27;管理学&#x27;</span>, <span class="number">2</span>, <span class="number">32</span>, <span class="string">&#x27;2&#x27;</span>, <span class="keyword">NULL</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `course` <span class="keyword">VALUES</span> (<span class="string">&#x27;11005&#x27;</span>, <span class="string">&#x27;会计学&#x27;</span>, <span class="number">3</span>, <span class="number">48</span>, <span class="string">&#x27;2&#x27;</span>, <span class="keyword">NULL</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `course` <span class="keyword">VALUES</span> (<span class="string">&#x27;21001&#x27;</span>, <span class="string">&#x27;计算机基础&#x27;</span>, <span class="number">3</span>, <span class="number">48</span>, <span class="string">&#x27;1&#x27;</span>, <span class="keyword">NULL</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `course` <span class="keyword">VALUES</span> (<span class="string">&#x27;21002&#x27;</span>, <span class="string">&#x27;OFFICE高级应用&#x27;</span>, <span class="number">3</span>, <span class="number">48</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;21001&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `course` <span class="keyword">VALUES</span> (<span class="string">&#x27;21004&#x27;</span>, <span class="string">&#x27;程序设计&#x27;</span>, <span class="number">4</span>, <span class="number">64</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;21001&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `course` <span class="keyword">VALUES</span> (<span class="string">&#x27;21005&#x27;</span>, <span class="string">&#x27;数据库&#x27;</span>, <span class="number">4</span>, <span class="number">64</span>, <span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;21004&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `course` <span class="keyword">VALUES</span> (<span class="string">&#x27;21006&#x27;</span>, <span class="string">&#x27;操作系统&#x27;</span>, <span class="number">4</span>, <span class="number">64</span>, <span class="string">&#x27;5&#x27;</span>, <span class="string">&#x27;21001&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `course` <span class="keyword">VALUES</span> (<span class="string">&#x27;31001&#x27;</span>, <span class="string">&#x27;管理信息系统&#x27;</span>, <span class="number">3</span>, <span class="number">48</span>, <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;21004&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `course` <span class="keyword">VALUES</span> (<span class="string">&#x27;31002&#x27;</span>, <span class="string">&#x27;信息系统_分析与设计&#x27;</span>, <span class="number">2</span>, <span class="number">32</span>, <span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;31001&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `course` <span class="keyword">VALUES</span> (<span class="string">&#x27;31005&#x27;</span>, <span class="string">&#x27;项目管理&#x27;</span>, <span class="number">3</span>, <span class="number">48</span>, <span class="string">&#x27;5&#x27;</span>, <span class="string">&#x27;31001&#x27;</span>);</span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Records of score</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `score` <span class="keyword">VALUES</span> (<span class="string">&#x27;2013110101&#x27;</span>, <span class="string">&#x27;11003&#x27;</span>, <span class="number">90.00</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `score` <span class="keyword">VALUES</span> (<span class="string">&#x27;2013110101&#x27;</span>, <span class="string">&#x27;21001&#x27;</span>, <span class="number">86.00</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `score` <span class="keyword">VALUES</span> (<span class="string">&#x27;2013110103&#x27;</span>, <span class="string">&#x27;11003&#x27;</span>, <span class="number">89.00</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `score` <span class="keyword">VALUES</span> (<span class="string">&#x27;2013110103&#x27;</span>, <span class="string">&#x27;21001&#x27;</span>, <span class="number">86.00</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `score` <span class="keyword">VALUES</span> (<span class="string">&#x27;2013110201&#x27;</span>, <span class="string">&#x27;11003&#x27;</span>, <span class="number">78.00</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `score` <span class="keyword">VALUES</span> (<span class="string">&#x27;2013110201&#x27;</span>, <span class="string">&#x27;21001&#x27;</span>, <span class="number">92.00</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `score` <span class="keyword">VALUES</span> (<span class="string">&#x27;2013110202&#x27;</span>, <span class="string">&#x27;11003&#x27;</span>, <span class="number">82.00</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `score` <span class="keyword">VALUES</span> (<span class="string">&#x27;2013110202&#x27;</span>, <span class="string">&#x27;21001&#x27;</span>, <span class="number">85.00</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `score` <span class="keyword">VALUES</span> (<span class="string">&#x27;2013310101&#x27;</span>, <span class="string">&#x27;21004&#x27;</span>, <span class="number">83.00</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `score` <span class="keyword">VALUES</span> (<span class="string">&#x27;2013310101&#x27;</span>, <span class="string">&#x27;31002&#x27;</span>, <span class="number">68.00</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `score` <span class="keyword">VALUES</span> (<span class="string">&#x27;2013310103&#x27;</span>, <span class="string">&#x27;21004&#x27;</span>, <span class="number">80.00</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `score` <span class="keyword">VALUES</span> (<span class="string">&#x27;2013310103&#x27;</span>, <span class="string">&#x27;31002&#x27;</span>, <span class="number">76.00</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `score` <span class="keyword">VALUES</span> (<span class="string">&#x27;2014210101&#x27;</span>, <span class="string">&#x27;21002&#x27;</span>, <span class="number">93.00</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `score` <span class="keyword">VALUES</span> (<span class="string">&#x27;2014210101&#x27;</span>, <span class="string">&#x27;21004&#x27;</span>, <span class="number">89.00</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `score` <span class="keyword">VALUES</span> (<span class="string">&#x27;2014210102&#x27;</span>, <span class="string">&#x27;21002&#x27;</span>, <span class="number">95.00</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `score` <span class="keyword">VALUES</span> (<span class="string">&#x27;2014210102&#x27;</span>, <span class="string">&#x27;21004&#x27;</span>, <span class="number">88.00</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `score` <span class="keyword">VALUES</span> (<span class="string">&#x27;2014310101&#x27;</span>, <span class="string">&#x27;21001&#x27;</span>, <span class="number">79.00</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `score` <span class="keyword">VALUES</span> (<span class="string">&#x27;2014310101&#x27;</span>, <span class="string">&#x27;21004&#x27;</span>, <span class="number">80.00</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `score` <span class="keyword">VALUES</span> (<span class="string">&#x27;2014310102&#x27;</span>, <span class="string">&#x27;21001&#x27;</span>, <span class="number">91.00</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `score` <span class="keyword">VALUES</span> (<span class="string">&#x27;2014310102&#x27;</span>, <span class="string">&#x27;21004&#x27;</span>, <span class="number">87.00</span>);</span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Records of student</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `student` <span class="keyword">VALUES</span> (<span class="string">&#x27;2013110101&#x27;</span>, <span class="string">&#x27;张晓勇&#x27;</span>, <span class="string">&#x27;男&#x27;</span>, <span class="string">&#x27;1997-12-11&#x27;</span>, <span class="string">&#x27;山西&#x27;</span>, <span class="string">&#x27;汉&#x27;</span>, <span class="string">&#x27;AC1301&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `student` <span class="keyword">VALUES</span> (<span class="string">&#x27;2013110103&#x27;</span>, <span class="string">&#x27;王一敏&#x27;</span>, <span class="string">&#x27;女&#x27;</span>, <span class="string">&#x27;0000-00-00&#x27;</span>, <span class="string">&#x27;河北&#x27;</span>, <span class="string">&#x27;汉&#x27;</span>, <span class="string">&#x27;AC1301&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `student` <span class="keyword">VALUES</span> (<span class="string">&#x27;2013110201&#x27;</span>, <span class="string">&#x27;江山&#x27;</span>, <span class="string">&#x27;女&#x27;</span>, <span class="string">&#x27;1996-09-17&#x27;</span>, <span class="string">&#x27;内蒙古&#x27;</span>, <span class="string">&#x27;锡伯&#x27;</span>, <span class="string">&#x27;AC1302&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `student` <span class="keyword">VALUES</span> (<span class="string">&#x27;2013110202&#x27;</span>, <span class="string">&#x27;李明&#x27;</span>, <span class="string">&#x27;男&#x27;</span>, <span class="string">&#x27;1996-01-14&#x27;</span>, <span class="string">&#x27;广西&#x27;</span>, <span class="string">&#x27;壮&#x27;</span>, <span class="string">&#x27;AC1302&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `student` <span class="keyword">VALUES</span> (<span class="string">&#x27;2013310101&#x27;</span>, <span class="string">&#x27;黄菊&#x27;</span>, <span class="string">&#x27;女&#x27;</span>, <span class="string">&#x27;1995-09-30&#x27;</span>, <span class="string">&#x27;北京&#x27;</span>, <span class="string">&#x27;汉&#x27;</span>, <span class="string">&#x27;IS1301&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `student` <span class="keyword">VALUES</span> (<span class="string">&#x27;2013310103&#x27;</span>, <span class="string">&#x27;吴昊&#x27;</span>, <span class="string">&#x27;男&#x27;</span>, <span class="string">&#x27;1995-11-18&#x27;</span>, <span class="string">&#x27;河北&#x27;</span>, <span class="string">&#x27;汉&#x27;</span>, <span class="string">&#x27;IS1301&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `student` <span class="keyword">VALUES</span> (<span class="string">&#x27;2014210101&#x27;</span>, <span class="string">&#x27;刘涛&#x27;</span>, <span class="string">&#x27;男&#x27;</span>, <span class="string">&#x27;1997-04-03&#x27;</span>, <span class="string">&#x27;湖南&#x27;</span>, <span class="string">&#x27;侗&#x27;</span>, <span class="string">&#x27;CS1401&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `student` <span class="keyword">VALUES</span> (<span class="string">&#x27;2014210102&#x27;</span>, <span class="string">&#x27;郭志坚&#x27;</span>, <span class="string">&#x27;男&#x27;</span>, <span class="string">&#x27;1997-02-21&#x27;</span>, <span class="string">&#x27;上海&#x27;</span>, <span class="string">&#x27;汉&#x27;</span>, <span class="string">&#x27;CS1401&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `student` <span class="keyword">VALUES</span> (<span class="string">&#x27;2014310101&#x27;</span>, <span class="string">&#x27;王林&#x27;</span>, <span class="string">&#x27;男&#x27;</span>, <span class="string">&#x27;1996-10-09&#x27;</span>, <span class="string">&#x27;河南&#x27;</span>, <span class="string">&#x27;汉&#x27;</span>, <span class="string">&#x27;IS1401&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `student` <span class="keyword">VALUES</span> (<span class="string">&#x27;2014310102&#x27;</span>, <span class="string">&#x27;李怡然&#x27;</span>, <span class="string">&#x27;女&#x27;</span>, <span class="string">&#x27;1996-12-31&#x27;</span>, <span class="string">&#x27;辽宁&#x27;</span>, <span class="string">&#x27;汉&#x27;</span>, <span class="string">&#x27;IS1401&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*2.*/写出完成以下操作的SQL语句</span></span><br><span class="line"><span class="comment">-- /*(1).*/向student表中添加数据“502001, 王晓林, 男, 2000-02-10, 广东, 汉,IS2020”</span></span><br><span class="line"> <span class="keyword">insert</span> <span class="keyword">into</span> student <span class="keyword">values</span>(<span class="string">&#x27;502001&#x27;</span>, <span class="string">&#x27;王晓林&#x27;</span>, <span class="string">&#x27;男&#x27;</span>, <span class="string">&#x27;2000-02-10&#x27;</span>, <span class="string">&#x27;广东&#x27;</span> , <span class="string">&#x27;汉&#x27;</span>,<span class="string">&#x27;IS2020&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*(2).*/向student表插入一行数据“500102，林丽，女”</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student(学号,姓名,性别) <span class="keyword">values</span>(<span class="string">&#x27;500102&#x27;</span>,<span class="string">&#x27;林丽&#x27;</span>,<span class="string">&#x27;女&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*(3)*/将student表中所有学生的地区字段内容在原来的数据后加上“省或市”3个字</span></span><br><span class="line"><span class="keyword">update</span> student <span class="keyword">set</span> 地区<span class="operator">=</span>CONCAT(地区,<span class="string">&#x27;（省或市）&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*(4）*/将“王一敏”同学的出生日期改为“1998-02-10”，班级编号改为“AC1302”</span></span><br><span class="line"><span class="keyword">update</span> student <span class="keyword">set</span> 出生日期<span class="operator">=</span><span class="string">&#x27;1998-02-10&#x27;</span>,班级编号<span class="operator">=</span><span class="string">&#x27;AC1302&#x27;</span> <span class="keyword">where</span> 姓名<span class="operator">=</span><span class="string">&#x27;王一敏&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*(5) */将student表中1997年以前出生的学生记录删除</span></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> student <span class="keyword">where</span> <span class="keyword">year</span>(出生日期)<span class="operator">&lt;</span><span class="number">1997</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="数据查询语言—DQL"><a href="#数据查询语言—DQL" class="headerlink" title="数据查询语言—DQL"></a>数据查询语言—DQL</h2>
<h3 id="单表查询"><a href="#单表查询" class="headerlink" title="单表查询"></a>单表查询</h3>
<blockquote>
<p>使用数据库和表的主要目的是存储数据以便在需要时进行检索、统计或组织输出，通过SQL语句的查询可以从表或视图中迅速方便地检索数据。</p>
</blockquote>
<h4 id="SELECT语句格式"><a href="#SELECT语句格式" class="headerlink" title="SELECT语句格式"></a>SELECT语句格式</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> [<span class="keyword">ALL</span> <span class="operator">|</span> <span class="keyword">DISTINCT</span>]   输出列表达式, ...</span><br><span class="line">      [<span class="keyword">FROM</span>  表名<span class="number">1</span> [ , 表名<span class="number">2</span>] …]	           	 <span class="comment">/*FROM子句*/</span></span><br><span class="line">      [<span class="keyword">WHERE</span> 条件]                                    <span class="comment">/*WHERE子句*/</span></span><br><span class="line">      [<span class="keyword">GROUP</span> <span class="keyword">BY</span> &#123;列名 <span class="operator">|</span> 表达式 <span class="operator">|</span> 列编号&#125;</span><br><span class="line">                 [<span class="keyword">ASC</span> <span class="operator">|</span> <span class="keyword">DESC</span>], ...	          	 <span class="comment">/* GROUP BY  子句*/</span></span><br><span class="line">      [<span class="keyword">HAVING</span> 条件]  		          	       <span class="comment">/* HAVING 子句*/</span></span><br><span class="line">      [<span class="keyword">ORDER</span> <span class="keyword">BY</span> &#123;列名 <span class="operator">|</span> 表达式 <span class="operator">|</span> 列编号&#125;</span><br><span class="line">                 [<span class="keyword">ASC</span> <span class="operator">|</span> <span class="keyword">DESC</span>] , ...]                   <span class="comment">/*ORDER BY子句*/</span></span><br><span class="line">       [LIMIT &#123;[偏移量,] 行数<span class="operator">|</span>行数<span class="keyword">OFFSET</span>偏移量&#125;]	   <span class="comment">/*LIMIT子句*/</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>顺序严格地排序。例如，一个HAVING子句必须位于GROUP BY子句之后，并位于ORDER BY子句之前。</p>
</blockquote>
<h4 id="选择指定的列"><a href="#选择指定的列" class="headerlink" title="选择指定的列"></a>选择指定的列</h4>
<h5 id="格式-5"><a href="#格式-5" class="headerlink" title="格式-5"></a>格式</h5>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 使用SELECT语句选择一个表中的某些列的语法格式如下：</span></span><br><span class="line"><span class="keyword">SELECT</span> 字段列表 <span class="keyword">FROM</span> 表名;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<p>各列名之间要以逗号分隔。</p>
</blockquote>
<h5 id="案例-8"><a href="#案例-8" class="headerlink" title="案例-8"></a>案例</h5>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】 查询Members表中各用户的姓名、联系电话和注册时间。</span></span><br><span class="line">USE Bookstore;</span><br><span class="line"><span class="keyword">SELECT</span> 姓名,联系电话,注册时间 </span><br><span class="line"><span class="keyword">FROM</span> Members;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<p>说明：当在SELECT语句指定列的位置上使用*号时，表示选择表的所有列，如要显示Members表中所有列，不必将所有字段名一一列出，使用 <code>SELECT * FROM Members;</code></p>
</blockquote>
<h4 id="定义列别名"><a href="#定义列别名" class="headerlink" title="定义列别名"></a>定义列别名</h4>
<blockquote>
<p>当希望查询结果中的某些列或所有列显示时且使用自己选择的列标题时，可以在列名之后使用AS子句来更改查询结果的列别名。</p>
</blockquote>
<h5 id="格式-6"><a href="#格式-6" class="headerlink" title="格式-6"></a>格式</h5>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">语法格式为： </span><br><span class="line"><span class="keyword">SELECT</span> 字段列表 [<span class="keyword">AS</span>] 别名;</span><br></pre></td></tr></table></figure>
<h5 id="案例-9"><a href="#案例-9" class="headerlink" title="案例-9"></a>案例</h5>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】 查询Book表中图书类别为计算机的图书书名、作者和出版社，结果中各列的标题分别指定为name、auther和publisher。</span></span><br><span class="line"><span class="keyword">SELECT</span> 书名 <span class="keyword">AS</span> name, 作者 <span class="keyword">AS</span> auther, 出版社 <span class="keyword">AS</span> publisher <span class="keyword">FROM</span> Book <span class="keyword">WHERE</span> 图书类别<span class="operator">=</span> <span class="string">&#x27;计算机&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 注意：当自定义的列标题中含有空格时，必须使用引号将标题括起来。</span></span><br><span class="line"><span class="keyword">SELECT</span> 书名 <span class="keyword">AS</span> <span class="string">&#x27; Name of  Book&#x27;</span>, </span><br><span class="line">作者 <span class="keyword">AS</span> <span class="string">&#x27;Name  of  Auther&#x27;</span>, 出版社 <span class="keyword">AS</span> Publisher</span><br><span class="line"><span class="keyword">FROM</span> book   <span class="keyword">WHERE</span> 图书类别<span class="operator">=</span> <span class="string">&#x27;计算机&#x27;</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="替换查询结果中的数据"><a href="#替换查询结果中的数据" class="headerlink" title="替换查询结果中的数据"></a>替换查询结果中的数据</h4>
<blockquote>
<p>在对表进行查询时，有时对所查询的某些列希望得到的是一种概念而不是具体的数据。例如查询XS表的总学分，所希望知道的是学习的总体情况，这时，就可以用等级来替换总学分的具体数字。</p>
<p>要替换查询结果中的数据，则要使用查询中的CASE表达式。</p>
</blockquote>
<h5 id="格式-7"><a href="#格式-7" class="headerlink" title="格式-7"></a>格式</h5>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法格式</span></span><br><span class="line"><span class="keyword">CASE</span></span><br><span class="line">     <span class="keyword">WHEN</span> 条件<span class="number">1</span> <span class="keyword">THEN</span> 表达式<span class="number">1</span></span><br><span class="line">     <span class="keyword">WHEN</span> 条件<span class="number">2</span> <span class="keyword">THEN</span> 表达式<span class="number">2</span></span><br><span class="line">     ……</span><br><span class="line">     <span class="keyword">ELSE</span> 表达式</span><br><span class="line"><span class="keyword">END</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h5 id="案例-10"><a href="#案例-10" class="headerlink" title="案例-10"></a>案例</h5>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】 查询Book表中图书编号、书名和数量，对其库存数量按以下规则进行替换：若数量为空值，替换为“尚未进货”；若数量小于5，替换为“需进货”；若数量在5-50之间，替换为“库存正常”；若总学分大于50，替换为“库存积压”。列标题更改为“库存”。</span></span><br><span class="line"><span class="keyword">SELECT</span> 图书编号, 书名,</span><br><span class="line">        <span class="keyword">CASE</span> </span><br><span class="line">	<span class="keyword">WHEN</span> 数量 <span class="keyword">IS</span> <span class="keyword">NULL</span> <span class="keyword">THEN</span>  <span class="string">&#x27;尚未进货&#x27;</span></span><br><span class="line">        	<span class="keyword">WHEN</span> 数量 <span class="operator">&lt;</span> <span class="number">5</span> <span class="keyword">THEN</span>  <span class="string">&#x27;需进货&#x27;</span></span><br><span class="line">        	<span class="keyword">WHEN</span> 数量 <span class="operator">&gt;=</span><span class="number">5</span> <span class="keyword">and</span> 数量<span class="operator">&lt;=</span><span class="number">50</span> <span class="keyword">THEN</span>  <span class="string">&#x27;库存正常&#x27;</span></span><br><span class="line">       	<span class="keyword">ELSE</span>  <span class="string">&#x27;库存积压&#x27;</span></span><br><span class="line">         <span class="keyword">END</span>  <span class="keyword">AS</span>  库存</span><br><span class="line"><span class="keyword">FROM</span> Book; </span><br></pre></td></tr></table></figure>
<h4 id="计算列值"><a href="#计算列值" class="headerlink" title="计算列值"></a>计算列值</h4>
<blockquote>
<p>使用SELECT对列进行查询时，在结果中可以输出对列值计算后的值，即SELECT子句可使用表达式作为结果。</p>
</blockquote>
<h5 id="格式-8"><a href="#格式-8" class="headerlink" title="格式-8"></a>格式</h5>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法格式</span></span><br><span class="line"><span class="keyword">SELECT</span> 表达式<span class="number">1</span>[ , 表达式<span class="number">2</span>… ];</span><br></pre></td></tr></table></figure>
<h5 id="案例-11"><a href="#案例-11" class="headerlink" title="案例-11"></a>案例</h5>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】 对Sell表已发货的记录计算订购金额（订购金额=订购册数*订购单价），并显示图书编号和订购金额。</span></span><br><span class="line"><span class="keyword">SELECT</span>  图书编号, 订购册数<span class="operator">*</span>订购单价  <span class="keyword">AS</span> 订购金额</span><br><span class="line"> <span class="keyword">FROM</span>   Sell   </span><br><span class="line"> <span class="keyword">WHERE</span> 是否发货<span class="operator">=</span> <span class="string">&#x27;已发货&#x27;</span>; </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="消除结果集中的重复行"><a href="#消除结果集中的重复行" class="headerlink" title="消除结果集中的重复行"></a>消除结果集中的重复行</h4>
<blockquote>
<p>对表只选择其某些列时，可能会出现重复行。例如，若对XSCJ数据库的XS表只选择专业名和总学分，则出现多行重复的情况。可以使用DISTINCT或DISTINCTROW关键字消除结果集中的重复行。</p>
</blockquote>
<h5 id="格式-9"><a href="#格式-9" class="headerlink" title="格式-9"></a>格式</h5>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> 字段列表;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>其含义是对结果集中的重复行只选择一个，保证行的唯一性。</p>
</blockquote>
<h5 id="案例-12"><a href="#案例-12" class="headerlink" title="案例-12"></a>案例</h5>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】 对Book表只选择图书类别和出版社，消除结果集中的重复行。</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> 图书类别, 出版社  <span class="keyword">FROM</span> Book; </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h4>
<h5 id="操-作-符"><a href="#操-作-符" class="headerlink" title="操-作-符"></a>操 作 符</h5>
<table>
<thead>
<tr>
<th>操 作 符</th>
<th>描  述</th>
</tr>
</thead>
<tbody>
<tr>
<td>=</td>
<td>等于</td>
</tr>
<tr>
<td>&lt;&gt;</td>
<td>不等于</td>
</tr>
<tr>
<td>&gt;</td>
<td>大于</td>
</tr>
<tr>
<td>&lt;</td>
<td>小于</td>
</tr>
<tr>
<td>&gt;=</td>
<td>大于等于</td>
</tr>
<tr>
<td>&lt;=</td>
<td>小于等于</td>
</tr>
<tr>
<td>BETWEEN</td>
<td>在某个范围内</td>
</tr>
<tr>
<td>LIKE</td>
<td>搜索某种模式</td>
</tr>
</tbody>
</table>
<h4 id="WHERE子句"><a href="#WHERE子句" class="headerlink" title="WHERE子句"></a>WHERE子句</h4>
<blockquote>
<p>WHERE子句必须紧跟FROM子句之后，在WHERE子句中，使用一个条件从FROM子句的中间结果中选取行。</p>
</blockquote>
<h5 id="格式-10"><a href="#格式-10" class="headerlink" title="格式-10"></a>格式</h5>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">WHERE</span> 列名 运算符 值;</span><br></pre></td></tr></table></figure>
<blockquote>
<ul>
<li>WHERE子句会根据条件对FROM子句的中间结果中的行一行一行地进行判断，当条件为TRUE的时候，一行就被包含到WHERE子句的中间结果中。</li>
<li>在SQL中，返回逻辑值（TRUE或FALSE）的运算符或关键字都可称为谓词。</li>
<li>判定运算包括比较运算、模式匹配、范围比较、空值比较。</li>
</ul>
</blockquote>
<h4 id="比较运算"><a href="#比较运算" class="headerlink" title="比较运算"></a>比较运算</h4>
<blockquote>
<p>比较运算符用于比较（除<code>TEXT</code>和<code>BLOB</code>类型外) 两个表达式值，MySQL支持的比较运算符有：=（等于）、&lt;（小于）、&lt;=（小于等于）、&gt;（大于）、&gt;=（大于等于）、&lt;=&gt;（相等或都等于空）、&lt;&gt;（不等于）、!=（不等于）。</p>
<p>当两个表达式值均不为空值（NULL）时，除了“&lt;=&gt;”运算符，其他比较运算返回逻辑值TRUE（真）或FALSE（假）；而当两个表达式值中有一个为空值或都为空值时，将返回UNKNOWN。</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】 查询Bookstore数据库Book表中书名为“网页程序设计”的记录。</span></span><br><span class="line"><span class="keyword">SELECT</span>  书名,单价   <span class="keyword">FROM</span>  Book <span class="keyword">WHERE</span> 书名<span class="operator">=</span><span class="string">&#x27;网页程序设计&#x27;</span>; </span><br><span class="line"></span><br><span class="line"><span class="comment">-- 【例】 查询Book表中单价大于30的图书情况。</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span>   <span class="keyword">FROM</span>  Book <span class="keyword">WHERE</span> 单价<span class="operator">&gt;</span><span class="number">30</span>; </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="逻辑运算"><a href="#逻辑运算" class="headerlink" title="逻辑运算"></a>逻辑运算</h4>
<blockquote>
<p>通过逻辑运算符（<code>AND</code>、<code>OR</code>、<code>XOR</code>和<code>NOT</code>）组成更为复杂的查询条件。逻辑运算操作的结果是“1”或“0”，分别表示“<strong>true</strong>”或“<strong>false</strong>”。</p>
</blockquote>
<h5 id="类型"><a href="#类型" class="headerlink" title="类型"></a>类型</h5>
<table>
<thead>
<tr>
<th><strong>符号1</strong></th>
<th><strong>符号2</strong></th>
<th><strong>说明</strong></th>
<th><strong>示例</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>not</strong></td>
<td><strong>!</strong></td>
<td><strong>非运算</strong></td>
<td><strong>!x</strong></td>
<td>如果x是&quot;true&quot;，那么示例的结果是&quot;false&quot;；  如果x是&quot;false&quot;，那么示例的结果是&quot;true&quot;。</td>
</tr>
<tr>
<td><strong>or</strong></td>
<td><strong>||</strong></td>
<td><strong>或运算</strong></td>
<td><strong>x  || y</strong></td>
<td>如果x或y任一是&quot;true&quot;，那么示例的结果是&quot;true&quot;，否则示例的结果是&quot;false&quot;。</td>
</tr>
<tr>
<td><strong>and</strong></td>
<td><strong>&amp;&amp;</strong></td>
<td><strong>与运算</strong></td>
<td><strong>x  &amp;&amp; y</strong></td>
<td>如果x和y都是&quot;True&quot;，那么示例结果是&quot;true&quot;，否则示例的结果是&quot;false&quot;。</td>
</tr>
<tr>
<td><strong>xor</strong></td>
<td><strong>^</strong></td>
<td><strong>异或运算</strong></td>
<td><strong>x  ^y</strong></td>
<td>如果x和y不相同，那么示例结果是&quot;true&quot;，否则示例的结果是&quot;false&quot;。</td>
</tr>
</tbody>
</table>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">非： <span class="keyword">select</span> <span class="keyword">not</span> <span class="number">0</span>, <span class="keyword">not</span> <span class="number">1</span>, <span class="keyword">not</span> <span class="keyword">null</span>;</span><br><span class="line">或： <span class="keyword">select</span> (<span class="number">1</span> <span class="keyword">or</span> <span class="number">0</span>), (<span class="number">0</span> <span class="keyword">or</span> <span class="number">0</span>), (<span class="number">1</span> <span class="keyword">or</span> <span class="keyword">null</span>), (<span class="number">1</span> <span class="keyword">or</span> <span class="number">1</span>), (<span class="keyword">null</span> <span class="keyword">or</span> <span class="keyword">null</span>);</span><br><span class="line">与： <span class="keyword">select</span> (<span class="number">1</span> <span class="keyword">and</span> <span class="number">1</span>), (<span class="number">0</span> <span class="keyword">and</span> <span class="number">1</span>), (<span class="number">3</span> <span class="keyword">and</span> <span class="number">1</span>), (<span class="number">1</span> <span class="keyword">and</span> <span class="keyword">null</span>);</span><br><span class="line">异或： <span class="keyword">select</span> (<span class="number">1</span> xor <span class="number">1</span>), (<span class="number">0</span> xor <span class="number">0</span>), (<span class="number">1</span> xor <span class="number">0</span>), (<span class="number">0</span> xor <span class="number">1</span>), (<span class="keyword">null</span> xor <span class="number">1</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h5 id="案例-13"><a href="#案例-13" class="headerlink" title="案例-13"></a>案例</h5>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】 查询Sell表中已收货且已结清的订单情况。</span></span><br><span class="line"><span class="keyword">SELECT</span> 订单号,是否收货,是否结清 </span><br><span class="line"><span class="keyword">FROM</span> Sell</span><br><span class="line"><span class="keyword">WHERE</span>  是否收货<span class="operator">=</span><span class="string">&#x27;已收货&#x27;</span>  <span class="keyword">AND</span> 是否结清<span class="operator">=</span><span class="string">&#x27;已结清&#x27;</span>; </span><br><span class="line"></span><br><span class="line"><span class="comment">-- 【例】查询Book表中清华大学出版社和北京大学出版社出版的价格大于25元的图书。</span></span><br><span class="line"><span class="keyword">SELECT</span> 书名,出版社,单价 <span class="keyword">FROM</span>  Book</span><br><span class="line"><span class="keyword">WHERE</span>  (出版社<span class="operator">=</span><span class="string">&#x27;清华大学出版社&#x27;</span> <span class="keyword">OR</span> 出版社<span class="operator">=</span><span class="string">&#x27;北京大学出版社&#x27;</span> )</span><br><span class="line">      <span class="keyword">AND</span> 单价<span class="operator">&gt;=</span><span class="number">25</span>;</span><br><span class="line">或： </span><br><span class="line"><span class="keyword">SELECT</span>书名,出版社,单价   <span class="keyword">FROM</span>  Book</span><br><span class="line"><span class="keyword">WHERE</span>  (出版社<span class="operator">=</span><span class="string">&#x27;清华大学出版社&#x27;</span>  <span class="keyword">AND</span> 单价<span class="operator">&gt;=</span><span class="number">25</span>) </span><br><span class="line">      <span class="keyword">OR</span>  (出版社<span class="operator">=</span><span class="string">&#x27;北京大学出版社&#x27;</span>  <span class="keyword">AND</span> 单价<span class="operator">&gt;=</span><span class="number">25</span>); </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="模式匹配（LIKE运算符）"><a href="#模式匹配（LIKE运算符）" class="headerlink" title="模式匹配（LIKE运算符）"></a>模式匹配（LIKE运算符）</h4>
<blockquote>
<p>LIKE运算符用于指出一个字符串是否与指定的字符串相匹配，其运算对象可以是char、varchar、text、datetime等类型的数据，返回逻辑值TRUE或FALSE。</p>
<p>使用LIKE进行模式匹配时，常使用特殊符号_和%，可进行模糊查询。“%”代表0个或多个字符，“_”代表单个字符。由于MySQL默认不区分大小写，要区分大小写时需要更换字符集的校对规则。</p>
</blockquote>
<h5 id="案例-14"><a href="#案例-14" class="headerlink" title="案例-14"></a>案例</h5>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】 查询Members表中姓“张”的会员的身份证号、姓名及注册时间。</span></span><br><span class="line"><span class="keyword">SELECT</span> 用户号,会员姓名, 注册时间    <span class="keyword">FROM</span> Members </span><br><span class="line"> <span class="keyword">WHERE</span>  会员姓名  <span class="keyword">LIKE</span>  <span class="string">&#x27;张%&#x27;</span>; </span><br><span class="line"></span><br><span class="line"><span class="comment">-- 【例】查询book表中图书编号倒数第二位为6的图书的图书编号和书名。</span></span><br><span class="line"><span class="keyword">SELECT</span> 图书编号, 书名   <span class="keyword">FROM</span>  book </span><br><span class="line"> <span class="keyword">WHERE</span> 图书编号 <span class="keyword">LIKE</span>  <span class="string">&#x27;%6_&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 【例】查询Book表中书名中包含下画线的图书。</span></span><br><span class="line"><span class="keyword">SELECT</span> 图书编号,书名   <span class="keyword">FROM</span>   Book</span><br><span class="line"> <span class="keyword">WHERE</span> 书名 <span class="keyword">LIKE</span> <span class="string">&#x27;%#_%&#x27;</span>  <span class="keyword">ESCAPE</span>  <span class="string">&#x27;#&#x27;</span>; </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="范围比较"><a href="#范围比较" class="headerlink" title="范围比较"></a>范围比较</h4>
<blockquote>
<p>用于范围比较的关键字有两个：BETWEEN和IN。</p>
<p>当要查询的条件是某个值的范围时，可以使用BETWEEN关键字。BETWEEN关键字指出查询范围。</p>
</blockquote>
<h5 id="格式-11"><a href="#格式-11" class="headerlink" title="格式-11"></a>格式</h5>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">表达式 [ <span class="keyword">NOT</span> ] <span class="keyword">BETWEEN</span>  表达式<span class="number">1</span>   <span class="keyword">AND</span>  表达式<span class="number">2</span>;</span><br></pre></td></tr></table></figure>
<blockquote>
<ul>
<li>当不使用NOT时，若表达式的值在表达式表达式1与表达式2之间（包括这两个值），则返回TRUE，否则返回FALSE；使用NOT时，返回值刚好相反。</li>
<li>注意：表达式1的值不能大于表达式2的值。</li>
</ul>
</blockquote>
<h5 id="案例-15"><a href="#案例-15" class="headerlink" title="案例-15"></a>案例</h5>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】 查询Book表中2020年出版的图书的情况。</span></span><br><span class="line"><span class="keyword">SELECT</span>  <span class="operator">*</span>    <span class="keyword">FROM</span> Book   </span><br><span class="line"> <span class="keyword">WHERE</span> 出版时间  <span class="keyword">BETWEEN</span> <span class="string">&#x27;2020-1-1&#x27;</span>  <span class="keyword">AND</span> <span class="string">&#x27;2020-12-31&#x27;</span>; </span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<p>使用IN关键字可以指定一个值表，值表中列出所有可能的值，当与值表中的任一个匹配时，即返回TRUE，否则返回FALSE。</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 使用IN关键字指定值表的格式为：</span></span><br><span class="line">表达式 <span class="keyword">IN</span> (表达式<span class="number">1</span> [,…n])</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】查询Book表中“高等教育出版社”、“北京大学出版社”和“人民邮电出版社”出版的图书的情况。</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span>  <span class="keyword">FROM</span> Book  </span><br><span class="line"> <span class="keyword">WHERE</span>  出版社  <span class="keyword">IN</span> ( <span class="string">&#x27;高等教育出版社&#x27;</span>, <span class="string">&#x27;北京大学出版社&#x27;</span>, <span class="string">&#x27;人民邮电出版社&#x27;</span>); </span><br></pre></td></tr></table></figure>
<h4 id="空值比较"><a href="#空值比较" class="headerlink" title="空值比较"></a>空值比较</h4>
<blockquote>
<p>当需要判定一个表达式的值是否为空值时，使用 <code>IS NULL</code>关键字。格式为：</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">表达式 <span class="keyword">IS</span> [ <span class="keyword">NOT</span> ] <span class="keyword">NULL</span>;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>当不使用NOT时，若表达式expression的值为空值，返回TRUE，否则返回FALSE；当使用NOT时，结果刚好相反。</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】 查询Sell表中尚未发货的订单记录。</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span>   <span class="keyword">FROM</span>   Sell   <span class="keyword">WHERE</span> 是否发货 <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br><span class="line"><span class="comment">-- MySQL有一个特殊的等于运算符“&lt;=&gt;”，当两个表达式彼此相等或都等于空值时，它的值为TRUE，其中有一个空值或都是非空值但不相等，这个条件就是FALSE。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 上面的语句也可以换成：</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span>  Sell   <span class="keyword">WHERE</span> 是否收货<span class="operator">&lt;=&gt;</span><span class="keyword">NULL</span>; </span><br></pre></td></tr></table></figure>
<h3 id="分类汇总与排序—聚合函数"><a href="#分类汇总与排序—聚合函数" class="headerlink" title="分类汇总与排序—聚合函数"></a>分类汇总与排序—聚合函数</h3>
<blockquote>
<p>SELECT子句的表达式中还可以包含所谓的聚合函数。聚合函数常常用于对一组值进行计算，然后返回单个值。</p>
</blockquote>
<table>
<thead>
<tr>
<th><strong>函 数 名</strong></th>
<th><strong>说  明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>COUNT</td>
<td>求组中项数，返回int类型整数</td>
</tr>
<tr>
<td>MAX</td>
<td>求最大值</td>
</tr>
<tr>
<td>MIN</td>
<td>求最小值</td>
</tr>
<tr>
<td>SUM</td>
<td>返回表达式中所有值的和</td>
</tr>
<tr>
<td>AVG</td>
<td>求组中值的平均值</td>
</tr>
</tbody>
</table>
<h4 id="COUNT函数"><a href="#COUNT函数" class="headerlink" title="COUNT函数"></a>COUNT函数</h4>
<blockquote>
<p>聚合函数中最经常使用的是COUNT()函数，用于统计组中满足条件的行数或总行数，返回SELECT语句检索到的行中非NULL值的数目，若找不到匹配的行，则返回0。</p>
</blockquote>
<h5 id="格式-12"><a href="#格式-12" class="headerlink" title="格式-12"></a>格式</h5>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法格式为</span></span><br><span class="line"><span class="built_in">COUNT</span> ( &#123; [ <span class="keyword">ALL</span> <span class="operator">|</span> <span class="keyword">DISTINCT</span> ]表达式 &#125; <span class="operator">|</span> <span class="operator">*</span> )</span><br></pre></td></tr></table></figure>
<blockquote>
<p>其中，表达式的数据类型是除BLOB或TEXT之外的任何类型。ALL表示对所有值进行运算，DISTINCT表示去除重复值，默认为ALL。使用COUNT(*)时将返回检索行的总数目，不论其是否包含 NULL值。</p>
</blockquote>
<h5 id="案例-16"><a href="#案例-16" class="headerlink" title="案例-16"></a>案例</h5>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】求会员总人数。</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">AS</span>  <span class="string">&#x27;会员数&#x27;</span>  <span class="keyword">FROM</span> Members; </span><br><span class="line"></span><br><span class="line"><span class="comment">-- 【例】 统计已结清的订单数。</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(是否结清)  <span class="keyword">AS</span>  <span class="string">&#x27;已结清的订单数&#x27;</span>  <span class="keyword">FROM</span> Sell;</span><br><span class="line"><span class="comment">-- 注意：这里COUNT(是否结清)只统计是否结清列中不为NULL的行。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 【例】 统计订购册数在5以上的订单数。</span></span><br><span class="line"> <span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(订购册数)  <span class="keyword">AS</span>  <span class="string">&#x27;订购册数在5以上的订单数&#x27;</span></span><br><span class="line"> <span class="keyword">FROM</span> Sell</span><br><span class="line"> <span class="keyword">WHERE</span> 订购册数<span class="operator">&gt;</span><span class="number">5</span>; </span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="MAX和MIN"><a href="#MAX和MIN" class="headerlink" title="MAX和MIN"></a>MAX和MIN</h4>
<blockquote>
<p>MAX和MIN分别用于求表达式中所有值项的最大值与最小值。</p>
</blockquote>
<h5 id="格式-13"><a href="#格式-13" class="headerlink" title="格式-13"></a>格式</h5>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法格式为：</span></span><br><span class="line">MAX <span class="operator">/</span> <span class="built_in">MIN</span> ( [ <span class="keyword">ALL</span> <span class="operator">|</span> <span class="keyword">DISTINCT</span> ]表达式 )</span><br></pre></td></tr></table></figure>
<blockquote>
<p>其中，表达式是常量、列、函数或表达式，其数据类型可以是数字、字符和时间日期 类型。</p>
</blockquote>
<h5 id="案例-17"><a href="#案例-17" class="headerlink" title="案例-17"></a>案例</h5>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】 求订购了图书编号为TP.3035的订单的最高订购册数和最低订购册数。</span></span><br><span class="line"><span class="keyword">SELECT</span>  <span class="built_in">MAX</span>(订购册数), <span class="built_in">MIN</span>(订购册数)</span><br><span class="line">             <span class="keyword">FROM</span> Sell</span><br><span class="line">             <span class="keyword">WHERE</span>  图书编号 <span class="operator">=</span> <span class="string">&#x27; TP.3035 &#x27;</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意：当给定列上只有空值或检索出的中间结果为空时，MAX和MIN函数的值也为空。</p>
</blockquote>
<h4 id="SUM函数和AVG函数"><a href="#SUM函数和AVG函数" class="headerlink" title="SUM函数和AVG函数"></a>SUM函数和AVG函数</h4>
<blockquote>
<p>SUM和AVG分别用于求表达式中所有值项的总和与平均值。</p>
</blockquote>
<h5 id="格式-14"><a href="#格式-14" class="headerlink" title="格式-14"></a>格式</h5>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法格式为：</span></span><br><span class="line">SUM <span class="operator">/</span> <span class="built_in">AVG</span> ( [ <span class="keyword">ALL</span> <span class="operator">|</span> <span class="keyword">DISTINCT</span> ]表达式 )</span><br></pre></td></tr></table></figure>
<blockquote>
<p>其中，表达式是常量、列、函数或表达式，其数据类型只能是数值型。</p>
</blockquote>
<h5 id="案例-18"><a href="#案例-18" class="headerlink" title="案例-18"></a>案例</h5>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】 求订购了图书编号为Ts.3035图书的订购总册数。</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">SUM</span>(订购册数)  <span class="keyword">AS</span>  <span class="string">&#x27;订购总册数&#x27;</span>  <span class="keyword">FROM</span> Sell  <span class="keyword">WHERE</span>  图书编号 <span class="operator">=</span> <span class="string">&#x27;Ts.3035 &#x27;</span>; </span><br><span class="line"></span><br><span class="line"><span class="comment">-- 【例】 求订购图书编号为Ts.3035图书的订单平均册数。</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">AVG</span>(订购册数)  <span class="keyword">AS</span>  <span class="string">&#x27;每笔订单平均册数&#x27;</span>  <span class="keyword">FROM</span> Sell  <span class="keyword">WHERE</span>  图书编号 <span class="operator">=</span> <span class="string">&#x27;Ts.3035 &#x27;</span>; </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="分类汇总与排序—GROUP-BY子句"><a href="#分类汇总与排序—GROUP-BY子句" class="headerlink" title="分类汇总与排序—GROUP-BY子句"></a>分类汇总与排序—GROUP BY子句</h3>
<blockquote>
<p>GROUP BY子句主要用于根据字段对行分组。例如，根据学生所学的专业对XS表中的所有行分组，结果是每个专业的学生成为一组。</p>
</blockquote>
<h4 id="格式-15"><a href="#格式-15" class="headerlink" title="格式-15"></a>格式</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> &#123;列名 <span class="operator">|</span>表达式&#125; [<span class="keyword">ASC</span> <span class="operator">|</span> <span class="keyword">DESC</span>], ...  </span><br><span class="line">              [<span class="keyword">WITH</span> <span class="keyword">ROLLUP</span>]</span><br></pre></td></tr></table></figure>
<blockquote>
<p>GROUP BY子句后通常包含列名或表达式。MySQL对GROUP BY子句进行了扩展，可以在列的后面指定ASC（升序）或DESC（降序）。GROUP BY可以根据一个或多个列进行分组，也可以根据表达式进行分组，经常和聚合函数一起使用。</p>
</blockquote>
<h4 id="案例-19"><a href="#案例-19" class="headerlink" title="案例-19"></a>案例</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】 输出Book表中图书类别名。</span></span><br><span class="line"><span class="keyword">SELECT</span> 图书类别   <span class="keyword">FROM</span> Book  <span class="keyword">GROUP</span> <span class="keyword">BY</span> 图书类别; </span><br><span class="line"></span><br><span class="line"><span class="comment">-- 【例】 按图书类别统计Book表中各类图书的库存数。</span></span><br><span class="line"><span class="keyword">SELECT</span> 图书类别,<span class="built_in">COUNT</span>(<span class="operator">*</span>)  <span class="keyword">AS</span>  <span class="string">&#x27;库存数&#x27;</span></span><br><span class="line">            <span class="keyword">FROM</span> Book</span><br><span class="line">            <span class="keyword">GROUP</span> <span class="keyword">BY</span> 图书类别; </span><br><span class="line"></span><br><span class="line"><span class="comment">-- 【例】 按图书编号分类统计其订单数和订单的平均订购册数。</span></span><br><span class="line"><span class="keyword">SELECT</span> 图书编号, <span class="built_in">AVG</span>(订购册数) <span class="keyword">AS</span> <span class="string">&#x27;订购册数&#x27;</span> ,</span><br><span class="line">             <span class="built_in">COUNT</span>(订单号) <span class="keyword">AS</span> <span class="string">&#x27;订单数&#x27;</span></span><br><span class="line">             <span class="keyword">FROM</span> Sell </span><br><span class="line">             <span class="keyword">GROUP</span> <span class="keyword">BY</span> 图书编号; </span><br><span class="line">             </span><br></pre></td></tr></table></figure>
<h4 id="带ROLLUP的GROUP-BY子句"><a href="#带ROLLUP的GROUP-BY子句" class="headerlink" title="带ROLLUP的GROUP-BY子句"></a>带ROLLUP的GROUP BY子句</h4>
<blockquote>
<p>使用带ROLLUP操作符的GROUP BY子句，可指定在结果集内不仅包含由 GROUP BY 提供的正常行，还包含汇总行。</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】按图书类别、出版社分类统计Book表中各类图书的库存数。</span></span><br><span class="line"><span class="keyword">SELECT</span> 图书类别, 出版社, <span class="built_in">Sum</span>(数量) <span class="keyword">AS</span> <span class="string">&#x27;库存数&#x27;</span></span><br><span class="line">            <span class="keyword">FROM</span> Book</span><br><span class="line">            <span class="keyword">GROUP</span> <span class="keyword">BY</span> 图书类别, 出版社   </span><br><span class="line">            <span class="keyword">WITH</span>  <span class="keyword">ROLLUP</span>;</span><br><span class="line">            </span><br></pre></td></tr></table></figure>
<h4 id="HAVING子句"><a href="#HAVING子句" class="headerlink" title="HAVING子句"></a>HAVING子句</h4>
<blockquote>
<p>使用HAVING子句的目的与WHERE子句类似，不同的是WHERE子句是用来在FROM子句之后选择行，而HAVING子句用来在GROUP BY子句后选择行。</p>
</blockquote>
<h5 id="格式-16"><a href="#格式-16" class="headerlink" title="格式-16"></a>格式</h5>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> &#123;列名 <span class="operator">|</span>表达式&#125;  <span class="keyword">HAVING</span> 条件</span><br></pre></td></tr></table></figure>
<blockquote>
<ul>
<li>其中，条件的定义和WHERE子句中的条件类似，不过HAVING子句中的条件可以包含聚合函数，而WHERE子句中则不可以。</li>
<li>SQL标准要求HAVING必须引用GROUP BY子句中的列或用于聚合函数中的列。不过，MySQL支持对此工作性质的扩展，并允许HAVING引用SELECT清单中的列和外部子查询中的列。</li>
</ul>
</blockquote>
<h5 id="案例-20"><a href="#案例-20" class="headerlink" title="案例-20"></a>案例</h5>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】 查找Sell表中每个会员平均订购册数在10本以上的会员的用户号和平均订购册数。</span></span><br><span class="line"><span class="keyword">SELECT</span> 用户号, <span class="built_in">AVG</span>(订购册数) <span class="keyword">AS</span> <span class="string">&#x27;平均订购册数&#x27;</span></span><br><span class="line">            <span class="keyword">FROM</span> Sell</span><br><span class="line">            <span class="keyword">GROUP</span> <span class="keyword">BY</span> 用户号</span><br><span class="line">            <span class="keyword">HAVING</span> <span class="built_in">AVG</span>(订购册数) <span class="operator">&gt;</span><span class="number">10</span>; </span><br><span class="line">            </span><br><span class="line"><span class="comment">-- 【例】 查找Sell表中会员订单数在2笔以上且每笔订购册数都在5本以上的会员。</span></span><br><span class="line"><span class="keyword">SELECT</span> 用户号, <span class="built_in">AVG</span>(订购册数) </span><br><span class="line">            <span class="keyword">FROM</span> Sell</span><br><span class="line">            <span class="keyword">WHERE</span> 订购册数 <span class="operator">&gt;</span><span class="number">5</span></span><br><span class="line">            <span class="keyword">GROUP</span> <span class="keyword">BY</span> 用户号</span><br><span class="line">            <span class="keyword">HAVING</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="operator">&gt;</span> <span class="number">2</span>;</span><br><span class="line">            </span><br></pre></td></tr></table></figure>
<h3 id="分类汇总与排序—ORDER-BY子句"><a href="#分类汇总与排序—ORDER-BY子句" class="headerlink" title="分类汇总与排序—ORDER-BY子句"></a>分类汇总与排序—ORDER BY子句</h3>
<blockquote>
<p>在一条SELECT语句中，如果不使用ORDER BY子句，结果中行的顺序是不可预料的。使用ORDER BY子句后可以保证结果中的行按一定顺序排列。</p>
</blockquote>
<h4 id="格式-17"><a href="#格式-17" class="headerlink" title="格式-17"></a>格式</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> &#123;列名 <span class="operator">|</span> 表达式 <span class="operator">|</span> 列编号&#125; [<span class="keyword">ASC</span> <span class="operator">|</span> <span class="keyword">DESC</span>] , ...</span><br></pre></td></tr></table></figure>
<blockquote>
<ul>
<li>说明：ORDER BY子句后可以是一个列、一个表达式或一个正整数。正整数表示按结果表中该位置上的列排序。例如，使用ORDER BY 3表示对SELECT的列清单上的第3列进行排序。</li>
<li>关键字ASC表示升序排列，DESC表示降序排列，系统默认值为ASC。</li>
</ul>
</blockquote>
<h4 id="案例-21"><a href="#案例-21" class="headerlink" title="案例-21"></a>案例</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】 将Book表中记录按出版时间先后排序。</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Book <span class="keyword">ORDER</span> <span class="keyword">BY</span> 出版时间; </span><br><span class="line"></span><br><span class="line"><span class="comment">-- 【例】 将Sell表中记录按订购册数从高到低排列。</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Sell <span class="keyword">ORDER</span> <span class="keyword">BY</span> 订购册数 <span class="keyword">DESC</span>; </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="分类汇总与排序—LIMIT子句"><a href="#分类汇总与排序—LIMIT子句" class="headerlink" title="分类汇总与排序—LIMIT子句"></a>分类汇总与排序—LIMIT子句</h3>
<blockquote>
<p>LIMIT子句是SELECT语句的最后一个子句，主要用于限制被SELECT语句返回的行数。</p>
</blockquote>
<h4 id="格式-18"><a href="#格式-18" class="headerlink" title="格式-18"></a>格式</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LIMIT &#123;[偏移量,] 行数 <span class="operator">|</span>行数  <span class="keyword">OFFSET</span> 偏移量&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>语法格式中的偏移量和行数都必须是非负的整数常数，偏移量指定返回的第一行的偏移量，行数是返回的行数。例如，“LIMIT 5”表示返回SELECT语句的结果集中最前面5行，而“LIMIT 3，5”则表示从第4行开始返回5行。值得注意的是初始行的偏移量为0而不是1。</p>
</blockquote>
<h4 id="案例-22"><a href="#案例-22" class="headerlink" title="案例-22"></a>案例</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】 查找Members表中注册时间最靠前的5位会员的信息。</span></span><br><span class="line"><span class="keyword">SELECT</span>  <span class="operator">*</span>  <span class="keyword">FROM</span> Members <span class="keyword">ORDER</span> <span class="keyword">BY</span> 注册时间 LIMIT <span class="number">5</span>; </span><br><span class="line"></span><br><span class="line"><span class="comment">-- 【例】 查找Book表中从第4条记录开始的5条记录。</span></span><br><span class="line"><span class="keyword">SELECT</span>  <span class="operator">*</span>  <span class="keyword">FROM</span> Book <span class="keyword">ORDER</span> <span class="keyword">BY</span> 学号 LIMIT <span class="number">3</span>, <span class="number">5</span>; </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<p>为了与PostgreSQL兼容，MySQL也支持<code>LIMIT row_count OFFSET offset</code>语法。所以将上面例子中的LIMIT子句换成“<code>LIMIT 5 OFFSET 3</code>”，结果一样。</p>
</blockquote>
<h3 id="练习-3"><a href="#练习-3" class="headerlink" title="练习-3"></a>练习</h3>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- DQL——数据查询操作——单表查询</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*（1）*/查询全体学生的姓名和年龄，要求分别用name和age表示列名。</span></span><br><span class="line"><span class="keyword">select</span>  姓名 name,<span class="keyword">year</span>(now())<span class="operator">-</span><span class="keyword">year</span>(出生日期) age <span class="keyword">from</span> student;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*（2）*/查询成绩表，成绩列用优（&gt;=90）、良（75~90）、及格（60~75)、不及格（&lt;60)表示</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span>,</span><br><span class="line">	<span class="keyword">case</span> </span><br><span class="line">		<span class="keyword">when</span> 成绩<span class="operator">&gt;=</span><span class="number">90</span> <span class="keyword">then</span> <span class="string">&#x27;优&#x27;</span></span><br><span class="line">		<span class="keyword">when</span> 成绩<span class="operator">&gt;=</span><span class="number">75</span> <span class="keyword">and</span> 成绩<span class="operator">&lt;</span><span class="number">90</span> <span class="keyword">then</span> <span class="string">&#x27;良&#x27;</span></span><br><span class="line">		<span class="keyword">when</span> 成绩<span class="operator">&gt;=</span><span class="number">60</span> <span class="keyword">and</span> 成绩<span class="operator">&lt;</span><span class="number">75</span> <span class="keyword">then</span> <span class="string">&#x27;及格&#x27;</span></span><br><span class="line">		<span class="keyword">else</span> <span class="string">&#x27;不及格&#x27;</span></span><br><span class="line">	<span class="keyword">end</span> <span class="keyword">as</span> 成绩档 <span class="keyword">from</span> score;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*（3）*/查询学时大于等于48学时的课程名和学分</span></span><br><span class="line"><span class="keyword">select</span> 课程名,学分,学时 <span class="keyword">from</span> course <span class="keyword">where</span> 学时<span class="operator">&gt;=</span><span class="number">48</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*（4）*/查询前置课为空的课程名和学期</span></span><br><span class="line"><span class="keyword">select</span> 课程名,学期 <span class="keyword">from</span> course <span class="keyword">where</span> 前置课 <span class="keyword">is</span> <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*（5）*/查询姓王的且名字为3个字的学生记录</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student <span class="keyword">where</span> 姓名 <span class="keyword">like</span> <span class="string">&#x27;王__&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*（6）*/ 查询生源地不是山西省的学生信息。</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student <span class="keyword">where</span> 地区 <span class="operator">!=</span> <span class="string">&#x27;山西（省或市）&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*（7）*/查询‘数据库’的课程号和前置课</span></span><br><span class="line"><span class="keyword">select</span> 课程号,前置课 <span class="keyword">from</span> course;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*（8）*/查询成绩为79分、89分或99分的记录。</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> score <span class="keyword">where</span> 成绩 <span class="keyword">in</span> (<span class="number">79</span>,<span class="number">89</span>,<span class="number">99</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*（9）*/查询每个班级人数增加80后的班级名称和新人数。</span></span><br><span class="line"><span class="keyword">select</span> 班级名称,人数<span class="operator">+</span><span class="number">80</span> 新人数 <span class="keyword">from</span> class;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*（10）*/查询不是1995年出生的所有女生信息。</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student <span class="keyword">where</span> <span class="keyword">year</span>(出生日期) <span class="operator">!=</span> <span class="number">1995</span> <span class="keyword">and</span> 性别<span class="operator">=</span><span class="string">&#x27;女&#x27;</span>;</span><br><span class="line"><span class="comment">-- </span></span><br><span class="line"><span class="comment">-- ---------------分隔线----------------</span></span><br><span class="line"><span class="comment">-- </span></span><br><span class="line"><span class="comment">-- 数据查询实训二：分组与排序</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*（1）*/按性别统计学生人数</span></span><br><span class="line"><span class="keyword">select</span> 性别,<span class="built_in">count</span>(<span class="operator">*</span>) 人数 <span class="keyword">from</span> student <span class="keyword">group</span> <span class="keyword">by</span> 性别;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*（2）*/统计每个学生的选课门数，平均分和最高分</span></span><br><span class="line"><span class="keyword">select</span> 学号,<span class="built_in">count</span>(课程号),<span class="built_in">avg</span>(成绩),<span class="built_in">max</span>(成绩) <span class="keyword">from</span> score <span class="keyword">group</span> <span class="keyword">by</span> 学号;</span><br><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">    学号,</span><br><span class="line">    <span class="built_in">COUNT</span>(课程号) <span class="keyword">AS</span> 选课门数,</span><br><span class="line">    <span class="built_in">AVG</span>(成绩) <span class="keyword">AS</span> 平均分,</span><br><span class="line">    <span class="built_in">MAX</span>(成绩) <span class="keyword">AS</span> 最高分</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">    score</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">    学号;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*（3）*/查询平均分在80分以上的每个学生的选课门数，总分和最低分</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">avg</span>(成绩) 平均分,<span class="built_in">count</span>(课程号) 选课门数,<span class="built_in">sum</span>(成绩) 总分,<span class="built_in">min</span>(成绩) 最低分 <span class="keyword">from</span> score <span class="keyword">group</span> <span class="keyword">by</span> 学号 <span class="keyword">having</span> 平均分<span class="operator">&gt;</span><span class="number">80</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*（4）*/先按性别再按民族统计学生人数，并按人数从多到少排列</span></span><br><span class="line"><span class="keyword">select</span> 性别,民族,<span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">as</span> 人数 <span class="keyword">from</span> student <span class="keyword">group</span> <span class="keyword">by</span> 性别,民族 <span class="keyword">order</span> <span class="keyword">by</span> 人数 <span class="keyword">desc</span>;</span><br><span class="line"><span class="keyword">SELECT</span> 性别,民族,<span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">AS</span> 人数 <span class="keyword">FROM</span> student <span class="keyword">GROUP</span> <span class="keyword">BY</span> 性别,民族 <span class="keyword">ORDER</span> <span class="keyword">BY</span> 人数 <span class="keyword">DESC</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*（5）*/查询选修两门课程的学生学号。</span></span><br><span class="line"><span class="keyword">select</span> 学号,<span class="built_in">count</span>(<span class="operator">*</span>) 选课数 <span class="keyword">from</span> score <span class="keyword">group</span> <span class="keyword">by</span> 学号 <span class="keyword">having</span> 选课数<span class="operator">=</span><span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*（6）*/ 统计每个学期的学分总数</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span>,<span class="built_in">sum</span>(学分) 总学分 <span class="keyword">from</span> course <span class="keyword">group</span> <span class="keyword">by</span> 学期;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*（7）*/统计至少有2个男生的班级编号</span></span><br><span class="line"><span class="keyword">select</span> 班级编号 <span class="keyword">from</span> student <span class="keyword">where</span> 性别<span class="operator">=</span><span class="string">&#x27;男&#x27;</span> <span class="keyword">group</span> <span class="keyword">by</span> 班级编号 <span class="keyword">having</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="operator">&gt;=</span> <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*（8）*/返回学生表的从第3行开始的4行记录。</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student limit <span class="number">2</span>,<span class="number">4</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*（9）*/统计2014级各系学生人数。</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">left</span>(班级编号,<span class="number">2</span>) 系别,<span class="built_in">count</span>(<span class="operator">*</span>) 人数 <span class="keyword">from</span> student <span class="keyword">where</span> <span class="keyword">left</span>(学号,<span class="number">4</span>) <span class="operator">=</span> <span class="number">2014</span> <span class="keyword">group</span> <span class="keyword">by</span> <span class="keyword">left</span>(班级编号,<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*（10）*/按照性别、民族统计人数，并显示分类小计。</span></span><br><span class="line"><span class="keyword">select</span> 性别,民族,<span class="built_in">count</span>(<span class="operator">*</span>) 人数 <span class="keyword">from</span> student <span class="keyword">group</span> <span class="keyword">by</span> 性别,民族 <span class="keyword">WITH</span> <span class="keyword">ROLLUP</span>;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="多表查询"><a href="#多表查询" class="headerlink" title="多表查询"></a>多表查询</h2>
<blockquote>
<p>前面介绍了使用SELECT子句选择列，本小节讨论SELECT查询的对象（即数据源）的构成形式。SELECT的查询对象由FROM子句指定。</p>
</blockquote>
<h3 id="语法格式-7"><a href="#语法格式-7" class="headerlink" title="语法格式-7"></a>语法格式</h3>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span>  表名<span class="number">1</span> [ [<span class="keyword">AS</span>] 别名<span class="number">1</span> ] [ , 表名<span class="number">2</span>[ [<span class="keyword">AS</span>] 别名<span class="number">2</span>]] …      <span class="comment">/*查询表*/</span></span><br><span class="line">            <span class="operator">|</span> <span class="keyword">JOIN</span>子句			                      <span class="comment">/*连接表*/</span></span><br></pre></td></tr></table></figure>
<h4 id="引用一个表"><a href="#引用一个表" class="headerlink" title="引用一个表"></a>引用一个表</h4>
<blockquote>
<p>可以用两种方式引用一个表，第一种方式是使用USE语句让一个数据库成为当前数据库，在这种情况下，如果在FROM子句中指定表名，则该表应该属于当前数据库。第二种方式是指定的时候在表名前带上表所属数据库的名字。例如，假设当前数据库是db1，现在要显示数据库db2里的表tb的内容，使用如下语句：</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span>  <span class="operator">*</span>  <span class="keyword">FROM</span>  db2.tb;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>当然，在SELECT关键字后指定列名的时候也可以在列名前带上所属数据库和表的名字，但是一般来说，如果选择的字段在各表中是唯一的，就没有必要去特别指定。</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】 从Members表中检索出所有客户的信息，并使用表别名Users。</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span>  Members <span class="keyword">AS</span> Users; </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="引用多个表"><a href="#引用多个表" class="headerlink" title="引用多个表"></a>引用多个表</h4>
<blockquote>
<p>如果要在不同表中查询数据，则必须在FROM子句中指定多个表。指定多个表时就要使用到连接。当不同列的数据组合到一个表中叫做表的连接。</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】 查找Bookstore数据库中客户订购的图书书名，订购册数和订购时间。</span></span><br><span class="line"> <span class="keyword">SELECT</span>  Book.书名, Sell.订购册数, Sell.订购时间</span><br><span class="line">        <span class="keyword">FROM</span>  Book, Sell </span><br><span class="line">            <span class="keyword">WHERE</span> Book.图书编号<span class="operator">=</span>Sell.图书编号; </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="多表连接—全连接（交叉连接）"><a href="#多表连接—全连接（交叉连接）" class="headerlink" title="多表连接—全连接（交叉连接）"></a>多表连接—全连接（交叉连接）</h3>
<h4 id="概念-2"><a href="#概念-2" class="headerlink" title="概念-2"></a>概念</h4>
<blockquote>
<p>当数据查询涉及到多张表格时，要将多张表格的数据连接起来组成一张表格，连接的方式有多种。</p>
</blockquote>
<blockquote>
<p>交叉连接产生的新表是每个表的每行都与其他表中的每行交叉以产生所有可能的组合，列包含了所有表中出现的列，也就是笛卡儿积。全连接可能得到的行数为每个表中行数之积。</p>
<p>如表A有3行，表B有2行，表A和B全连接后得到6行（3x2=6)的表。</p>
</blockquote>
<blockquote>
<p><strong>交叉连接的连接过程：</strong></p>
<p>例如，有一个学生1表和一个单科成绩表，结果集是两个表记录的交叉乘积，列是两个表列的集合。</p>
</blockquote>
<p class='item-img' data-src='/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241215172941395.png'><img src="/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241215172941395.png" alt="交叉连接的连接过程"></p>
<p class='item-img' data-src='/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241215173009189.png'><img src="/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241215173009189.png" alt="交叉连接结果"></p>
<h4 id="案例-23"><a href="#案例-23" class="headerlink" title="案例-23"></a>案例</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】 交叉连接book表和sell表。</span></span><br><span class="line">   (<span class="number">1</span>)<span class="keyword">SELECT</span>     <span class="operator">*</span>     <span class="keyword">FROM</span>  Book, Sell</span><br><span class="line">或</span><br><span class="line">   (<span class="number">2</span>)<span class="keyword">SELECT</span>     <span class="operator">*</span>     <span class="keyword">FROM</span>  Book  <span class="keyword">join</span>   Sell</span><br></pre></td></tr></table></figure>
<h3 id="内连接（等值连接、自然连接）"><a href="#内连接（等值连接、自然连接）" class="headerlink" title="内连接（等值连接、自然连接）"></a>内连接（等值连接、自然连接）</h3>
<h4 id="概念-3"><a href="#概念-3" class="headerlink" title="概念-3"></a>概念</h4>
<blockquote>
<p>FROM子句各个表用逗号分隔，这样就指定了全连接。全连接潜在地产生数量非常大的行，因为可能得到的行数为每个表中行数之积。在这样的情形下，通常要使用WHERE子句设定条件来将结果集减少为易于管理的大小，这样的连接即为等值连接。</p>
<p>若表A和B进行等值连接（T1=T3 ），则如下表所示，只有两行。</p>
</blockquote>
<table>
<thead>
<tr>
<th>T1</th>
<th>T2</th>
<th>T3</th>
<th>T4</th>
<th>T5</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>A</td>
<td>1</td>
<td>3</td>
<td>M</td>
</tr>
<tr>
<td>2</td>
<td>B</td>
<td>2</td>
<td>0</td>
<td>N</td>
</tr>
</tbody>
</table>
<blockquote>
<p>使用JOIN关键字的连接，语法格式如下：</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">表名<span class="number">1</span> <span class="keyword">INNER</span> <span class="keyword">JOIN</span> 表名<span class="number">2</span> <span class="keyword">ON</span> 条件 <span class="operator">|</span> <span class="keyword">USING</span> (列名)</span><br></pre></td></tr></table></figure>
<h4 id="案例-24"><a href="#案例-24" class="headerlink" title="案例-24"></a>案例</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】 查找Bookstore数据库中客户订购的图书书名，订购册数和订购时间。</span></span><br><span class="line">（<span class="number">1</span>）<span class="keyword">SELECT</span>  Book.书名, Sell.订购册数, Sell.订购时间</span><br><span class="line">         <span class="keyword">FROM</span>  Book, Sell </span><br><span class="line">         <span class="keyword">WHERE</span> Book.图书编号<span class="operator">=</span>Sell.图书编号; </span><br><span class="line">（<span class="number">2</span>）<span class="keyword">SELECT</span>  Book.书名, Sell.订购册数, Sell.订购时间</span><br><span class="line">        <span class="keyword">FROM</span>  Book [<span class="keyword">inner</span>] <span class="keyword">join</span> Sell </span><br><span class="line">        <span class="keyword">ON</span> Book.图书编号<span class="operator">=</span>Sell.图书编号; </span><br></pre></td></tr></table></figure>
<p>ㅤㅤㅤㅤ</p>
<blockquote>
<ul>
<li>内连接是系统默认的，可以省略INNER关键字。</li>
<li>使用内连接后，FROM子句中ON条件主要用来连接表，其他并不属于连接表的条件可以使用WHERE子句来指定。</li>
</ul>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例 】 用JOIN关键字表达下列查询：查找购买了“网页程序设计” 图书信息。</span></span><br><span class="line"><span class="keyword">SELECT</span> 书名,订购册数</span><br><span class="line">        <span class="keyword">FROM</span> Book <span class="keyword">JOIN</span> Sell</span><br><span class="line">           <span class="keyword">ON</span> Book.图书编号 <span class="operator">=</span> Sell. 图书编号</span><br><span class="line">             <span class="keyword">WHERE</span> 书名 <span class="operator">=</span> <span class="string">&#x27;网页程序设计&#x27;</span>; </span><br><span class="line"></span><br><span class="line"><span class="comment">-- 【例】 用JOIN关键字表达下列查询：查找订购数量大于5本图书和会员姓名和订购册数。</span></span><br><span class="line"><span class="keyword">SELECT</span> 会员姓名,订购册数</span><br><span class="line">    <span class="keyword">FROM</span>  Sell  <span class="keyword">JOIN</span>   Members   </span><br><span class="line">         <span class="keyword">ON</span>  Sell.用户号 <span class="operator">=</span> Members.用户号</span><br><span class="line">                  <span class="keyword">WHERE</span> 订购册数<span class="operator">&gt;</span><span class="number">5</span> ; </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>ㅤㅤㅤㅤ</p>
<blockquote>
<p>内连接还可以用于多个表的连接。</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】 用JOIN关键字表达下列查询：查找购买了“网页程序设计”且订购数量大于5本的图书和会员姓名和订购册数。</span></span><br><span class="line"><span class="keyword">SELECT</span> Book.图书编号, 会员姓名, 书名, 订购册数</span><br><span class="line">    <span class="keyword">FROM</span>  Sell  <span class="keyword">JOIN</span>  Book  <span class="keyword">ON</span>  Book. 图书编号<span class="operator">=</span> Sell.图书编号</span><br><span class="line">          <span class="keyword">JOIN</span>   Members   <span class="keyword">ON</span>  Sell.身份证号 <span class="operator">=</span> Members.身份证号</span><br><span class="line">                  <span class="keyword">WHERE</span> 书名 <span class="operator">=</span> <span class="string">&#x27;网页程序设计&#x27;</span>  <span class="keyword">AND</span> 订购册数<span class="operator">&gt;</span><span class="number">5</span> ; </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>ㅤㅤㅤㅤ</p>
<h4 id="自连接"><a href="#自连接" class="headerlink" title="自连接"></a>自连接</h4>
<blockquote>
<p>作为特例，可以将一个表与它自身进行连接，称为<strong>自连接</strong>。若要在一个表中查找具有相同列值的行，则可以使用自连接。使用自连接时需为表指定两个别名，且对所有列的引用均要用别名限定。</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】 查找BookStore数据库中订单不同、图书编号相同的图书的订单号、图书编号和订购册数。</span></span><br><span class="line"><span class="keyword">SELECT</span>  a.订单号,a.图书编号,a.订购册数</span><br><span class="line">              <span class="keyword">FROM</span>  Sell  <span class="keyword">AS</span>  a  <span class="keyword">JOIN</span>  Sell  <span class="keyword">AS</span>  b </span><br><span class="line">              <span class="keyword">ON</span>  a. 图书编号<span class="operator">=</span>b. 图书编号</span><br><span class="line">              <span class="keyword">where</span> a. 订单号<span class="operator">!=</span>b. 订单号;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="Using子句"><a href="#Using子句" class="headerlink" title="Using子句"></a>Using子句</h4>
<blockquote>
<p>如果要连接的表中有列名相同，并且连接的条件就是列名相等，那么ON条件也可以换成USING子句。USING（列名）子句用于为一系列的列进行命名。这些列必须同时在两个表中存在。其中列名为两表中相同的列名。</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】 查找Members表中所有订购过图书的用户的姓名。</span></span><br><span class="line"> <span class="keyword">SELECT</span>  <span class="keyword">Distinct</span> 姓名 <span class="keyword">FROM</span> Members  <span class="keyword">JOIN</span>  Sell <span class="keyword">USING</span> (用户号);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="外连接"><a href="#外连接" class="headerlink" title="外连接"></a>外连接</h3>
<blockquote>
<p>指定了OUTER关键字的连接为外连接。外连接包括：</p>
<ul>
<li>
<p><strong>左外连接（LEFT OUTER JOIN）：</strong></p>
<pre><code>结果表中除了匹配行外，还包括左表有的但右表中不匹配的行，对于这样的行，从右表被选择的列设置为NULL。
</code></pre>
</li>
<li>
<p><strong>右外连接（RIGHT OUTER JOIN）：</strong></p>
<p>结果表中除了匹配行外，还包括右表有的但左表中不匹配的行，对于这样的行，从左表被选择的列设置为NULL。</p>
</li>
</ul>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 【例】 查找所有图书的图书编号、数量及订购了图书的会员身份证号，若从未订购过，也要包括其情况。</span></span><br><span class="line"><span class="keyword">SELECT</span> Book.图书编号,Book.数量</span><br><span class="line"><span class="keyword">FROM</span> Book <span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> Sell</span><br><span class="line"><span class="keyword">ON</span> Book.图书编号<span class="operator">=</span> Sell.图书编号;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 【例】 查找订购了图书的会员的订单号、图书编号和订购册数以及所有会员的会员姓名。 </span></span><br><span class="line"><span class="keyword">SELECT</span> 订单号,图书编号,订购册数, Members.会员姓名</span><br><span class="line"><span class="keyword">FROM</span> Sell <span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> Members </span><br><span class="line"><span class="keyword">ON</span> Members.用户号<span class="operator">=</span> Sell.用户号; </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p class='item-img' data-src='/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241215211431133.png'><img src="/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/image-20241215211431133.png" alt="各个连接"></p>
<h3 id="练习-4"><a href="#练习-4" class="headerlink" title="练习-4"></a>练习</h3>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 多表查询实训</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*（1）*/查询所有学生的学号、姓名、课程号和成绩</span></span><br><span class="line"><span class="keyword">select</span> a.学号,姓名,课程号,成绩 <span class="keyword">from</span> student a <span class="keyword">join</span> score b <span class="keyword">using</span>(学号);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*（2）*/查询会计学院全体同学的学号、姓名和班级名称</span></span><br><span class="line"><span class="keyword">select</span> a.学号,姓名,班级名称 <span class="keyword">from</span> student a <span class="keyword">join</span> class b <span class="keyword">using</span>(班级编号) <span class="keyword">where</span> 院系<span class="operator">=</span><span class="string">&#x27;会计学院&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*（3）*/查询成绩在90分以上的学生的学号、姓名和成绩</span></span><br><span class="line"><span class="keyword">select</span> 学号,姓名,成绩 <span class="keyword">from</span> student a <span class="keyword">join</span> score b <span class="keyword">using</span>(学号) <span class="keyword">where</span> 成绩<span class="operator">&gt;</span><span class="number">90</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*（4）*/使用左外连接查询所有课程的课程号、课程名称和选修了该课程的学生的学号、姓名和成绩，没有学生选修的课程也要包括。</span></span><br><span class="line"><span class="keyword">select</span> a.课程号,课程名,b.学号,姓名,成绩 <span class="keyword">from</span> course a <span class="keyword">left</span> <span class="keyword">join</span> score b <span class="keyword">using</span>(课程号) <span class="keyword">left</span> <span class="keyword">join</span> student c <span class="keyword">using</span>(学号);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*（5）*/查询“计算机14-1班”所有学生的学号和姓名</span></span><br><span class="line"><span class="keyword">select</span> 学号,姓名 <span class="keyword">from</span> class a <span class="keyword">join</span> student b <span class="keyword">using</span>(班级编号) <span class="keyword">where</span> 班级名称<span class="operator">=</span><span class="string">&#x27;计算机14-1班&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*（6）*/查询“张晓勇”同学所选课程的课程名称和成绩。</span></span><br><span class="line"><span class="keyword">select</span> 课程名,成绩 <span class="keyword">from</span> course a <span class="keyword">join</span> score b <span class="keyword">using</span>(课程号) <span class="keyword">join</span> student c <span class="keyword">using</span>(学号) <span class="keyword">where</span> 姓名<span class="operator">=</span><span class="string">&#x27;张晓勇&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*（7）*/查询至少选修2门课程的女学生姓名。</span></span><br><span class="line"><span class="keyword">select</span> 姓名 <span class="keyword">from</span> score a <span class="keyword">join</span> student b <span class="keyword">using</span>(学号) <span class="keyword">where</span> 性别<span class="operator">=</span><span class="string">&#x27;女&#x27;</span> <span class="keyword">group</span> <span class="keyword">by</span> 学号 <span class="keyword">having</span> <span class="built_in">count</span>(<span class="operator">*</span>)<span class="operator">&gt;=</span><span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*（8）*/查询姓“王”的学生所学的课程名称。</span></span><br><span class="line"><span class="keyword">select</span> 姓名,课程名 <span class="keyword">from</span> student a <span class="keyword">join</span> score b <span class="keyword">using</span>(学号) <span class="keyword">join</span> course c <span class="keyword">using</span>(课程号) <span class="keyword">where</span> 姓名 <span class="keyword">like</span> <span class="string">&#x27;王%&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*（9）*/查询选修“管理学”课程且成绩在80～90分之间的学生学号姓名及成绩。</span></span><br><span class="line"><span class="keyword">select</span> 学号,姓名,成绩 <span class="keyword">from</span> course a <span class="keyword">join</span> score b <span class="keyword">using</span>(课程号) <span class="keyword">join</span> student c <span class="keyword">using</span>(学号) <span class="keyword">where</span> 课程名<span class="operator">=</span><span class="string">&#x27;管理学&#x27;</span> <span class="keyword">and</span> 成绩 <span class="keyword">between</span> <span class="number">80</span> <span class="keyword">and</span> <span class="number">90</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*（10）*/查询选修“计算机基础”课程的学生的平均年龄。</span></span><br><span class="line"><span class="keyword">select</span> 课程名,<span class="built_in">avg</span>(<span class="keyword">year</span>(now())<span class="operator">-</span><span class="keyword">year</span>(出生日期)) 平均年龄 <span class="keyword">from</span> course a <span class="keyword">join</span> score b <span class="keyword">using</span>(课程号) <span class="keyword">join</span> student c <span class="keyword">using</span>(学号) <span class="keyword">where</span> 课程名<span class="operator">=</span><span class="string">&#x27;计算机基础&#x27;</span>;</span><br><span class="line"><span class="comment">-- </span></span><br><span class="line"><span class="comment">-- ---------------分隔线----------------</span></span><br><span class="line"><span class="comment">-- </span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 子查询实训</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 1、查询“计算机14-1班”所有学生的学号和姓名</span></span><br><span class="line"><span class="keyword">select</span> 学号,姓名 <span class="keyword">from</span> student <span class="keyword">where</span> 班级编号 <span class="keyword">in</span> (<span class="keyword">select</span> 班级编号 <span class="keyword">from</span> class <span class="keyword">where</span> 班级名称<span class="operator">=</span><span class="string">&#x27;计算机14-1班&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2、查询与“张晓勇”同一个系的同学姓名。</span></span><br><span class="line"><span class="keyword">select</span> 班级编号,姓名 <span class="keyword">from</span> student <span class="keyword">where</span> <span class="keyword">left</span>(班级编号,<span class="number">2</span>) <span class="keyword">in</span> (<span class="keyword">select</span> <span class="keyword">left</span>(班级编号,<span class="number">2</span>) <span class="keyword">from</span> student <span class="keyword">where</span> 姓名<span class="operator">=</span><span class="string">&#x27;张晓勇&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3、查询成绩比该课程平均成绩高的学生的学号及成绩。</span></span><br><span class="line"><span class="keyword">select</span> 学号,成绩 <span class="keyword">from</span> score <span class="keyword">where</span> 成绩 <span class="operator">&gt;</span> (<span class="keyword">select</span> <span class="built_in">avg</span>(成绩) <span class="keyword">from</span> score);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 4、查询没有选修“11003”课程的学生学号及姓名。</span></span><br><span class="line"><span class="keyword">select</span> 学号,姓名 <span class="keyword">from</span> student <span class="keyword">where</span> 学号 <span class="keyword">in</span> (<span class="keyword">select</span> 学号 <span class="keyword">from</span> score <span class="keyword">where</span> 课程号 <span class="operator">!=</span> <span class="string">&#x27;11003&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 5、查询年龄高于平均年龄的学生的学号，姓名和出生日期</span></span><br><span class="line"><span class="keyword">select</span> 学号,姓名,出生日期 <span class="keyword">from</span> student <span class="keyword">where</span> <span class="keyword">year</span>(now())<span class="operator">-</span><span class="keyword">year</span>(出生日期) <span class="operator">&gt;</span> (<span class="keyword">select</span> <span class="built_in">avg</span>(<span class="keyword">year</span>(now())<span class="operator">-</span><span class="keyword">year</span>(出生日期)) <span class="keyword">from</span> student);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 6、查询选修了“计算机基础”课程的学生学号、姓名及班级编号。</span></span><br><span class="line"><span class="keyword">select</span> 学号,姓名,班级编号 <span class="keyword">from</span> student <span class="keyword">where</span> 学号 <span class="keyword">in</span> (<span class="keyword">select</span> 学号 <span class="keyword">from</span> score <span class="keyword">where</span> 课程号 <span class="keyword">in</span> (<span class="keyword">select</span> 课程号 <span class="keyword">from</span> course <span class="keyword">where</span> 课程名<span class="operator">=</span><span class="string">&#x27;计算机基础&#x27;</span>));</span><br><span class="line"><span class="keyword">select</span> 学号,姓名,班级编号 <span class="keyword">from</span> student a <span class="keyword">join</span> score b <span class="keyword">using</span>(学号) <span class="keyword">where</span> 课程号 <span class="keyword">in</span> (<span class="keyword">select</span> 课程号 <span class="keyword">from</span> course <span class="keyword">where</span> 课程名<span class="operator">=</span><span class="string">&#x27;计算机基础&#x27;</span>);</span><br><span class="line"><span class="comment">-- 7、查询出生日期小于所有男同学出生日期的女同学的姓名及班级编号。</span></span><br><span class="line"><span class="keyword">select</span> 姓名,班级编号 <span class="keyword">from</span> student <span class="keyword">where</span> 性别<span class="operator">=</span><span class="string">&#x27;女&#x27;</span> <span class="keyword">and</span> 出生日期 <span class="operator">&gt;</span> <span class="keyword">all</span>(<span class="keyword">select</span> 出生日期 <span class="keyword">from</span> student <span class="keyword">where</span> 性别<span class="operator">=</span><span class="string">&#x27;男&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 8、 查询学号比“李明”同学大，而出生日期比他小的学生姓名。</span></span><br><span class="line"><span class="keyword">select</span> 姓名 <span class="keyword">from</span> student <span class="keyword">where</span> 学号 <span class="operator">&gt;</span> (<span class="keyword">select</span> 学号 <span class="keyword">from</span> student <span class="keyword">where</span> 姓名<span class="operator">=</span><span class="string">&#x27;李明&#x27;</span>) <span class="keyword">and</span> <span class="keyword">year</span>(出生日期) <span class="operator">&gt;</span> <span class="keyword">some</span>(<span class="keyword">select</span> <span class="keyword">year</span>(出生日期) <span class="keyword">from</span> student);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="综合小测实训"><a href="#综合小测实训" class="headerlink" title="综合小测实训"></a>综合小测实训</h2>
<h3 id="小测"><a href="#小测" class="headerlink" title="小测"></a>小测</h3>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 综合小测实训</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 1、  查询雇员表中雇佣年限超过十年的员工雇员ID、姓名、雇用年限和薪水</span></span><br><span class="line"><span class="keyword">select</span> 雇员ID,姓名,<span class="keyword">year</span>(now())<span class="operator">-</span><span class="keyword">year</span>(雇佣日期) 雇用年限,薪水 <span class="keyword">from</span> 雇员表 <span class="keyword">where</span> <span class="keyword">year</span>(now())<span class="operator">-</span><span class="keyword">year</span>(雇佣日期) <span class="operator">&gt;</span> <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2、  查询雇员表中所有特长为“计算机”、“钢琴”、“书法”的雇员的姓名、特长。</span></span><br><span class="line"><span class="keyword">select</span> 姓名,特长 <span class="keyword">from</span> 雇员表 <span class="keyword">where</span> 特长 <span class="keyword">in</span>(<span class="string">&#x27;计算机&#x27;</span>,<span class="string">&#x27;钢琴&#x27;</span>,<span class="string">&#x27;书法&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3、查询雇员表中所有姓名中第二个字为“丽”字的雇员的姓名和出生日期。</span></span><br><span class="line"><span class="keyword">select</span> 姓名,出生年月 <span class="keyword">from</span> 雇员表 <span class="keyword">where</span> 姓名 <span class="keyword">like</span> <span class="string">&#x27;_丽%&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 4、在订单表p_order中，查询产品ID、数量和订货日期，并按订货数量降序给产品排序。</span></span><br><span class="line"><span class="keyword">select</span> 产品ID,数量,订货日期 <span class="keyword">from</span> 订单表 <span class="keyword">order</span> <span class="keyword">by</span> 数量 <span class="keyword">desc</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 5、在产品表中查询平均价格超过10元的产品的种类(多种方法)</span></span><br><span class="line"><span class="keyword">select</span> 类别名 <span class="keyword">from</span> 类别表 <span class="keyword">where</span> 类别ID <span class="keyword">in</span> (<span class="keyword">select</span> 类别ID  <span class="keyword">from</span> 产品表 <span class="keyword">group</span> <span class="keyword">by</span> 类别ID <span class="keyword">having</span> <span class="built_in">avg</span>(单价)<span class="operator">&gt;</span><span class="number">10</span>);</span><br><span class="line"><span class="keyword">select</span> 类别名 <span class="keyword">from</span> 类别表 a <span class="keyword">join</span> 产品表 b <span class="keyword">using</span>(类别ID) <span class="keyword">group</span> <span class="keyword">by</span> 类别ID <span class="keyword">having</span> <span class="built_in">avg</span>(单价)<span class="operator">&gt;</span><span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 6、查询所有订购了“鼠标”产品的公司的公司名称和联系方式。(多种方法)</span></span><br><span class="line"><span class="keyword">select</span> 公司名称,联系方式 <span class="keyword">from</span> 客户表 <span class="keyword">where</span> 客户ID <span class="keyword">in</span> (<span class="keyword">select</span> 客户ID <span class="keyword">from</span> 订单表 <span class="keyword">where</span> 产品ID <span class="keyword">in</span> (<span class="keyword">select</span> 产品ID <span class="keyword">from</span> 产品表 <span class="keyword">where</span> 产品名<span class="operator">=</span><span class="string">&#x27;鼠标&#x27;</span>));</span><br><span class="line"><span class="keyword">select</span> 公司名称,联系方式 <span class="keyword">from</span> 客户表 a <span class="keyword">join</span> 订单表 b <span class="keyword">using</span>(客户ID) <span class="keyword">where</span> 产品ID <span class="keyword">in</span> (<span class="keyword">select</span> 产品ID <span class="keyword">from</span> 产品表 <span class="keyword">where</span> 产品名<span class="operator">=</span><span class="string">&#x27;鼠标&#x27;</span>);</span><br><span class="line"><span class="keyword">select</span> 公司名称,联系方式 <span class="keyword">from</span> 客户表 a <span class="keyword">join</span> 订单表 b <span class="keyword">using</span>(客户ID) <span class="keyword">join</span> 产品表 c <span class="keyword">using</span>(产品ID) <span class="keyword">where</span> 产品名<span class="operator">=</span><span class="string">&#x27;鼠标&#x27;</span>;</span><br><span class="line"><span class="keyword">SELECT</span> 公司名称,联系方式 <span class="keyword">from</span> `产品表` a,`订单表` b, `客户表` c <span class="keyword">where</span> a.产品ID <span class="operator">=</span> b.产品ID <span class="keyword">and</span> b.客户ID<span class="operator">=</span>c.客户ID <span class="keyword">and</span> a.产品名 <span class="operator">=</span> <span class="string">&#x27;鼠标&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 7、查询已订购了产品的公司的公司名称、联系人姓名和所订产品的产品ID和数量(多种方法)</span></span><br><span class="line"><span class="keyword">select</span> 公司名称,联系人姓名,产品ID,数量 <span class="keyword">from</span> 客户表 a <span class="keyword">join</span> 订单表 b <span class="keyword">using</span>(客户ID);</span><br><span class="line"><span class="keyword">SELECT</span> 公司名称,联系人姓名,产品ID,数量 <span class="keyword">from</span> `客户表` a, `订单表` b <span class="keyword">where</span> a.`客户ID`<span class="operator">=</span>b.`客户ID`;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 8、使用左外连接查询产品表 表中凡是有类别信息的所有产品信息。</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">from</span> 产品表 a <span class="keyword">left</span> <span class="keyword">JOIN</span> `类别表` b <span class="keyword">on</span> a.`类别ID`<span class="operator">=</span>b.`类别ID` <span class="keyword">where</span> a.类别ID <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="数据视图"><a href="#数据视图" class="headerlink" title="数据视图"></a>数据视图</h2>
<h3 id="练习-5"><a href="#练习-5" class="headerlink" title="练习-5"></a>练习</h3>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 数据视图实训</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 1、在schooldb数据库上创建视图v_score，包括所有男同学的学号,姓名，民族以及其选修的课程名和成绩</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> v_score <span class="keyword">as</span></span><br><span class="line"><span class="keyword">select</span> 学号,姓名,民族,课程名,成绩 <span class="keyword">from</span> student a <span class="keyword">join</span> score b <span class="keyword">using</span>(学号) <span class="keyword">join</span> course c <span class="keyword">using</span>(课程号) <span class="keyword">where</span> 性别<span class="operator">=</span><span class="string">&#x27;男&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2、在视图v_score中查找少数民族学生的学号，姓名以及选修的课程名和成绩</span></span><br><span class="line"><span class="keyword">select</span> 学号,姓名,课程名,成绩 <span class="keyword">from</span> v_score <span class="keyword">where</span> 民族 <span class="operator">!=</span> <span class="string">&#x27;汉&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3、创建视图v_avg，包括学号（在视图中列名为name）和平均成绩（在视图中列名为score_avg）</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> v_avg(name,score_avg) <span class="keyword">as</span></span><br><span class="line"><span class="keyword">select</span> 学号,<span class="built_in">avg</span>(成绩) <span class="keyword">from</span> score <span class="keyword">group</span> <span class="keyword">by</span> 学号;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 4、使用视图v_avg，查找平均成绩在80分以上的学生的学号和平均成绩</span></span><br><span class="line"><span class="keyword">select</span> name,score_avg <span class="keyword">from</span> v_avg <span class="keyword">where</span> score_avg <span class="operator">&gt;</span> <span class="number">80</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 5、创建视图v_student视图中包含所有汉族学生的学生信息，并向v_student视图中插入一条记录“2020410001,李牧，男，1998-10-21，广东，汉，null”</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> v_student <span class="keyword">as</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student <span class="keyword">where</span> 民族<span class="operator">=</span><span class="string">&#x27;汉&#x27;</span> <span class="keyword">with</span> <span class="keyword">check</span> option;</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> v_student <span class="keyword">values</span>(<span class="string">&#x27;2020410001&#x27;</span>,<span class="string">&#x27;李牧&#x27;</span>,<span class="string">&#x27;男&#x27;</span>,<span class="string">&#x27;1998-10-21&#x27;</span>,<span class="string">&#x27;广东&#x27;</span>,<span class="string">&#x27;汉&#x27;</span>,<span class="keyword">null</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 6、删除v_student中女同学的记录</span></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> v_student <span class="keyword">where</span> 性别<span class="operator">=</span><span class="string">&#x27;女&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 7、创建视图v_term4查询第4学期所有课程信息,并要求添加with check option 子句（注意添加该子句的作用）</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> v_term4 <span class="keyword">as</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> course <span class="keyword">where</span> 学期 <span class="operator">=</span> <span class="number">4</span> <span class="keyword">with</span> <span class="keyword">check</span> option;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 8、向v_term4视图插入一门新课，具体课程信息自定</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> v_term4 <span class="keyword">values</span>(<span class="string">&#x27;21007&#x27;</span>,<span class="string">&#x27;Linux操作系统&#x27;</span>,<span class="number">4</span>,<span class="number">64</span>,<span class="number">4</span>,<span class="string">&#x27;21001&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 9、通过视图v_term4创建v_term4new视图，查询第4学期课程数和总课时数。</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> v_term4new(课程数,总课时数) <span class="keyword">as</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(课程号),<span class="built_in">sum</span>(学时) <span class="keyword">from</span> v_term4;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 10、删除v_term4new视图</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">view</span> v_term4new;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="MySQL索引"><a href="#MySQL索引" class="headerlink" title="MySQL索引"></a>MySQL索引</h2>
<h3 id="练习-6"><a href="#练习-6" class="headerlink" title="练习-6"></a>练习</h3>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- /*MySQL索引习题*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*二、*/</span></span><br><span class="line"><span class="comment">-- /*1. */对schooldb数据库course表“课程名”列上的前3个字符建立一个升序的索引“I_kc”</span></span><br><span class="line"><span class="keyword">create</span> index I_kc </span><br><span class="line">       <span class="keyword">on</span> course(课程名(<span class="number">3</span>) <span class="keyword">ASC</span>);</span><br><span class="line">			 </span><br><span class="line"><span class="comment">-- /*2.*/在class表的院系列和年级列上建立一个复合索引I_CX</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> class</span><br><span class="line"><span class="keyword">add</span> index I_cx(院系,年级);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*3. */在student表的姓名列上创建一个唯一索引</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student</span><br><span class="line">     <span class="keyword">add</span> <span class="keyword">unique</span> (姓名);</span><br><span class="line">		 </span><br><span class="line"><span class="comment">-- /*4.*/为course表创建主键索引（假设course表中主键未设定）</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> class</span><br><span class="line"><span class="keyword">add</span> <span class="keyword">primary</span> key (课程号);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*5.*/创建score表学号和课程号的联合主键（假设score表中主键未设定）,并在成绩列创建普通索引</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> score</span><br><span class="line">    <span class="keyword">add</span> <span class="keyword">primary</span> key(学号,课程号),</span><br><span class="line">    <span class="keyword">add</span> index (成绩);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- /*6.*/删除course表的主键</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> course <span class="keyword">drop</span> <span class="keyword">primary</span> key ;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="数据控制语言—DCL"><a href="#数据控制语言—DCL" class="headerlink" title="数据控制语言—DCL"></a>数据控制语言—DCL</h2>
<h3 id="练习-7"><a href="#练习-7" class="headerlink" title="练习-7"></a>练习</h3>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*数据库管理习题*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*二、*/</span></span><br><span class="line"><span class="comment">-- 1.创建用户king1,king2，密码分别为ken1，ken2”</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span></span><br><span class="line">king1<span class="variable">@localhost</span> IDENTIFIED <span class="keyword">BY</span> <span class="string">&#x27;ken1&#x27;</span>, </span><br><span class="line">king2<span class="variable">@localhost</span> IDENTIFIED <span class="keyword">BY</span> <span class="string">&#x27;ken2&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2.授予用户king1在schooldb数据库student表上的select权限 </span></span><br><span class="line"> <span class="keyword">GRANT</span> <span class="keyword">SELECT</span></span><br><span class="line">    <span class="keyword">ON</span>  schooldb.student </span><br><span class="line">        <span class="keyword">TO</span> king1<span class="variable">@localhost</span>;</span><br><span class="line">				</span><br><span class="line"><span class="comment">-- 3.授予用户king2在schooldb数据库class表上的select，update权限 </span></span><br><span class="line"> <span class="keyword">GRANT</span> <span class="keyword">SELECT</span>,<span class="keyword">update</span></span><br><span class="line">    <span class="keyword">ON</span>  schooldb.class </span><br><span class="line">        <span class="keyword">TO</span> king2<span class="variable">@localhost</span>;</span><br><span class="line">				</span><br><span class="line"><span class="comment">-- 4.授予用户king1在schooldb数据库所有表上的select权限 </span></span><br><span class="line"> <span class="keyword">GRANT</span> <span class="keyword">SELECT</span></span><br><span class="line">    <span class="keyword">ON</span>  schooldb.<span class="operator">*</span> </span><br><span class="line">        <span class="keyword">TO</span> king1<span class="variable">@localhost</span>;</span><br><span class="line">				</span><br><span class="line"><span class="comment">-- 5.授予用户king2在schooldb数据库所有表上的所有权限 </span></span><br><span class="line"> <span class="keyword">GRANT</span> <span class="keyword">ALL</span></span><br><span class="line">    <span class="keyword">ON</span>  schooldb.<span class="operator">*</span> </span><br><span class="line">        <span class="keyword">TO</span> king2<span class="variable">@localhost</span>;</span><br><span class="line">				</span><br><span class="line"><span class="comment">-- 6.收回king2在schooldb数据库class表上的select权限</span></span><br><span class="line"> <span class="keyword">REVOKE</span>  <span class="keyword">select</span></span><br><span class="line">    <span class="keyword">ON</span>  schooldb.class</span><br><span class="line">        <span class="keyword">FROM</span>  king2<span class="variable">@localhost</span>;</span><br><span class="line">        </span><br></pre></td></tr></table></figure>
<hr>
<p><strong>文章作者:</strong> [<a target="_blank" rel="noopener" href="https://yjh021.github.io/">Blue Eagle</a>]</p>
<p><strong>文章链接:</strong> [<a target="_blank" rel="noopener" href="https://yjh021.github.io/2024/12/08/MySQL%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/">https://yjh021.github.io/2024/12/08/MySQL课程笔记/</a>]</p>
<p><strong>版权声明:</strong> 本博客所有文章除特别声明外，均采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 [<a target="_blank" rel="noopener" href="https://yjh021.github.io/">Blue Eagle</a>]</p>
<hr>
<div id="paginator"></div></div><div id="post-footer"><div id="pages" style="justify-content: flex-end"><div class="footer-link" style="width: 50%;right:1px;border-left:1px #fe2 solid"><a href="/2024/10/22/MySQL%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/">MySQL的安装和使用 上一篇 →</a></div></div></div></div><div class="bottom-btn"><div><a class="i-top" id="to-top" onClick="scrolls.scrolltop();" title="回到顶部" style="opacity: 0; display: none;">∧ </a><a class="i-index" id="to-index" href="#toc-div" title="文章目录">≡</a><a class="i-color" id="color-mode" onClick="colorMode.change()" title="切换主题"></a></div></div></article><aside><div id="about"><a href="/" id="logo"><img src="https://ak.hypergryph.com/assets/index/images/ak/pc/faction/1.png" alt="Logo"></a><h1 id="Dr"><a href="/">Blue Eagle</a></h1><div id="description"><p></p></div></div><div id="aside-block"><div id="toc-div"><h1>目录</h1><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">1.</span> <span class="toc-text">MySQL课程笔记</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86"><span class="toc-number">1.1.</span> <span class="toc-text">数据库基础知识</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A6%82%E5%BF%B5"><span class="toc-number">1.1.1.</span> <span class="toc-text">概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%93%E6%9E%84%E5%8C%96%E6%9F%A5%E8%AF%A2%E8%AF%AD%E8%A8%80SQL"><span class="toc-number">1.1.2.</span> <span class="toc-text">结构化查询语言SQL</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#SQL%E6%A6%82%E5%BF%B5"><span class="toc-number">1.1.2.1.</span> <span class="toc-text">SQL概念</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SQL%E5%88%86%E7%B1%BB"><span class="toc-number">1.1.2.2.</span> <span class="toc-text">SQL分类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SQL%E9%80%9A%E7%94%A8%E8%AF%AD%E6%B3%95"><span class="toc-number">1.1.2.3.</span> <span class="toc-text">SQL通用语法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%BE%E5%BD%A2%E5%8C%96%E8%BD%AF%E4%BB%B6"><span class="toc-number">1.1.3.</span> <span class="toc-text">图形化软件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Navicat-%E4%B8%8B%E8%BD%BD"><span class="toc-number">1.1.3.1.</span> <span class="toc-text">Navicat 下载</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1"><span class="toc-number">1.2.</span> <span class="toc-text">数据库设计</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E7%B3%BB%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1"><span class="toc-number">1.2.1.</span> <span class="toc-text">关系数据库设计</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%9A%84%E5%8A%A0%E5%B7%A5"><span class="toc-number">1.2.1.1.</span> <span class="toc-text">数据的加工</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A8%A1%E5%9E%8B"><span class="toc-number">1.2.1.2.</span> <span class="toc-text">模型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A7%84%E8%8C%83%E5%8C%96%E8%AE%BE%E8%AE%A1"><span class="toc-number">1.2.1.3.</span> <span class="toc-text">规范化设计</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1%E6%AD%A5%E9%AA%A4"><span class="toc-number">1.2.2.</span> <span class="toc-text">数据库设计步骤</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90%E9%98%B6%E6%AE%B5"><span class="toc-number">1.2.2.1.</span> <span class="toc-text">需求分析阶段</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A6%82%E5%BF%B5%E8%AE%BE%E8%AE%A1%E9%98%B6%E6%AE%B5"><span class="toc-number">1.2.2.2.</span> <span class="toc-text">概念设计阶段</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%BB%E8%BE%91%E8%AE%BE%E8%AE%A1%E9%98%B6%E6%AE%B5"><span class="toc-number">1.2.2.3.</span> <span class="toc-text">逻辑设计阶段</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B"><span class="toc-number">1.2.2.3.1.</span> <span class="toc-text">数据模型</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1%E8%A7%84%E8%8C%83%E5%8C%96"><span class="toc-number">1.2.2.4.</span> <span class="toc-text">数据库设计规范化</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E4%BE%9D%E8%B5%96"><span class="toc-number">1.2.2.4.1.</span> <span class="toc-text">函数依赖</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%85%B3%E7%B3%BB%E6%95%B0%E6%8D%AE%E5%BA%93%E8%8C%83%E5%BC%8F%E7%90%86%E8%AE%BA"><span class="toc-number">1.2.2.4.2.</span> <span class="toc-text">关系数据库范式理论</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A7%84%E8%8C%83%E5%8C%96%E5%AE%9E%E4%BE%8B"><span class="toc-number">1.2.2.4.3.</span> <span class="toc-text">数据库规范化实例</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A7%84%E8%8C%83%E5%8C%96%E5%AE%9E%E4%BE%8B%E2%80%94%E2%80%94%E5%85%B3%E7%B3%BB%E5%88%86%E8%A7%A3"><span class="toc-number">1.2.2.4.4.</span> <span class="toc-text">数据库规范化实例——关系分解</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%A7%84%E8%8C%83%E5%8C%96%E5%92%8C%E6%80%A7%E8%83%BD%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="toc-number">1.2.2.4.5.</span> <span class="toc-text">规范化和性能的关系</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">1.2.3.</span> <span class="toc-text">总结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%AE%9A%E4%B9%89%E8%AF%AD%E8%A8%80%E2%80%94DDL"><span class="toc-number">1.3.</span> <span class="toc-text">数据定义语言—DDL</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E6%96%87%E4%BB%B6%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.3.1.</span> <span class="toc-text">MySQL数据库文件介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E6%A8%A1%E5%9E%8B"><span class="toc-number">1.3.2.</span> <span class="toc-text">MySQL数据库模型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E5%92%8C%E8%A1%A8"><span class="toc-number">1.3.3.</span> <span class="toc-text">数据库和表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">1.3.4.</span> <span class="toc-text">创建数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%98%BE%E7%A4%BA%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4"><span class="toc-number">1.3.5.</span> <span class="toc-text">显示数据库命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%93%E5%BC%80%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">1.3.6.</span> <span class="toc-text">打开数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">1.3.7.</span> <span class="toc-text">修改数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">1.3.8.</span> <span class="toc-text">删除数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MySQL%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.3.9.</span> <span class="toc-text">MySQL数据类型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B4%E6%95%B0%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.3.9.1.</span> <span class="toc-text">整数类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B5%AE%E7%82%B9%E6%95%B0%E7%B1%BB%E5%9E%8B%E5%92%8C%E5%AE%9A%E7%82%B9%E6%95%B0%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.3.9.2.</span> <span class="toc-text">浮点数类型和定点数类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.3.9.3.</span> <span class="toc-text">字符串类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%97%A5%E6%9C%9F%E6%97%B6%E9%97%B4%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.3.9.4.</span> <span class="toc-text">日期时间类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E9%80%89%E5%8F%96%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.3.9.5.</span> <span class="toc-text">如何选取数据类型</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#char%E5%92%8Cvarchar"><span class="toc-number">1.3.9.5.1.</span> <span class="toc-text">char和varchar</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#text%E5%92%8Cblob"><span class="toc-number">1.3.9.5.2.</span> <span class="toc-text">text和blob</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B5%AE%E7%82%B9%E6%95%B0%E5%92%8C%E5%AE%9A%E7%82%B9%E6%95%B0"><span class="toc-number">1.3.9.5.3.</span> <span class="toc-text">浮点数和定点数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%97%A5%E6%9C%9F%E7%B1%BB%E5%9E%8B%E7%9A%84%E9%80%89%E6%8B%A9"><span class="toc-number">1.3.9.5.4.</span> <span class="toc-text">日期类型的选择</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E8%A1%A8"><span class="toc-number">1.3.10.</span> <span class="toc-text">创建数据表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%98%BE%E7%A4%BA%E6%95%B0%E6%8D%AE%E8%A1%A8%E6%96%87%E4%BB%B6%E5%90%8D"><span class="toc-number">1.3.11.</span> <span class="toc-text">显示数据表文件名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%98%BE%E7%A4%BA%E6%95%B0%E6%8D%AE%E8%A1%A8%E7%BB%93%E6%9E%84"><span class="toc-number">1.3.12.</span> <span class="toc-text">显示数据表结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E8%A1%A8"><span class="toc-number">1.3.13.</span> <span class="toc-text">修改表</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A2%9E%E5%8A%A0%E5%88%97"><span class="toc-number">1.3.13.1.</span> <span class="toc-text">增加列</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E5%88%97"><span class="toc-number">1.3.13.2.</span> <span class="toc-text">删除列</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9B%B4%E6%94%B9%E5%88%97%E5%90%8D"><span class="toc-number">1.3.13.3.</span> <span class="toc-text">更改列名</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9B%B4%E6%94%B9%E5%88%97%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.3.13.4.</span> <span class="toc-text">更改列类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%BB%E7%BB%93-2"><span class="toc-number">1.3.13.5.</span> <span class="toc-text">总结</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%8D%E5%88%B6%E8%A1%A8"><span class="toc-number">1.3.14.</span> <span class="toc-text">复制表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E8%A1%A8"><span class="toc-number">1.3.15.</span> <span class="toc-text">删除表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%AE%8C%E6%95%B4%E6%80%A7"><span class="toc-number">1.3.16.</span> <span class="toc-text">数据完整性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BB%E9%94%AE%E7%BA%A6%E6%9D%9F%E2%80%94%E2%80%94primary-key"><span class="toc-number">1.3.17.</span> <span class="toc-text">主键约束——primary key</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95%E6%A0%BC%E5%BC%8F"><span class="toc-number">1.3.17.1.</span> <span class="toc-text">语法格式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B"><span class="toc-number">1.3.17.2.</span> <span class="toc-text">案例</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%94%AF%E4%B8%80%E7%BA%A6%E6%9D%9F%EF%BC%88%E6%9B%BF%E4%BB%A3%E9%94%AE%E7%BA%A6%E6%9D%9F%EF%BC%89%E2%80%94%E2%80%94unique"><span class="toc-number">1.3.18.</span> <span class="toc-text">唯一约束（替代键约束）——unique</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95%E6%A0%BC%E5%BC%8F-2"><span class="toc-number">1.3.18.1.</span> <span class="toc-text">语法格式</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F%E2%80%94%E2%80%94foreign-key"><span class="toc-number">1.3.19.</span> <span class="toc-text">外键约束——foreign key</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95%E6%A0%BC%E5%BC%8F-3"><span class="toc-number">1.3.19.1.</span> <span class="toc-text">语法格式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B-2"><span class="toc-number">1.3.19.2.</span> <span class="toc-text">案例</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A3%80%E6%9F%A5%E7%BA%A6%E6%9D%9F%E2%80%94%E2%80%94check"><span class="toc-number">1.3.20.</span> <span class="toc-text">检查约束——check</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95%E6%A0%BC%E5%BC%8F-4"><span class="toc-number">1.3.20.1.</span> <span class="toc-text">语法格式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B-3"><span class="toc-number">1.3.20.2.</span> <span class="toc-text">案例</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%BB%98%E8%AE%A4%E7%BA%A6%E6%9D%9F%E2%80%94%E2%80%94default"><span class="toc-number">1.3.21.</span> <span class="toc-text">默认约束——default</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95%E6%A0%BC%E5%BC%8F-5"><span class="toc-number">1.3.21.1.</span> <span class="toc-text">语法格式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B-4"><span class="toc-number">1.3.21.2.</span> <span class="toc-text">案例</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E8%A1%A8%E7%9B%B8%E5%85%B3%E4%BF%A1%E6%81%AF"><span class="toc-number">1.3.22.</span> <span class="toc-text">查看表相关信息</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A0%BC%E5%BC%8F"><span class="toc-number">1.3.22.1.</span> <span class="toc-text">格式</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E5%AE%8C%E6%95%B4%E6%80%A7%E7%BA%A6%E6%9D%9F"><span class="toc-number">1.3.23.</span> <span class="toc-text">删除完整性约束</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B-5"><span class="toc-number">1.3.23.1.</span> <span class="toc-text">案例</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BD%92%E7%BA%B3%E6%80%BB%E7%BB%93"><span class="toc-number">1.3.24.</span> <span class="toc-text">归纳总结</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%83%E4%B9%A0"><span class="toc-number">1.3.25.</span> <span class="toc-text">练习</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E6%93%8D%E4%BD%9C%E8%AF%AD%E8%A8%80%E2%80%94DML"><span class="toc-number">1.4.</span> <span class="toc-text">数据操作语言—DML</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E6%8F%92%E5%85%A5"><span class="toc-number">1.4.1.</span> <span class="toc-text">数据插入</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95%E6%A0%BC%E5%BC%8F-6"><span class="toc-number">1.4.1.1.</span> <span class="toc-text">语法格式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B-6"><span class="toc-number">1.4.1.2.</span> <span class="toc-text">案例</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E4%BF%AE%E6%94%B9-%E6%9B%B4%E6%96%B0"><span class="toc-number">1.4.2.</span> <span class="toc-text">数据修改(更新)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A0%BC%E5%BC%8F-2"><span class="toc-number">1.4.2.1.</span> <span class="toc-text">格式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%95%E8%A1%A8%E6%A1%88%E4%BE%8B"><span class="toc-number">1.4.2.2.</span> <span class="toc-text">单表案例</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%9A%E8%A1%A8%E6%A1%88%E4%BE%8B"><span class="toc-number">1.4.2.3.</span> <span class="toc-text">多表案例</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%88%A0%E9%99%A4"><span class="toc-number">1.4.3.</span> <span class="toc-text">数据删除</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8DELETE%E8%AF%AD%E5%8F%A5%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE"><span class="toc-number">1.4.3.1.</span> <span class="toc-text">使用DELETE语句删除数据</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A0%BC%E5%BC%8F-3"><span class="toc-number">1.4.3.1.1.</span> <span class="toc-text">格式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B-7"><span class="toc-number">1.4.3.1.2.</span> <span class="toc-text">案例</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8TRUNCATE-TABLE%E8%AF%AD%E5%8F%A5%E5%88%A0%E9%99%A4%E8%A1%A8%E6%95%B0%E6%8D%AE"><span class="toc-number">1.4.3.2.</span> <span class="toc-text">使用TRUNCATE TABLE语句删除表数据</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A0%BC%E5%BC%8F-4"><span class="toc-number">1.4.3.2.1.</span> <span class="toc-text">格式</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%83%E4%B9%A0-2"><span class="toc-number">1.4.4.</span> <span class="toc-text">练习</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E6%9F%A5%E8%AF%A2%E8%AF%AD%E8%A8%80%E2%80%94DQL"><span class="toc-number">1.5.</span> <span class="toc-text">数据查询语言—DQL</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%95%E8%A1%A8%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.5.1.</span> <span class="toc-text">单表查询</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#SELECT%E8%AF%AD%E5%8F%A5%E6%A0%BC%E5%BC%8F"><span class="toc-number">1.5.1.1.</span> <span class="toc-text">SELECT语句格式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%89%E6%8B%A9%E6%8C%87%E5%AE%9A%E7%9A%84%E5%88%97"><span class="toc-number">1.5.1.2.</span> <span class="toc-text">选择指定的列</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A0%BC%E5%BC%8F-5"><span class="toc-number">1.5.1.2.1.</span> <span class="toc-text">格式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B-8"><span class="toc-number">1.5.1.2.2.</span> <span class="toc-text">案例</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89%E5%88%97%E5%88%AB%E5%90%8D"><span class="toc-number">1.5.1.3.</span> <span class="toc-text">定义列别名</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A0%BC%E5%BC%8F-6"><span class="toc-number">1.5.1.3.1.</span> <span class="toc-text">格式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B-9"><span class="toc-number">1.5.1.3.2.</span> <span class="toc-text">案例</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9B%BF%E6%8D%A2%E6%9F%A5%E8%AF%A2%E7%BB%93%E6%9E%9C%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE"><span class="toc-number">1.5.1.4.</span> <span class="toc-text">替换查询结果中的数据</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A0%BC%E5%BC%8F-7"><span class="toc-number">1.5.1.4.1.</span> <span class="toc-text">格式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B-10"><span class="toc-number">1.5.1.4.2.</span> <span class="toc-text">案例</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AE%A1%E7%AE%97%E5%88%97%E5%80%BC"><span class="toc-number">1.5.1.5.</span> <span class="toc-text">计算列值</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A0%BC%E5%BC%8F-8"><span class="toc-number">1.5.1.5.1.</span> <span class="toc-text">格式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B-11"><span class="toc-number">1.5.1.5.2.</span> <span class="toc-text">案例</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B6%88%E9%99%A4%E7%BB%93%E6%9E%9C%E9%9B%86%E4%B8%AD%E7%9A%84%E9%87%8D%E5%A4%8D%E8%A1%8C"><span class="toc-number">1.5.1.6.</span> <span class="toc-text">消除结果集中的重复行</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A0%BC%E5%BC%8F-9"><span class="toc-number">1.5.1.6.1.</span> <span class="toc-text">格式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B-12"><span class="toc-number">1.5.1.6.2.</span> <span class="toc-text">案例</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">1.5.1.7.</span> <span class="toc-text">运算符</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%93%8D-%E4%BD%9C-%E7%AC%A6"><span class="toc-number">1.5.1.7.1.</span> <span class="toc-text">操 作 符</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#WHERE%E5%AD%90%E5%8F%A5"><span class="toc-number">1.5.1.8.</span> <span class="toc-text">WHERE子句</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A0%BC%E5%BC%8F-10"><span class="toc-number">1.5.1.8.1.</span> <span class="toc-text">格式</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AF%94%E8%BE%83%E8%BF%90%E7%AE%97"><span class="toc-number">1.5.1.9.</span> <span class="toc-text">比较运算</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97"><span class="toc-number">1.5.1.10.</span> <span class="toc-text">逻辑运算</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.5.1.10.1.</span> <span class="toc-text">类型</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B-13"><span class="toc-number">1.5.1.10.2.</span> <span class="toc-text">案例</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D%EF%BC%88LIKE%E8%BF%90%E7%AE%97%E7%AC%A6%EF%BC%89"><span class="toc-number">1.5.1.11.</span> <span class="toc-text">模式匹配（LIKE运算符）</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B-14"><span class="toc-number">1.5.1.11.1.</span> <span class="toc-text">案例</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%8C%83%E5%9B%B4%E6%AF%94%E8%BE%83"><span class="toc-number">1.5.1.12.</span> <span class="toc-text">范围比较</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A0%BC%E5%BC%8F-11"><span class="toc-number">1.5.1.12.1.</span> <span class="toc-text">格式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B-15"><span class="toc-number">1.5.1.12.2.</span> <span class="toc-text">案例</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A9%BA%E5%80%BC%E6%AF%94%E8%BE%83"><span class="toc-number">1.5.1.13.</span> <span class="toc-text">空值比较</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E7%B1%BB%E6%B1%87%E6%80%BB%E4%B8%8E%E6%8E%92%E5%BA%8F%E2%80%94%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0"><span class="toc-number">1.5.2.</span> <span class="toc-text">分类汇总与排序—聚合函数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#COUNT%E5%87%BD%E6%95%B0"><span class="toc-number">1.5.2.1.</span> <span class="toc-text">COUNT函数</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A0%BC%E5%BC%8F-12"><span class="toc-number">1.5.2.1.1.</span> <span class="toc-text">格式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B-16"><span class="toc-number">1.5.2.1.2.</span> <span class="toc-text">案例</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#MAX%E5%92%8CMIN"><span class="toc-number">1.5.2.2.</span> <span class="toc-text">MAX和MIN</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A0%BC%E5%BC%8F-13"><span class="toc-number">1.5.2.2.1.</span> <span class="toc-text">格式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B-17"><span class="toc-number">1.5.2.2.2.</span> <span class="toc-text">案例</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SUM%E5%87%BD%E6%95%B0%E5%92%8CAVG%E5%87%BD%E6%95%B0"><span class="toc-number">1.5.2.3.</span> <span class="toc-text">SUM函数和AVG函数</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A0%BC%E5%BC%8F-14"><span class="toc-number">1.5.2.3.1.</span> <span class="toc-text">格式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B-18"><span class="toc-number">1.5.2.3.2.</span> <span class="toc-text">案例</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E7%B1%BB%E6%B1%87%E6%80%BB%E4%B8%8E%E6%8E%92%E5%BA%8F%E2%80%94GROUP-BY%E5%AD%90%E5%8F%A5"><span class="toc-number">1.5.3.</span> <span class="toc-text">分类汇总与排序—GROUP BY子句</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A0%BC%E5%BC%8F-15"><span class="toc-number">1.5.3.1.</span> <span class="toc-text">格式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B-19"><span class="toc-number">1.5.3.2.</span> <span class="toc-text">案例</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%A6ROLLUP%E7%9A%84GROUP-BY%E5%AD%90%E5%8F%A5"><span class="toc-number">1.5.3.3.</span> <span class="toc-text">带ROLLUP的GROUP BY子句</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#HAVING%E5%AD%90%E5%8F%A5"><span class="toc-number">1.5.3.4.</span> <span class="toc-text">HAVING子句</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A0%BC%E5%BC%8F-16"><span class="toc-number">1.5.3.4.1.</span> <span class="toc-text">格式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B-20"><span class="toc-number">1.5.3.4.2.</span> <span class="toc-text">案例</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E7%B1%BB%E6%B1%87%E6%80%BB%E4%B8%8E%E6%8E%92%E5%BA%8F%E2%80%94ORDER-BY%E5%AD%90%E5%8F%A5"><span class="toc-number">1.5.4.</span> <span class="toc-text">分类汇总与排序—ORDER BY子句</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A0%BC%E5%BC%8F-17"><span class="toc-number">1.5.4.1.</span> <span class="toc-text">格式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B-21"><span class="toc-number">1.5.4.2.</span> <span class="toc-text">案例</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E7%B1%BB%E6%B1%87%E6%80%BB%E4%B8%8E%E6%8E%92%E5%BA%8F%E2%80%94LIMIT%E5%AD%90%E5%8F%A5"><span class="toc-number">1.5.5.</span> <span class="toc-text">分类汇总与排序—LIMIT子句</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A0%BC%E5%BC%8F-18"><span class="toc-number">1.5.5.1.</span> <span class="toc-text">格式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B-22"><span class="toc-number">1.5.5.2.</span> <span class="toc-text">案例</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%83%E4%B9%A0-3"><span class="toc-number">1.5.6.</span> <span class="toc-text">练习</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.6.</span> <span class="toc-text">多表查询</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95%E6%A0%BC%E5%BC%8F-7"><span class="toc-number">1.6.1.</span> <span class="toc-text">语法格式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%95%E7%94%A8%E4%B8%80%E4%B8%AA%E8%A1%A8"><span class="toc-number">1.6.1.1.</span> <span class="toc-text">引用一个表</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%95%E7%94%A8%E5%A4%9A%E4%B8%AA%E8%A1%A8"><span class="toc-number">1.6.1.2.</span> <span class="toc-text">引用多个表</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E8%A1%A8%E8%BF%9E%E6%8E%A5%E2%80%94%E5%85%A8%E8%BF%9E%E6%8E%A5%EF%BC%88%E4%BA%A4%E5%8F%89%E8%BF%9E%E6%8E%A5%EF%BC%89"><span class="toc-number">1.6.2.</span> <span class="toc-text">多表连接—全连接（交叉连接）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A6%82%E5%BF%B5-2"><span class="toc-number">1.6.2.1.</span> <span class="toc-text">概念</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B-23"><span class="toc-number">1.6.2.2.</span> <span class="toc-text">案例</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E8%BF%9E%E6%8E%A5%EF%BC%88%E7%AD%89%E5%80%BC%E8%BF%9E%E6%8E%A5%E3%80%81%E8%87%AA%E7%84%B6%E8%BF%9E%E6%8E%A5%EF%BC%89"><span class="toc-number">1.6.3.</span> <span class="toc-text">内连接（等值连接、自然连接）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A6%82%E5%BF%B5-3"><span class="toc-number">1.6.3.1.</span> <span class="toc-text">概念</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B-24"><span class="toc-number">1.6.3.2.</span> <span class="toc-text">案例</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%87%AA%E8%BF%9E%E6%8E%A5"><span class="toc-number">1.6.3.3.</span> <span class="toc-text">自连接</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Using%E5%AD%90%E5%8F%A5"><span class="toc-number">1.6.3.4.</span> <span class="toc-text">Using子句</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%96%E8%BF%9E%E6%8E%A5"><span class="toc-number">1.6.4.</span> <span class="toc-text">外连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%83%E4%B9%A0-4"><span class="toc-number">1.6.5.</span> <span class="toc-text">练习</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%BC%E5%90%88%E5%B0%8F%E6%B5%8B%E5%AE%9E%E8%AE%AD"><span class="toc-number">1.7.</span> <span class="toc-text">综合小测实训</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E6%B5%8B"><span class="toc-number">1.7.1.</span> <span class="toc-text">小测</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E8%A7%86%E5%9B%BE"><span class="toc-number">1.8.</span> <span class="toc-text">数据视图</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%83%E4%B9%A0-5"><span class="toc-number">1.8.1.</span> <span class="toc-text">练习</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL%E7%B4%A2%E5%BC%95"><span class="toc-number">1.9.</span> <span class="toc-text">MySQL索引</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%83%E4%B9%A0-6"><span class="toc-number">1.9.1.</span> <span class="toc-text">练习</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E6%8E%A7%E5%88%B6%E8%AF%AD%E8%A8%80%E2%80%94DCL"><span class="toc-number">1.10.</span> <span class="toc-text">数据控制语言—DCL</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%83%E4%B9%A0-7"><span class="toc-number">1.10.1.</span> <span class="toc-text">练习</span></a></li></ol></li></ol></li></ol></div></div><footer><nobr><span class="icp-title">©</span><span class="icp-content">2025 Blue Eagle All rights reserved.</span></nobr><br><nobr>构建自 <a target="_blank" rel="noopener" href="http://hexo.io">Hexo</a></nobr><wbr><nobr> 使用主题 <a target="_blank" rel="noopener" href="https://github.com/Yue-plus/hexo-theme-arknights">Arknights</a></nobr><wbr><nobr> 主题作者 <a target="_blank" rel="noopener" href="https://github.com/Yue-plus">Yue_plus</a></nobr></footer></aside></main><canvas id="canvas-dust"></canvas></body></html>